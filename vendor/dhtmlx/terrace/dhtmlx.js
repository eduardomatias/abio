function dtmlXMLLoaderObject(a, b, c, d) {
    return this.xmlDoc = "", this.async = "undefined" == typeof c || c, this.onloadAction = a || null, this.mainObject = b || null, this.waitCall = null, this.rSeed = d || !1, this
}

function callerFunction(a, b) {
    return this.handler = function(c) {
        return c || (c = window.event), a(c, b), !0
    }
}

function getAbsoluteLeft(a) {
    return getOffset(a).left
}

function getAbsoluteTop(a) {
    return getOffset(a).top
}

function getOffsetSum(a) {
    for (var b = 0, c = 0; a;) b += parseInt(a.offsetTop), c += parseInt(a.offsetLeft), a = a.offsetParent;
    return {
        top: b,
        left: c
    }
}

function getOffsetRect(a) {
    var b = a.getBoundingClientRect(),
        c = document.body,
        d = document.documentElement,
        e = window.pageYOffset || d.scrollTop || c.scrollTop,
        f = window.pageXOffset || d.scrollLeft || c.scrollLeft,
        g = d.clientTop || c.clientTop || 0,
        h = d.clientLeft || c.clientLeft || 0,
        i = b.top + e - g,
        j = b.left + f - h;
    return {
        top: Math.round(i),
        left: Math.round(j)
    }
}

function getOffset(a) {
    return a.getBoundingClientRect ? getOffsetRect(a) : getOffsetSum(a)
}

function convertStringToBoolean(a) {
    switch ("string" == typeof a && (a = a.toLowerCase()), a) {
        case "1":
        case "true":
        case "yes":
        case "y":
        case 1:
        case !0:
            return !0;
        default:
            return !1
    }
}

function getUrlSymbol(a) {
    return a.indexOf("?") != -1 ? "&" : "?"
}

function dhtmlDragAndDropObject() {
    return window.dhtmlDragAndDrop ? window.dhtmlDragAndDrop : (this.dragStartObject = this.dragStartNode = this.dragNode = this.lastLanding = 0, this.tempDOMM = this.tempDOMU = null, this.waitDrag = 0, window.dhtmlDragAndDrop = this, this)
}

function M() {
    return this.catches || (this.catches = []), this
}

function dhtmlXHeir(a, b) {
    for (var c in b) "function" == typeof b[c] && (a[c] = b[c]);
    return a
}

function dhtmlxEvent(a, b, c) {
    a.addEventListener ? a.addEventListener(b, c, !1) : a.attachEvent && a.attachEvent("on" + b, c)
}

function dhtmlXAccordionItem() {}

function dhtmlXAccordion(a, b) {
    if (window.dhtmlXContainer) {
        var c = this;
        if (this.skin = null != b ? b : "undefined" != typeof dhtmlx && "string" == typeof dhtmlx.skin ? dhtmlx.skin : "dhx_skyblue", a == document.body) {
            this._isAccFS = !0, document.body.className += " dhxacc_fullscreened";
            var d = document.createElement("DIV");
            d.className = "dhxcont_global_layout_area", a.appendChild(d), this.cont = new dhtmlXContainer(a), this.cont.setContent(d), a.adjustContent(a, 0), this.base = document.createElement("DIV"), this.base.className = "dhx_acc_base_" + this.skin, this.base.style.overflow = "hidden", this.base.style.position = "absolute", this._adjustToFullScreen = function() {
                this.base.style.left = "2px", this.base.style.top = "2px", this.base.style.width = parseInt(d.childNodes[0].style.width) - 4 + "px", this.base.style.height = parseInt(d.childNodes[0].style.height) - 4 + "px"
            }, this._adjustToFullScreen(), d.childNodes[0].appendChild(this.base), this._resizeTM = null, this._resizeTMTime = 400, this._doOnResize = function() {
                window.clearTimeout(c._resizeTM), c._resizeTM = window.setTimeout(function() {
                    c._adjustAccordion()
                }, c._resizeTMTime)
            }, this._adjustAccordion = function() {
                document.body.adjustContent(document.body, 0), this._adjustToFullScreen(), this.setSizes()
            }, dhtmlxEvent(window, "resize", this._doOnResize)
        } else this.base = "string" == typeof a ? document.getElementById(a) : a, this.base.className = "dhx_acc_base_" + this.skin, this.base.innerHTML = "";
        return this.w = this.base.offsetWidth, this.h = this.base.offsetHeight, this.skinParams = {
            dhx_blue: {
                cell_height: 24,
                cell_space: 1,
                content_offset: 1
            },
            dhx_skyblue: {
                cell_height: 27,
                cell_space: -1,
                content_offset: -1
            },
            dhx_black: {
                cell_height: 24,
                cell_space: 1,
                content_offset: 1
            },
            dhx_web: {
                cell_height: 26,
                cell_space: 9,
                content_offset: 0,
                cell_pading_max: 1,
                cell_pading_min: 0
            },
            dhx_terrace: {
                cell_height: 37,
                cell_space: -1,
                content_offset: -1
            }
        }, this.sk = this.skinParams[this.skin], this.setSkinParameters = function(a, b) {
            isNaN(a) || (this.sk.cell_space = a), isNaN(b) || (this.sk.content_offset = b), this._reopenItem()
        }, this.setSkin = function(a) {
            if (this.skinParams[a]) {
                this.skin = a, this.sk = this.skinParams[this.skin], this.base.className = "dhx_acc_base_" + this.skin + (this._r ? " dhx_acc_rtl" : "");
                for (var b in this.idPull) this.idPull[b].skin = this.skin;
                this._reopenItem()
            }
        }, this.idPull = {}, this.opened = null, this.cells = function(a) {
            return null == this.idPull[a] ? null : this.idPull[a]
        }, this.itemH = 90, this.multiMode = !1, this.enableMultiMode = function() {
            var a, b = 0;
            for (a in this.idPull) b++;
            0 == b && (this.userOffset || (this.skinParams.dhx_skyblue.cell_space = 3), this.multiMode = !0), "dhx_terrace" == this.skin && (this.skinParams.dhx_terrace.cell_space = 12)
        }, this.userOffset = !1, this.setOffset = function(a, b) {
            this.userOffset = !0, isNaN(a) || (this.skinParams[this.skin].cell_space = a), isNaN(b) || (this.skinParams[this.skin].content_offset = b), this.setSizes()
        }, this.imagePath = "", this.setIconsPath = function(a) {
            this.imagePath = a
        }, this.addItem = function(a, b) {
            if (this.multiMode) var d = this._lastVisible();
            var e = document.createElement("DIV");
            e.className = "dhx_acc_item", e.dir = "ltr", e._isAcc = !0, e.skin = this.skin, this.base.appendChild(e), this.multiMode && (e.h = this.itemH);
            var f = document.createElement("DIV");
            f._idd = a, f.className = "dhx_acc_item_label", f.innerHTML = "<span>" + b + "</span><div class='dhx_acc_item_label_btmbrd'>&nbsp;</div><div class='dhx_acc_item_arrow'></div><div class='dhx_acc_hdr_line_l'></div><div class='dhx_acc_hdr_line_r'></div>", f.onselectstart = function(a) {
                a = a || event, a.returnValue = !1
            }, f.onclick = function() {
                !c.multiMode && c.idPull[this._idd]._isActive || (c.multiMode ? (c.idPull[this._idd]._isActive ? c.checkEvent("onBeforeActive") ? c.callEvent("onBeforeActive", [this._idd, "close"]) && c.closeItem(this._idd, "dhx_accord_outer_event") : c.closeItem(this._idd, "dhx_accord_outer_event") : c.checkEvent("onBeforeActive") ? c.callEvent("onBeforeActive", [this._idd, "open"]) && c.openItem(this._idd, "dhx_accord_outer_event") : c.openItem(this._idd, "dhx_accord_outer_event"), c._autoHeightEnabled && c.setSizes()) : c.checkEvent("onBeforeActive") ? c.callEvent("onBeforeActive", [this._idd, "open"]) && c.openItem(this._idd, "dhx_accord_outer_event") : c.openItem(this._idd, "dhx_accord_outer_event"))
            }, f.onmouseover = function() {
                this.className = "dhx_acc_item_label dhx_acc_item_lavel_hover"
            }, f.onmouseout = function() {
                this.className = "dhx_acc_item_label"
            }, e.appendChild(f);
            var g = document.createElement("DIV");
            g.className = "dhxcont_global_content_area", e.appendChild(g);
            var h = new dhtmlXContainer(e);
            h.setContent(g), "dhx_terrace" == this.skin && this._hideBorders === !0 && e._setPadding([0, -1, 2, 0]), e.adjustContent(e, this.sk.cell_height + this.sk.content_offset), e._id = a, this.idPull[a] = e, e.getId = function() {
                return this._id
            }, e.setText = function(a) {
                c.setText(this._id, a)
            }, e.getText = function() {
                return c.getText(this._id)
            }, e.open = function() {
                c.openItem(this._id)
            }, e.isOpened = function() {
                return c.isActive(this._id)
            }, e.close = function() {
                c.closeItem(this._id)
            }, e.setIcon = function(a) {
                c.setIcon(this._id, a)
            }, e.clearIcon = function() {
                c.clearIcon(this._id)
            }, e.dock = function() {
                c.dockItem(this._id)
            }, e.undock = function() {
                c.undockItem(this._id)
            }, e.show = function() {
                c.showItem(this._id)
            }, e.hide = function() {
                c.hideItem(this._id)
            }, e.setHeight = function(a) {
                c.setItemHeight(this._id, a)
            }, e.moveOnTop = function() {
                c.moveOnTop(this._id)
            }, e._doOnAttachMenu = function() {
                c._reopenItem()
            }, e._doOnAttachToolbar = function() {
                c._reopenItem()
            }, e._doOnAttachStatusBar = function() {
                c._reopenItem()
            }, e._doOnFrameContentLoaded = function() {
                c.callEvent("onContentLoaded", [this])
            }, this.multiMode && null != d && (1 == d._isActive ? (this.idPull[d._id].adjustContent(this.idPull[d._id], this.sk.cell_height + this.sk.content_offset, null, null, this.sk.cell_space), this.idPull[d._id].updateNestedObjects()) : this.idPull[d._id].style.height = this.sk.cell_height + this.sk.cell_space + "px", d = null);
            var i = this._enableOpenEffect;
            return this._enableOpenEffect = !1, this.openItem(a), this._enableOpenEffect = i, this.multiMode ? this.setSizes() : this._defineLastItem(), e
        }, this.openItem = function(a, b, c) {
            if (this.multiMode && this._checkAutoHeight(), !this._openBuzy)
                if (this._enableOpenEffect && !c)(!this.multiMode || !this.idPull[a]._isActive) && this._openWithEffect(a, null, null, null, null, b);
                else if (this.multiMode)
                for (var d in this.idPull)(this.idPull[d]._isActive || d == a) && (this.idPull[d].style.height = this.idPull[d].h + "px", this.idPull[d].childNodes[1].style.display = "", "dhx_web" == this.skin && this.idPull[d]._setPadding(this.skinParams[this.skin].cell_pading_max, "dhxcont_acc_dhx_web"), this.idPull[d].adjustContent(this.idPull[d], this.sk.cell_height + this.sk.content_offset, null, null, this.idPull[d] == this._lastVisible() && "dhx_web" != this.skin ? 0 : this.sk.cell_space), this.idPull[d].updateNestedObjects(), this.idPull[d]._isActive = !0, this._updateArrows(), "dhx_accord_outer_event" == b && d == a && this.callEvent("onActive", [a, !0]));
            else if (!a || !this.idPull[a]._isActive || c) {
                var e = 0;
                for (d in this.idPull) this.idPull[d].style.height = this.sk.cell_height + (this.idPull[d] != this._lastVisible() && d != a ? this.sk.cell_space : 0) + "px", d != a && (this.idPull[d].childNodes[1].style.display = "none", "dhx_web" == this.skin && this.idPull[d]._setPadding(this.skinParams[this.skin].cell_pading_min, ""), this.idPull[d]._isActive = !1, e += this.idPull[d].offsetHeight);
                e = this.base.offsetHeight - e, a && (this.idPull[a].style.height = e + "px", this.idPull[a].childNodes[1].style.display = "", "dhx_web" == this.skin && this.idPull[a]._setPadding(this.skinParams[this.skin].cell_pading_max, "dhxcont_acc_dhx_web"), this.idPull[a].adjustContent(this.idPull[a], this.sk.cell_height + this.sk.content_offset, null, null, this.idPull[a] == this._lastVisible() ? 0 : this.sk.cell_space), this.idPull[a].updateNestedObjects(), this.idPull[a]._isActive = !0, "dhx_accord_outer_event" == b && this.callEvent("onActive", [a, !0])), this._updateArrows()
            }
        }, this._lastVisible = function() {
            for (var a = null, b = this.base.childNodes.length - 1; b >= 0; b--) !this.base.childNodes[b]._isHidden && !a && (a = this.base.childNodes[b]);
            return a
        }, this.closeItem = function(a, b) {
            null != this.idPull[a] && this.idPull[a]._isActive && !this._openBuzy && (this._enableOpenEffect ? this._openWithEffect(this.multiMode ? a : null, null, null, null, null, b) : (this.idPull[a].style.height = this.sk.cell_height + (this.idPull[a] != this._lastVisible() ? this.sk.cell_space : 0) + "px", this.idPull[a].childNodes[1].style.display = "none", "dhx_web" == this.skin && this.idPull[a]._setPadding(this.skinParams[this.skin].cell_pading_min, ""), this.idPull[a]._isActive = !1, "dhx_accord_outer_event" == b && this.callEvent("onActive", [a, !1]), this._updateArrows()))
        }, this._updateArrows = function() {
            for (var a in this.idPull) {
                for (var b = this.idPull[a].childNodes[0], c = null, d = 0; d < b.childNodes.length; d++) String(b.childNodes[d].className).search("dhx_acc_item_arrow") != -1 && (c = b.childNodes[d]);
                null != c && (c.className = "dhx_acc_item_arrow " + (this.idPull[a]._isActive ? "item_opened" : "item_closed"), c = null)
            }
        }, this.setText = function(a, b, d) {
            if (null != c.idPull[a]) {
                for (var e = c.idPull[a].childNodes[0], f = null, g = 0; g < e.childNodes.length; g++) null != e.childNodes[g].tagName && "span" == String(e.childNodes[g].tagName).toLowerCase() && (f = e.childNodes[g]);
                isNaN(d) ? f.innerHTML = b : (f.style.paddingLeft = d + "px", f.style.paddingRight = d + "px")
            }
        }, this.getText = function(a) {
            if (null != c.idPull[a]) {
                for (var b = c.idPull[a].childNodes[0], d = null, e = 0; e < b.childNodes.length; e++) null != b.childNodes[e].tagName && "span" == String(b.childNodes[e].tagName).toLowerCase() && (d = b.childNodes[e]);
                return d.innerHTML
            }
        }, this._initWindows = function(a) {
            if (window.dhtmlXWindows) {
                if (!this.dhxWins && (this.dhxWins = new dhtmlXWindows, this.dhxWins.setSkin(this.skin), this.dhxWins.setImagePath(this.imagePath), this.dhxWinsIdPrefix = "", !a)) return;
                var b = this.dhxWinsIdPrefix + a;
                if (this.dhxWins.window(b)) this.dhxWins.window(b).show();
                else {
                    var c = this,
                        d = this.dhxWins.createWindow(b, 20, 20, 320, 200);
                    d.setText(this.getText(a)), d.button("close").hide(), d.attachEvent("onClose", function(a) {
                        a.hide()
                    }), d.addUserButton("dock", 99, this.dhxWins.i18n.dock, "dock"), d.button("dock").attachEvent("onClick", function() {
                        c.cells(a).dock()
                    })
                }
            }
        }, this.dockWindow = function(a) {
            this.idPull[a]._isUnDocked && this.dhxWins && this.dhxWins.window(this.dhxWinsIdPrefix + a) && (this.dhxWins.window(this.dhxWinsIdPrefix + a).moveContentTo(this.idPull[a]), this.dhxWins.window(this.dhxWinsIdPrefix + a).close(), this.idPull[a]._isUnDocked = !1, this.showItem(a), this.callEvent("onDock", [a]))
        }, this.undockWindow = function(a) {
            this.idPull[a]._isUnDocked || (this._initWindows(a), this.idPull[a].moveContentTo(this.dhxWins.window(this.dhxWinsIdPrefix + a)), this.idPull[a]._isUnDocked = !0, this.hideItem(a), this.callEvent("onUnDock", [a]))
        }, this.setSizes = function() {
            this._reopenItem()
        }, this.showItem = function(a) {
            null != this.idPull[a] && this.idPull[a]._isHidden && (this.idPull[a]._isUnDocked ? this.dockItem(a) : (this.idPull[a].className = "dhx_acc_item", this.idPull[a]._isHidden = !1, this._defineLastItem(), this._reopenItem()))
        }, this.hideItem = function(a) {
            null == this.idPull[a] || this.idPull[a]._isHidden || (this.closeItem(a), this.idPull[a].className = "dhx_acc_item_hidden", this.idPull[a]._isHidden = !0, this._defineLastItem(), this._reopenItem())
        }, this.isItemHidden = function(a) {
            return null == this.idPull[a] ? void 0 : 1 == this.idPull[a]._isHidden
        }, this._reopenItem = function() {
            var a, b = null;
            for (a in this.idPull) this.idPull[a]._isActive && !this.idPull[a]._isHidden && (b = a);
            this.openItem(b, null, !0)
        }, this.forEachItem = function(a) {
            for (var b in this.idPull) a(this.idPull[b])
        }, this._enableOpenEffect = !1, this._openStep = 10, this._openStepIncrement = 5, this._openStepTimeout = 10, this._openBuzy = !1, this.setEffect = function(a) {
            this._enableOpenEffect = 1 == a
        }, this._openWithEffect = function(a, b, c, d, e, f) {
            if (this.multiMode) {
                e || (this._openBuzy = !0, e = this._openStep, this.idPull[a]._isActive ? (b = a, a = null, c = this.sk.cell_height + (this.idPull[b] != this._lastVisible() ? this.sk.cell_space : 0), this.idPull[b].childNodes[1].style.display = "") : (d = this.idPull[a].h, this.idPull[a].childNodes[1].style.display = ""));
                var g = !1;
                if (a) {
                    var h = parseInt(this.idPull[a].style.height || 0) + e;
                    h > d && (h = d, g = !0), this.idPull[a].style.height = h + "px"
                }
                if (b && (h = parseInt(this.idPull[b].style.height) - e, h < c && (h = c, g = !0), this.idPull[b].style.height = h + "px"), e += this._openStepIncrement, g) a && (this.idPull[a].adjustContent(this.idPull[a], this.sk.cell_height + this.sk.content_offset, null, null, this.idPull[a] == this._lastVisible() ? 0 : this.sk.cell_space), this.idPull[a].updateNestedObjects(), this.idPull[a]._isActive = !0), b && (this.idPull[b].childNodes[1].style.display = "none", this.idPull[b]._isActive = !1), this._updateArrows(), this._openBuzy = !1, a && "dhx_accord_outer_event" == f && this.callEvent("onActive", [a, !0]), b && "dhx_accord_outer_event" == f && this.callEvent("onActive", [b, !1]);
                else {
                    var i = this;
                    window.setTimeout(function() {
                        i._openWithEffect(a, b, c, d, e, f)
                    }, this._openStepTimeout)
                }
            } else {
                if (!e && (this._openBuzy = !0, e = this._openStep, a) && (this.idPull[a].childNodes[1].style.display = ""), !b || !c || !d) {
                    var j, d = c = 0;
                    for (j in this.idPull) {
                        var k = this.sk.cell_height + (this.idPull[j] != this._lastVisible() && j != a ? this.sk.cell_space : 0);
                        this.idPull[j]._isActive && a != j && (b = j, c = k), j != a && (d += k)
                    }
                    d = this.base.offsetHeight - d
                }
                if (g = !1, a) {
                    var l = parseInt(this.idPull[a].style.height) + e;
                    l > d && (g = !0)
                }
                if (b) {
                    var m = parseInt(this.idPull[b].style.height) - e;
                    m < c && (g = !0)
                }
                e += this._openStepIncrement, g && (l = d, m = c), b && (this.idPull[b].style.height = m + "px"), a && (this.idPull[a].style.height = l + "px"), g ? (b && (this.idPull[b].childNodes[1].style.display = "none", this.idPull[b]._isActive = !1), a && (this.idPull[a].adjustContent(this.idPull[a], this.sk.cell_height + this.sk.content_offset, null, null, this.idPull[a] == this._lastVisible() ? 0 : this.sk.cell_space), this.idPull[a].updateNestedObjects(), this.idPull[a]._isActive = !0), this._updateArrows(), this._openBuzy = !1, "dhx_accord_outer_event" == f && a && this.callEvent("onActive", [a, !0])) : (i = this, window.setTimeout(function() {
                    i._openWithEffect(a, b, c, d, e, f)
                }, this._openStepTimeout))
            }
        }, this.setActive = function(a) {
            this.openItem(a)
        }, this.isActive = function(a) {
            return this.idPull[a]._isActive === !0
        }, this.dockItem = function(a) {
            this.dockWindow(a)
        }, this.undockItem = function(a) {
            this.undockWindow(a)
        }, this.setItemHeight = function(a, b) {
            if (this.multiMode) {
                if ("*" == b) this.idPull[a].h_auto = !0;
                else {
                    if (isNaN(b)) return;
                    this.idPull[a].h_auto = !1, this.idPull[a].h = b
                }
                this._reopenItem()
            }
        }, this._checkAutoHeight = function() {
            var a = this.base.offsetHeight;
            this._autoHeightEnabled = !1;
            var b, c = [];
            for (b in this.idPull) !this._autoHeightEnabled && this.idPull[b].h_auto && (this._autoHeightEnabled = !0), this.idPull[b].h_auto && this.idPull[b]._isActive ? c.push(b) : a = this.idPull[b]._isActive ? Math.max(0, a - this.idPull[b].h) : Math.max(0, a - this.idPull[b].offsetHeight);
            if (c.length > 0)
                for (var d = Math.floor(a / c.length), e = 0; e < c.length; e++) e == c.length - 1 ? d = a : a -= d, this.idPull[c[e]].h = d
        }, this.setIcon = function(a, b) {
            if (null != this.idPull[a]) {
                for (var c = this.idPull[a].childNodes[0], d = null, e = 0; e < c.childNodes.length; e++) "dhx_acc_item_icon" == c.childNodes[e].className && (d = c.childNodes[e]);
                null == d && (d = document.createElement("IMG"), d.className = "dhx_acc_item_icon", c.insertBefore(d, c.childNodes[0]), this.setText(a, null, 20)), d.src = this.imagePath + b
            }
        }, this.clearIcon = function(a) {
            if (null != this.idPull[a]) {
                for (var b = this.idPull[a].childNodes[0], c = null, d = 0; d < b.childNodes.length; d++) "dhx_acc_item_icon" == b.childNodes[d].className && (c = b.childNodes[d]);
                null != c && (b.removeChild(c), c = null, this.setText(a, null, 0))
            }
        }, this.moveOnTop = function(a) {
            this.idPull[a] && !(this.base.childNodes.length <= 1) && (this.base.insertBefore(this.idPull[a], this.base.childNodes[0]), this.setSizes())
        }, this._defineLastItem = function() {
            if (!this.multiMode)
                for (var a = !1, b = this.base.childNodes.length - 1; b >= 0; b--) this.base.childNodes[b].className.search("last_item") >= 0 ? this.base.childNodes[b]._isHidden || a ? this.base.childNodes[b].className = String(this.base.childNodes[b].className).replace(/last_item/gi, "") : a = !0 : !this.base.childNodes[b]._isHidden && !a && (this.base.childNodes[b].className += " last_item", a = !0)
        }, this.removeItem = function(a) {
            var b = this.idPull[a],
                c = b.childNodes[0];
            for (c.onclick = null, c.onmouseover = null, c.onmouseout = null, c.onselectstart = null, c._idd = null, c.className = "", b._dhxContDestruct(); c.childNodes.length > 0;) c.removeChild(c.childNodes[0]);
            for (c.parentNode && c.parentNode.removeChild(c), c = null; b.childNodes.length > 0;) b.removeChild(b.childNodes[0]);
            b._dhxContDestruct = null, b._doOnAttachMenu = null, b._doOnAttachToolbar = null, b._doOnAttachStatusBar = null, b.clearIcon = null, b.close = null, b.dock = null, b.getId = null, b.getText = null, b.hide = null, b.isOpened = null, b.open = null, b.setHeight = null, b.setIcon = null, b.setText = null, b.show = null, b.undock = null, b.parentNode && b.parentNode.removeChild(b), b = null, this.idPull[a] = null;
            try {
                delete this.idPull[a]
            } catch (a) {}
        }, this.unload = function() {
            for (var a in this.skinParams) {
                this.skinParams[a] = null;
                try {
                    delete this.skinParams[a]
                } catch (a) {}
            }
            this.skinParams = null;
            for (a in this.idPull) this.removeItem(a);
            this.userOffset = this.unload = this.undockWindowunload = this.undockWindow = this.undockItem = this.w = this.skin = this.showItem = this.setText = this.setSkinParameters = this.setSkin = this.setSizes = this.setOffset = this.setItemHeight = this.setIconsPath = this.setIcon = this.setEffect = this.setActive = this.removeItem = this.openItem = this.multiMode = this.itemH = this.isActive = this.imagePath = this.hideItem = this.h = this.getText = this.forEachItem = this.eventCatcher = this.enableMultiMode = this.dockWindow = this.dockItem = this.detachEvent = this.closeItem = this.clearIcon = this.checkEvent = this.cells = this.callEvent = this.attachEvent = this.addItem = this._updateArrows = this._reopenItem = this._lastVisible = this._initWindows = this.sk = this.idPull = null, 1 == this._isAccFS && ("function" == typeof window.addEventListener ? window.removeEventListener("resize", this._doOnResize, !1) : window.detachEvent("onresize", this._doOnResize), this._resizeTMTime = this._resizeTM = this._adjustToFullScreen = this._adjustAccordion = this._doOnResize = this._isAccFS = null, document.body.className = String(document.body.className).replace("dhxacc_fullscreened", ""), this.cont.obj._dhxContDestruct(), this.cont.dhxcont.parentNode && this.cont.dhxcont.parentNode.removeChild(this.cont.dhxcont), this.cont.dhxcont = null, this.cont = this.cont.setContent = null), this.dhxWins && (this.dhxWins.unload(), this.dhxWins = null), this.base.className = "", this.base = null;
            for (a in this) try {
                delete this[a]
            } catch (a) {}
        }, this._initWindows(), dhtmlxEventable(this), this
    }
    alert(this.i18n.dhxcontalert)
}

function dhtmlXContainer(a) {
    var b = this;
    if (this.obj = a, a = null, this.obj._padding = !0, this.dhxcont = null, this.st = document.createElement("DIV"), this.st.style.position = "absolute", this.st.style.left = "-200px", this.st.style.top = "0px", this.st.style.width = "100px", this.st.style.height = "1px", this.st.style.visibility = "hidden", this.st.style.overflow = "hidden", document.body.insertBefore(this.st, document.body.childNodes[0]), this.obj._getSt = function() {
            return b.st
        }, this.obj.dv = "def", this.obj.av = this.obj.dv, this.obj.cv = this.obj.av, this.obj.vs = {}, this.obj.vs[this.obj.av] = {}, this.obj.view = function(a) {
            if (!this.vs[a]) {
                this.vs[a] = {}, this.vs[a].dhxcont = this.vs[this.dv].dhxcont;
                var c = document.createElement("DIV");
                c.style.position = "relative", c.style.left = "0px", c.style.width = "200px", c.style.height = "200px", c.style.overflow = "hidden", c.style.visibility = "", b.st.appendChild(c), this.vs[a].dhxcont.mainCont[a] = c, c = null
            }
            return this.avt = this.av, this.av = a, this
        }, this.obj.setActive = function() {
            if (this.vs[this.av]) {
                if (this.cv = this.av, this.vs[this.avt].dhxcont == this.vs[this.avt].dhxcont.mainCont[this.avt].parentNode) {
                    if (b.st.appendChild(this.vs[this.avt].dhxcont.mainCont[this.avt]), this.vs[this.avt].menu && b.st.appendChild(document.getElementById(this.vs[this.avt].menuId)), this.vs[this.avt].toolbar) {
                        b.st.appendChild(document.getElementById(this.vs[this.avt].toolbarId));
                        var a = this.vs[this.avt].toolbar;
                        a.forEachItem(function(b) {
                            var c = a.objPull[a.idPrefix + b].obj;
                            null != c && "function" == typeof c._doOnMouseOut && c._doOnMouseOut(), c = null
                        }), a = null
                    }
                    this.vs[this.avt].sb && b.st.appendChild(document.getElementById(this.vs[this.avt].sbId))
                }
                this.vs[this.av].dhxcont != this.vs[this.av].dhxcont.mainCont[this.av].parentNode && (this.vs[this.av].dhxcont.insertBefore(this.vs[this.av].dhxcont.mainCont[this.av], this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length - 1]), this.vs[this.av].menu && this.vs[this.av].dhxcont.insertBefore(document.getElementById(this.vs[this.av].menuId), this.vs[this.av].dhxcont.childNodes[0]), this.vs[this.av].toolbar && this.vs[this.av].dhxcont.insertBefore(document.getElementById(this.vs[this.av].toolbarId), this.vs[this.av].dhxcont.childNodes[this.vs[this.av].menu ? 1 : 0]), this.vs[this.av].sb && this.vs[this.av].dhxcont.insertBefore(document.getElementById(this.vs[this.av].sbId), this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length - 1])), this._doOnResize && this._doOnResize(), this._isWindow && this.updateNestedObjects(), this.avt = null
            }
        }, this.obj._viewRestore = function() {
            var a = this.av;
            return this.avt && (this.av = this.avt, this.avt = null), a
        }, this.setContent = function(a) {
            this.obj.vs[this.obj.av].dhxcont = a, this.obj._init(), a = null
        }, this.obj._init = function() {
            this.vs[this.av].dhxcont.innerHTML = "<div ida='dhxMainCont' style='position: relative; left: 0px; top: 0px; overflow: hidden;'></div><div class='dhxcont_content_blocker' style='display: none;'></div>", this.vs[this.av].dhxcont.mainCont = {}, this.vs[this.av].dhxcont.mainCont[this.av] = this.vs[this.av].dhxcont.childNodes[0]
        }, this.obj._genStr = function(a) {
            for (var b = "", c = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789", d = 0; d < a; d++) b += c.charAt(Math.round(Math.random() * (c.length - 1)));
            return b
        }, this.obj.setMinContentSize = function(a, b) {
            this.vs[this.av]._minDataSizeW = a, this.vs[this.av]._minDataSizeH = b
        }, this.obj._setPadding = function(a, b) {
            "object" == typeof a ? (this._offsetTop = a[0], this._offsetLeft = a[1], this._offsetWidth = a[2], this._offsetHeight = a[3], a = null) : (this._offsetLeft = this._offsetTop = a, this._offsetWidth = -a * 2, this._offsetHeight = -a * 2), this.vs[this.av].dhxcont.className = "dhxcont_global_content_area " + (b || "")
        }, this.obj.moveContentTo = function(a) {
            for (var b in this.vs) {
                a.view(b).setActive();
                var c = null;
                if (this.vs[b].grid && (c = "grid"), this.vs[b].tree && (c = "tree"), this.vs[b].tabbar && (c = "tabbar"), this.vs[b].folders && (c = "folders"), this.vs[b].layout && (c = "layout"), null != c && (a.view(b).attachObject(this.vs[b][c + "Id"], !1, !0, !1), a.vs[b][c] = this.vs[b][c], a.vs[b][c + "Id"] = this.vs[b][c + "Id"], a.vs[b][c + "Obj"] = this.vs[b][c + "Obj"], this.vs[b][c] = null, this.vs[b][c + "Id"] = null, this.vs[b][c + "Obj"] = null), this.vs[b]._frame && (a.vs[b]._frame = this.vs[b]._frame, this.vs[b]._frame = null), null != this.vs[b].menu) {
                    if (a.cv == a.av) a.vs[a.av].dhxcont.insertBefore(document.getElementById(this.vs[b].menuId), a.vs[a.av].dhxcont.childNodes[0]);
                    else {
                        var d = a._getSt();
                        d.appendChild(document.getElementById(this.vs[b].menuId)), d = null
                    }
                    a.vs[b].menu = this.vs[b].menu, a.vs[b].menuId = this.vs[b].menuId, a.vs[b].menuHeight = this.vs[b].menuHeight, this.vs[b].menu = null, this.vs[b].menuId = null, this.vs[b].menuHeight = null, this.cv == this.av && this._doOnAttachMenu && this._doOnAttachMenu("unload"), a.cv == a.av && a._doOnAttachMenu && a._doOnAttachMenu("move")
                }
                if (null != this.vs[b].toolbar && (a.cv == a.av ? a.vs[a.av].dhxcont.insertBefore(document.getElementById(this.vs[b].toolbarId), a.vs[a.av].dhxcont.childNodes[null != a.vs[a.av].menu ? 1 : 0]) : (d = a._getSt(), d.appendChild(document.getElementById(this.vs[b].toolbarId)), d = null), a.vs[b].toolbar = this.vs[b].toolbar, a.vs[b].toolbarId = this.vs[b].toolbarId, a.vs[b].toolbarHeight = this.vs[b].toolbarHeight, this.vs[b].toolbar = null, this.vs[b].toolbarId = null, this.vs[b].toolbarHeight = null, this.cv == this.av && this._doOnAttachToolbar && this._doOnAttachToolbar("unload"), a.cv == a.av && a._doOnAttachToolbar && a._doOnAttachToolbar("move")), null != this.vs[b].sb) {
                    if (a.cv != a.av) return d = a._getSt(), d.appendChild(document.getElementById(this.vs[b].sbId)), d;
                    a.vs[a.av].dhxcont.insertBefore(document.getElementById(this.vs[b].sbId), a.vs[a.av].dhxcont.childNodes[a.vs[a.av].dhxcont.childNodes.length - 1]), a.vs[b].sb = this.vs[b].sb, a.vs[b].sbId = this.vs[b].sbId, a.vs[b].sbHeight = this.vs[b].sbHeight, this.vs[b].sb = null, this.vs[b].sbId = null, this.vs[b].sbHeight = null, this.cv == this.av && this._doOnAttachStatusBar && this._doOnAttachStatusBar("unload"), a.cv == a.av && a._doOnAttachStatusBar && a._doOnAttachStatusBar("move")
                }
                for (var e = this.vs[b].dhxcont.mainCont[b], f = a.vs[b].dhxcont.mainCont[b]; e.childNodes.length > 0;) f.appendChild(e.childNodes[0])
            }
            a.view(this.av).setActive(), a = null
        }, this.obj.adjustContent = function(a, b, c, d, e) {
            var f = this.vs[this.av].dhxcont,
                g = f.mainCont[this.av];
            f.style.left = (this._offsetLeft || 0) + "px", f.style.top = (this._offsetTop || 0) + b + "px";
            var h = a.clientWidth + (this._offsetWidth || 0);
            d !== !0 && (f.style.width = Math.max(0, h) + "px"), d !== !0 && f.offsetWidth > h && (f.style.width = Math.max(0, 2 * h - f.offsetWidth) + "px");
            var i = a.clientHeight + (this._offsetHeight || 0);
            f.style.height = Math.max(0, i - b) + (null != c ? c : 0) + "px", f.offsetHeight > i - b && (f.style.height = Math.max(0, 2 * (i - b) - f.offsetHeight) + "px"), e && !isNaN(e) && (f.style.height = Math.max(0, parseInt(f.style.height) - e) + "px"), null != this.vs[this.av]._minDataSizeH && parseInt(f.style.height) < this.vs[this.av]._minDataSizeH && (f.style.height = this.vs[this.av]._minDataSizeH + "px"), null != this.vs[this.av]._minDataSizeW && parseInt(f.style.width) < this.vs[this.av]._minDataSizeW && (f.style.width = this.vs[this.av]._minDataSizeW + "px"), d !== !0 && (g.style.width = f.clientWidth + "px", g.offsetWidth > f.clientWidth) && (g.style.width = Math.max(0, 2 * f.clientWidth - g.offsetWidth) + "px");
            var j = null != this.vs[this.av].menu ? this.vs[this.av].menuHidden ? 0 : this.vs[this.av].menuHeight : 0,
                k = null != this.vs[this.av].toolbar ? this.vs[this.av].toolbarHidden ? 0 : this.vs[this.av].toolbarHeight : 0,
                l = null != this.vs[this.av].sb ? this.vs[this.av].sbHidden ? 0 : this.vs[this.av].sbHeight : 0;
            g.style.height = f.clientHeight + "px", g.offsetHeight > f.clientHeight && (g.style.height = Math.max(0, 2 * f.clientHeight - g.offsetHeight) + "px"), g.style.height = Math.max(0, parseInt(g.style.height) - j - k - l) + "px", a = f = g = null
        }, this.obj.coverBlocker = function() {
            return this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length - 1]
        }, this.obj.showCoverBlocker = function() {
            var a = this.coverBlocker();
            a.style.display = "", a = null
        }, this.obj.hideCoverBlocker = function() {
            var a = this.coverBlocker();
            a.style.display = "none", a = null
        }, this.obj.updateNestedObjects = function(a) {
            if ("dhx_terrace" == this.skin) {
                var b = null != this.vs[this.av].menu || null != this.vs[this.av].toolbar;
                if (this.vs[this.av].grid) {
                    var c = b || this._isWindow ? 14 : 0,
                        d = this._isWindow ? 14 : 0,
                        e = this._isWindow ? 14 : 0;
                    a && (this._isWindow || (this.vs[this.av].grid.entBox.style.border = "0px solid white", this.vs[this.av].grid.skin_h_correction = -2), this.vs[this.av].grid.dontSetSizes = !0, this.vs[this.av].gridObj.style.position = "absolute"), this.vs[this.av].gridObj.style.top = c + "px", this.vs[this.av].gridObj.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) - c - d + "px", this.vs[this.av].gridObj.style.left = e + "px", this.vs[this.av].gridObj.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) - 2 * e + "px", this.vs[this.av].grid.setSizes()
                }
                this.vs[this.av].tree && (c = b || this._isWindow ? 14 : 0, d = this._isWindow ? 14 : 0, e = this._isWindow ? 14 : 0, a && (this.vs[this.av].treeObj.style.position = "absolute"), this.vs[this.av].treeObj.style.top = c + "px", this.vs[this.av].treeObj.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) - c - d + "px", this.vs[this.av].treeObj.style.left = e + "px", this.vs[this.av].treeObj.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) - 2 * e + "px"), this.vs[this.av].form && (c = b || this._isWindow ? 14 : 0, d = this._isWindow ? 14 : 0, e = this._isWindow ? 14 : 0, a && (this.vs[this.av].formObj.style.position = "absolute"), this.vs[this.av].formObj.style.top = c + "px", this.vs[this.av].formObj.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) - c - d + "px", this.vs[this.av].formObj.style.left = e + "px", this.vs[this.av].formObj.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) - 2 * e + "px", this.vs[this.av].form.setSizes()), this.vs[this.av].layout && (a && !this._isWindow && !this._isCell && this.vs[this.av].layout._hideBorders(), c = this._isCell && this._noHeader && !b ? 0 : 3, d = this._isCell && this._noHeader ? 0 : 14, e = this._isCell && this._noHeader ? 0 : 14, this.vs[this.av].layoutObj.style.top = c + "px", this.vs[this.av].layoutObj.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) - c - d + "px", this.vs[this.av].layoutObj.style.left = e + "px", this.vs[this.av].layoutObj.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) - 2 * e + "px", this.vs[this.av].layout.setSizes()), this.vs[this.av].accordion && (a && (this.vs[this.av].accordion._hideBorders = !0), c = this._isCell && this._noHeader && !b ? 0 : 14, d = this._isCell && this._noHeader ? 0 : 14, e = this._isCell && this._noHeader ? 0 : 14, this.vs[this.av].accordionObj.style.top = c + "px", this.vs[this.av].accordionObj.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) - c - d + "px", this.vs[this.av].accordionObj.style.left = e + "px", this.vs[this.av].accordionObj.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) - 2 * e + "px", this.vs[this.av].accordion.setSizes()), null != this.vs[this.av].tabbar && (c = !b && this._isCell && this._noHeader ? 0 : 14, d = this._isCell && this._noHeader ? c : 28, e = this._isCell && this._noHeader ? 0 : 14, this.vs[this.av].tabbarObj.style.top = c + "px", this.vs[this.av].tabbarObj.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) - d + "px", this.vs[this.av].tabbarObj.style.left = e + "px", this.vs[this.av].tabbarObj.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) - 2 * e + "px", this.vs[this.av].tabbar.adjustOuterSize()), this.vs[this.av].editor && (e = c = 14, this.vs[this.av].editorObj.style.top = c + "px", this.vs[this.av].editorObj.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) - 2 * c + "px", this.vs[this.av].editorObj.style.left = e + "px", this.vs[this.av].editorObj.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) - 2 * e + "px", _isIE || this.vs[this.av].editor._prepareContent(!0), this.vs[this.av].editor.setSizes()), this.vs[this.av].sched && this.vs[this.av].sched.setSizes(), this.vs[this.av].dockedCell && this.vs[this.av].dockedCell.updateNestedObjects()
            } else this.vs[this.av].grid && this.vs[this.av].grid.setSizes(), this.vs[this.av].sched && this.vs[this.av].sched.setSizes(), this.vs[this.av].tabbar && this.vs[this.av].tabbar.adjustOuterSize(), this.vs[this.av].folders && this.vs[this.av].folders.setSizes(), this.vs[this.av].editor && (_isIE || this.vs[this.av].editor._prepareContent(!0), this.vs[this.av].editor.setSizes()), this.vs[this.av].layout && ((this._isAcc || this._isTabbarCell) && "dhx_skyblue" == this.skin ? (this.vs[this.av].layoutObj.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) + 2 + "px", this.vs[this.av].layoutObj.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) + 2 + "px") : (this.vs[this.av].layoutObj.style.width = this.vs[this.av].dhxcont.mainCont[this.av].style.width,
                this.vs[this.av].layoutObj.style.height = this.vs[this.av].dhxcont.mainCont[this.av].style.height), this.vs[this.av].layout.setSizes()), null != this.vs[this.av].accordion && ("dhx_web" == this.skin ? (this.vs[this.av].accordionObj.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) + "px", this.vs[this.av].accordionObj.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) + "px") : (this.vs[this.av].accordionObj.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) + 2 + "px", this.vs[this.av].accordionObj.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) + 2 + "px"), this.vs[this.av].accordion.setSizes()), this.vs[this.av].dockedCell && this.vs[this.av].dockedCell.updateNestedObjects(), this.vs[this.av].form && this.vs[this.av].form.setSizes(), this.vs[this.av].carousel && this.vs[this.av].carousel.setSizes()
        }, this.obj.attachStatusBar = function() {
            if (!this.vs[this.av].sb) {
                var a = document.createElement("DIV");
                return a.className = this._isCell ? "dhxcont_sb_container_layoutcell" : "dhxcont_sb_container", a.id = "sbobj_" + this._genStr(12), a.innerHTML = "<div class='dhxcont_statusbar'></div>", this.cv == this.av ? this.vs[this.av].dhxcont.insertBefore(a, this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length - 1]) : b.st.appendChild(a), a.setText = function(a) {
                    this.childNodes[0].innerHTML = a
                }, a.getText = function() {
                    return this.childNodes[0].innerHTML
                }, a.onselectstart = function(a) {
                    return a = a || event, a.returnValue = !1
                }, this.vs[this.av].sb = a, this.vs[this.av].sbHeight = "dhx_web" == this.skin ? 41 : "dhx_skyblue" == this.skin ? 23 : a.offsetHeight, this.vs[this.av].sbId = a.id, this._doOnAttachStatusBar && this._doOnAttachStatusBar("init"), this.adjust(), this.vs[this._viewRestore()].sb
            }
        }, this.obj.detachStatusBar = function(a) {
            this.vs[this.av].sb && (this.vs[this.av].sb.setText = null, this.vs[this.av].sb.getText = null, this.vs[this.av].sb.onselectstart = null, this.vs[this.av].sb.parentNode.removeChild(this.vs[this.av].sb), this.vs[this.av].sb = null, this.vs[this.av].sbHeight = null, this.vs[this.av].sbId = null, this._viewRestore(), this._doOnAttachStatusBar && !a && this._doOnAttachStatusBar("unload"))
        }, this.obj.getFrame = function() {
            return this.getView()._frame
        }, this.obj.getView = function(a) {
            return this.vs[a || this.av]
        }, this.obj.attachMenu = function(a) {
            if (!this.vs[this.av].menu) {
                var c = document.createElement("DIV");
                return c.style.position = "relative", c.style.overflow = "hidden", c.id = "dhxmenu_" + this._genStr(12), this.cv == this.av ? this.vs[this.av].dhxcont.insertBefore(c, this.vs[this.av].dhxcont.childNodes[0]) : b.st.appendChild(c), "object" != typeof a ? this.vs[this.av].menu = new dhtmlXMenuObject(c.id, a || this.skin) : (a.parent = c.id, this.vs[this.av].menu = new dhtmlXMenuObject(a)), this.vs[this.av].menuHeight = "dhx_web" == this.skin ? 29 : c.offsetHeight, this.vs[this.av].menuId = c.id, this._doOnAttachMenu && this._doOnAttachMenu("init"), this.adjust(), this.vs[this._viewRestore()].menu
            }
        }, this.obj.detachMenu = function(a) {
            if (this.vs[this.av].menu) {
                var b = document.getElementById(this.vs[this.av].menuId);
                this.vs[this.av].menu.unload(), this.vs[this.av].menu = null, this.vs[this.av].menuId = null, this.vs[this.av].menuHeight = null, b && b.parentNode.removeChild(b), b = null, this._viewRestore(), this._doOnAttachMenu && !a && this._doOnAttachMenu("unload")
            }
        }, this.obj.attachToolbar = function(a) {
            if (!this.vs[this.av].toolbar) {
                var c = document.createElement("DIV");
                c.style.position = "relative", c.style.overflow = "hidden", c.id = "dhxtoolbar_" + this._genStr(12), this.cv == this.av ? this.vs[this.av].dhxcont.insertBefore(c, this.vs[this.av].dhxcont.childNodes[null != this.vs[this.av].menu ? 1 : 0]) : b.st.appendChild(c), "object" != typeof a ? this.vs[this.av].toolbar = new dhtmlXToolbarObject(c.id, a || this.skin) : (a.parent = c.id, this.vs[this.av].toolbar = new dhtmlXToolbarObject(a)), this.vs[this.av].toolbarHeight = c.offsetHeight, this.vs[this.av].toolbarId = c.id, this._doOnAttachToolbar && this._doOnAttachToolbar("init"), this.adjust();
                var d = this;
                return this.vs[this.av].toolbar.attachEvent("_onIconSizeChange", function() {
                    d.vs[d.av].toolbarHeight = this.cont.offsetHeight, d.vs[d.av].toolbarId = this.cont.id, d.adjust(), d._doOnAttachToolbar && d._doOnAttachToolbar("iconSizeChange")
                }), "dhx_terrace" != this.skin && this.vs[this.av].toolbar.callEvent("_onIconSizeChange", []), this.vs[this._viewRestore()].toolbar
            }
        }, this.obj.detachToolbar = function(a) {
            if (this.vs[this.av].toolbar) {
                var b = document.getElementById(this.vs[this.av].toolbarId);
                this.vs[this.av].toolbar.unload(), this.vs[this.av].toolbar = null, this.vs[this.av].toolbarId = null, this.vs[this.av].toolbarHeight = null, b && b.parentNode.removeChild(b), b = null, this._viewRestore(), this._doOnAttachToolbar && !a && this._doOnAttachToolbar("unload")
            }
        }, this.obj.attachGrid = function() {
            this._isWindow && "dhx_skyblue" == this.skin && (this.vs[this.av].dhxcont.mainCont[this.av].style.border = "#a4bed4 1px solid", this._redraw());
            var a = document.createElement("DIV");
            return a.id = "dhxGridObj_" + this._genStr(12), a.style.width = "100%", a.style.height = "100%", a.cmp = "grid", document.body.appendChild(a), this.attachObject(a.id, !1, !0, !1), this.vs[this.av].grid = new dhtmlXGridObject(a.id), this.vs[this.av].grid.setSkin(this.skin), "dhx_skyblue" != this.skin && "dhx_black" != this.skin && "dhx_blue" != this.skin || (this.vs[this.av].grid.entBox.style.border = "0px solid white", this.vs[this.av].grid._sizeFix = 2), this.vs[this.av].gridId = a.id, this.vs[this.av].gridObj = a, "dhx_terrace" == this.skin && (this.adjust(), this.updateNestedObjects(!0)), this.vs[this._viewRestore()].grid
        }, this.obj.attachScheduler = function(a, b, c, d) {
            var d = d || window.scheduler,
                e = 0;
            if (c && (g = document.getElementById(c)) && (e = 1), !e) {
                var f = c || '<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>',
                    g = document.createElement("DIV");
                g.id = "dhxSchedObj_" + this._genStr(12), g.innerHTML = '<div id="' + g.id + '" class="dhx_cal_container" style="width:100%; height:100%;"><div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>' + f + '</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div></div>', document.body.appendChild(g.firstChild)
            }
            return this.attachObject(g.id, !1, !0, !1), this.vs[this.av].sched = d, this.vs[this.av].schedId = g.id, d.setSizes = d.update_view, d.destructor = function() {}, d.init(g.id, a, b), this.vs[this._viewRestore()].sched
        }, this.obj.attachTree = function(a) {
            this._isWindow && "dhx_skyblue" == this.skin && (this.vs[this.av].dhxcont.mainCont[this.av].style.border = "#a4bed4 1px solid", this._redraw());
            var b = document.createElement("DIV");
            return b.id = "dhxTreeObj_" + this._genStr(12), b.style.width = "100%", b.style.height = "100%", b.cmp = "tree", document.body.appendChild(b), this.attachObject(b.id, !1, !0, !1), this.vs[this.av].tree = new dhtmlXTreeObject(b.id, "100%", "100%", a || 0), this.vs[this.av].tree.setSkin(this.skin), this.vs[this.av].tree.allTree.childNodes[0].style.marginTop = "2px", this.vs[this.av].tree.allTree.childNodes[0].style.marginBottom = "2px", this.vs[this.av].treeId = b.id, this.vs[this.av].treeObj = b, "dhx_terrace" == this.skin && (this.adjust(), this.updateNestedObjects(!0)), this.vs[this._viewRestore()].tree
        }, this.obj.attachTabbar = function(a) {
            this._isWindow && "dhx_skyblue" == this.skin && (this.vs[this.av].dhxcont.style.border = "none", this.setDimension(this.w, this.h));
            var b = document.createElement("DIV");
            return b.id = "dhxTabbarObj_" + this._genStr(12), b.style.width = "100%", b.style.height = "100%", b.style.overflow = "hidden", b.cmp = "tabbar", this._isWindow || (b._hideBorders = !0), document.body.appendChild(b), this.attachObject(b.id, !1, !0, !1), this._isCell && (this.hideHeader(), this._padding = b._hideBorders = !1), this.vs[this.av].tabbar = new dhtmlXTabBar(b.id, a || "top", "dhx_terrace" == this.skin ? null : 20), this._isWindow || "dhx_terrace" == this.skin || (this.vs[this.av].tabbar._s.expand = !0), this.vs[this.av].tabbar.setSkin(this.skin), this.vs[this.av].tabbar.adjustOuterSize(), this.vs[this.av].tabbarId = b.id, this.vs[this.av].tabbarObj = b, "dhx_terrace" == this.skin && (this.adjust(), this.updateNestedObjects(!0)), this.vs[this._viewRestore()].tabbar
        }, this.obj.attachFolders = function() {
            this._isWindow && "dhx_skyblue" == this.skin && (this.vs[this.av].dhxcont.mainCont[this.av].style.border = "#a4bed4 1px solid", this._redraw());
            var a = document.createElement("DIV");
            return a.id = "dhxFoldersObj_" + this._genStr(12), a.style.width = "100%", a.style.height = "100%", a.style.overflow = "hidden", a.cmp = "folders", document.body.appendChild(a), this.attachObject(a.id, !1, !0, !1), this.vs[this.av].folders = new dhtmlxFolders(a.id), this.vs[this.av].folders.setSizes(), this.vs[this.av].foldersId = a.id, this.vs[this.av].foldersObj = a, this.vs[this._viewRestore()].folders
        }, this.obj.attachAccordion = function() {
            this._isWindow && "dhx_skyblue" == this.skin && (this.vs[this.av].dhxcont.mainCont[this.av].style.border = "#a4bed4 1px solid", this._redraw());
            var a = document.createElement("DIV");
            return a.id = "dhxAccordionObj_" + this._genStr(12), this._padding = !0, "dhx_web" == this.skin ? (a.style.left = "0px", a.style.top = "0px", a.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) + "px", a.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) + "px") : "dhx_terrace" != this.skin && (a.style.left = "-1px", a.style.top = "-1px", a.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) + 2 + "px", a.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) + 2 + "px"), a.style.position = "relative", a.cmp = "accordion", document.body.appendChild(a), this.attachObject(a.id, !1, !0, !1), this.vs[this.av].accordion = new dhtmlXAccordion(a.id, this.skin), this.vs[this.av].accordion.setSizes(), this.vs[this.av].accordionId = a.id, this.vs[this.av].accordionObj = a, "dhx_terrace" == this.skin && (this.adjust(), this.updateNestedObjects(!0)), this.vs[this._viewRestore()].accordion
        }, this.obj.attachLayout = function(a, b) {
            this._isCell && "dhx_skyblue" == this.skin && (this.hideHeader(), this.vs[this.av].dhxcont.style.border = "0px solid white", this.adjustContent(this.childNodes[0], 0)), this._isCell && "dhx_web" == this.skin && this.hideHeader(), this._padding = !0;
            var c = document.createElement("DIV");
            return c.id = "dhxLayoutObj_" + this._genStr(12), c.style.overflow = "hidden", c.style.position = "absolute", c.style.left = "0px", c.style.top = "0px", c.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) + "px", c.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) + "px", (this._isTabbarCell || this._isAcc) && "dhx_skyblue" == this.skin && (c.style.left = "-1px", c.style.top = "-1px", c.style.width = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width) + 2 + "px", c.style.height = parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height) + 2 + "px"), c.dhxContExists = !0, c.cmp = "layout", document.body.appendChild(c), this.attachObject(c.id, !1, !0, !1), this.vs[this.av].layout = new dhtmlXLayoutObject(c, a, b || this.skin), this._isWindow && this.attachEvent("_onBeforeTryResize", this.vs[this.av].layout._defineWindowMinDimension), this.vs[this.av].layoutId = c.id, this.vs[this.av].layoutObj = c, "dhx_terrace" == this.skin && (this._isCell && (this.style.backgroundColor = "transparent", this.vs[this.av].dhxcont.style.backgroundColor = "transparent", this.hideHeader()), this.adjust(), this.updateNestedObjects(!0)), this.vs[this._viewRestore()].layout
        }, this.obj.attachEditor = function(a) {
            this._isWindow && "dhx_skyblue" == this.skin && (this.vs[this.av].dhxcont.mainCont[this.av].style.border = "#a4bed4 1px solid", this._redraw());
            var b = document.createElement("DIV");
            return b.id = "dhxEditorObj_" + this._genStr(12), b.style.position = "relative", b.style.display = "none", b.style.overflow = "hidden", b.style.width = "100%", b.style.height = "100%", b.cmp = "editor", document.body.appendChild(b), "dhx_terrace" == this.skin && (b._attached = !0), this.attachObject(b.id, !1, !0, !1), this.vs[this.av].editor = new dhtmlXEditor(b.id, a || this.skin), this.vs[this.av].editorId = b.id, this.vs[this.av].editorObj = b, "dhx_terrace" == this.skin && (this.adjust(), this.updateNestedObjects(!0)), this.vs[this._viewRestore()].editor
        }, this.obj.attachMap = function(a) {
            var b = document.createElement("DIV");
            return b.id = "GMapsObj_" + this._genStr(12), b.style.position = "relative", b.style.display = "none", b.style.overflow = "hidden", b.style.width = "100%", b.style.height = "100%", b.cmp = "gmaps", document.body.appendChild(b), this.attachObject(b.id, !1, !0, !0), a || (a = {
                center: new google.maps.LatLng(40.719837, -73.992348),
                zoom: 11,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }), this.vs[this.av].gmaps = new google.maps.Map(b, a), this.vs[this.av].gmaps
        }, this.obj.attachObject = function(a, b, c, d) {
            if ("string" == typeof a && (a = document.getElementById(a)), b) {
                a.style.visibility = "hidden", a.style.display = "";
                var e = a.offsetWidth,
                    f = a.offsetHeight
            }
            this._attachContent("obj", a), b && this._isWindow && (a.style.visibility = "", this._adjustToContent(e, f)), "dhx_terrace" != this.skin || null == this.vs[this.av].menu && null == this.vs[this.av].toolbar || (this.adjust("undefined" == typeof d || 1 == d), this.updateNestedObjects(!0)), c || this._viewRestore()
        }, this.obj.detachObject = function(a, b) {
            for (var c = null, d = null, e = "tree,grid,layout,tabbar,accordion,folders,form".split(","), f = 0; f < e.length; f++)
                if (this.vs[this.av][e[f]]) {
                    if (c = this.vs[this.av][e[f]], d = this.vs[this.av][e[f] + "Obj"], a) {
                        for (c.unload && c.unload(), c.destructor && c.destructor(); d.childNodes.length > 0;) d.removeChild(d.childNodes[0]);
                        d.parentNode.removeChild(d), c = d = null
                    } else document.body.appendChild(d), d.style.display = "none";
                    this.vs[this.av][e[f]] = null, this.vs[this.av][e[f] + "Id"] = null, this.vs[this.av][e[f] + "Obj"] = null
                }
            if (null != c && null != d) return [c, d];
            a && this.vs[this.av]._frame && (this._detachURLEvents(), this.vs[this.av]._frame = null);
            for (var g = this.vs[this.av].dhxcont.mainCont[this.av]; g.childNodes.length > 0;)
                if (1 == a) g.removeChild(g.childNodes[0]);
                else {
                    var h = g.childNodes[0];
                    null != b ? ("object" != typeof b && (b = document.getElementById(b)), b.appendChild(h)) : document.body.appendChild(h), h.style.display = "none"
                }
            g = b = null
        }, this.obj.appendObject = function(a) {
            "string" == typeof a && (a = document.getElementById(a)), this._attachContent("obj", a, !0)
        }, this.obj.attachHTMLString = function(a) {
            this._attachContent("str", a);
            for (var b = a.match(/<script[^>]*>[^\f]*?<\/script>/g) || [], c = 0; c < b.length; c++) {
                var d = b[c].replace(/<([\/]{0,1})script[^>]*>/g, "");
                d && (window.execScript ? window.execScript(d) : window.eval(d))
            }
        }, this.obj.attachURL = function(a, b) {
            this._attachContent(1 == b ? "urlajax" : "url", a, !1), "dhx_terrace" != this.skin || null == this.vs[this.av].menu && null == this.vs[this.av].toolbar || (this.adjust(!0), this.updateNestedObjects(!0)), this._viewRestore()
        }, this.obj.adjust = function(a) {
            if ("dhx_skyblue" == this.skin && (this.vs[this.av].menu && ((this._isWindow || this._isLayout) && (this.vs[this.av].menu._topLevelOffsetLeft = 0, document.getElementById(this.vs[this.av].menuId).style.height = "26px", this.vs[this.av].menuHeight = document.getElementById(this.vs[this.av].menuId).offsetHeight, this._doOnAttachMenu && this._doOnAttachMenu("show")), this._isCell && (document.getElementById(this.vs[this.av].menuId).className += " in_layoutcell", this.vs[this.av].menuHeight = 25), this._isAcc && (document.getElementById(this.vs[this.av].menuId).className += " in_acccell", this.vs[this.av].menuHeight = 25), this._doOnAttachMenu && this._doOnAttachMenu("adjust")), this.vs[this.av].toolbar && (this._isWindow && (document.getElementById(this.vs[this.av].toolbarId).className += " in_window"), this._isLayout && (document.getElementById(this.vs[this.av].toolbarId).className += " in_layout"), this._isCell && (document.getElementById(this.vs[this.av].toolbarId).className += " in_layoutcell"), this._isAcc && (document.getElementById(this.vs[this.av].toolbarId).className += " in_acccell"), this._isTabbarCell && (document.getElementById(this.vs[this.av].toolbarId).className += " in_tabbarcell"))), "dhx_web" == this.skin && this.vs[this.av].toolbar && (this._isWindow && (document.getElementById(this.vs[this.av].toolbarId).className += " in_window"), this._isLayout && (document.getElementById(this.vs[this.av].toolbarId).className += " in_layout"), this._isCell && (document.getElementById(this.vs[this.av].toolbarId).className += " in_layoutcell"), this._isAcc && (document.getElementById(this.vs[this.av].toolbarId).className += " in_acccell"), this._isTabbarCell && (document.getElementById(this.vs[this.av].toolbarId).className += " in_tabbarcell")), "dhx_terrace" == this.skin) {
                var b = 0;
                (this._isWindow || this._isCell || this._isAcc || this._isTabbarCell) && (b = 14), this._isCell && this._noHeader && (b = 0);
                var c = 0;
                (this._isWindow || this._isCell || this._isAcc || this._isTabbarCell) && (c = 14), this._isCell && this._noHeader && (c = 0);
                var d = 1 == a && !this.vs[this.av].toolbar || this._isLayout ? 14 : 0,
                    e = 1 == a || this._isLayout ? 14 : 0,
                    f = !1;
                this.vs[this.av].menu && (document.getElementById(this.vs[this.av].menuId).style.marginLeft = b + "px", document.getElementById(this.vs[this.av].menuId).style.marginRight = b + "px", document.getElementById(this.vs[this.av].menuId).style.marginTop = c + "px", document.getElementById(this.vs[this.av].menuId).style.marginBottom = d + "px", this.vs[this.av].menuHeight = 32 + c + d, this._doOnAttachMenu && this._doOnAttachMenu("show"), f = !0), this.vs[this.av].toolbar && (0 == c && null != this.vs[this.av].menu & this._isCell && (c = 14), document.getElementById(this.vs[this.av].toolbarId).style.marginLeft = b + "px", document.getElementById(this.vs[this.av].toolbarId).style.marginRight = b + "px", document.getElementById(this.vs[this.av].toolbarId).style.marginTop = c + "px", document.getElementById(this.vs[this.av].toolbarId).style.marginBottom = e + "px", this.vs[this.av].toolbarHeight = this.vs[this.av].toolbar.cont.offsetHeight + c + e, this._doOnAttachToolbar && this._doOnAttachToolbar("show"), f = !0)
            }
        }, this.obj._attachContent = function(a, b, c) {
            if (c !== !0)
                for (this.vs[this.av]._frame && (this._detachURLEvents(), this.vs[this.av]._frame = null); this.vs[this.av].dhxcont.mainCont[this.av].childNodes.length > 0;) this.vs[this.av].dhxcont.mainCont[this.av].removeChild(this.vs[this.av].dhxcont.mainCont[this.av].childNodes[0]);
            if ("url" == a) {
                this._isWindow && null == b.cmp && "dhx_skyblue" == this.skin && (this.vs[this.av].dhxcont.mainCont[this.av].style.border = "#a4bed4 1px solid", this._redraw());
                var d = document.createElement("IFRAME");
                d.frameBorder = 0, d.border = 0, d.style.width = "100%", d.style.height = "100%", d.setAttribute("src", "javascript:false;"), this.vs[this.av].dhxcont.mainCont[this.av].appendChild(d), d.src = b, this.vs[this.av]._frame = d, this._attachURLEvents()
            } else if ("urlajax" == a) {
                this._isWindow && null == b.cmp && "dhx_skyblue" == this.skin && (this.vs[this.av].dhxcont.mainCont[this.av].style.border = "#a4bed4 1px solid", this.vs[this.av].dhxcont.mainCont[this.av].style.backgroundColor = "#FFFFFF", this._redraw());
                var e = this,
                    f = String(this.av).valueOf(),
                    g = function() {
                        var a = e.av;
                        e.av = f, e.attachHTMLString(this.xmlDoc.responseText, this), e.av = a, e._doOnFrameContentLoaded && e._doOnFrameContentLoaded(), this.destructor()
                    },
                    h = new dtmlXMLLoaderObject(g, window);
                h.dhxWindowObject = this, h.loadXML(b)
            } else "obj" == a ? (this._isWindow && null == b.cmp && "dhx_skyblue" == this.skin && (this.vs[this.av].dhxcont.mainCont[this.av].style.border = "#a4bed4 1px solid", this.vs[this.av].dhxcont.mainCont[this.av].style.backgroundColor = "#FFFFFF", this._redraw()), this.vs[this.av].dhxcont._frame = null, this.vs[this.av].dhxcont.mainCont[this.av].appendChild(b), this.vs[this.av].dhxcont.mainCont[this.av].style.overflow = c === !0 ? "auto" : "hidden", b.style.display = "") : "str" == a && (this._isWindow && null == b.cmp && "dhx_skyblue" == this.skin && (this.vs[this.av].dhxcont.mainCont[this.av].style.border = "#a4bed4 1px solid", this.vs[this.av].dhxcont.mainCont[this.av].style.backgroundColor = "#FFFFFF", this._redraw()), this.vs[this.av].dhxcont._frame = null, this.vs[this.av].dhxcont.mainCont[this.av].innerHTML = b)
        }, this.obj._attachURLEvents = function() {
            var a = this,
                b = this.vs[this.av]._frame;
            _isIE ? b.onreadystatechange = function() {
                if ("complete" == b.readyState) {
                    try {
                        b.contentWindow.document.body.onmousedown = function() {
                            a._doOnFrameMouseDown && a._doOnFrameMouseDown()
                        }
                    } catch (a) {}
                    try {
                        a._doOnFrameContentLoaded && a._doOnFrameContentLoaded()
                    } catch (a) {}
                }
            } : b.onload = function() {
                try {
                    b.contentWindow.onmousedown = function() {
                        a._doOnFrameMouseDown && a._doOnFrameMouseDown()
                    }
                } catch (a) {}
                try {
                    a._doOnFrameContentLoaded && a._doOnFrameContentLoaded()
                } catch (a) {}
            }
        }, this.obj._detachURLEvents = function() {
            if (_isIE) try {
                this.vs[this.av]._frame.onreadystatechange = null, this.vs[this.av]._frame.contentWindow.document.body.onmousedown = null, this.vs[this.av]._frame.onload = null
            } catch (a) {} else try {
                this.vs[this.av]._frame.contentWindow.onmousedown = null, this.vs[this.av]._frame.onload = null
            } catch (a) {}
        }, this.obj.showMenu = function() {
            this.vs[this.av].menu && this.vs[this.av].menuId && "none" == document.getElementById(this.vs[this.av].menuId).style.display && (this.vs[this.av].menuHidden = !1, this._doOnAttachMenu && this._doOnAttachMenu("show"), document.getElementById(this.vs[this.av].menuId).style.display = "", this._viewRestore())
        }, this.obj.hideMenu = function() {
            this.vs[this.av].menu && this.vs[this.av].menuId && "none" != document.getElementById(this.vs[this.av].menuId).style.display && (document.getElementById(this.vs[this.av].menuId).style.display = "none", this.vs[this.av].menuHidden = !0, this._doOnAttachMenu && this._doOnAttachMenu("hide"), this._viewRestore())
        }, this.obj.showToolbar = function() {
            this.vs[this.av].toolbar && this.vs[this.av].toolbarId && "none" == document.getElementById(this.vs[this.av].toolbarId).style.display && (this.vs[this.av].toolbarHidden = !1, this._doOnAttachToolbar && this._doOnAttachToolbar("show"), document.getElementById(this.vs[this.av].toolbarId).style.display = "", this._viewRestore())
        }, this.obj.hideToolbar = function() {
            this.vs[this.av].toolbar && this.vs[this.av].toolbarId && "none" != document.getElementById(this.vs[this.av].toolbarId).style.display && (this.vs[this.av].toolbarHidden = !0, document.getElementById(this.vs[this.av].toolbarId).style.display = "none", this._doOnAttachToolbar && this._doOnAttachToolbar("hide"), this._viewRestore())
        }, this.obj.showStatusBar = function() {
            this.vs[this.av].sb && this.vs[this.av].sbId && "none" == document.getElementById(this.vs[this.av].sbId).style.display && (this.vs[this.av].sbHidden = !1, this._doOnAttachStatusBar && this._doOnAttachStatusBar("show"), document.getElementById(this.vs[this.av].sbId).style.display = "", this._viewRestore())
        }, this.obj.hideStatusBar = function() {
            this.vs[this.av].sb && this.vs[this.av].sbId && "none" != document.getElementById(this.vs[this.av].sbId).style.display && (this.vs[this.av].sbHidden = !0, document.getElementById(this.vs[this.av].sbId).style.display = "none", this._doOnAttachStatusBar && this._doOnAttachStatusBar("hide"), this._viewRestore())
        }, this.obj._dhxContDestruct = function() {
            var a;
            this.av;
            for (a in this.vs) this.av = a, this.detachMenu(!0), this.detachToolbar(!0), this.detachStatusBar(!0), this.detachObject(!0), this.vs[a].dhxcont.mainCont[a] = null;
            for (a in this.vs) this.vs[a].dhxcont.mainCont = null, this.vs[a].dhxcont.innerHTML = "", this.vs[a].dhxcont = null, this.vs[a] = null;
            if (this.setActive = this.getView = this.getFrame = this._getSt = this._dhxContDestruct = this._genStr = this._init = this._setPadding = this._viewRestore = this._detachURLEvents = this._attachURLEvents = this._attachContent = this.updateNestedObjects = this.hideCoverBlocker = this.showCoverBlocker = this.coverBlocker = this.adjustContent = this.moveContentTo = this.setMinContentSize = this.adjust = this.show = this.view = this.attachMap = this.attachURL = this.attachHTMLString = this.appendObject = this.detachObject = this.attachObject = this.attachEditor = this.attachLayout = this.attachAccordion = this.attachFolders = this.attachTabbar = this.attachTree = this.attachScheduler = this.attachGrid = this.hideStatusBar = this.hideToolbar = this.hideMenu = this.showStatusBar = this.showToolbar = this.showMenu = this.detachStatusBar = this.detachToolbar = this.detachMenu = this.attachStatusBar = this.attachToolbar = this.attachMenu = this.vs = null, b.st.innerHTML = "", b.st.parentNode.removeChild(b.st), b.st = null, b.setContent = null, b.dhxcont = null, b = b.obj = null, dhtmlx.detaches)
                for (a in dhtmlx.detaches) dhtmlx.detaches[a](this)
        }, dhtmlx.attaches)
        for (var c in dhtmlx.attaches) this.obj[c] = dhtmlx.attaches[c];
    return this
}

function dhtmlXCalendarObject(a, b) {
    this.i = {}, this.uid = function() {
        return this.uidd || (this.uidd = (new Date).getTime()), this.uidd++
    };
    var c = null,
        d = "string" == typeof a ? document.getElementById(a) : a;
    d && "object" == typeof d && d.tagName && "input" != String(d.tagName).toLowerCase() && (c = d), d = null, "object" == typeof a && a.length || (a = [a]);
    for (var e = 0; e < a.length; e++) "string" == typeof a[e] && (a[e] = document.getElementById(a[e]) || null), null != a[e] && a[e].tagName && "input" == String(a[e].tagName).toLowerCase() ? this.i[this.uid()] = {
        input: a[e]
    } : a[e] instanceof Array || !(a[e] instanceof Object) || null == a[e].input && null == a[e].button || (null != a[e].input && "string" == typeof a[e].input && (a[e].input = document.getElementById(a[e].input)), null != a[e].button && "string" == typeof a[e].button && (a[e].button = document.getElementById(a[e].button)), this.i[this.uid()] = a[e]), a[e] = null;
    this.skinDetect = function() {
        var a = document.createElement("DIV");
        a.className = "dhtmlxcalendar_skin_detect", document.body.firstChild ? document.body.insertBefore(a, document.body.firstChild) : document.body.appendChild(a);
        var b = a.offsetWidth;
        return a.parentNode.removeChild(a), a = null, {
            10: "dhx_skyblue",
            20: "dhx_web",
            30: "dhx_terrace",
            40: "dhx_blue",
            50: "dhx_black",
            60: "omega"
        }[b] || null
    }, this.skin = null != b ? b : "undefined" != typeof dhtmlx && "string" == typeof dhtmlx.skin ? dhtmlx.skin : this.skinDetect() || "dhx_skyblue", this.setSkin = function(a, b) {
        (this.skin != a || b) && (this.skin = a, this.base.className = "dhtmlxcalendar_container dhtmlxcalendar_skin_" + this.skin, this._ifrSize())
    }, this.base = document.createElement("DIV"), this.base.className = "dhtmlxcalendar_container", this.base.style.display = "none", this.base.appendChild(document.createElement("DIV")), null != c ? (this._hasParent = !0, c.appendChild(this.base), c = null) : document.body.appendChild(this.base), this.setParent = function(a) {
        this._hasParent && ("object" == typeof a ? a.appendChild(this.base) : "string" == typeof a && document.getElementById(a).appendChild(this.base))
    }, this.setSkin(this.skin, !0), this.base.onclick = function(a) {
        a = a || event, a.cancelBubble = !0
    }, this.base.onmousedown = function() {
        return !1
    }, this.loadUserLanguage = function(a) {
        if (this.langData[a] && (this.lang = a, this.setWeekStartDay(this.langData[this.lang].weekstart), this.setDateFormat(this.langData[this.lang].dateformat || "%Y-%m-%d"), this.msCont))
            for (var b = 0, c = 0; c < this.msCont.childNodes.length; c++)
                for (var d = 0; d < this.msCont.childNodes[c].childNodes.length; d++) this.msCont.childNodes[c].childNodes[d].innerHTML = this.langData[this.lang].monthesSNames[b++]
    }, this.contMonth = document.createElement("DIV"), this.contMonth.className = "dhtmlxcalendar_month_cont", this.contMonth.onselectstart = function(a) {
        return a = a || event, a.cancelBubble = !0, a.returnValue = !1
    }, this.base.firstChild.appendChild(this.contMonth);
    var f = document.createElement("UL");
    f.className = "dhtmlxcalendar_line", this.contMonth.appendChild(f);
    var g = document.createElement("LI");
    g.className = "dhtmlxcalendar_cell dhtmlxcalendar_month_hdr", g.innerHTML = "<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span class='dhtmlxcalendar_month_label_month'>Month</span><span class='dhtmlxcalendar_month_label_year'>Year</span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>", f.appendChild(g);
    var h = this;
    for (g.onclick = function(a) {
            var a = a || event,
                b = a.target || a.srcElement;
            if (b.className && 0 === b.className.indexOf("dhtmlxcalendar_month_arrow")) {
                h._hideSelector();
                var c = b.parentNode.firstChild == b ? -1 : 1,
                    d = new Date(h._activeMonth);
                h._drawMonth(new Date(h._activeMonth.getFullYear(), h._activeMonth.getMonth() + c, 1, 0, 0, 0, 0)), h.callEvent("onArrowClick", [d, new Date(h._activeMonth)])
            } else b.className && "dhtmlxcalendar_month_label_month" == b.className ? (a.cancelBubble = !0, h._showSelector("month", 31, 21, "selector_month", !0)) : b.className && "dhtmlxcalendar_month_label_year" == b.className ? (a.cancelBubble = !0, h._showSelector("year", 42, 21, "selector_year", !0)) : h._hideSelector()
        }, this.contDays = document.createElement("DIV"), this.contDays.className = "dhtmlxcalendar_days_cont", this.base.firstChild.appendChild(this.contDays), this.setWeekStartDay = function(a) {
            0 == a && (a = 7), this._wStart = Math.min(Math.max(isNaN(a) ? 1 : a, 1), 7), this._drawDaysOfWeek()
        }, this._drawDaysOfWeek = function() {
            if (0 == this.contDays.childNodes.length) {
                var a = document.createElement("UL");
                a.className = "dhtmlxcalendar_line", this.contDays.appendChild(a)
            } else a = this.contDays.firstChild;
            var b = this._wStart,
                c = this.langData[this.lang].daysSNames;
            c.push(String(this.langData[this.lang].daysSNames[0]).valueOf());
            for (var d = 0; d < 8; d++) {
                if (null == a.childNodes[d]) {
                    var e = document.createElement("LI");
                    a.appendChild(e)
                } else e = a.childNodes[d];
                0 == d ? (e.className = "dhtmlxcalendar_cell_wn", e.innerHTML = "<div class='dhtmlxcalendar_label'>" + (this.langData[this.lang].weekname || "w") + "</div>") : (e.className = "dhtmlxcalendar_cell" + (b >= 6 ? " dhtmlxcalendar_day_weekday_cell" : "") + (1 == d ? "_first" : ""), e.innerHTML = c[b], ++b > 7 && (b = 1))
            }
            null != this._activeMonth && this._drawMonth(this._activeMonth)
        }, this._wStart = this.langData[this.lang].weekstart, this.setWeekStartDay(this._wStart), this.contDates = document.createElement("DIV"), this.contDates.className = "dhtmlxcalendar_dates_cont", this.base.firstChild.appendChild(this.contDates), this.contDates.onclick = function(a) {
            var a = a || event,
                b = a.target || a.srcElement;
            if (null != b.parentNode && null != b.parentNode._date && (b = b.parentNode), null != b._date && !b._css_dis) {
                var c = h._activeDate.getHours(),
                    d = h._activeDate.getMinutes(),
                    e = b._date;
                if (!h.checkEvent("onBeforeChange") || h.callEvent("onBeforeChange", [new Date(b._date.getFullYear(), b._date.getMonth(), b._date.getDate(), c, d)])) {
                    null != h._activeDateCell && (h._activeDateCell._css_date = !1, h._updateCellStyle(h._activeDateCell._q, h._activeDateCell._w));
                    var f = h._activeDate.getFullYear() + "_" + h._activeDate.getMonth() != e.getFullYear() + "_" + e.getMonth();
                    h._nullDate = !1, h._activeDate = new Date(e.getFullYear(), e.getMonth(), e.getDate(), c, d), h._activeDateCell = b, h._activeDateCell._css_date = !0, h._activeDateCell._css_hover = !1, h._updateCellStyle(h._activeDateCell._q, h._activeDateCell._w), f && h._drawMonth(h._activeDate), h._activeInp && h.i[h._activeInp] && null != h.i[h._activeInp].input && (h.i[h._activeInp].input.value = h._dateToStr(new Date(h._activeDate.getTime()))), h._hasParent || h._hide(), h.callEvent("onClick", [new Date(h._activeDate.getTime())])
                }
            }
        }, this.contDates.onmouseover = function(a) {
            var a = a || event,
                b = a.target || a.srcElement;
            null != b.parentNode && null != b.parentNode._date && (b = b.parentNode), null == b._date || h._lastHover == b || b._css_hover || (b._css_hover = !0, h._updateCellStyle(b._q, b._w), h._lastHover = b, h.callEvent("onMouseOver", [new Date(b._date.getFullYear(), b._date.getMonth(), b._date.getDate(), 0, 0, 0, 0), a]), b = null)
        }, this.contDates.onmouseout = function(a) {
            h._clearDayHover(a || event)
        }, this._lastHover = null, this._clearDayHover = function(a) {
            this._lastHover && (this._lastHover._css_hover = !1, this._updateCellStyle(this._lastHover._q, this._lastHover._w), h.callEvent("onMouseOut", [new Date(this._lastHover._date.getFullYear(), this._lastHover._date.getMonth(), this._lastHover._date.getDate(), 0, 0, 0, 0), a]), this._lastHover = null)
        }, e = 0; e < 6; e++) {
        f = document.createElement("UL"), f.className = "dhtmlxcalendar_line", this.contDates.appendChild(f);
        for (var i = 0; i <= 7; i++) g = document.createElement("LI"), g.className = 0 == i ? "dhtmlxcalendar_cell_wn" : "dhtmlxcalendar_cell", f.appendChild(g)
    }
    this.contTime = document.createElement("DIV"), this.contTime.className = "dhtmlxcalendar_time_cont", this.base.firstChild.appendChild(this.contTime);
    var j = document.createElement("DIV");
    j.className = "dhtmlxcalendar_bottom", this.base.firstChild.appendChild(j), j = null, this.showTime = function() {
            this.contTime.style.display = "", this._ifrSize()
        }, this.hideTime = function() {
            this.contTime.style.display = "none", this._ifrSize()
        }, f = document.createElement("UL"), f.className = "dhtmlxcalendar_line", this.contTime.appendChild(f), g = document.createElement("LI"), g.className = "dhtmlxcalendar_cell dhtmlxcalendar_time_hdr", g.innerHTML = "<div class='dhtmlxcalendar_time_label'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'>:</span><span class='dhtmlxcalendar_label_minutes'></span>",
        f.appendChild(g), g.onclick = function(a) {
            var a = a || event,
                b = a.target || a.srcElement;
            if (null != b.tagName && "span" == b.tagName.toLowerCase() && 1 == b._par && null != b.parentNode && (b = b.parentNode), b.className && "dhtmlxcalendar_label_hours" == b.className) a.cancelBubble = !0, h._showSelector("hours", 3, 115, "selector_hours", !0);
            else if (b.className && "dhtmlxcalendar_label_minutes" == b.className) {
                a.cancelBubble = !0;
                var c = 59,
                    d = 115;
                if (1 == h._minutesInterval) {
                    var e = h.getFormatedDate("%i");
                    b.innerHTML = "<span class='dhtmlxcalendar_selected_date'>" + e.charAt(0) + "</span>" + e.charAt(1), b.firstChild._par = !0, h._selectorMode = 1, d = 149
                }
                10 == h._minutesInterval && (d = 149), 15 == h._minutesInterval && (c = 46, d = 165), h._showSelector("minutes", c, d, "selector_minutes", !0)
            } else h._hideSelector()
        }, this._activeMonth = null, this._activeDate = new Date, this._activeDateCell = null, this.setDate = function(a) {
            this._nullDate = "undefined" == typeof a || "" === a || !a, a instanceof Date || (a = this._strToDate(String(a || "")), "Invalid Date" == a && (a = new Date));
            var b = a.getTime();
            this._isOutOfRange(b) || (this._activeDate = new Date(b), this._drawMonth(this._nullDate ? new Date : this._activeDate), this._updateVisibleHours(), this._updateVisibleMinutes())
        }, this.getDate = function(a) {
            if (this._nullDate) return null;
            var b = new Date(this._activeDate.getTime());
            return a ? this._dateToStr(b) : b
        }, this._drawMonth = function(a) {
            if (a instanceof Date) {
                isNaN(a.getFullYear()) && (a = new Date(this._activeMonth.getFullYear(), this._activeMonth.getMonth(), 1, 0, 0, 0, 0)), this._activeMonth = new Date(a.getFullYear(), a.getMonth(), 1, 0, 0, 0, 0), this._activeDateCell = null;
                var b = new Date(this._activeMonth.getTime()),
                    c = b.getDay(),
                    d = c - this._wStart;
                d < 0 && (d += 7), b.setDate(b.getDate() - d);
                for (var e = a.getMonth(), f = new Date(this._activeDate.getFullYear(), this._activeDate.getMonth(), this._activeDate.getDate(), 0, 0, 0, 0).getTime(), g = 0, h = 0; h < 6; h++)
                    for (var i = this._wStart, j = 0; j <= 7; j++)
                        if (0 == j) {
                            var k = this.getWeekNumber(new Date(b.getFullYear(), b.getMonth(), b.getDate() + g, 0, 0, 0, 0));
                            this.contDates.childNodes[h].childNodes[j].innerHTML = "<div class='dhtmlxcalendar_label'>" + k + "</div>"
                        } else {
                            var l = new Date(b.getFullYear(), b.getMonth(), b.getDate() + g, 0, 0, 0, 0),
                                m = (l.getDay(), l.getTime()),
                                n = "dhtmlxcalendar_label";
                            null != this._tipData[m] ? (this._tipData[m].usePopup && "function" == typeof window.dhtmlXPopup ? (this.contDates.childNodes[h].childNodes[j].removeAttribute("title"), this._initTooltipPopup()) : this.contDates.childNodes[h].childNodes[j].setAttribute("title", this._tipData[m].text), this._tipData[m].showIcon && (n += " dhtmlxcalendar_label_title")) : this.contDates.childNodes[h].childNodes[j].removeAttribute("title"), this.contDates.childNodes[h].childNodes[j].innerHTML = "<div class='" + n + "'>" + l.getDate() + "</div>", this.contDates.childNodes[h].childNodes[j]._date = new Date(m), this.contDates.childNodes[h].childNodes[j]._q = h, this.contDates.childNodes[h].childNodes[j]._w = j, this.contDates.childNodes[h].childNodes[j]._css_month = l.getMonth() == e, this.contDates.childNodes[h].childNodes[j]._css_date = !this._nullDate && m == f, this.contDates.childNodes[h].childNodes[j]._css_weekend = i >= 6, this.contDates.childNodes[h].childNodes[j]._css_dis = this._isOutOfRange(m), this.contDates.childNodes[h].childNodes[j]._css_holiday = 1 == this._holidays[m], this._updateCellStyle(h, j), m == f && (this._activeDateCell = this.contDates.childNodes[h].childNodes[j]), ++i > 7 && (i = 1), g++
                        }
                this.contMonth.firstChild.firstChild.childNodes[1].innerHTML = this.langData[this.lang].monthesFNames[a.getMonth()], this.contMonth.firstChild.firstChild.childNodes[2].innerHTML = a.getFullYear()
            }
        }, this._updateCellStyle = function(a, b) {
            var c = this.contDates.childNodes[a].childNodes[b],
                d = "dhtmlxcalendar_cell dhtmlxcalendar_cell";
            d += c._css_month ? "_month" : "", d += c._css_date ? "_date" : "", d += c._css_weekend ? "_weekend" : "", d += c._css_holiday ? "_holiday" : "", d += c._css_dis ? "_dis" : "", d += c._css_hover && !c._css_dis ? "_hover" : "", c.className = d, c = null
        }, this._minutesInterval = 5, this._initSelector = function(a, b) {
            if (this._selCover || (this._selCover = document.createElement("DIV"), this._selCover.className = "dhtmlxcalendar_selector_cover", this.base.firstChild.appendChild(this._selCover)), this._sel || (this._sel = document.createElement("DIV"), this._sel.className = "dhtmlxcalendar_selector_obj", this.base.firstChild.appendChild(this._sel), this._sel.appendChild(document.createElement("TABLE")), this._sel.firstChild.className = "dhtmlxcalendar_selector_table", this._sel.firstChild.cellSpacing = 0, this._sel.firstChild.cellPadding = 0, this._sel.firstChild.border = 0, this._sel.firstChild.appendChild(document.createElement("TBODY")), this._sel.firstChild.firstChild.appendChild(document.createElement("TR")), this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")), this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")), this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")), this._sel.firstChild.firstChild.firstChild.childNodes[0].className = "dhtmlxcalendar_selector_cell_left", this._sel.firstChild.firstChild.firstChild.childNodes[1].className = "dhtmlxcalendar_selector_cell_middle", this._sel.firstChild.firstChild.firstChild.childNodes[2].className = "dhtmlxcalendar_selector_cell_right", this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML = "&nbsp;", this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML = "&nbsp;", this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover = function() {
                    this.className = "dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"
                }, this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout = function() {
                    this.className = "dhtmlxcalendar_selector_cell_left"
                }, this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover = function() {
                    this.className = "dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"
                }, this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout = function() {
                    this.className = "dhtmlxcalendar_selector_cell_right"
                }, this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick = function(a) {
                    a = a || event, a.cancelBubble = !0, h._scrollYears(-1)
                }, this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick = function(a) {
                    a = a || event, a.cancelBubble = !0, h._scrollYears(1)
                }, this._sel._ta = {}, this._selHover = null, this._sel.onmouseover = function(a) {
                    var a = a || event,
                        b = a.target || a.srcElement;
                    b._cell === !0 && (h._selHover != b && h._clearSelHover(), null != String(b.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)) && (b.className += " dhtmlxcalendar_selector_cell_hover", h._selHover = b)
                }, this._sel.onmouseout = function() {
                    h._clearSelHover()
                }, this._sel.appendChild(document.createElement("DIV")), this._sel.lastChild.className = "dhtmlxcalendar_selector_obj_arrow"), 1 != this._sel._ta[a]) {
                if ("month" == a) {
                    this._msCells = {}, this.msCont = document.createElement("DIV"), this.msCont.className = "dhtmlxcalendar_area_" + b, this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);
                    for (var c = 0, d = 0; d < 4; d++) {
                        var e = document.createElement("UL");
                        e.className = "dhtmlxcalendar_selector_line", this.msCont.appendChild(e);
                        for (var f = 0; f < 3; f++) {
                            var g = document.createElement("LI");
                            g.innerHTML = this.langData[this.lang].monthesSNames[c], g.className = "dhtmlxcalendar_selector_cell", e.appendChild(g), g._month = c, g._cell = !0, this._msCells[c++] = g
                        }
                    }
                    this.msCont.onclick = function(a) {
                        a = a || event, a.cancelBubble = !0;
                        var b = a.target || a.srcElement;
                        null != b._month && (h._hideSelector(), h._updateActiveMonth(), h._drawMonth(new Date(h._activeMonth.getFullYear(), b._month, 1, 0, 0, 0, 0)), h._doOnSelectorChange())
                    }
                }
                if ("year" == a) {
                    for (this._ysCells = {}, this.ysCont = document.createElement("DIV"), this.ysCont.className = "dhtmlxcalendar_area_" + b, this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont), d = 0; d < 4; d++)
                        for (e = document.createElement("UL"), e.className = "dhtmlxcalendar_selector_line", this.ysCont.appendChild(e), f = 0; f < 3; f++) g = document.createElement("LI"), g.className = "dhtmlxcalendar_selector_cell", g._cell = !0, e.appendChild(g);
                    this.ysCont.onclick = function(a) {
                        a = a || event, a.cancelBubble = !0;
                        var b = a.target || a.srcElement;
                        null != b._year && (h._hideSelector(), h._drawMonth(new Date(b._year, h._activeMonth.getMonth(), 1, 0, 0, 0, 0)), h._doOnSelectorChange())
                    }
                }
                if ("hours" == a) {
                    for (this._hsCells = {}, this.hsCont = document.createElement("DIV"), this.hsCont.className = "dhtmlxcalendar_area_" + b, this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont), d = c = 0; d < 4; d++)
                        for (e = document.createElement("UL"), e.className = "dhtmlxcalendar_selector_line", this.hsCont.appendChild(e), f = 0; f < 6; f++) g = document.createElement("LI"), g.innerHTML = this._fixLength(c, 2), g.className = "dhtmlxcalendar_selector_cell", e.appendChild(g), g._hours = c, g._cell = !0, this._hsCells[c++] = g;
                    this.hsCont.onclick = function(a) {
                        a = a || event, a.cancelBubble = !0;
                        var b = a.target || a.srcElement;
                        null != b._hours && (h._hideSelector(), h._activeDate.setHours(b._hours), h._updateActiveHours(), h._updateVisibleHours(), h._doOnSelectorChange())
                    }
                }
                if ("minutes" == a) {
                    var i = 4,
                        j = 3,
                        k = 2;
                    for (1 == this._minutesInterval && (1 == this._selectorMode ? (i = 2, j = 3, k = 1) : (i = 2, j = 5, k = 1, b += "5")), 10 == this._minutesInterval && (i = 2), 15 == this._minutesInterval && (i = 1, j = 4, b += "4"), this._rsCells = {}, this.rsCont = document.createElement("DIV"), this.rsCont.className = "dhtmlxcalendar_area_" + b, this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont), d = c = 0; d < i; d++)
                        for (e = document.createElement("UL"), e.className = "dhtmlxcalendar_selector_line", this.rsCont.appendChild(e), f = 0; f < j; f++) g = document.createElement("LI"), g.innerHTML = k > 1 ? this._fixLength(c, k) : c, g.className = "dhtmlxcalendar_selector_cell", e.appendChild(g), g._minutes = c, g._cell = !0, this._rsCells[c] = g, c += this._minutesInterval;
                    this.rsCont.onclick = function(a) {
                        a = a || event, a.cancelBubble = !0;
                        var b = a.target || a.srcElement;
                        if (null != b._minutes) {
                            if (1 == h._minutesInterval) {
                                var c = h.getFormatedDate("%i"),
                                    c = 1 == h._selectorMode ? b._minutes.toString() + c.charAt(1) : c.charAt(0) + b._minutes.toString();
                                if (h._activeDate.setMinutes(Number(c)), h._hideSelector(), 1 == h._selectorMode) return h._updateVisibleMinutes(!0), h._selectorMode = 2, h._showSelector("minutes", 32, 149, "selector_minutes", !0), void h._updateActiveMinutes();
                                h._selectorMode = 1
                            } else h._hideSelector(), h._activeDate.setMinutes(b._minutes), h._updateActiveMinutes();
                            h._updateVisibleMinutes(), h._doOnSelectorChange()
                        }
                    }
                }
                this._sel._ta[a] = !0
            }
        }, this._showSelector = function(a, b, c, d, e) {
            e === !0 && null != this._sel && this._isSelectorVisible() && a == this._sel._t ? this._hideSelector() : ("dhx_terrace" == this.skin && (b += {
                month: 14,
                year: 27,
                hours: 19,
                minutes: 24
            }[a], c += {
                month: 8,
                year: 8,
                hours: 14,
                minutes: 14
            }[a]), (!this._sel || !this._sel._ta[a]) && this._initSelector(a, d), this._selCover.style.display = "", this._sel._t = a, this._sel.style.left = b + "px", this._sel.style.top = c + "px", this._sel.style.display = "", this._sel.className = "dhtmlxcalendar_selector_obj dhtmlxcalendar_" + d, this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display = this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display = "year" == a ? "" : "none", this._sel.childNodes[1].style.width = this._sel.childNodes[0].offsetWidth + "px", this._doOnSelectorShow(a))
        }, this._doOnSelectorShow = function(a) {
            "month" == a && this._updateActiveMonth(), "year" == a && this._updateYearsList(this._activeMonth), "hours" == a && this._updateActiveHours(), "minutes" == a && this._updateActiveMinutes()
        }, this._hideSelector = function() {
            this._sel && (this._sel.style.display = "none", this._selCover.style.display = "none", "minutes" == this._sel._t && 1 == this._minutesInterval) && (this.contTime.firstChild.firstChild.childNodes[3].innerHTML = this.getFormatedDate("%i"), this._unloadSelector("minutes"))
        }, this._isSelectorVisible = function() {
            return !!this._sel && "none" != this._sel.style.display
        }, this._doOnSelectorChange = function(a) {
            this.callEvent("onChange", [new Date(this._activeMonth.getFullYear(), this._activeMonth.getMonth(), this._activeDate.getDate(), this._activeDate.getHours(), this._activeDate.getMinutes(), this._activeDate.getSeconds()), a === !0])
        }, this._clearSelHover = function() {
            this._selHover && (this._selHover.className = String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi, "")), this._selHover = null)
        }, this._unloadSelector = function(a) {
            if (this._sel && this._sel._ta[a]) {
                if ("month" == a) {
                    this._msActive = this.msCont.onclick = null;
                    for (var b in this._msCells) this._msCells[b]._cell = null, this._msCells[b]._month = null, this._msCells[b].parentNode.removeChild(this._msCells[b]), this._msCells[b] = null;
                    for (this._msCells = null; this.msCont.childNodes.length > 0;) this.msCont.removeChild(this.msCont.lastChild);
                    this.msCont.parentNode.removeChild(this.msCont), this.msCont = null
                }
                if ("year" == a) {
                    this.ysCont.onclick = null;
                    for (b in this._ysCells) this._ysCells[b]._cell = null, this._ysCells[b]._year = null, this._ysCells[b].parentNode.removeChild(this._ysCells[b]), this._ysCells[b] = null;
                    for (this._ysCells = null; this.ysCont.childNodes.length > 0;) this.ysCont.removeChild(this.ysCont.lastChild);
                    this.ysCont.parentNode.removeChild(this.ysCont), this.ysCont = null
                }
                if ("hours" == a) {
                    this._hsActive = this.hsCont.onclick = null;
                    for (b in this._hsCells) this._hsCells[b]._cell = null, this._hsCells[b]._hours = null, this._hsCells[b].parentNode.removeChild(this._hsCells[b]), this._hsCells[b] = null;
                    for (this._hsCells = null; this.hsCont.childNodes.length > 0;) this.hsCont.removeChild(this.hsCont.lastChild);
                    this.hsCont.parentNode.removeChild(this.hsCont), this.hsCont = null
                }
                if ("minutes" == a) {
                    this._rsActive = this.rsCont.onclick = null;
                    for (b in this._rsCells) this._rsCells[b]._cell = null, this._rsCells[b]._minutes = null, this._rsCells[b].parentNode.removeChild(this._rsCells[b]), this._rsCells[b] = null;
                    for (this._rsCells = null; this.rsCont.childNodes.length > 0;) this.rsCont.removeChild(this.rsCont.lastChild);
                    this.rsCont.parentNode.removeChild(this.rsCont), this.rsCont = null
                }
                this._sel._ta[a] = null
            }
        }, this.setMinutesInterval = function(a) {
            1 != a && 5 != a && 10 != a && 15 != a || (this._minutesInterval = a, this._unloadSelector("minutes"))
        }, this._updateActiveMonth = function() {
            "undefined" != typeof this._msActive && "undefined" != typeof this._msCells[this._msActive] && (this._msCells[this._msActive].className = "dhtmlxcalendar_selector_cell"), this._msActive = this._activeMonth.getMonth(), this._msCells[this._msActive].className = "dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"
        }, this._updateActiveYear = function() {
            var a = this._activeMonth.getFullYear();
            this._ysCells[a] && (this._ysCells[a].className = "dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")
        }, this._updateYearsList = function(a) {
            for (var b in this._ysCells) this._ysCells[b] = null, delete this._ysCells[b];
            for (var c = 12 * Math.floor(a.getFullYear() / 12), d = 0; d < 4; d++)
                for (var e = 0; e < 3; e++) this.ysCont.childNodes[d].childNodes[e].innerHTML = c, this.ysCont.childNodes[d].childNodes[e]._year = c, this.ysCont.childNodes[d].childNodes[e].className = "dhtmlxcalendar_selector_cell", this._ysCells[c++] = this.ysCont.childNodes[d].childNodes[e];
            this._updateActiveYear()
        }, this._scrollYears = function(a) {
            var b = (a < 0 ? this.ysCont.firstChild.firstChild._year : this.ysCont.lastChild.lastChild._year) + a,
                c = new Date(b, this._activeMonth.getMonth(), 1, 0, 0, 0, 0);
            this._updateYearsList(c)
        }, this._updateActiveHours = function() {
            "undefined" != typeof this._hsActive && "undefined" != typeof this._hsCells[this._hsActive] && (this._hsCells[this._hsActive].className = "dhtmlxcalendar_selector_cell"), this._hsActive = this._activeDate.getHours(), this._hsCells[this._hsActive].className = "dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"
        }, this._updateVisibleHours = function() {
            this.contTime.firstChild.firstChild.childNodes[1].innerHTML = this._fixLength(this._activeDate.getHours(), 2)
        }, this._updateActiveMinutes = function() {
            null != this._rsActive && "undefined" != typeof this._rsActive && "undefined" != typeof this._rsCells[this._rsActive] && (this._rsCells[this._rsActive].className = "dhtmlxcalendar_selector_cell"), this._rsActive = 1 == this._minutesInterval ? this.getFormatedDate("%i").toString().charAt(1 == this._selectorMode ? 0 : 1) : this._activeDate.getMinutes(), "undefined" != typeof this._rsCells[this._rsActive] && (this._rsCells[this._rsActive].className = "dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")
        }, this._updateVisibleMinutes = function(a) {
            var b = this._fixLength(this._activeDate.getMinutes(), 2).toString();
            1 == a && (b = b.charAt(0) + "<span class='dhtmlxcalendar_selected_date'>" + b.charAt(1) + "</span>"), this.contTime.firstChild.firstChild.childNodes[3].innerHTML = b, 1 == a && (this.contTime.firstChild.firstChild.childNodes[3].lastChild._par = !0)
        }, this._fixLength = function(a, b) {
            for (; String(a).length < b;) a = "0" + String(a);
            return a
        }, this._dateFormat = "", this._dateFormatRE = null, this.setDateFormat = function(a) {
            this._dateFormat = a, this._dateFormatRE = RegExp(String(this._dateFormat).replace(/%[a-zA-Z]+/g, function(a) {
                var b = a.replace(/%/, "");
                switch (b) {
                    case "n":
                    case "h":
                    case "j":
                    case "g":
                    case "G":
                        return "\\d{1,2}";
                    case "m":
                    case "d":
                    case "H":
                    case "i":
                    case "s":
                    case "y":
                        return "\\d{2}";
                    case "Y":
                        return "\\d{4}";
                    case "M":
                        return "(" + h.langData[h.lang].monthesSNames.join("|").toLowerCase() + "){1,}";
                    case "F":
                        return "(" + h.langData[h.lang].monthesFNames.join("|").toLowerCase() + "){1,}";
                    case "D":
                        return "[a-z]{2}";
                    case "a":
                    case "A":
                        return "AM|PM"
                }
                return a
            }), "i")
        }, this.setDateFormat(this.langData[this.lang].dateformat || "%Y-%m-%d"), this._getInd = function(a, b) {
            for (var c = 0; c < b.length; c++)
                if (b[c].toLowerCase() == a) return c;
            return -1
        }, this._strToDate = function(a, b) {
            var b = b || this._dateFormat,
                c = a.match(/[a-z0-9\u00e9\u00fb\u00e4\u0430-\u044F\u0451]{1,}/gi),
                d = b.match(/%[a-zA-Z]/g);
            if (!c || c.length != d.length) return "Invalid Date";
            for (var e = {
                    "%y": 1,
                    "%Y": 1,
                    "%n": 2,
                    "%m": 2,
                    "%M": 2,
                    "%F": 2,
                    "%d": 3,
                    "%j": 3,
                    "%a": 4,
                    "%A": 4,
                    "%H": 5,
                    "%G": 5,
                    "%h": 5,
                    "%g": 5,
                    "%i": 6,
                    "%s": 7
                }, f = {}, g = {}, i = 0; i < d.length; i++)
                if ("undefined" != typeof e[d[i]]) {
                    var j = e[d[i]];
                    f[j] || (f[j] = [], g[j] = []), f[j].push(c[i]), g[j].push(d[i])
                }
            for (c = [], d = [], i = 1; i <= 7; i++)
                if (null != f[i])
                    for (var k = 0; k < f[i].length; k++) c.push(f[i][k]), d.push(g[i][k]);
            var l = new Date;
            for (l.setDate(1), l.setMinutes(0), l.setSeconds(0), i = 0; i < c.length; i++) switch (d[i]) {
                case "%d":
                case "%j":
                case "%n":
                case "%m":
                case "%Y":
                case "%H":
                case "%G":
                case "%i":
                case "%s":
                    isNaN(c[i]) || l[{
                        "%d": "setDate",
                        "%j": "setDate",
                        "%n": "setMonth",
                        "%m": "setMonth",
                        "%Y": "setFullYear",
                        "%H": "setHours",
                        "%G": "setHours",
                        "%i": "setMinutes",
                        "%s": "setSeconds"
                    }[d[i]]](Number(c[i]) + ("%m" == d[i] || "%n" == d[i] ? -1 : 0));
                    break;
                case "%M":
                case "%F":
                    var m = this._getInd(c[i].toLowerCase(), h.langData[h.lang][{
                        "%M": "monthesSNames",
                        "%F": "monthesFNames"
                    }[d[i]]]);
                    m >= 0 && l.setMonth(m);
                    break;
                case "%y":
                    if (!isNaN(c[i])) {
                        var n = Number(c[i]);
                        l.setFullYear(n + (n > 50 ? 1900 : 2e3))
                    }
                    break;
                case "%g":
                case "%h":
                    isNaN(c[i]) || (n = Number(c[i]), n <= 12 && n >= 0 && l.setHours(n + (this._getInd("pm", c) >= 0 ? 12 == n ? 0 : 12 : 12 == n ? -12 : 0)))
            }
            return l
        }, this._dateToStr = function(a, b) {
            if (a instanceof Date) var c = function(a) {
                    return 1 == String(a).length ? "0" + String(a) : a
                },
                d = function(b) {
                    switch (b) {
                        case "%d":
                            return c(a.getDate());
                        case "%j":
                            return a.getDate();
                        case "%D":
                            return h.langData[h.lang].daysSNames[a.getDay()];
                        case "%l":
                            return h.langData[h.lang].daysFNames[a.getDay()];
                        case "%m":
                            return c(a.getMonth() + 1);
                        case "%n":
                            return a.getMonth() + 1;
                        case "%M":
                            return h.langData[h.lang].monthesSNames[a.getMonth()];
                        case "%F":
                            return h.langData[h.lang].monthesFNames[a.getMonth()];
                        case "%y":
                            return c(a.getYear() % 100);
                        case "%Y":
                            return a.getFullYear();
                        case "%g":
                            return (a.getHours() + 11) % 12 + 1;
                        case "%h":
                            return c((a.getHours() + 11) % 12 + 1);
                        case "%G":
                            return a.getHours();
                        case "%H":
                            return c(a.getHours());
                        case "%i":
                            return c(a.getMinutes());
                        case "%s":
                            return c(a.getSeconds());
                        case "%a":
                            return a.getHours() > 11 ? "pm" : "am";
                        case "%A":
                            return a.getHours() > 11 ? "PM" : "AM";
                        default:
                            return b
                    }
                },
                e = String(b || this._dateFormat).replace(/%[a-zA-Z]/g, d);
            return e || String(a)
        }, this._updateDateStr = function(a) {
            if (this._dateFormatRE && a.match(this._dateFormatRE) && a != this.getFormatedDate()) {
                var b = this._strToDate(a);
                b instanceof Date && (this.checkEvent("onBeforeChange") && !this.callEvent("onBeforeChange", [new Date(b.getFullYear(), b.getMonth(), b.getDate(), b.getHours(), b.getMinutes(), b.getSeconds())]) ? null != this.i && null != this._activeInp && null != this.i[this._activeInp] && null != this.i[this._activeInp].input && (this.i[this._activeInp].input.value = this.getFormatedDate()) : (this._nullDate = !1, this._activeDate = b, this._drawMonth(this._nullDate ? new Date : this._activeDate), this._updateVisibleMinutes(), this._updateVisibleHours(), this._sel && this._isSelectorVisible() && this._doOnSelectorShow(this._sel._t), this._doOnSelectorChange(!0)))
            }
        }, this.showMonth = function(a) {
            "string" == typeof a && (a = this._strToDate(a)), a instanceof Date && this._drawMonth(a)
        }, this.setFormatedDate = function(a, b, c, d) {
            var e = this._strToDate(b, a);
            return d ? e : void this.setDate(e)
        }, this.getFormatedDate = function(a, b) {
            if (!(b && b instanceof Date)) {
                if (this._nullDate) return "";
                b = new Date(this._activeDate)
            }
            return this._dateToStr(b, a)
        }, this.getWeekNumber = function(a) {
            if ("string" == typeof a && (a = this._strToDate(a)), !(a instanceof Date)) return "Invalid Date";
            "undefined" == typeof this._ftDay && (this._ftDay = 4);
            var b = this._wStart,
                c = 4,
                d = new Date(a.getFullYear(), 0, 1, 0, 0, 0, 0),
                e = d.getDay();
            0 == e && (e = 7), c < b && (c += 7, e += 7);
            var f = 0;
            e >= b && e <= c || (f = 1);
            var g = e - b,
                h = new Date(a.getFullYear(), 0, 1 - g + 7 * f, 0, 0, 0, 0),
                i = 6048e5,
                j = new Date(a.getFullYear(), a.getMonth(), a.getDate() + 1, 0, 0, 0, 0),
                k = Math.ceil((j.getTime() - h.getTime()) / i);
            return k
        }, this.showWeekNumbers = function() {
            this.base.firstChild.className = "dhtmlxcalendar_wn"
        }, this.hideWeekNumbers = function() {
            this.base.firstChild.className = ""
        }, this.show = function(a) {
            if (!a && this._hasParent) this._show();
            else if ("object" == typeof a && "undefined" != typeof a._dhtmlxcalendar_uid && this.i[a._dhtmlxcalendar_uid] == a) this._show(a._dhtmlxcalendar_uid);
            else {
                if ("undefined" == typeof a)
                    for (var b in this.i) a || (a = b);
                a && this._show(a)
            }
        }, this.hide = function() {
            this._isVisible() && this._hide()
        }, this.isVisible = function() {
            return this._isVisible()
        }, this.draw = function() {
            this.show()
        }, this.close = function() {
            this.hide()
        }, this._activeInp = null, this.pos = "bottom", this.setPosition = function(a, b) {
            this._py = this._px = null, "right" == a || "bottom" == a ? this.pos = a : (this.pos = "int", "undefined" == typeof a || isNaN(a) || (this.base.style.left = a + "px", this._px = a), "undefined" == typeof b || isNaN(b) || (this.base.style.top = b + "px", this._py = b), this._ifrSize())
        }, this._show = function(a, b) {
            if (b === !0 && this._activeInp == a && this._isVisible()) this._hide();
            else {
                if (this.base.style.visibility = "hidden", this.base.style.display = "", a) {
                    var c = this.i[a].input || this.i[a].button,
                        d = navigator.appVersion.indexOf("MSIE") != -1,
                        e = Math.max((d ? document.documentElement : document.getElementsByTagName("html")[0]).scrollTop, document.body.scrollTop),
                        f = e + (d ? Math.max(document.documentElement.clientHeight || 0, document.documentElement.offsetHeight || 0, document.body.clientHeight || 0) : window.innerHeight);
                    "right" == this.pos ? (this.base.style.left = this._getLeft(c) + c.offsetWidth - 1 + "px", this.base.style.top = Math.min(this._getTop(c), f - this.base.offsetHeight) + "px") : "bottom" == this.pos ? (this.base.style.left = this._getLeft(c) + "px", this.base.style.top = this._getTop(c) + c.offsetHeight + 1 + "px") : (this.base.style.left = (this._px || 0) + "px", this.base.style.top = (this._py || 0) + "px"), this._activeInp = a, c = null
                } else this._px && this._py ? (this.base.style.left = this._px + "px", this.base.style.top = this._py + "px") : (this.base.style.left = "0px", this.base.style.top = "0px");
                this._hideSelector(), this.base.style.visibility = "visible", this._ifrSize(), this._ifr && (this._ifr.style.display = ""), this.callEvent("onShow", [])
            }
        }, this._hide = function() {
            this._hideSelector(), this.base.style.display = "none", this._activeInp = null, this._ifr && (this._ifr.style.display = "none"), this.callEvent("onHide", [])
        }, this._isVisible = function() {
            return "none" != this.base.style.display
        }, this._getLeft = function(a) {
            return this._posGetOffset(a).left
        }, this._getTop = function(a) {
            return this._posGetOffset(a).top
        }, this._posGetOffsetSum = function(a) {
            for (var b = 0, c = 0; a;) b += parseInt(a.offsetTop), c += parseInt(a.offsetLeft), a = a.offsetParent;
            return {
                top: b,
                left: c
            }
        }, this._posGetOffsetRect = function(a) {
            var b = a.getBoundingClientRect(),
                c = document.body,
                d = document.documentElement,
                e = window.pageYOffset || d.scrollTop || c.scrollTop,
                f = window.pageXOffset || d.scrollLeft || c.scrollLeft,
                g = d.clientTop || c.clientTop || 0,
                h = d.clientLeft || c.clientLeft || 0,
                i = b.top + e - g,
                j = b.left + f - h;
            return {
                top: Math.round(i),
                left: Math.round(j)
            }
        }, this._posGetOffset = function(a) {
            return this[a.getBoundingClientRect ? "_posGetOffsetRect" : "_posGetOffsetSum"](a)
        }, this._rangeActive = !1, this._rangeTo = this._rangeFrom = null, this._rangeSet = {}, this.setInsensitiveDays = function(a) {
            for (var b = this._extractDates(a), c = 0; c < b.length; c++) this._rangeSet[new Date(b[c].getFullYear(), b[c].getMonth(), b[c].getDate(), 0, 0, 0, 0).getTime()] = !0;
            this._drawMonth(this._activeMonth)
        }, this.clearInsensitiveDays = function() {
            this._clearRangeSet(), this._drawMonth(this._activeMonth)
        }, this._holidays = {}, this.setHolidays = function(a) {
            if (null == a) this._clearHolidays();
            else if (null != a)
                for (var b = this._extractDates(a), c = 0; c < b.length; c++) this._holidays[new Date(b[c].getFullYear(), b[c].getMonth(), b[c].getDate(), 0, 0, 0, 0).getTime()] = !0;
            this._drawMonth(this._activeMonth)
        }, this._extractDates = function(a) {
            ("string" == typeof a || a instanceof Date) && (a = [a]);
            for (var b = [], c = 0; c < a.length; c++)
                if ("string" == typeof a[c])
                    for (var d = a[c].split(","), e = 0; e < d.length; e++) b.push(this._strToDate(d[e]));
                else a[c] instanceof Date && b.push(a[c]);
            return b
        }, this._clearRange = function() {
            this._rangeActive = !1, this._rangeTo = this._rangeFrom = this._rangeType = null
        }, this._clearRangeSet = function() {
            for (var a in this._rangeSet) this._rangeSet[a] = null, delete this._rangeSet[a]
        }, this._clearHolidays = function() {
            for (var a in this._holidays) this._holidays[a] = null, delete this._holidays[a]
        }, this._isOutOfRange = function(a) {
            if (1 == this._rangeSet[a]) return !0;
            if (this._rangeActive) {
                if ("in" == this._rangeType && (a < this._rangeFrom || a > this._rangeTo)) return !0;
                if ("out" == this._rangeType && a >= this._rangeFrom && a <= this._rangeTo) return !0;
                if ("from" == this._rangeType && a < this._rangeFrom) return !0;
                if ("to" == this._rangeType && a > this._rangeTo) return !0
            }
            var b = new Date(a);
            return !(!this._rangeWeek || this._rangeWeekData[b.getDay()] !== !0) || !(!this._rangeMonth || this._rangeMonthData[b.getDate()] !== !0) || !(!this._rangeYear || this._rangeYearData[b.getMonth() + "_" + b.getDate()] !== !0)
        }, this.clearSensitiveRange = function() {
            this._clearRange(), this._drawMonth(this._activeMonth)
        }, this.setSensitiveRange = function(a, b, c) {
            var d = !1;
            if (null != a && null != b) {
                if (a instanceof Date || (a = this._strToDate(a)), b instanceof Date || (b = this._strToDate(b)), a.getTime() > b.getTime()) return;
                this._rangeFrom = new Date(a.getFullYear(), a.getMonth(), a.getDate(), 0, 0, 0, 0).getTime(), this._rangeTo = new Date(b.getFullYear(), b.getMonth(), b.getDate(), 0, 0, 0, 0).getTime(), this._rangeActive = !0, this._rangeType = "in", d = !0
            }
            d || null == a || null != b || (a instanceof Date || (a = this._strToDate(a)), this._rangeFrom = new Date(a.getFullYear(), a.getMonth(), a.getDate(), 0, 0, 0, 0).getTime(), this._rangeTo = null, c === !0 && this._rangeFrom++, this._rangeActive = !0, this._rangeType = "from", d = !0), d || null != a || null == b || (b instanceof Date || (b = this._strToDate(b)), this._rangeFrom = null, this._rangeTo = new Date(b.getFullYear(), b.getMonth(), b.getDate(), 0, 0, 0, 0).getTime(), c === !0 && this._rangeTo--, this._rangeActive = !0, this._rangeType = "to", d = !0), d && this._drawMonth(this._activeMonth)
        }, this.setInsensitiveRange = function(a, b) {
            null != a && null != b ? (a instanceof Date || (a = this._strToDate(a)), b instanceof Date || (b = this._strToDate(b)), a.getTime() > b.getTime() || (this._rangeFrom = new Date(a.getFullYear(), a.getMonth(), a.getDate(), 0, 0, 0, 0).getTime(), this._rangeTo = new Date(b.getFullYear(), b.getMonth(), b.getDate(), 0, 0, 0, 0).getTime(), this._rangeActive = !0, this._rangeType = "out", this._drawMonth(this._activeMonth))) : null != a && null == b ? this.setSensitiveRange(null, a, !0) : null == a && null != b && this.setSensitiveRange(b, null, !0)
        }, this.disableDays = function(a, b) {
            if ("week" == a) {
                "object" != typeof b && "undefined" == typeof b.length && (b = [b]), this._rangeWeekData || (this._rangeWeekData = {});
                for (var c in this._rangeWeekData) this._rangeWeekData[c] = !1, delete this._rangeWeekData[c];
                for (var d = 0; d < b.length; d++) this._rangeWeekData[b[d]] = !0, 7 == b[d] && (this._rangeWeekData[0] = !0);
                this._rangeWeek = !0
            }
            if ("month" == a) {
                "object" != typeof b && "undefined" == typeof b.length && (b = [b]), this._rangeMonthData || (this._rangeMonthData = {});
                for (c in this._rangeMonthData) this._rangeMonthData[c] = !1, delete this._rangeMonthData[c];
                for (d = 0; d < b.length; d++) this._rangeMonthData[b[d]] = !0;
                this._rangeMonth = !0
            }
            if ("year" == a) {
                var e = this._extractDates(b);
                this._rangeYearData || (this._rangeYearData = {});
                for (c in this._rangeYearData) this._rangeYearData[c] = !1, delete this._rangeYearData[c];
                for (d = 0; d < e.length; d++) this._rangeYearData[e[d].getMonth() + "_" + e[d].getDate()] = !0;
                this._rangeYear = !0
            }
            this._drawMonth(this._activeMonth)
        }, this.enableDays = function(a) {
            "week" == a && (this._rangeWeek = !1), "month" == a && (this._rangeMonth = !1), "year" == a && (this._rangeYear = !1), this._drawMonth(this._activeMonth)
        }, this._tipData = {}, this._tipTM = null, this._tipTMTime = 400, this._tipEvs = !1, this._tipCellDim = this._tipCellDate = this._tipPopup = null, this.setTooltip = function(a, b, c, d) {
            for (var e = this._extractDates(a), f = 0; f < e.length; f++) {
                var g = new Date(e[f].getFullYear(), e[f].getMonth(), e[f].getDate(), 0, 0, 0, 0).getTime();
                this._tipData[g] = {
                    text: b,
                    showIcon: c,
                    usePopup: d
                }
            }
            this._drawMonth(this._activeMonth)
        }, this.clearTooltip = function(a) {
            for (var b = this._extractDates(a), c = 0; c < b.length; c++) {
                var d = new Date(b[c].getFullYear(), b[c].getMonth(), b[c].getDate(), 0, 0, 0, 0).getTime();
                this._tipData[d] = null, delete this._tipData[d]
            }
            this._drawMonth(this._activeMonth)
        }, this._initTooltipPopup = function() {
            this._tipEvs || (this.attachEvent("onMouseOver", function(a) {
                var b = new Date(a.getFullYear(), a.getMonth(), a.getDate(), 0, 0, 0, 0).getTime();
                null != this._tipData[b] && (this._tipTM && window.clearTimeout(this._tipTM), this._tipCellDate = a, this._tipCellDim = this.getCellDimension(a), this._tipText = this._tipData[b].text, this._tipTM = window.setTimeout(this._showTooltipPopup, this._tipTMTime))
            }), this.attachEvent("onMouseOut", this._hideTooltipPopup), this._tipEvs = !0)
        }, this._showTooltipPopup = function() {
            h._tipPopup || (h._tipPopup = new dhtmlXPopup({
                mode: "top"
            })), h._tipPopup.attachHTML(h._tipText), h._tipPopup.show(h._tipCellDim.x, h._tipCellDim.y, h._tipCellDim.w, h._tipCellDim.h), h.callEvent("onPopupShow", [h._tipCellDate])
        }, this._hideTooltipPopup = function() {
            this._tipTM && window.clearTimeout(this._tipTM), null != this._tipPopup && this._tipPopup.isVisible() && (this._tipPopup.hide(), this.callEvent("onPopupHide", [this._tipCellDate]))
        }, this.getPopup = function() {
            return this._tipPopup
        }, this.getCellDimension = function(a) {
            if ("string" == typeof a && (a = this._strToDate(a)), !(a instanceof Date)) return null;
            for (var b = new Date(a.getFullYear(), a.getMonth(), a.getDate(), 0, 0, 0, 0).getTime(), c = null, d = 0; d < this.contDates.childNodes.length; d++)
                for (var e = 0; e < this.contDates.childNodes[d].childNodes.length; e++) {
                    var f = this.contDates.childNodes[d].childNodes[e];
                    null != f._date && f._date.getTime() == b && (c = {
                        x: this._getLeft(f),
                        y: this._getTop(f),
                        w: f.offsetWidth,
                        h: f.offsetHeight
                    }), f = null
                }
            return c
        }, this._updateFromInput = function(a) {
            if (this._nullInInput && 0 == a.value.replace(/\s/g, "").length) {
                if (this.checkEvent("onBeforeChange") && !this.callEvent("onBeforeChange", [null])) return void(null != this.i && null != this._activeInp && null != this.i[this._activeInp] && null != this.i[this._activeInp].input && (this.i[this._activeInp].input.value = this.getFormatedDate()));
                this.setDate(null)
            } else this._updateDateStr(a.value);
            a = null
        }, this._doOnClick = function(a) {
            var a = a || event,
                b = a.target || a.srcElement;
            b._dhtmlxcalendar_uid && b._dhtmlxcalendar_uid != h._activeInp && h._isVisible() && h._activeInp ? h._hide() : b._dhtmlxcalendar_uid && h.i[b._dhtmlxcalendar_uid] || (h._isSelectorVisible() ? h._hideSelector() : !h._hasParent && h._isVisible() && h._hide())
        }, this._doOnKeyDown = function(a) {
            a = a || event, 27 != a.keyCode && 13 != a.keyCode || (h._isSelectorVisible() ? h._hideSelector() : h._isVisible() && !h._hasParent && h._hide())
        }, this._doOnInpClick = function(a) {
            var a = a || event,
                b = a.target || a.srcElement;
            b._dhtmlxcalendar_uid && (h._listenerEnabled || h._updateFromInput(b), h._show(b._dhtmlxcalendar_uid, !0))
        }, this._doOnInpKeyUp = function(a) {
            var a = a || event,
                b = a.target || a.srcElement;
            13 != a.keyCode && b._dhtmlxcalendar_uid && (h._listenerEnabled || h._updateFromInput(b))
        }, this._doOnBtnClick = function(a) {
            var a = a || event,
                b = a.target || a.srcElement;
            b._dhtmlxcalendar_uid && (null != h.i[b._dhtmlxcalendar_uid].input && h._updateFromInput(h.i[b._dhtmlxcalendar_uid].input), h._show(b._dhtmlxcalendar_uid, !0))
        }, this._doOnUnload = function() {
            h && h.unload && h.unload()
        }, window.addEventListener ? (document.body.addEventListener("click", h._doOnClick, !1),
            window.addEventListener("keydown", h._doOnKeyDown, !1), window.addEventListener("unload", h._doOnUnload, !1)) : (document.body.attachEvent("onclick", h._doOnClick), document.body.attachEvent("onkeydown", h._doOnKeyDown), window.attachEvent("onunload", h._doOnUnload)), this.attachObj = function(a) {
            "string" == typeof a && (a = document.getElementById(a));
            var b = this.uid();
            this.i[b] = a, this._attachEventsToObject(b)
        }, this.detachObj = function(a) {
            "string" == typeof a && (a = document.getElementById(a));
            var b = a._dhtmlxcalendar_uid;
            null != this.i[b] && (this._detachEventsFromObject(b), this.i[b]._dhtmlxcalendar_uid = null, this.i[b] = null, delete this.i[b])
        }, this._attachEventsToObject = function(a) {
            null != this.i[a].button ? (this.i[a].button._dhtmlxcalendar_uid = a, window.addEventListener ? this.i[a].button.addEventListener("click", h._doOnBtnClick, !1) : this.i[a].button.attachEvent("onclick", h._doOnBtnClick)) : null != this.i[a].input && (this.i[a].input._dhtmlxcalendar_uid = a, window.addEventListener ? (this.i[a].input.addEventListener("click", h._doOnInpClick, !1), this.i[a].input.addEventListener("keyup", h._doOnInpKeyUp, !1)) : (this.i[a].input.attachEvent("onclick", h._doOnInpClick), this.i[a].input.attachEvent("onkeyup", h._doOnInpKeyUp)))
        }, this.enableListener = function(a) {
            a && (window.addEventListener ? (a.addEventListener("focus", h._listenerEvFocus, !1), a.addEventListener("blur", h._listenerEvBlur, !1)) : (a.attachEvent("onfocus", h._listenerEvFocus), a.attachEvent("onblur", h._listenerEvBlur)), a = null)
        }, this.disableListener = function(a) {
            a && (a._f0 = !1, this._tmListener && window.clearTimeout(this._tmListener), window.addEventListener ? (a.removeEventListener("focus", h._listenerEvFocus, !1), a.removeEventListener("blur", h._listenerEvBlur, !1)) : (a.detachEvent("onfocus", h._listenerEvFocus), a.detachEvent("onblur", h._listenerEvBlur)), a = null)
        }, this._startListener = function(a) {
            this._tmListener && window.clearTimeout(this._tmListener), "undefined" == typeof a._v1 && (a._v1 = a.value), a._v1 != a.value && (this._updateFromInput(a), a._v1 = a.value), a._f0 && (this._tmListener = window.setTimeout(function() {
                h._startListener(a)
            }, 100))
        }, this._listenerEvFocus = function(a) {
            var a = a || event,
                b = a.target || a.srcElement;
            b._f0 = !0, h._startListener(b), b = null
        }, this._listenerEvBlur = function(a) {
            var a = a || event,
                b = a.target || a.srcElement;
            b._f0 = !1, b = null
        }, this._detachEventsFromObject = function(a) {
            null != this.i[a].button ? window.addEventListener ? this.i[a].button.removeEventListener("click", h._doOnBtnClick, !1) : this.i[a].button.detachEvent("onclick", h._doOnBtnClick) : null != this.i[a].input && (window.addEventListener ? (this.i[a].input.removeEventListener("click", h._doOnInpClick, !1), this.i[a].input.removeEventListener("keyup", h._doOnInpKeyUp, !1)) : (this.i[a].input.detachEvent("onclick", h._doOnInpClick), this.i[a].input.detachEvent("onkeyup", h._doOnInpKeyUp)))
        };
    for (var k in this.i) this._attachEventsToObject(k);
    return this.evs = {}, this.attachEvent = function(a, b) {
        var c = this.uid();
        return this.evs[c] = {
            name: String(a).toLowerCase(),
            func: b
        }, c
    }, this.detachEvent = function(a) {
        this.evs[a] && (this.evs[a].name = null, this.evs[a].func = null, this.evs[a] = null, delete this.evs[a])
    }, this.callEvent = function(a, b) {
        var c, d = !0,
            e = String(a).toLowerCase(),
            b = b || [];
        for (c in this.evs)
            if (this.evs[c].name == e) var f = this.evs[c].func.apply(this, b),
                d = d && f;
        return d
    }, this.checkEvent = function(a) {
        var b, c = !1,
            d = String(a).toLowerCase();
        for (b in this.evs) c = c || this.evs[b].name == d;
        return c
    }, this.unload = function() {
        this.uidd = this.uid = this._lastHover = this._dateFormatRE = this._dateFormat = this._activeMonth = this._activeInp = this._activeDateCell = this._activeDate = null, this._tmListener && window.clearTimeout(this._tmListener), this._tmListener = null, window.addEventListener ? (document.body.removeEventListener("click", h._doOnClick, !1), window.removeEventListener("keydown", h._doOnKeyDown, !1), window.removeEventListener("unload", h._doOnUnload, !1)) : (document.body.detachEvent("onclick", h._doOnClick), document.body.detachEvent("onkeydown", h._doOnKeyDown), window.detachEvent("onunload", h._doOnKeyDown)), this._doOnUnload = this._doOnKeyDown = this._doOnClick = null;
        for (var a in this.i) this.i[a]._dhtmlxcalendar_uid = null, this._detachEventsFromObject(a), this.disableListener(this.i[a].input), this.i[a] = null, delete this.i[a];
        this._doOnInpKeyUp = this._doOnInpClick = this.i = null;
        for (a in this.evs) this.detachEvent(a);
        for (this.callEvent = this.checkEvent = this.detachEvent = this.attachEvent = this.evs = null, this.contMonth.onselectstart = null, this.contMonth.firstChild.firstChild.onclick = null, this.contMonth.firstChild.firstChild.firstChild.onmouseover = null, this.contMonth.firstChild.firstChild.firstChild.onmouseout = null, this.contMonth.firstChild.firstChild.lastChild.onmouseover = null, this.contMonth.firstChild.firstChild.lastChild.onmouseout = null; this.contMonth.firstChild.firstChild.childNodes.length > 0;) this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild);
        for (this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild), this.contMonth.removeChild(this.contMonth.firstChild), this.contMonth.parentNode.removeChild(this.contMonth), this.contMonth = null; this.contDays.firstChild.childNodes.length > 0;) this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild);
        for (this.contDays.removeChild(this.contDays.firstChild), this.contDays.parentNode.removeChild(this.contDays), this.contDays = null, this.contDates.onclick = null, this.contDates.onmouseover = null, this.contDates.onmouseout = null; this.contDates.childNodes.length > 0;) {
            for (; this.contDates.lastChild.childNodes.length > 0;) this.contDates.lastChild.lastChild._css_date = null, this.contDates.lastChild.lastChild._css_month = null, this.contDates.lastChild.lastChild._css_weekend = null, this.contDates.lastChild.lastChild._css_hover = null, this.contDates.lastChild.lastChild._date = null, this.contDates.lastChild.lastChild._q = null, this.contDates.lastChild.lastChild._w = null, this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild);
            this.contDates.removeChild(this.contDates.lastChild)
        }
        for (this.contDates.parentNode.removeChild(this.contDates), this.contDates = null, this.contTime.firstChild.firstChild.onclick = null; this.contTime.firstChild.firstChild.childNodes.length > 0;) this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild);
        if (this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild), this.contTime.removeChild(this.contTime.firstChild), this.contTime.parentNode.removeChild(this.contTime), this._lastHover = this.contTime = null, this._unloadSelector("month"), this._unloadSelector("year"), this._unloadSelector("hours"), this._unloadSelector("minutes"), this._selCover && (this._selCover.parentNode.removeChild(this._selCover), this._selCover = null), this._sel) {
            for (a in this._sel._ta) this._sel._ta[a] = null;
            for (this._sel._ta = null, this._sel._t = null, this._sel.onmouseover = null, this._sel.onmouseout = null; this._sel.firstChild.firstChild.firstChild.childNodes.length > 0;) this._sel.firstChild.firstChild.firstChild.lastChild.onclick = null, this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover = null, this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout = null, this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild);
            for (this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild), this._sel.firstChild.removeChild(this._sel.firstChild.firstChild); this._sel.childNodes.length > 0;) this._sel.removeChild(this._sel.lastChild);
            this._sel.parentNode.removeChild(this._sel), this._sel = null
        }
        this.base.onclick = null, this.base.onmouseout = null, this.base.parentNode.removeChild(this.base), this.unload = this.showTime = this.show = this.setYearsRange = this.setDateFormat = this.setDate = this.hideTime = this.hide = this.enableIframe = this._updateYearsList = this._updateVisibleMinutes = this._updateVisibleHours = this._updateDateStr = this._updateCellStyle = this._updateActiveYear = this._updateActiveMonth = this._updateActiveMinutes = this._updateActiveHours = this._strToDate = this._showSelector = this._show = this._scrollYears = this._posGetOffsetSum = this._posGetOffsetRect = this._posGetOffset = this._isVisible = this._isSelectorVisible = this._initSelector = this._hideSelector = this._hide = this._ifrSize = this._getTop = this._getLeft = this._fixLength = this._drawMonth = this._doOnSelectorShow = this._doOnSelectorChange = this._clearSelHover = this._clearDayHover = this.base = null, null != this._tipPopup && (this._tipPopup.unload(), this._tipPopup = null);
        for (a in this) delete this[a];
        a = h = null
    }, this.setDate(this._activeDate), this
}

function dhtmlXColorPickerInput(a) {
    "object" != typeof a && (a = document.getElementById(a));
    var b = a,
        c = b.getAttribute("colorbox"),
        d = b.getAttribute("customcolors"),
        e = b.getAttribute("selectonclick"),
        f = b.getAttribute("fullview"),
        g = b.getAttribute("selectedcolor"),
        h = b;
    if (c) {
        var i = document.createElement("DIV");
        i.style.width = b.offsetWidth + "px", i.style.height = b.offsetHeight + "px", b.style.width = b.offsetWidth - b.offsetHeight - 2, b.parentNode.insertBefore(i, b), i.style.position = "relative", h = document.createElement("DIV"), i.appendChild(h), i.appendChild(b), h.className = "cs_colorBox", b.className += " cs_colorInput", h.style.width = h.style.height = b.offsetHeight - (document.all ? 0 : 2) + "px", b.style.left = b.offsetHeight + 2 + "px"
    }
    var j = new dhtmlXColorPicker(null, e, d, !0, f);
    return g && j.setColor(g), j.linkToObjects = [h, b, b], j
}

function dhtmlXColorPicker(a, b, c, d, e) {
    if (document.all) try {
        document.execCommand("BackgroundImageCache", !1, !0)
    } catch (a) {}
    if (this._cc = c, a || (a = document.createElement("DIV"), a.style.position = "absolute", document.body.appendChild(a), a._dhx_remove = !0), this.container = "object" != typeof a ? document.getElementById(a) : a, dhtmlxEventable(this), this.skinName = dhtmlx.skin || "", this.ready = !1, this.hideOnInit = d || !1, this.linkToObjects = [], this.imgURL = dhtmlx.image_path || window.dhx_globalImgPath || "", this.hideSelfOnSelect = !0, this.hex = "000000", this.h = 100, this.s = .9, this.v = .1, this.old_sat = this.old_hue = this.b = this.g = this.r = 0, this.fullview = e || !1, this.customColorsCount = this.fullview ? 8 : 10, this.language = null, this.elements = [], this.customColors = [], this.restoreFrom = null, this.fullview ? this.colorSelectW = this.colorSelectH = 255 : (this.colorSelectH = 119, this.colorSelectW = 209), this.isClickOnly = b || !1, null == window.cs_dechex) {
        var f = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, "a", "b", "c", "d", "e", "f"];
        window.cs_dechex = [];
        for (var g = 0; g < 256; g++) {
            var h = f[g >> 4].toString() + f[15 & g].toString();
            h.length < 2 && (h = "0" + h), window.cs_dechex[g] = h
        }
    }
    return defLeng = {
        langname: "en-us",
        labelHue: "Hue",
        labelSat: "Sat",
        labelLum: "Lum",
        labelRed: "Red",
        labelGreen: "Green",
        labelBlue: "Blue",
        btnAddColor: "Add to Custom Colors",
        btnSelect: "Select",
        btnCancel: "Cancel"
    }, window.dhtmlxColorPickerObjects ? window.dhtmlxColorPickerObjects[window.dhtmlxColorPickerObjects.length] = this : window.dhtmlxColorPickerObjects = [this], window.dhtmlxColorPickerLangModules || (window.dhtmlxColorPickerLangModules = {}), window.dhtmlxColorPickerLangModules["en-us"] = defLeng, this
}

function dhtmlXComboFromSelect(a, b) {
    "string" == typeof a && (a = document.getElementById(a)), b = b || a.getAttribute("width") || (window.getComputedStyle ? window.getComputedStyle(a, null).width : a.currentStyle ? a.currentStyle.width : 0), b && "auto" != b && b.indexOf("em") == -1 || (b = a.offsetWidth || 100);
    var c = document.createElement("SPAN");
    a.parentNode.insertBefore(c, a), a.style.display = "none";
    for (var d = a.getAttribute("opt_type"), e = new dhtmlXCombo(c, a.name, b, d, a.tabIndex), f = [], g = -1, h = 0; h < a.options.length; h++) {
        a.options[h].selected && (g = h);
        var i = a.options[h].innerHTML,
            j = a.options[h].getAttribute("value");
        "undefined" != typeof j && null !== j || (j = i), f[h] = {
            value: j,
            text: i,
            img_src: a.options[h].getAttribute("img_src")
        }
    }
    return f.length && e.addOption(f), a.parentNode.removeChild(a), g >= 0 && (e._skipFocus = !0, e.selectOption(g, null, !0)), a.onchange && e.attachEvent("onChange", a.onchange), "rtl" == a.style.direction && e.setRTL && e.setRTL(!0), e
}

function dhtmlXCombo(a, b, c, d, e) {
    return "string" == typeof a && (a = document.getElementById(a)), this.dhx_Event(), this.optionType = d != window.undefined && dhtmlXCombo_optionTypes[d] ? d : "default", this._optionObject = dhtmlXCombo_optionTypes[this.optionType], this._disabled = !1, this.readonlyDelay = 750, this.filterEntities = "[,],{,},(,),+,*,\\,?,.,$,^".split(","), window.dhx_glbSelectAr || (window.dhx_glbSelectAr = [], window.dhx_openedSelect = null, window.dhx_SelectId = 1, dhtmlxEvent(document.body, "click", this.closeAll), dhtmlxEvent(document.body, "keydown", function(a) {
        try {
            9 == (a || event).keyCode && window.dhx_glbSelectAr[0].closeAll()
        } catch (a) {}
        return !0
    })), "SELECT" == a.tagName ? dhtmlXComboFromSelect(a) : (this._createSelf(a, b, c, e), void dhx_glbSelectAr.push(this))
}

function dhtmlXRange(a, b, c) {
    var d = "object" == typeof a ? a : document.getElementById(a);
    try {
        d.focus()
    } catch (a) {}
    var e = d.value.length;
    if (b--, (b < 0 || b > c || b > e) && (b = 0), c > e && (c = e), b != c)
        if (d.setSelectionRange) d.setSelectionRange(b, c);
        else if (d.createTextRange) {
        var f = d.createTextRange();
        f.moveStart("character", b), f.moveEnd("character", c - e);
        try {
            f.select()
        } catch (a) {}
    }
}

function dataProcessor(a) {
    return this.serverProcessor = a, this.action_param = "!nativeeditor_status", this.object = null, this.updatedRows = [], this.autoUpdate = !0, this.updateMode = "cell", this._tMode = "GET", this.post_delim = "_", this._waitMode = 0, this._in_progress = {}, this._invalid = {}, this.mandatoryFields = [], this.messages = [], this.styles = {
        updated: "font-weight:bold;",
        inserted: "font-weight:bold;",
        deleted: "text-decoration : line-through;",
        invalid: "background-color:FFE0E0;",
        invalid_cell: "border-bottom:2px solid red;",
        clear: "font-weight:normal;text-decoration:none;"
    }, this.enableUTFencoding(!0), dhtmlxEventable(this), this
}

function dhtmlXEditor(a, b) {
    var c = this;
    for (this.skin = b || dhtmlx.skin || "dhx_skyblue", this.iconsPath = dhtmlx.image_path || "../../codebase/imgs/", "string" == typeof a && (a = document.getElementById(a)), this.base = a; this.base.childNodes.length > 0;) this.base.removeChild(this.base.childNodes[0]);
    this.tbData = (this._isToolbar = null != this.initDhtmlxToolbar && null != window.dhtmlXToolbarObject) ? "" : "<div class='dhxeditor_" + this.skin + "_btns'><a href='javascript:void(0);' onclick='return false;' tabindex='-1'><div actv='b' cmd='applyBold' class='dhxeditor_" + this.skin + "_tbbtn btn_bold'></div></a><a href='javascript:void(0);' onclick='return false;' tabindex='-1'><div actv='i' cmd='applyItalic' class='dhxeditor_" + this.skin + "_tbbtn btn_italic'></div></a><a href='javascript:void(0);' onclick='return false;' tabindex='-1'><div actv='u' cmd='applyUnderscore' class='dhxeditor_" + this.skin + "_tbbtn btn_underline'></div></a><a href='javascript:void(0);' onclick='return false;' tabindex='-1'><div actv='c' cmd='clearFormatting' class='dhxeditor_" + this.skin + "_tbbtn btn_clearformat'></div></a><div class='verline_l'></div><div class='verline_r'></div></div>";
    var d = _isIE ? this.base.currentStyle.position : window.getComputedStyle(this.base, null).getPropertyValue("position");
    "relative" != d && "absolute" != d && (this.base.style.position = "relative"), this.base.innerHTML = this.tbData + "<div style='position:absolute; width: 100%; overflow: hidden;'></div>";
    var e = new dhtmlXContainerLite(this.base);
    e.skin = this.skin, e.setContent(this.base.childNodes[this._isToolbar ? 0 : 1]);
    var f = this._isToolbar ? 0 : this.base.childNodes[0].offsetHeight;
    this.base.adjustContent(this.base, f), this.cBlock = document.createElement("DIV"), this.cBlock.className = "dhxcont_content_blocker", this.cBlock.style.display = "none", this.base.appendChild(this.cBlock), this.editor = document.createElement("IFRAME"), this.editor.className = "dhxeditor_mainiframe_" + this.skin, this.editor.frameBorder = 0, _isOpera && (this.editor.scrolling = "yes");
    var g = this.editor;
    "undefined" != typeof window.addEventListener ? (this.editor, g.onload = function() {
        this.contentWindow.addEventListener("focus", function(a) {
            c._ev("focus", a)
        }, !1), this.contentWindow.addEventListener("blur", function(a) {
            c._ev("blur", a)
        }, !1), this.contentWindow.addEventListener("keydown", function(a) {
            c._ev("keydown", a)
        }, !1), this.contentWindow.addEventListener("keyup", function(a) {
            c._ev("keyup", a)
        }, !1), this.contentWindow.addEventListener("keypress", function(a) {
            c._ev("keypress", a)
        }, !1), this.contentWindow.addEventListener("mouseup", function(a) {
            c._ev("mouseup", a)
        }, !1), this.contentWindow.addEventListener("mousedown", function(a) {
            c._ev("mousedown", a)
        }, !1), this.contentWindow.addEventListener("click", function(a) {
            c._ev("click", a)
        }, !1)
    }, g.onunload = function() {
        this.contentWindow.removeEventListener("focus", function(a) {
            c._ev("focus", a)
        }, !1), this.contentWindow.removeEventListener("blur", function(a) {
            c._ev("blur", a)
        }, !1), this.contentWindow.removeEventListener("keydown", function(a) {
            c._ev("keydown", a)
        }, !1), this.contentWindow.removeEventListener("keyup", function(a) {
            c._ev("keyup", a)
        }, !1), this.contentWindow.removeEventListener("keypress", function(a) {
            c._ev("keypress", a)
        }, !1), this.contentWindow.removeEventListener("mouseup", function(a) {
            c._ev("mouseup", a)
        }, !1), this.contentWindow.removeEventListener("mousedown", function(a) {
            c._ev("mousedown", a)
        }, !1), this.contentWindow.removeEventListener("click", function(a) {
            c._ev("click", a)
        }, !1)
    }) : (g.onreadystatechange = function() {
        if ("complete" == g.readyState) try {
            this.contentWindow.document.body.attachEvent("onfocus", function(a) {
                c._ev("focus", a)
            }), this.contentWindow.document.body.attachEvent("onblur", function(a) {
                c._ev("blur", a)
            }), this.contentWindow.document.body.attachEvent("onkeydown", function(a) {
                c._ev("keydown", a)
            }), this.contentWindow.document.body.attachEvent("onkeyup", function(a) {
                c._ev("keyup", a)
            }), this.contentWindow.document.body.attachEvent("onkeypress", function(a) {
                c._ev("keypress", a)
            }), this.contentWindow.document.body.attachEvent("onmouseup", function(a) {
                c._ev("mouseup", a)
            }), this.contentWindow.document.body.attachEvent("onmousedown", function(a) {
                c._ev("mousedown", a)
            }), this.contentWindow.document.body.attachEvent("onclick", function(a) {
                c._ev("click", a)
            })
        } catch (a) {}
    }, g.onunload = function() {
        this.contentWindow.document.body.detachEvent("onfocus", function() {
            c._ev("focus", event)
        }), this.contentWindow.document.body.detachEvent("onblur", function() {
            c._ev("blur", event)
        }), this.contentWindow.document.body.detachEvent("onkeydown", function() {
            c._ev("keydown", event)
        }), this.contentWindow.document.body.detachEvent("onkeyup", function() {
            c._ev("keyup", event)
        }), this.contentWindow.document.body.detachEvent("onkeypress", function() {
            c._ev("keypress", event)
        }), this.contentWindow.document.body.detachEvent("onmouseup", function() {
            c._ev("mouseup", event)
        }), this.contentWindow.document.body.detachEvent("onmousedown", function() {
            c._ev("mousedown", event)
        }), this.contentWindow.document.body.detachEvent("onclick", function() {
            c._ev("click", event)
        })
    }), this._ev = function(a, b) {
        this.callEvent("onAccess", [a, b])
    }, this._focus = function() {
        _isIE ? this.editor.contentWindow.document.body.focus() : this.editor.contentWindow.focus()
    }, this.base.attachObject(this.editor), this.edWin = this.editor.contentWindow, this.edDoc = this.edWin.document, this._prepareContent = function(a, b) {
        var c = "";
        a === !0 && null != this.getContent && (c = this.getContent());
        var d = this.editor.contentWindow.document;
        if (d.open("text/html", "replace"), _isOpera ? d.write("<html><head><style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; padding-left:1px !important; height:100%; margin:0px; font-family:Tahoma; font-size:10pt; background-color:#ffffff;} </style></head><body " + (b !== !0 ? "contenteditable='true'" : "") + " tabindex='0'></body></html>") : window._KHTMLrv ? d.write("<html><head><style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; padding-left:1px !important; height:100%; margin:0px; font-family:Tahoma; font-size:10pt; background-color:#ffffff;} </style></head><body " + (b !== !0 ? "contenteditable='true'" : "") + " tabindex='0'></body></html>") : _isIE ? d.write("<html><head><style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; padding-left:1px !important; height:100%; margin:0px; font-family:Tahoma; font-size:10pt; background-color: #ffffff; outline: none;} </style></head><body " + (b !== !0 ? "contenteditable='true'" : "") + " tabindex='0'></body></html>") : d.write("<html><head><style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; padding-left:1px !important; height:100%; margin:0px; font-family:Tahoma; font-size:10pt; background-color:#ffffff;} </style></head><body " + (b !== !0 ? "contenteditable='true'" : "") + " tabindex='0'></body></html>"), d.close(), _isIE ? d.contentEditable = b !== !0 : d.designMode = b !== !0 ? "On" : "Off", _isFF) try {
            d.execCommand("useCSS", !1, !0)
        } catch (a) {}
        a === !0 && null != this.setContent && this.setContent(c)
    }, this._prepareContent(), this.setIconsPath = function() {}, this.init = function() {}, this.setSizes = function() {
        var a = this._isToolbar ? 0 : this.base.childNodes[0].offsetHeight;
        this.base.adjustContent(this.base, a)
    }, this._resizeTM = null, this._resizeTMTime = 100, this._doOnResize = function() {
        window.clearTimeout(c._resizeTM), c._resizeTM = window.setTimeout(function() {
            c.setSizes && c.setSizes()
        }, c._resizeTMTime)
    }, this._doOnUnload = function() {
        "function" == typeof window.addEventListener ? window.removeEventListener("resize", this._doOnResize, !1) : window.detachEvent("onresize", this._doOnResize)
    }, dhtmlxEvent(window, "resize", this._doOnResize), this.base.childNodes[0].onselectstart = function(a) {
        return a = a || event, a.cancelBubble = !0, a.returnValue = !1, a.preventDefault && a.preventDefault(), !1
    };
    for (var h = 0; h < this.base.childNodes[0].childNodes.length - 2; h++) this.base.childNodes[0].childNodes[h].childNodes[0].onmousedown = function() {
        var a = this.getAttribute("cmd");
        return "function" == typeof c[a] && (c[a](), c.callEvent("onToolbarClick", [this.getAttribute("actv")])), !1
    }, this.base.childNodes[0].childNodes[h].childNodes[0].onclick = function() {
        return !1
    };
    this.runCommand = function(a, b) {
        if (this._roMode !== !0) {
            arguments.length < 2 && (b = null), _isIE && this.edWin.focus();
            try {
                var c = this.editor.contentWindow.document;
                c.execCommand(a, !1, b)
            } catch (a) {}
            if (_isIE) {
                this.edWin.focus();
                var d = this;
                window.setTimeout(function() {
                    d.edWin.focus()
                }, 1)
            }
        }
    }, this.applyBold = function() {
        this.runCommand("Bold")
    }, this.applyItalic = function() {
        this.runCommand("Italic")
    }, this.applyUnderscore = function() {
        this.runCommand("Underline")
    }, this.clearFormatting = function() {
        this.runCommand("RemoveFormat")
    }, this._isToolbar && this.initDhtmlxToolbar(), dhtmlxEventable(this), dhtmlxEvent(this.edDoc, "click", function(a) {
        var b = a || window.event,
            d = b.target || b.srcElement;
        c.showInfo(d)
    }), _isOpera && dhtmlxEvent(this.edDoc, "mousedown", function(a) {
        var b = a || window.event,
            d = b.target || b.srcElement;
        c.showInfo(d)
    }), dhtmlxEvent(this.edDoc, "keyup", function(a) {
        var b = a || window.event,
            d = b.keyCode,
            e = b.target || b.srcElement;
        (37 == d || 38 == d || 39 == d || 40 == d || 13 == d) && c.showInfo(e)
    }), this.attachEvent("onFocusChanged", function(a) {
        c._doOnFocusChanged && c._doOnFocusChanged(a)
    }), this.showInfo = function(a) {
        if ((a = this.getSelectionBounds().end ? this.getSelectionBounds().end : a) && this.setStyleProperty) try {
            if (this.edWin.getComputedStyle) {
                var b = this.edWin.getComputedStyle(a, null),
                    c = 401 == b.getPropertyValue("font-weight") ? 700 : b.getPropertyValue("font-weight");
                this.style = {
                    fontStyle: b.getPropertyValue("font-style"),
                    fontSize: b.getPropertyValue("font-size"),
                    textDecoration: b.getPropertyValue("text-decoration"),
                    fontWeight: c,
                    fontFamily: b.getPropertyValue("font-family"),
                    textAlign: b.getPropertyValue("text-align")
                }, window._KHTMLrv && (this.style.fontStyle = b.getPropertyValue("font-style"), this.style.vAlign = b.getPropertyValue("vertical-align"), this.style.del = this.isStyleProperty(a, "span", "textDecoration", "line-through"), this.style.u = this.isStyleProperty(a, "span", "textDecoration", "underline"))
            } else b = a.currentStyle, this.style = {
                fontStyle: b.fontStyle,
                fontSize: b.fontSize,
                textDecoration: b.textDecoration,
                fontWeight: b.fontWeight,
                fontFamily: b.fontFamily,
                textAlign: b.textAlign
            };
            this.setStyleProperty(a, "h1"), this.setStyleProperty(a, "h2"), this.setStyleProperty(a, "h3"), this.setStyleProperty(a, "h4"), window._KHTMLrv || (this.setStyleProperty(a, "del"), this.setStyleProperty(a, "sub"), this.setStyleProperty(a, "sup"), this.setStyleProperty(a, "u")), this.callEvent("onFocusChanged", [this.style, b])
        } catch (a) {
            return null
        }
    }, this.getSelectionBounds = function() {
        var a, b, c, d;
        if (this.edWin.getSelection) {
            var e = this.edWin.getSelection();
            return a = e.getRangeAt(e.rangeCount - 1), c = a.startContainer, d = a.endContainer, b = a.commonAncestorContainer, "#text" == c.nodeName && (b = b.parentNode), "#text" == c.nodeName && (c = c.parentNode), "body" == c.nodeName.toLowerCase() && (c = c.firstChild), "#text" == d.nodeName && (d = d.parentNode), "body" == d.nodeName.toLowerCase() && (d = d.lastChild), c == d && (b = c), {
                root: b,
                start: c,
                end: d
            }
        }
        if (this.edWin.document.selection) {
            if (a = this.edDoc.selection.createRange(), !a.duplicate) return null;
            b = a.parentElement();
            var f = a.duplicate(),
                g = a.duplicate();
            return f.collapse(!0), g.moveToElementText(f.parentElement()), g.setEndPoint("EndToStart", f), c = f.parentElement(), f = a.duplicate(), g = a.duplicate(), g.collapse(!1), f.moveToElementText(g.parentElement()), f.setEndPoint("StartToEnd", g), d = g.parentElement(), "body" == c.nodeName.toLowerCase() && (c = c.firstChild), "body" == d.nodeName.toLowerCase() && (d = d.lastChild), c == d && (b = c), {
                root: b,
                start: c,
                end: d
            }
        }
        return null
    }, this.getContent = function() {
        return this.edDoc.body ? _isFF ? this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi, "") : _isIE && 0 == this.edDoc.body.innerText.length ? "" : this.edDoc.body.innerHTML : ""
    }, this.setContent = function(a) {
        a = a || "", this.edDoc.body ? (navigator.userAgent.indexOf("Firefox") != -1 ? ("undefined" == typeof this._ffTest && (this.editor.contentWindow.document.body.innerHTML = "", this.runCommand("InsertHTML", "test"), this._ffTest = this.editor.contentWindow.document.body.innerHTML.length > 0), this._ffTest ? this.editor.contentWindow.document.body.innerHTML = a : (this.editor.contentWindow.document.body.innerHTML = "", 0 == a.length && (a = " "), this.runCommand("InsertHTML", a))) : this.editor.contentWindow.document.body.innerHTML = a, this.callEvent("onContentSet", [])) : dhtmlxEvent(this.edWin, "load", function() {
            c.setContent(a)
        })
    }, this.setContentHTML = function(a) {
        new dtmlXMLLoaderObject(this._ajaxOnLoad, this, !1, !0).loadXML(a)
    }, this._ajaxOnLoad = function(a, b, c, d, e) {
        e.xmlDoc.responseText && a.setContent(e.xmlDoc.responseText)
    }
}

function dhtmlXContainerLite(a) {
    var b = this;
    this.obj = a, this.dhxcont = null, this.setContent = function(a) {
        this.dhxcont = a, this.dhxcont.innerHTML = "<div style='position: relative; left: 0px; top: 0px; overflow: hidden;'></div>", this.dhxcont.mainCont = this.dhxcont.childNodes[0], this.obj.dhxcont = this.dhxcont
    }, this.obj._genStr = function(a) {
        for (var b = "", c = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789", d = 0; d < a; d++) b += c.charAt(Math.round(Math.random() * (c.length - 1)));
        return b
    }, this.obj.adjustContent = function(a, b, c, d, e) {
        this.dhxcont.style.left = (this._offsetLeft || 0) + "px", this.dhxcont.style.top = (this._offsetTop || 0) + b + "px";
        var f = a.clientWidth + (this._offsetWidth || 0);
        d !== !0 && (this.dhxcont.style.width = Math.max(0, f) + "px"), d !== !0 && this.dhxcont.offsetWidth > f && (this.dhxcont.style.width = Math.max(0, 2 * f - this.dhxcont.offsetWidth) + "px");
        var g = a.clientHeight + (this._offsetHeight || 0);
        this.dhxcont.style.height = Math.max(0, g - b) + (null != c ? c : 0) + "px", this.dhxcont.offsetHeight > g - b && (this.dhxcont.style.height = Math.max(0, 2 * (g - b) - this.dhxcont.offsetHeight) + "px"), e && !isNaN(e) && (this.dhxcont.style.height = Math.max(0, parseInt(this.dhxcont.style.height) - e) + "px"), null != this._minDataSizeH && parseInt(this.dhxcont.style.height) < this._minDataSizeH && (this.dhxcont.style.height = this._minDataSizeH + "px"), null != this._minDataSizeW && parseInt(this.dhxcont.style.width) < this._minDataSizeW && (this.dhxcont.style.width = this._minDataSizeW + "px"), d !== !0 && (this.dhxcont.mainCont.style.width = this.dhxcont.clientWidth + "px", this.dhxcont.mainCont.offsetWidth > this.dhxcont.clientWidth) && (this.dhxcont.mainCont.style.width = Math.max(0, 2 * this.dhxcont.clientWidth - this.dhxcont.mainCont.offsetWidth) + "px");
        var h = null != this.menu ? this.menuHidden ? 0 : this.menuHeight : 0,
            i = null != this.toolbar ? this.toolbarHidden ? 0 : this.toolbarHeight : 0,
            j = null != this.sb ? this.sbHidden ? 0 : this.sbHeight : 0;
        this.dhxcont.mainCont.style.height = this.dhxcont.clientHeight + "px", this.dhxcont.mainCont.offsetHeight > this.dhxcont.clientHeight && (this.dhxcont.mainCont.style.height = Math.max(0, 2 * this.dhxcont.clientHeight - this.dhxcont.mainCont.offsetHeight) + "px"), this.dhxcont.mainCont.style.height = Math.max(0, parseInt(this.dhxcont.mainCont.style.height) - h - i - j) + "px"
    }, this.obj.attachToolbar = function() {
        var a = document.createElement("DIV");
        return a.style.position = "relative", a.style.overflow = "hidden", a.id = "dhxtoolbar_" + this._genStr(12), this.dhxcont.insertBefore(a, this.dhxcont.childNodes[null != this.menu ? 1 : 0]), this.toolbar = new dhtmlXToolbarObject(a.id, this.skin), "dhx_web" == b.skin ? (this.toolbarHeight = 32, this.dhxcont.className = "dhtmlx_editor_extended_" + b.skin) : "dhx_terrace" == b.skin ? (this._attached ? (this.toolbarHeight = 46, a.style.marginBottom = "14px") : (this.toolbarHeight = 34, a.style.marginTop = "2px", a.style.marginLeft = "2px", a.style.marginBottom = "2px"), this.dhxcont.className = "dhtmlx_editor_extended_" + b.skin) : this.toolbarHeight = a.offsetHeight + (this._isLayout && "dhx_skyblue" == this.skin ? 2 : 0), this.toolbarId = a.id, this._doOnAttachToolbar && this._doOnAttachToolbar("init"), this.adjust(), this.toolbar
    }, this.obj.attachObject = function(a, b) {
        if ("string" == typeof a && (a = document.getElementById(a)), b) {
            a.style.visibility = "hidden", a.style.display = "";
            var c = a.offsetWidth,
                d = a.offsetHeight
        }
        this._attachContent("obj", a), b && this._isWindow && (a.style.visibility = "visible", this._adjustToContent(c, d))
    }, this.obj.adjust = function() {
        "dhx_skyblue" == this.skin && this.toolbar && ((this._isWindow || this._isLayout) && (document.getElementById(this.toolbarId).style.height = "29px", this.toolbarHeight = document.getElementById(this.toolbarId).offsetHeight, this._doOnAttachToolbar && this._doOnAttachToolbar("show")), this._isCell && (document.getElementById(this.toolbarId).className += " in_layoutcell"), this._isAcc && (document.getElementById(this.toolbarId).className += " in_acccell"))
    }, this.obj._attachContent = function(a, c, d) {
        for (; b.dhxcont.mainCont.childNodes.length > 0;) b.dhxcont.mainCont.removeChild(b.dhxcont.mainCont.childNodes[0]);
        "obj" == a && (this._isWindow && null == c.cmp && "dhx_skyblue" == this.skin && (this.dhxcont.mainCont.style.border = "#a4bed4 1px solid", this.dhxcont.mainCont.style.backgroundColor = "#FFFFFF", this._redraw()), b.dhxcont._frame = null, b.dhxcont.mainCont.appendChild(c), b.dhxcont.mainCont.style.overflow = d === !0 ? "auto" : "hidden", c.style.display = "")
    }, this.obj._dhxContDestruct = function() {
        for (; this.dhxcont.mainCont.childNodes.length > 0;) this.dhxcont.mainCont.removeChild(this.dhxcont.mainCont.childNodes[0]);
        this.dhxcont.mainCont.innerHTML = "", this.dhxcont.mainCont = null;
        try {
            delete this.dhxcont.mainCont
        } catch (a) {}
        for (; this.dhxcont.childNodes.length > 0;) this.dhxcont.removeChild(this.dhxcont.childNodes[0]);
        this.dhxcont.innerHTML = "", this.dhxcont = null;
        try {
            delete this.dhxcont
        } catch (a) {}
        this.attachToolbar = this.adjustContent = this.moveContentTo = this.attachObject = this.adjust = this._dhxContDestruct = this._attachContent = this._genStr = null
    }
}

function dhtmlXForm(a, b, c) {
    this.idef = {
        position: "label-left",
        labelWidth: "auto",
        labelHeight: "auto",
        inputWidth: "auto",
        inputHeight: "auto",
        labelAlign: "left",
        noteWidth: "auto",
        offsetTop: 0,
        offsetLeft: 0,
        blockOffset: 20
    }, this.idef_const = {
        offsetNested: 20
    }, this.apos_css = {
        "label-left": "dhxform_item_label_left",
        "label-right": "dhxform_item_label_right",
        "label-top": "dhxform_item_label_top",
        "label-bottom": "dhxform_item_label_bottom",
        absolute: "dhxform_item_absolute"
    }, this.align_css = {
        left: "dhxform_label_align_left",
        center: "dhxform_label_align_center",
        right: "dhxform_label_align_right"
    };
    var d = this;
    this.setSkin = function(a) {
            this.skin = a, this.cont.className = "dhxform_obj_" + this.skin, this.cont.style.fontSize = "13px", this._updateBlocks(), this.forEachItem(function(b) {
                "calendar" == d.getItemType(b) && d.doWithItem(b, "setSkin", a)
            })
        }, this.skinDetect = function() {
            var a = document.createElement("DIV");
            a.className = "dhxform_skin_detect", document.body.firstChild ? document.body.insertBefore(a, document.body.firstChild) : document.body.appendChild(a);
            var b = a.offsetWidth;
            return a.parentNode.removeChild(a), a = null, {
                10: "dhx_skyblue",
                20: "dhx_web",
                30: "dhx_terrace"
            }[b] || null
        }, this.skin = c || ("undefined" != typeof dhtmlx ? dhtmlx.skin : null) || this.skinDetect() || "dhx_skyblue", this.separator = ",", this.live_validate = !1, this._type = "checkbox", this._rGroup = "default", this._idIndex = {}, this._indexId = [], this.cont = "object" == typeof a ? a : document.getElementById(a),
        a._isNestedForm || (this._parentForm = !0, this.cont.style.fontSize = "13px", this.cont.className = "dhxform_obj_" + this.skin, this.setFontSize = function(a) {
            this.cont.style.fontSize = a, this._updateBlocks()
        }, this.getForm = function() {
            return this
        }, this.cont.onkeypress = function(a) {
            if (a = a || event, 13 == a.keyCode) {
                var b = a.target || a.srcElement;
                "undefined" != typeof b.tagName && "textarea" == String(b.tagName).toLowerCase() && !a.ctrlKey || d.callEvent("onEnter", [])
            }
        }), this.b_index = null, this.base = [], this._prepare = function(a) {
            null == this.b_index ? this.b_index = 0 : this.b_index++, this.base[this.b_index] = document.createElement("DIV"), this.base[this.b_index].className = "dhxform_base", "undefined" != typeof a && (this.base[this.b_index].style.cssText += " margin-left:" + a + "px!important;"), this.cont.appendChild(this.base[this.b_index])
        }, this.setSizes = function() {}, this._mergeSettings = function(a) {
            var b, c = -1,
                d = {
                    type: "settings"
                };
            for (b in this.idef) d[b] = this.idef[b];
            for (var e = 0; e < a.length; e++)
                if ("undefined" != typeof a[e] && "settings" == a[e].type) {
                    for (b in a[e]) d[b] = a[e][b];
                    c = e
                }
            return a[c >= 0 ? c : a.length] = d, a
        }, this._genStr = function(a) {
            for (var b = "", c = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789", d = 0; d < a; d++) b += c.charAt(Math.round(Math.random() * (c.length - 1)));
            return b
        }, this.idPrefix = "dhxForm_" + this._genStr(12) + "_", this._rId = this._parentForm ? this._genStr(12) + "_" : a._rId, this.objPull = {}, this.itemPull = {}, this._ic = 0, this._addItem = function(a, b, c, e, f, g) {
            if (this.items[a]._index && (this.getForm()._indexId.push(b), this.getForm()._idIndex[b] = {
                    ind: this.getForm()._indexId.length - 1
                }), a || (a = this._type), "list" == a && null != f && null != this.itemPull[this.idPrefix + f] && "function" == typeof this.itemPull[this.idPrefix + f]._addSubListNode) var h = this.itemPull[this.idPrefix + f]._addSubListNode();
            else if ("newcolumn" == a) h = {};
            else {
                var i = null;
                if ("undefined" == typeof g || isNaN(g) || "list" == a) {
                    if ("list" == a)
                        for (var j in this.itemPull) j == this.idPrefix + b && (i = this.itemPull[j].nextSibling, null != this.itemPull[j]._listBase && this.itemPull[j]._listBase.length > 0 && (i = this.itemPull[j]._listBase[this.itemPull[j]._listBase.length - 1]))
                } else
                    for (var g = Math.max(parseInt(g), 0) + 1, k = 0; k < this.base[this.b_index].childNodes.length; k++) 1 != this.base[this.b_index].childNodes[k]._isNestedForm && (g--, 0 == g && (i = this.base[this.b_index].childNodes[k]));
                h = document.createElement("DIV"), i ? this.base[this.b_index].insertBefore(h, i) : this.base[this.b_index].appendChild(h)
            }
            if (h._idd = b, h._rId = this._rId, "undefined" != typeof h.style) {
                "undefined" == typeof c.offsetLeft && this.idef.offsetLeft > 0 && (c.offsetLeft = this.idef.offsetLeft), "undefined" == typeof c.offsetTop && this.idef.offsetTop > 0 && (c.offsetTop = this.idef.offsetTop);
                var l = "";
                "undefined" != typeof c.offsetLeft && (l += " padding-left:" + c.offsetLeft + "px!important;"), "undefined" != typeof c.offsetTop && (l += " padding-top:" + c.offsetTop + "px!important;"), h.style.cssText += l
            }
            if ("block" == a && isNaN(c.blockOffset) && (c.blockOffset = this.idef.blockOffset), "list" == a) {
                "undefined" == typeof h._ofsNested && (h._ofsNested = this.idef_const.offsetNested), null != e && (h._sId = e);
                var m = this.items[a].render(h);
                return this.itemPull[this.idPrefix + b]._listObj || (this.itemPull[this.idPrefix + b]._listObj = []), this.itemPull[this.idPrefix + b]._list || (this.itemPull[this.idPrefix + b]._list = []), this.itemPull[this.idPrefix + b]._listBase || (this.itemPull[this.idPrefix + b]._listBase = []), this.itemPull[this.idPrefix + b]._listObj.push(m[0]), this.itemPull[this.idPrefix + b]._list.push(m[1]), this.itemPull[this.idPrefix + b]._listBase.push(h), m[1].checkEvent = function(a) {
                    return d.checkEvent(a)
                }, m[1].callEvent = function(a, b) {
                    return d.callEvent(a, b)
                }, m[1].getForm = function() {
                    return d.getForm()
                }, m[1]._initObj(this._mergeSettings(c)), h._inBlcok && (h.className += " in_block"), m[1]
            }
            if ("newcolumn" == a) this._prepare(c.offset);
            else {
                if ("label" == a && 0 == this._ic++ && (c._isTopmost = !0), c.position = this.apos_css[c.position && this.apos_css[c.position] ? c.position : this.idef.position], h.className = c.position + ("string" == typeof c.className ? " " + c.className : ""), c.labelWidth || (c.labelWidth = this.idef.labelWidth), c.labelHeight || (c.labelHeight = this.idef.labelHeight), "undefined" != typeof c.wrap && (c.wrap = this._s2b(c.wrap)), c.labelAlign = this.align_css[c.labelAlign] ? this.align_css[c.labelAlign] : this.align_css[this.idef.labelAlign], c.inputWidth = c.width ? c.width : c.inputWidth ? c.inputWidth : this.idef.inputWidth, c.inputHeight || (c.inputHeight = this.idef.inputHeight), "undefined" != typeof c.note && (null != c.note.length && null != c.note[0] && (c.note = c.note[0]), "undefined" == typeof c.note.width && (c.note.width = this.idef.noteWidth), "auto" == c.note.width && (c.note.width = c.inputWidth)), h.checkEvent = function(a) {
                        return d.checkEvent(a)
                    }, h.callEvent = function(a, b) {
                        return d.callEvent(a, b)
                    }, h.getForm = function() {
                        return d.getForm()
                    }, h._autoCheck = function(a) {
                        d._autoCheck(a)
                    }, "string" == typeof c.readonly && (c.readonly = this._s2b(c.readonly)), "string" == typeof c.autoStart && (c.autoStart = this._s2b(c.autoStart)), "string" == typeof c.autoRemove && (c.autoRemove = this._s2b(c.autoRemove)), "string" == typeof c.titleScreen && (c.titleScreen = this._s2b(c.titleScreen)), "string" == typeof c.info && (c.info = this._s2b(c.info)), "string" == typeof c.hidden && (c.hidden = this._s2b(c.hidden)), "string" == typeof c.checked && (c.checked = this._s2b(c.checked)), "undefined" != typeof c.userdata)
                    for (j in c.userdata) this.getForm().setUserData(b, j, c.userdata[j]);
                if (c.validate && (h._validate = "function" == typeof c.validate || "function" == typeof window[c.validate] ? [c.validate] : String(c.validate).split(this.separator)), "undefined" != typeof c.required && ("string" == typeof c.required && (c.required = this._s2b(c.required)), h._required = 1 == c.required), h._required) {
                    h._validate || (h._validate = []);
                    for (var n = !1, k = 0; k < h._validate.length; k++) n = n || "NotEmpty" == h._validate[k];
                    n || h._validate.push("NotEmpty")
                }
                h._ll = c.position == this.apos_css["label-left"] || c.position == this.apos_css["label-top"], this.objPull[this.idPrefix + b] = this.items[a].render(h, c), this.itemPull[this.idPrefix + b] = h
            }
        }, this._initObj = function(a) {
            this._prepare();
            for (var b = 0; b < a.length; b++)
                if ("undefined" != typeof a[b] && "settings" == a[b].type)
                    for (var c in a[b]) this.idef[c] = a[b][c];
            for (b = 0; b < a.length; b++) this._prepareItem(a[b]);
            this._autoCheck()
        }, this._prepareItem = function(a, b) {
            var c = null != a && null != a.type ? a.type : "";
            if (this.items[c]) {
                a.name || (a.name = this._genStr(12));
                var d = a.name;
                null == this.objPull[this.idPrefix + d] && "radio" != c || (d = this._genStr(12));
                var e = a;
                e.label = e.label || "", e.value = e.value, e.checked = this._s2b(e.checked), e.disabled = this._s2b(e.disabled), e.name = e.name || this._genStr(12), e.options = e.options || [], e.rows = e.rows || "none", e.uid = this._genStr(12), this._addItem(c, d, e, null, null, b), b = null, this._parentEnabled === !1 && this._disableItem(d);
                for (var f = 0; f < e.options.length; f++)
                    if (null != e.options[f].list) {
                        e.options[f].value || (e.options[f].value = this._genStr());
                        var g = this._addItem("list", d, e.options[f].list, e.options[f].value, null);
                        g._subSelect = !0, g._subSelectId = e.options[f].value
                    }
                null != a.list && (a.listParent || (a.listParent = e.name), g = this._addItem("list", d, a.list, null, a.listParent))
            }
        }, this._s2b = function(a) {
            return "true" == a || "1" == a || "yes" == a || 1 == a
        }, this._xmlSubItems = {
            item: "list",
            option: "options",
            note: "note",
            userdata: "_userdata"
        }, this._xmlToObject = function(a, b) {
            for (var c = b ? [] : {}, d = 0; d < a.childNodes.length; d++)
                if ("undefined" != typeof a.childNodes[d].tagName) {
                    var e = a.childNodes[d].tagName;
                    if (null != this._xmlSubItems[e]) {
                        var f = this._xmlSubItems[e];
                        "undefined" == typeof c[f] && (c[f] = []);
                        for (var g = {}, h = 0; h < a.childNodes[d].attributes.length; h++) {
                            var i = a.childNodes[d].attributes[h].name,
                                j = a.childNodes[d].attributes[h].value;
                            g[i] = j
                        }
                        "note" == f && (g.text = a.childNodes[d].firstChild.nodeValue), "_userdata" == f && (g.value = a.childNodes[d].firstChild.nodeValue);
                        var k, l = this._xmlToObject(a.childNodes[d]);
                        for (k in l)
                            if ("_userdata" == k)
                                for (g.userdata || (g.userdata = {}), h = 0; h < l[k].length; h++) g.userdata[l[k][h].name] = l[k][h].value;
                            else g[k] = l[k];
                        b ? c.push(g) : c[f].push(g)
                    }
                }
            return c
        }, this._xmlParser = function() {
            if ("json" == d._loadType) eval("var formJSONData=" + this.xmlDoc.responseText), "object" == typeof formJSONData && null != formJSONData && d._initObj(formJSONData);
            else {
                var a = d._xmlToObject(this.getXMLTopNode("items"), !0);
                d._initObj(a)
            }
            d.cont && d.cont.cmp && "form" == d.cont.cmp && d.setSizes(), d.callEvent("onXLE", []), "function" == typeof d._doOnLoad && d._doOnLoad()
        }, this._doOnLoad = null, this._xmlLoader = new dtmlXMLLoaderObject(this._xmlParser, window), this.loadStruct = function(a, b, c) {
            if (this._loadType = "xml", "string" == typeof b) {
                if ("json" == b.toLowerCase() && (this._loadType = "json", "string" != typeof a)) return void this._initObj(a);
                this._doOnLoad = c || null
            } else this._doOnLoad = b || null;
            this.callEvent("onXLS", []), this._xmlLoader.loadXML(a)
        }, this.loadStructString = function(a, b) {
            this._doOnLoad = b || null, this._xmlLoader.loadXMLString(a)
        }, this._autoCheck = function(a) {
            this._locked === !0 ? a = !1 : "undefined" == typeof a && (a = !0);
            for (var b in this.itemPull) {
                var c = a && this.itemPull[b]._udis !== !0;
                this[c ? "_enableItem" : "_disableItem"](this.itemPull[b]._idd), null != this.getForm()._idIndex[this.itemPull[b]._idd] && (this.getForm()._idIndex[this.itemPull[b]._idd].enabled = c);
                var d = c && ("boolean" != typeof this.itemPull[b]._checked || this.itemPull[b]._checked);
                if (this.itemPull[b]._list)
                    for (var e = 0; e < this.itemPull[b]._list.length; e++) {
                        var f = !0;
                        if (1 == this.itemPull[b]._list[e]._subSelect) {
                            var f = !1,
                                g = this.getItemValue(this.itemPull[b]._idd);
                            "object" == typeof g && "number" == typeof g.length || (g = [g]);
                            for (var h = 0; h < g.length; h++) f = g[h] == this.itemPull[b]._list[e]._subSelectId || f;
                            this.itemPull[b]._listObj[e][f ? "show" : "hide"](this.itemPull[b]._listBase[e])
                        }
                        this.itemPull[b]._list[e]._autoCheck(d && f)
                    }
            }
        }, this.doWithItem = function(a, b, c, d, e, f) {
            if ("object" != typeof a) {
                if (this.itemPull[this.idPrefix + a]) return this.objPull[this.idPrefix + a][b](this.itemPull[this.idPrefix + a], c, d, e, f);
                j = null;
                for (g in this.itemPull)
                    if (this.itemPull[g]._list && !j)
                        for (k = 0; k < this.itemPull[g]._list.length; k++) null == j && (j = this.itemPull[g]._list[k].doWithItem(a, b, c, d, e, f));
                return j
            }
            var g, h = a[0],
                i = a[1],
                j = null;
            for (g in this.itemPull) {
                if ((this.itemPull[g]._value == i || null === i) && this.itemPull[g]._group == h) return this.objPull[g][b](this.itemPull[g], c, d, e, f);
                if (null != this.itemPull[g]._list && !j)
                    for (var k = 0; k < this.itemPull[g]._list.length; k++) j = this.itemPull[g]._list[k].doWithItem(a, b, c, d, e)
            }
            return null != j ? j : "getType" == b ? this.doWithItem(a[0], "getType") : void 0
        }, this._removeItem = function(a, b) {
            null != b ? a = this.doWithItem([a, b], "destruct") : this.doWithItem(a, "destruct"), this._clearItemData(a)
        }, this._clearItemData = function(a) {
            if (this.itemPull[this.idPrefix + a]) {
                a = this.idPrefix + a;
                try {
                    this.objPull[a] = null, this.itemPull[a] = null, delete this.objPull[a], delete this.itemPull[a]
                } catch (a) {}
            } else
                for (var b in this.itemPull)
                    if (this.itemPull[b]._list)
                        for (var c = 0; c < this.itemPull[b]._list.length; c++) this.itemPull[b]._list[c]._clearItemData(a)
        }, this.isItem = function(a, b) {
            return null != b && (a = [a, b]), this.doWithItem(a, "isExist")
        }, this.getItemType = function(a, b) {
            return a = [a, b || null], this.doWithItem(a, "getType")
        }, this.getItemsList = function() {
            var a, b = [],
                c = [];
            for (a in this.itemPull) {
                var d = null,
                    d = this.itemPull[a]._group ? this.itemPull[a]._group : a.replace(this.idPrefix, "");
                1 != c[d] && b.push(d), c[d] = !0
            }
            return b
        }, this.forEachItem = function(a) {
            for (var b in this.objPull)
                if ("radio" == this.objPull[b].t ? a(this.itemPull[b]._group, this.itemPull[b]._value) : a(String(b).replace(this.idPrefix, "")), this.itemPull[b]._list)
                    for (var c = 0; c < this.itemPull[b]._list.length; c++) this.itemPull[b]._list[c].forEachItem(a)
        }, this.setItemLabel = function(a, b, c) {
            null != c ? a = [a, b] : c = b, this.doWithItem(a, "setText", c)
        }, this.getItemLabel = function(a, b) {
            return null != b && (a = [a, b]), this.doWithItem(a, "getText")
        }, this.setItemText = this.setItemLabel, this.getItemText = this.getItemLabel, this._enableItem = function(a) {
            this.doWithItem(a, "enable")
        }, this._disableItem = function(a) {
            this.doWithItem(a, "disable")
        }, this._isItemEnabled = function(a) {
            return this.doWithItem(a, "isEnabled")
        }, this.checkItem = function(a, b) {
            null != b && (a = [a, b]), this.doWithItem(a, "check"), this._autoCheck()
        }, this.uncheckItem = function(a, b) {
            null != b && (a = [a, b]), this.doWithItem(a, "unCheck"), this._autoCheck()
        }, this.isItemChecked = function(a, b) {
            return null != b && (a = [a, b]), this.doWithItem(a, "isChecked")
        }, this.getCheckedValue = function(a) {
            return this.doWithItem([a, null], "getChecked")
        }, this._getRGroup = function(a, b) {
            for (var c in this.itemPull) {
                if (this.itemPull[c]._group == a && (null == b || this.itemPull[c]._value == b)) return this.itemPull[c]._idd;
                if (null != this.itemPull[c]._list)
                    for (var d = 0; d < this.itemPull[c]._list.length; d++) {
                        var e = this.itemPull[c]._list[d]._getRGroup(a, b);
                        if (null != e) return e
                    }
            }
            return null
        }, this.setItemValue = function(a, b) {
            return "radio" == this.getItemType(a) ? (null != this._getRGroup(a, b) ? this.checkItem(a, b) : this.uncheckItem(a, this.getCheckedValue(a)), null) : this.doWithItem(a, "setValue", b)
        }, this.getItemValue = function(a, b) {
            return "radio" == this.getItemType(a) ? this.getCheckedValue(a) : this.doWithItem(a, "getValue", b)
        }, this.updateValues = function() {
            this._updateValues()
        }, this.showItem = function(a, b) {
            null != b && (a = [a, b]), this.doWithItem(a, "show")
        }, this.hideItem = function(a, b) {
            null != b && (a = [a, b]), this.doWithItem(a, "hide")
        }, this.isItemHidden = function(a, b) {
            return null != b && (a = [a, b]), this.doWithItem(a, "isHidden")
        }, this.getOptions = function(a) {
            return this.doWithItem(a, "getOptions")
        }, this.setItemWidth = function(a, b) {
            this.doWithItem(a, "setWidth", b)
        }, this.getItemWidth = function(a) {
            return this.doWithItem(a, "getWidth")
        }, this.setItemHeight = function(a, b) {
            this.doWithItem(a, "setHeight", b)
        }, this.setItemFocus = function(a, b) {
            null != b && (a = [a, b]), this.doWithItem(a, "setFocus")
        }, this._updateValues = function() {
            for (var a in this.itemPull)
                if (this.objPull[a] && "function" == typeof this.objPull[a].updateValue && this.objPull[a].updateValue(this.itemPull[a]), this.itemPull[a]._list)
                    for (var b = 0; b < this.itemPull[a]._list.length; b++) this.itemPull[a]._list[b]._updateValues()
        }, this._getItemByName = function(a) {
            for (var b in this.itemPull) {
                if (this.itemPull[b]._idd == a) return this.itemPull[b];
                if (null != this.itemPull[b]._list)
                    for (var c = 0; c < this.itemPull[b]._list.length; c++) {
                        var d = this.itemPull[b]._list[c]._getItemByName(a);
                        if (null != d) return d
                    }
            }
            return null
        }, this._resetValidateCss = function(a) {
            a.className = a.className.replace(a._vcss, ""), a._vcss = null
        }, this.setValidateCss = function(a, b, c) {
            var d = this["radio" == this.getItemType(a) ? "_getRGroup" : "_getItemByName"](a);
            d && (null != d._vcss && this._resetValidateCss(d), d._vcss = "string" == typeof c ? c : "validate_" + (b === !0 ? "ok" : "error"), d.className += " " + d._vcss)
        }, this.resetValidateCss = function() {
            for (var a in this.itemPull)
                if (null != this.itemPull[a]._vcss && this._resetValidateCss(this.itemPull[a]), null != this.itemPull[a]._list)
                    for (var b = 0; b < this.itemPull[a]._list.length; b++) this.itemPull[a]._list[b].resetValidateCss()
        }, this.validate = function() {
            if (0 != this.callEvent("onBeforeValidate", [])) {
                var a = !0;
                return this.forEachItem(function(b, c) {
                    "undefined" != typeof c && (b = [b, c]), a = d.doWithItem(b, "_validate") && a
                }), this.callEvent("onAfterValidate", [a]), a
            }
        }, this.validateItem = function(a, b) {
            return "undefined" != typeof b && (a = [a, b]), this.doWithItem(a, "_validate")
        }, this.enableLiveValidation = function(a) {
            this.live_validate = 1 == a
        }, this.setReadonly = function(a, b) {
            this.doWithItem(a, "setReadonly", b)
        }, this.isReadonly = function(a) {
            return this.doWithItem(a, "isReadonly")
        }, this.getFirstActive = function(a) {
            for (var b = 0; b < this._indexId.length; b++) {
                var c = !0;
                if (1 == a) {
                    var d = this.getItemType(this._indexId[b]);
                    dhtmlXForm.prototype.items[d].setFocus || (c = !1)
                }
                if (c && this._idIndex[this._indexId[b]].enabled) return this._indexId[b]
            }
            return null
        }, this.setFocusOnFirstActive = function() {
            var a = this.getFirstActive(!0);
            null != a && this.setItemFocus(a)
        }, this.enableItem = function(a, b) {
            null != b && (a = [a, b]), this.doWithItem(a, "userEnable"), this._autoCheck()
        }, this.disableItem = function(a, b) {
            null != b && (a = [a, b]), this.doWithItem(a, "userDisable"), this._autoCheck()
        }, this.isItemEnabled = function(a, b) {
            return null != b && (a = [a, b]), this.doWithItem(a, "isUserEnabled")
        }, this.clear = function() {
            var a = {};
            this.formId = (new Date).valueOf(), this.resetDataProcessor("inserted");
            for (var b in this.itemPull) {
                var c = this.itemPull[b]._idd;
                if ("ch" == this.itemPull[b]._type && this.uncheckItem(c), this.itemPull[b]._type in {
                        ta: 1,
                        editor: 1,
                        calendar: 1,
                        pw: 1,
                        hd: 1
                    } && this.setItemValue(c, ""), "combo" == this.itemPull[b]._type) {
                    this.itemPull[b]._apiChange = !0;
                    var d = this.getCombo(c);
                    d.selectOption(0), d = null, this.itemPull[b]._apiChange = !1
                }
                if ("se" == this.itemPull[b]._type) {
                    var e = this.getOptions(c);
                    e.length > 0 && (e[0].selected = !0)
                }
                if ("ra" == this.itemPull[b]._type) {
                    var f = this.itemPull[b]._group;
                    a[f] || (this.checkItem(f, this.doWithItem(c, "_getFirstValue")), a[f] = !0)
                }
                if (this.itemPull[b]._list)
                    for (var g = 0; g < this.itemPull[b]._list.length; g++) this.itemPull[b]._list[g].clear();
                this["setFormData_" + this.itemPull[b]._type] && this["setFormData_" + this.itemPull[b]._type](c, "")
            }
            a = null, this._parentForm && this._autoCheck(), this.resetValidateCss()
        }, this.unload = function() {
            for (var a in this.objPull) this._removeItem(String(a).replace(this.idPrefix, ""));
            this.detachAllEvents(), this._ccTm && window.clearTimeout(this._ccTm), this._formLS = null, this._xmlLoader.destructor(), this._subSelectId = this._subSelect = this.idPrefix = this.skin = this.idef = this.b_index = this.align_css = this.apos_css = this.isReadonly = this.setReadonly = this.isLocked = this.unlock = this.lock = this.getItemsList = this.getFormData = this.setFormData = this.getEditor = this.getCombo = this.getColorPicker = this.getCalendar = this.setSizes = this.setRTL = this.getUserData = this.setUserData = this.getItemWidth = this.getCheckedValue = this.detachAllEvents = this._prepare = this._locked = this._mergeSettings = this._doLock = this._parentForm = this._parentEnabled = this._type = this._rGroup = this.setSkin = this.setItemWidth = this.setItemHeight = this.setFontSize = this.remove = this.loadStructString = this.loadStruct = this._ulToObject = this._ic = this.getOptions = this.isItemChecked = this.uncheckItem = this.checkItem = this.isItemHidden = this.hideItem = this.showItem = this.getItemValue = this.setItemValue = this.getItemText = this.setItemText = this.getItemLabel = this.setItemLabel = this._getPosition = this._setPosition = this.getItemPosition = this.setItemPosition = this.eventCatcher = this.detachEvent = this.checkEvent = this.callEvent = this.attachEvent = this.removeItem = this.addItem = this.getForm = this.unload = this.getItemType = this.doWithItem = this.clear = this.isItem = this.forEachItem = this._isItemEnabled = this._disableItem = this._enableItem = this._clearItemData = this._autoCheck = this._initObj = this._genStr = this._removeItem = this._addItem = this.itemPull = this.objPull = this.items = this.loadXMLString = this.loadXML = this._xmlToObject = this._xmlParser = this._xmlLoader = null;
            for (var b = 0; b < this.base.length; b++) {
                for (; this.base[b].childNodes.length > 0;) this.base[b].removeChild(this.base[b].childNodes[0]);
                this.base[b].parentNode && this.base[b].parentNode.removeChild(this.base[b]), this.base[b] = null
            }
            this.base = null, this.cont.onkeypress = null, this.cont.className = "", this.cont = null
        };
    for (var e in this.items) this.items[e].t = e, "undefined" == typeof this.items[e]._index && (this.items[e]._index = !0), this.items[e].show || (this.items[e].show = function(a) {
        if (a.style.display = "", a._listObj)
            for (var b = 0; b < a._listObj.length; b++) a._listObj[b].show(a._listBase[b])
    }), this.items[e].hide || (this.items[e].hide = function(a) {
        if (a.style.display = "none", a._listObj)
            for (var b = 0; b < a._listObj.length; b++) a._listObj[b].hide(a._listBase[b])
    }), this.items[e].isHidden || (this.items[e].isHidden = function(a) {
        return "none" == a.style.display
    }), this.items[e].userEnable || (this.items[e].userEnable = function(a) {
        a._udis = !1
    }), this.items[e].userDisable || (this.items[e].userDisable = function(a) {
        a._udis = !0
    }), this.items[e].isUserEnabled || (this.items[e].isUserEnabled = function(a) {
        return a._udis !== !0
    }), this.items[e].getType || (this.items[e].getType = function() {
        return this.t
    }), this.items[e].isExist || (this.items[e].isExist = function() {
        return !0
    }), this.items[e]._validate || (this.items[e]._validate = function(a) {
        if (!a._validate || !a._enabled) return !0;
        for (var b = "ch" == a._type ? this.isChecked(a) ? this.getValue(a) : 0 : this.getValue(a), c = !0, d = 0; d < a._validate.length; d++) {
            var e = "is" + a._validate[d];
            if (null != b && 0 != b.length || "isNotEmpty" == e) {
                var f = dhtmlxValidation[e];
                "function" != typeof f && "function" == typeof a._validate[d] && (f = a._validate[d]), "function" != typeof f && "function" == typeof window[a._validate[d]] && (f = window[a._validate[d]]), c = ("function" == typeof f ? f(b) : RegExp(a._validate[d]).test(b)) && c, f = null
            }
        }
        return a.callEvent("onValidate" + (c ? "Success" : "Error"), [a._idd, b, c]) !== !1 && a.getForm().setValidateCss(a._idd, c), c
    });
    return this._locked = !1, this._doLock = function(a) {
        var b = a === !0;
        this._locked != b && (this._locked = b, this._autoCheck(!this._locked))
    }, this.lock = function() {
        this._doLock(!0)
    }, this.unlock = function() {
        this._doLock(!1)
    }, this.isLocked = function() {
        return this._locked
    }, this.setNumberFormat = function(a, b, c, d) {
        return this.doWithItem(a, "setNumberFormat", b, c, d)
    }, dhtmlxEventable(this), this.attachEvent("_onButtonClick", function(a, b) {
        this.callEvent("onButtonClick", [a, b])
    }), this._updateBlocks = function() {
        this.forEachItem(function(a) {
            ("block" == d.getItemType(a) || "combo" == d.getItemType(a)) && d.doWithItem(a, "_setCss", d.skin, d.cont.style.fontSize)
        })
    }, this._isObj = function(a) {
        return null != a && "object" == typeof a && "undefined" == typeof a.length
    }, this._copyObj = function(a) {
        if (this._isObj(a)) {
            var b, c = {};
            for (b in a) c[b] = "object" == typeof a[b] && null != a[b] ? this._copyObj(a[b]) : a[b]
        } else
            for (c = [], b = 0; b < a.length; b++) c[b] = "object" == typeof a[b] && null != a[b] ? this._copyObj(a[b]) : a[b];
        return c
    }, null != b && "object" == typeof b && this._initObj(this._copyObj(b)), this._parentForm && this._updateBlocks(), this._ccActive = !1, this._ccTm = null, this
}

function dhtmlXFileUploader(a, b, c, d, e, f, g, h) {
    var i = this;
    if ("string" == typeof d && "function" == typeof this[d]) this.engine = d;
    else {
        this.engine = "html4";
        var j = null;
        "undefined" != typeof window.FormData && "undefined" != typeof window.XMLHttpRequest && (j = new XMLHttpRequest, "undefined" == typeof j.upload && (j = null)), null != j ? this.engine = "html5" : "undefined" != typeof window.swfobject || j === !1 ? (j = swfobject.getFlashPlayerVersion(), j.major >= 10 && (this.engine = "flash")) : (this._sl_v = this.getSLVersion()) && (this.engine = "sl"), j = null
    }
    "string" == typeof a && (a = document.getElementById(a)), this._swf_file_url = b || "", this._swf_upolad_url = c || "", this._swf_logs = e, this._sl_xap = f, this._sl_upload_url = g, this._sl_logs = h, this.p = document.createElement("DIV"), this.p.className += " dhx_file_uploader", a.appendChild(this.p), this.p_files = document.createElement("DIV"), this.p_files.className = "dhx_upload_files", this.p.appendChild(this.p_files), this.p_controls = document.createElement("DIV"), this.p_controls.className = "dhx_upload_controls", this.p.appendChild(this.p_controls), this._files = {}, this._items = {}, this._data = {}, this._autoRemove = this._autoStart = !1, this._enabled = this._titleScreen = !0, this._uploaded_count = 0, this._uid = function() {
        return this._idd ? this._idd++ : this._idd = (new Date).getTime(), this._idd
    }, this._initToolbar = function() {
        this.b_opts = {
            info: {
                onclick: null
            },
            browse: {
                onclick: null,
                tooltip: "Browse"
            },
            upload: {
                onclick: function() {
                    i._enabled && !i._uploading && (i._switchButton(!0), i._uploadStart())
                },
                tooltip: "Upload"
            },
            cancel: {
                onclick: function() {
                    i._enabled && (i._uploadStop(), i._switchButton(!1))
                },
                tooltip: "Stop"
            },
            clear: {
                onclick: function() {
                    i._enabled && i.clear()
                },
                tooltip: "Clear list"
            }
        }, this.buttons = {};
        for (var a in this.b_opts) {
            var b = document.createElement("DIV");
            b.innerHTML = "&nbsp;", b.className = "dhx_file_uploader_button button_" + a, b.onclick = this.b_opts[a].onclick, this.b_opts[a].tooltip && (b.title = this.b_opts[a].tooltip), this.p_controls.appendChild(b), this.buttons[a] = b, b = null
        }
        this.buttons.cancel.style.display = "none"
    }, this._readableSize = function(a) {
        for (var b = !1, c = "b,Kb,Mb,Gb,Tb,Pb,Eb".split(","), d = 0; d < c.length; d++) a > 1024 ? a /= 1024 : b === !1 && (b = d);
        return b === !1 && (b = c.length - 1), Math.round(100 * a) / 100 + " " + c[b]
    }, this._beforeAddFileToList = function(a, b) {
        return this.callEvent("onBeforeFileAdd", [a, b]) === !0
    }, this._addFileToList = function(a, b, c, d, e) {
        this._checkTitleScreen();
        var f = document.createElement("DIV");
        f._idd = a, f.className = "dhx_file dhx_file_" + d, f.innerHTML = "<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>" + e + "%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>", this.p_files.appendChild(f), f.childNodes[0].style.width = f.offsetWidth - 127 + "px", this._items[a] = f, this._updateFileNameSize(a), f.childNodes[2].onclick = function() {
            if (i._enabled) {
                var a = this.parentNode._idd;
                i._removeFileFromQueue(a)
            }
        }, this.callEvent("onFileAdd", [b])
    }, this._removeFileFromList = function(a) {
        this._items[a] && (this._items[a].childNodes[2].onclick = null, this._items[a].parentNode.removeChild(this._items[a]), this._items[a] = null, delete this._items[a], this._data[a] && (this._data[a] = null, delete this._data[a]), this._checkTitleScreen())
    }, this._updateFileNameSize = function(a) {
        this._items[a].childNodes[0].innerHTML = this._files[a].name + (isNaN(this._files[a].size) ? "&nbsp;" : " (" + this._readableSize(this._files[a].size) + ")"), this._items[a].childNodes[0].title = this._files[a].name + (isNaN(this._files[a].size) ? "" : " (" + this._readableSize(this._files[a].size) + ")")
    }, this._updateFileInList = function(a, b, c) {
        this._items[a] && (this._items[a].className = "dhx_file dhx_file_" + b, "uploading" == b && c < 100 && "loader" == this._progress_type ? (this._items[a].childNodes[1].className = "dhx_file_param dhx_file_uploading", this._items[a].childNodes[1].innerHTML = "&nbsp;") : (this._items[a].childNodes[1].className = "dhx_file_param dhx_file_progress", this._items[a].childNodes[1].innerHTML = c + "%"), this._updateFileNameSize(a))
    }, this._removeFilesByState = function(a) {
        for (var b in this._files)(a === !0 || this._files[b].state == a) && this._removeFileFromQueue(b)
    }, this._switchButton = function(a) {
        if (1 == a) this.buttons.upload.style.display = "none", this.buttons.cancel.style.display = "";
        else {
            var b = this._uploaded_count;
            this.buttons.upload.style.display = "", this.buttons.cancel.style.display = "none", this._uploaded_count = 0, b > 0 && this.callEvent("onUploadComplete", [b])
        }
    }, this._uploadStart = function() {
        if (!this._uploading)
            for (var a in this._files) "fail" == this._files[a].state && (this._files[a].state = "added", this._updateFileInList(a, "added", 0));
        this._uploading = !0;
        var b = !1;
        for (a in this._files) b || "added" != [this._files[a].state] || (b = !0, this._files[a].state = "uploading", this._updateFileInList(a, "uploading", 0), this._doUploadFile(a));
        b || (this._uploading = !1, this._switchButton(!1))
    }, this._onUploadSuccess = function(a, b, c) {
        if ("undefined" != typeof c && "flash" == this.engine) {
            try {
                eval("var t=" + c.data)
            } catch (a) {}
            if ("undefined" == typeof t || 1 != t.state || null == t.name) return void this._onUploadFail(a);
            b = t.name
        }
        this._uploaded_count++, this._data[a] = {
            realName: this._files[a].name,
            serverName: b
        }, this._files[a].state = "uploaded", this._updateFileInList(a, "uploaded", 100), this.callEvent("onUploadFile", [this._files[a].name, b]), this._autoRemove && this._removeFileFromQueue(a), this._uploading && this._uploadStart()
    }, this._onUploadFail = function(a) {
        this._files[a].state = "fail", this._updateFileInList(a, "fail", 0), this.callEvent("onUploadFail", [this._files[a].name]), this._uploading && this._uploadStart()
    }, this._onUploadAbort = function(a) {
        this._uploading = !1, this._files[a].state = "added", this._updateFileInList(a, "added", 0), this.callEvent("onUploadCancel", [this._files[a].name])
    }, this._checkTitleScreen = function() {
        var a, b = 0;
        for (a in this._files) b++;
        0 == b && this.p.className.search("dhx_file_uploader_title") < 0 && this._titleScreen && (this.p.className += " dhx_file_uploader_title", this.buttons.info.innerHTML = this._titleText, this.buttons.info.style.width = Math.max(this.p_controls.offsetWidth - 134, 0) + "px"), (b > 0 || !this._titleScreen) && this.p.className.search("dhx_file_uploader_title") >= 0 && (this.p.className = this.p.className.replace(/dhx_file_uploader_title/g, ""), this.buttons.info.innerHTML = "")
    }, this.callEvent = function() {}, this.upload = function() {
        this._uploading || this._uploadStart()
    }, this.setAutoStart = function(a) {
        this._autoStart = 1 == a
    }, this.setAutoRemove = function(a) {
        this._autoRemove = 1 == a
    }, this.enableTitleScreen = function(a) {
        this._titleScreen = 1 == a, this._checkTitleScreen()
    }, this.setTitleText = function(a) {
        this._titleText = a, this.p.className.search("dhx_file_uploader_title") >= 0 && (this.buttons.info.innerHTML = this._titleText)
    }, this.setURL = function(a) {
        this._url = a
    }, this.setSWFURL = function(a) {
        this._swf_upolad_url = a
    }, this.enable = function() {
        this._enabled = !0, this.p_files.className = "dhx_upload_files", this.p_controls.className = "dhx_upload_controls"
    }, this.disable = function() {
        this._enabled = !1, this.p_files.className = "dhx_upload_files dhx_uploader_dis", this.p_controls.className = "dhx_upload_controls dhx_uploader_dis"
    }, this.getStatus = function() {
        var a, b = 0;
        for (a in this._files) {
            if ("uploaded" != this._files[a].state) return -1;
            b = 1
        }
        return b
    }, this.getData = function() {
        return this._data
    }, this.clear = function() {
        this.callEvent("onBeforeClear", []) === !0 && (this._uploading && i._uploadStop(), i._switchButton(!1), i._removeFilesByState(!0), this.callEvent("onClear", []))
    }, this.unload = function() {
        this._removeFilesByState(!0), this._items = this._files = this._data = null, this._unloadEngine();
        for (var a in this.buttons) this.buttons[a].onclick = null, this.buttons[a].parentNode.removeChild(this.buttons[a]), this.buttons[a] = null, delete this.buttons[a];
        this.buttons = null;
        for (a in this.b_opts) this.b_opts[a].onclick = null, this.b_opts[a] = null, delete this.b_opts[a];
        this.b_opts = null, this.p_controls.parentNode.removeChild(this.p_controls), this.p_controls = null, this.p_files.parentNode.removeChild(this.p_files), this.engine = this._swf_upolad_url = this._swf_file_url = this.unload = this.clear = this.getData = this.getStatus = this.disable = this.enable = this.setURL = this.setTitleText = this.enableTitleScreen = this.setAutoRemove = this.setAutoStart = this.upload = this.callEvent = this._checkTitleScreen = this._onUploadAbort = this._onUploadFail = this._onUploadSuccess = this._uploadStart = this._switchButton = this._removeFilesByState = this._updateFileInList = this._updateFileNameSize = this._removeFileFromList = this._addFileToList = this._readableSize = this._initToolbar = this._uid = this._idd = this._uploading = this._url = this._uploaded_count = this._titleText = this._titleScreen = this._progress_type = this._enabled = this._autoStart = this._autoRemove = this.p_files = null, this.p.className = this.p.className.replace(/dhx_file_uploader_title/gi, "").replace(/dhx_file_uploader/gi, ""), i = a = this.p = null
    };
    var k = new this[this.engine],
        l;
    for (l in k) this[l] = k[l], k[l] = null;
    return l = k = a = null, this._initToolbar(), this._initEngine(), this._checkTitleScreen(), this
}

function dhtmlxArray(a) {
    return dhtmlXHeir(a || [], dhtmlxArray._master)
}

function dhtmlXGridObject(a) {
    if (_isIE) try {
        document.execCommand("BackgroundImageCache", !1, !0)
    } catch (a) {}
    a ? "object" == typeof a ? (this.entBox = a, this.entBox.id || (this.entBox.id = "cgrid2_" + this.uid())) : this.entBox = document.getElementById(a) : (this.entBox = document.createElement("DIV"), this.entBox.id = "cgrid2_" + this.uid()), this.entBox.innerHTML = "", dhtmlxEventable(this);
    var c = this;
    this._wcorr = 0, this.fontWidth = 7, this.row = this.cell = null, this.iconURL = "", this.editor = null, this._dclE = this._f2kE = !0, this.combos = [], this.defVal = [], this.rowsAr = {}, this.rowsBuffer = dhtmlxArray(), this.rowsCol = dhtmlxArray(), this._data_cache = {}, this._ecache = {}, this._ud_enabled = !0, this.xmlLoader = new dtmlXMLLoaderObject(this.doLoadDetails, this, !0, this.no_cashe), this._maskArr = [], this.selectedRows = dhtmlxArray(), this.UserData = {}, this._sizeFix = this._borderFix = 0, this.entBox.className += " gridbox", this.entBox.style.width = this.entBox.getAttribute("width") || (window.getComputedStyle ? this.entBox.style.width || window.getComputedStyle(this.entBox, null).width : this.entBox.currentStyle ? this.entBox.currentStyle.width : this.entBox.style.width || 0) || "100%", this.entBox.style.height = this.entBox.getAttribute("height") || (window.getComputedStyle ? this.entBox.style.height || window.getComputedStyle(this.entBox, null).height : this.entBox.currentStyle ? this.entBox.currentStyle.height : this.entBox.style.height || 0) || "100%", this.entBox.style.cursor = "default", this.entBox.onselectstart = function() {
        return !1
    };
    var d = function(a) {
        var b = document.createElement("TABLE");
        return b.cellSpacing = b.cellPadding = 0, b.style.cssText = "width:100%;table-layout:fixed;", b.className = a.substr(2), b
    };
    return this.obj = d("c_obj"), this.hdr = d("c_hdr"), this.hdr.style.marginRight = "20px", this.hdr.style.paddingRight = "20px", this.objBox = document.createElement("DIV"), this.objBox.style.width = "100%", this.objBox.style.overflow = "auto", this.objBox.appendChild(this.obj),
        this.objBox.className = "objbox", dhtmlx.$customScroll && dhtmlx.CustomScroll.enable(this), this.hdrBox = document.createElement("DIV"), this.hdrBox.style.width = "100%", this.hdrBox.style.height = "25px", this.hdrBox.style.overflow = "hidden", this.hdrBox.className = "xhdr", this.preloadImagesAr = [], this.sortImg = document.createElement("IMG"), this.sortImg.style.display = "none", this.hdrBox.appendChild(this.sortImg), this.hdrBox.appendChild(this.hdr), this.hdrBox.style.position = "relative", this.entBox.appendChild(this.hdrBox), this.entBox.appendChild(this.objBox), this.entBox.grid = this, this.objBox.grid = this, this.hdrBox.grid = this, this.obj.grid = this, this.hdr.grid = this, this.cellWidthPX = [], this.cellWidthPC = [], this.cellWidthType = this.entBox.cellwidthtype || "px", this.delim = this.entBox.delimiter || ",", this._csvDelim = ",", this.hdrLabels = [], this.columnIds = [], this.columnColor = [], this._hrrar = [], this.cellType = dhtmlxArray(), this.cellAlign = [], this.initCellWidth = [], this.fldSort = [], this._srdh = _isIE && "BackCompat" != document.compatMode ? 22 : 20, this.imgURL = window.dhx_globalImgPath || "", this.isActive = !1, this.isEditable = !0, this.pagingOn = this.useImagesInHeader = !1, this.rowsBufferOutSize = 0, dhtmlxEvent(window, "unload", function() {
            try {
                c.destructor && c.destructor()
            } catch (a) {}
        }), this.setSkin = function(a) {
            this.skin_name = a;
            var b = this.entBox.className.split(" gridbox")[0];
            switch (this.entBox.className = b + " gridbox gridbox_" + a, this.skin_h_correction = 0, this.enableAlterCss("ev_" + a, "odd_" + a, this.isTreeGrid()), this._fixAlterCss(), a) {
                case "clear":
                    this._topMb = document.createElement("DIV"), this._topMb.className = "topMumba", this._topMb.innerHTML = "<img style='left:0px'   src='" + this.imgURL + "skinC_top_left.gif'><img style='right:20px' src='" + this.imgURL + "skinC_top_right.gif'>", this.entBox.appendChild(this._topMb), this._botMb = document.createElement("DIV"), this._botMb.className = "bottomMumba", this._botMb.innerHTML = "<img style='left:0px'   src='" + this.imgURL + "skinD_bottom_left.gif'><img style='right:20px' src='" + this.imgURL + "skinD_bottom_right.gif'>", this.entBox.appendChild(this._botMb), "absolute" != this.entBox.style.position && (this.entBox.style.position = "relative"), this.skin_h_correction = 20;
                    break;
                case "dhx_terrace":
                    this._srdh = 40, this.forceDivInHeader = !0;
                    break;
                case "dhx_skyblue":
                case "dhx_web":
                case "glassy_blue":
                case "dhx_black":
                case "dhx_blue":
                case "modern":
                case "light":
                    this._srdh = 20, this.forceDivInHeader = !0;
                    break;
                case "xp":
                    this.forceDivInHeader = !0, this._srdh = _isIE && "BackCompat" != document.compatMode ? 26 : 22;
                    break;
                case "mt":
                    this._srdh = _isIE && "BackCompat" != document.compatMode ? 26 : 22;
                    break;
                case "gray":
                    _isIE && "BackCompat" != document.compatMode && (this._srdh = 22)
            }
            if (_isIE && this.hdr) {
                var c = this.hdr.parentNode;
                c.removeChild(this.hdr), c.appendChild(this.hdr)
            }
            this.setSizes()
        }, _isIE && this.preventIECaching(!0), window.dhtmlDragAndDropObject && (this.dragger = new dhtmlDragAndDropObject), this._doOnScroll = function(a, b) {
            this.callEvent("onScroll", [this.objBox.scrollLeft, this.objBox.scrollTop]), this.doOnScroll(a, b)
        }, this.doOnScroll = function(a, b) {
            this.hdrBox.scrollLeft = this.objBox.scrollLeft, this.ftr && (this.ftr.parentNode.scrollLeft = this.objBox.scrollLeft), !b && this._srnd && (this._dLoadTimer && window.clearTimeout(this._dLoadTimer), this._dLoadTimer = window.setTimeout(function() {
                c._update_srnd_view && c._update_srnd_view()
            }, 100))
        }, this.attachToObject = function(a) {
            a.appendChild(this.globalBox ? this.globalBox : this.entBox), this.setSizes()
        }, this.init = function(a) {
            if (this.isTreeGrid() && !this._h2 && (this._h2 = new dhtmlxHierarchy, this._fake && !this._realfake && (this._fake._h2 = this._h2), this._tgc = {
                    imgURL: null
                }), this._hstyles) {
                if (this.editStop(), this.fldSorted = this.r_fldSorted = this.resized = this.lastClicked = null, this.cellWidthPX = [], this.cellWidthPC = [], this.hdr.rows.length > 0) {
                    var b = this.xmlFileUrl;
                    this.clearAll(!0), this.xmlFileUrl = b
                }
                for (var d = this.hdr.insertRow(0), e = 0; e < this.hdrLabels.length; e++) d.appendChild(document.createElement("TH")), d.childNodes[e]._cellIndex = e, d.childNodes[e].style.height = "0px";
                _isIE && _isIE < 8 && document.body.style.msTouchAction == this.undefined ? d.style.position = "absolute" : d.style.height = "auto", d = this.hdr.insertRow(_isKHTML ? 2 : 1), d._childIndexes = [];
                for (var f = 0, e = 0; e < this.hdrLabels.length; e++) d._childIndexes[e] = e - f, this.hdrLabels[e] == this.splitSign && 0 != e ? (_isKHTML && d.insertCell(e - f), d.cells[e - f - 1].colSpan = (d.cells[e - f - 1].colSpan || 1) + 1, d.childNodes[e - f - 1]._cellIndex++, f++, d._childIndexes[e] = e - f) : (d.insertCell(e - f), d.childNodes[e - f]._cellIndex = e, d.childNodes[e - f]._cellIndexS = e, this.setColumnLabel(e, this.hdrLabels[e]));
                0 == f && (d._childIndexes = null), this._cCount = this.hdrLabels.length, _isIE && window.setTimeout(function() {
                    c.setSizes && c.setSizes()
                }, 1), this.obj.firstChild || this.obj.appendChild(document.createElement("TBODY"));
                var g = this.obj.firstChild;
                if (!g.firstChild)
                    for (g.appendChild(document.createElement("TR")), g = g.firstChild, _isIE && _isIE < 8 && document.body.style.msTouchAction == this.undefined ? g.style.position = "absolute" : g.style.height = "auto", e = 0; e < this.hdrLabels.length; e++) g.appendChild(document.createElement("TH")), g.childNodes[e].style.height = "0px";
                this._c_order = null, 1 != this.multiLine && (this.obj.className += " row20px"), this.sortImg.style.position = "absolute", this.sortImg.style.display = "none", this.sortImg.src = this.imgURL + "sort_desc.gif", this.sortImg.defLeft = 0, this.noHeader ? this.hdrBox.style.display = "none" : this.noHeader = !1, this._ivizcol && this.setColHidden(), this.attachHeader(), this.attachHeader(0, 0, "_aFoot"), this.setSizes(), a && this.parseXML(), this.obj.scrollTop = 0, this.dragAndDropOff && this.dragger.addDragLanding(this.entBox, this), this._initDrF && this._initD(), this._init_point && this._init_point()
            }
        }, this.setColumnSizes = function(a) {
            for (var b = 0, c = [], d = 0, e = 0; e < this._cCount; e++)
                if ("*" != this.initCellWidth[e] || this._hrrar[e]) {
                    if ("%" == this.cellWidthType) {
                        "undefined" == typeof this.cellWidthPC[e] && (this.cellWidthPC[e] = this.initCellWidth[e]);
                        var f = a * this.cellWidthPC[e] / 100 || 0;
                        d > .5 && (f++, d--);
                        var g = this.cellWidthPX[e] = Math.floor(f),
                            d = d + f - g
                    } else "undefined" == typeof this.cellWidthPX[e] && (this.cellWidthPX[e] = this.initCellWidth[e]);
                    this._hrrar[e] || (b += 1 * this.cellWidthPX[e])
                } else this._awdth = !1, c.push(e);
            if (c.length) {
                var h = Math.floor((a - b) / c.length);
                for (h < 0 && (h = 1), e = 0; e < c.length; e++) {
                    var i = Math.max(this._drsclmW ? this._drsclmW[c[e]] || 0 : 0, h);
                    this.cellWidthPX[c[e]] = i, b += i
                }
                if (a > b) {
                    var j = c[c.length - 1];
                    this.cellWidthPX[j] += a - b, b = a
                }
                this._setAutoResize()
            }
            return this.obj.style.width = b + "px", this.hdr.style.width = b + "px", this.ftr && (this.ftr.style.width = b + "px"), this.chngCellWidth(), b
        }, this.setSizes = function() {
            if (this.hdr.rows[0]) {
                var a = this.quirks = _isIE && "BackCompat" == document.compatMode,
                    b = (this.entBox.offsetWidth - this.entBox.clientWidth) / 2;
                if (!this.dontSetSizes)
                    if (this.globalBox) {
                        var d = (this.globalBox.offsetWidth - this.globalBox.clientWidth) / 2;
                        if (this._delta_x && !this._realfake) {
                            var e = this.globalBox.clientWidth;
                            this.globalBox.style.width = this._delta_x, this.entBox.style.width = Math.max(0, this.globalBox.clientWidth + (a ? 2 * d : 0) - this._fake.entBox.clientWidth) + "px", e != this.globalBox.clientWidth && this._fake._correctSplit(this._fake.entBox.clientWidth)
                        }
                        this._delta_y && !this._realfake && (this.globalBox.style.height = this._delta_y, this.entBox.style.overflow = this._fake.entBox.style.overflow = "hidden", this.entBox.style.height = this._fake.entBox.style.height = this.globalBox.clientHeight + (a ? 2 * d : 0) + "px")
                    } else this._delta_x && (this.entBox.parentNode && "TD" == this.entBox.parentNode.tagName ? (this.entBox.style.width = "1px", this.entBox.style.width = parseInt(this._delta_x) * this.entBox.parentNode.clientWidth / 100 - 2 * b + "px") : this.entBox.style.width = this._delta_x), this._delta_y && (this.entBox.style.height = this._delta_y);
                if (window.clearTimeout(this._sizeTime), this.entBox.offsetWidth || this.globalBox && this.globalBox.offsetWidth) {
                    var f = this._wthB || !this.entBox.cmp && !this._delta_x || 0 != (this.skin_name || "").indexOf("dhx") || a ? 0 : 2,
                        g = this._wthB || !this.entBox.cmp && !this._delta_y || 0 != (this.skin_name || "").indexOf("dhx") || a ? 0 : 2;
                    this._sizeFix && (f -= this._sizeFix, g -= this._sizeFix);
                    var h = !this.parentGrid && this.objBox.scrollHeight > this.objBox.offsetHeight,
                        i = dhtmlx.$customScroll ? 0 : 18,
                        j = this.entBox.clientWidth - (this.skin_h_correction || 0) * (a ? 0 : 1) - f,
                        k = this.entBox.clientWidth - (this.skin_h_correction || 0) - f,
                        l = this.entBox.clientHeight - g,
                        m = this.setColumnSizes(k - (h ? i : 0) - (this._correction_x || 0)),
                        n = !this.parentGrid && (this.objBox.scrollWidth > this.objBox.offsetWidth || "scroll" == this.objBox.style.overflowX),
                        o = this.hdr.clientHeight,
                        p = this.ftr ? this.ftr.clientHeight : 0,
                        q = j,
                        r = l - o - p;
                    this._awdth && this._awdth[0] && 99999 == this._awdth[1] && (n = 0), this._ahgr && (r = this._ahgrMA ? this.entBox.parentNode.clientHeight - o - p : this.obj.offsetHeight + (n ? i : 0) + (this._correction_y || 0), this._ahgrM && (r = this._ahgrF ? Math.min(this._ahgrM, r + o + p) - o - p : Math.min(this._ahgrM, r)), h && r >= this.obj.scrollHeight + (n ? i : 0)) && (h = !1, this.setColumnSizes(k - (this._correction_x || 0))), this._awdth && this._awdth[0] && ("%" == this.cellWidthType && (this.cellWidthType = "px"), this._fake && (m += this._fake.entBox.clientWidth), q = Math.min(Math.max(m + (h ? i : 0), this._awdth[2]), this._awdth[1]) + (this._correction_x || 0), this._fake && (q -= this._fake.entBox.clientWidth)), r = Math.max(0, r), this._ff_size_delta = .1 == this._ff_size_delta ? .2 : .1, _isFF || (this._ff_size_delta = 0), this.dontSetSizes || (this.entBox.style.width = Math.max(0, q + (a ? 2 : 0) * b + this._ff_size_delta) + "px", this.entBox.style.height = r + (a ? 2 : 0) * b + o + p + "px"), this.objBox.style.height = r + (a && !h ? 2 : 0) * b + "px", this.hdrBox.style.height = o + "px", r != l && this.doOnScroll(0, !this._srnd);
                    var s = this["setSizes_" + this.skin_name];
                    s && s.call(this), this.setSortImgPos(), o != this.hdr.clientHeight && this._ahgr && this.setSizes(), this.callEvent("onSetSizes", [])
                } else this._sizeTime = window.setTimeout(function() {
                    c.setSizes && c.setSizes()
                }, 250)
            }
        }, this.setSizes_clear = function() {
            var a = this.hdr.offsetHeight,
                b = this.entBox.offsetWidth,
                c = a + this.objBox.offsetHeight;
            this._topMb.style.top = (a || 0) + "px", this._topMb.style.width = b + 20 + "px", this._botMb.style.top = c - 3 + "px", this._botMb.style.width = b + 20 + "px"
        }, this.chngCellWidth = function() {
            _isOpera && this.ftr && (this.ftr.width = this.objBox.scrollWidth + "px");
            for (var a = this._cCount, b = 0; b < a; b++) this.hdr.rows[0].cells[b].style.width = this.cellWidthPX[b] + "px", this.obj.rows[0].childNodes[b].style.width = this.cellWidthPX[b] + "px", this.ftr && (this.ftr.rows[0].cells[b].style.width = this.cellWidthPX[b] + "px")
        }, this.setDelimiter = function(a) {
            this.delim = a
        }, this.setInitWidthsP = function(a, b) {
            this.cellWidthType = "%", this.initCellWidth = a.split(this.delim.replace(/px/gi, "")), b || this._setAutoResize()
        }, this._setAutoResize = function() {
            if (!this._realfake) {
                var a = (window, this);
                dhtmlxEvent(window, "resize", function() {
                    window.clearTimeout(a._resize_timer), a._setAutoResize && (a._resize_timer = window.setTimeout(function() {
                        a.setSizes && a.setSizes(), a._fake && a._fake._correctSplit()
                    }, 100))
                })
            }
        }, this.setInitWidths = function(a) {
            if (this.cellWidthType = "px", this.initCellWidth = a.split(this.delim), _isFF)
                for (var b = 0; b < this.initCellWidth.length; b++) "*" != this.initCellWidth[b] && (this.initCellWidth[b] = parseInt(this.initCellWidth[b]))
        }, this.enableMultiline = function(a) {
            this.multiLine = convertStringToBoolean(a)
        }, this.enableMultiselect = function(a) {
            this.selMultiRows = convertStringToBoolean(a)
        }, this.setImagesPath = this.setImagePath = function(a) {
            this.imgURL = a
        }, this.setIconsPath = this.setIconPath = function(a) {
            this.iconURL = a
        }, this.changeCursorState = function(a) {
            var b = a.target || a.srcElement;
            if ("TD" != b.tagName && (b = this.getFirstParentOfType(b, "TD")), b) {
                if ("TD" == b.tagName && this._drsclmn && !this._drsclmn[b._cellIndex]) return b.style.cursor = "default";
                var c = (a.layerX || 0) + (_isIE || "DIV" != a.target.tagName ? 0 : b.offsetLeft);
                b.style.cursor = b.offsetWidth - (a.offsetX || (parseInt(this.getPosition(b, this.hdrBox)) - c) * -1) < (_isOpera ? 20 : 10) ? "E-resize" : "default", _isOpera && (this.hdrBox.scrollLeft = this.objBox.scrollLeft)
            }
        }, this.startColResize = function(a) {
            this.resized && this.stopColResize(), this.resized = null;
            var b = a.target || a.srcElement;
            "TD" != b.tagName && (b = this.getFirstParentOfType(b, "TD"));
            var d = a.clientX,
                e = this.hdr.offsetWidth,
                f = parseInt(b.offsetWidth);
            "TD" != b.tagName || "default" == b.style.cursor || this._drsclmn && !this._drsclmn[b._cellIndex] || (c._old_d_mm = document.body.onmousemove, c._old_d_mu = document.body.onmouseup, document.body.onmousemove = function(a) {
                c && c.doColResize(a || window.event, b, f, d, e)
            }, document.body.onmouseup = function() {
                c && c.stopColResize()
            })
        }, this.stopColResize = function() {
            document.body.onmousemove = c._old_d_mm || "", document.body.onmouseup = c._old_d_mu || "", this.setSizes(), this.doOnScroll(0, 1), this.callEvent("onResizeEnd", [this])
        }, this.doColResize = function(a, b, c, d, e) {
            b.style.cursor = "E-resize", this.resized = b;
            var f = c + (a.clientX - d);
            if (e + (a.clientX - d), this.callEvent("onResize", [b._cellIndex, f, this])) {
                if (_isIE && (this.objBox.scrollLeft = this.hdrBox.scrollLeft), b.colSpan > 1) {
                    for (var g = [], h = 0; h < b.colSpan; h++) g[h] = Math.round(f * this.hdr.rows[0].childNodes[b._cellIndexS + h].offsetWidth / b.offsetWidth);
                    for (h = 0; h < b.colSpan; h++) this._setColumnSizeR(b._cellIndexS + 1 * h, g[h])
                } else this._setColumnSizeR(b._cellIndex, f);
                this.doOnScroll(0, 1), this.setSizes(), this._fake && this._awdth && this._fake._correctSplit()
            }
        }, this._setColumnSizeR = function(a, b) {
            if (b > (this._drsclmW && !this._notresize ? this._drsclmW[a] || 10 : 10)) {
                if (this.obj.rows[0].childNodes[a].style.width = b + "px", this.hdr.rows[0].childNodes[a].style.width = b + "px", this.ftr && (this.ftr.rows[0].childNodes[a].style.width = b + "px"), "px" == this.cellWidthType) this.cellWidthPX[a] = b;
                else {
                    var c = parseInt(this.entBox.offsetWidth);
                    this.objBox.scrollHeight > this.objBox.offsetHeight && (c -= 17);
                    var d = Math.round(b / c * 100);
                    this.cellWidthPC[a] = d
                }
                "none" != this.sortImg.style.display && this.setSortImgPos()
            }
        }, this.setSortImgState = function(a, b, c, d) {
            if (c = (c || "asc").toLowerCase(), convertStringToBoolean(a)) {
                this.sortImg.src = "asc" == c ? this.imgURL + "sort_asc.gif" : this.imgURL + "sort_desc.gif", this.sortImg.style.display = "", this.fldSorted = this.hdr.rows[0].childNodes[b];
                var e = this.hdr.rows[d || 1];
                if (e) {
                    for (var f = 0; f < e.childNodes.length; f++)
                        if (e.childNodes[f]._cellIndexS == b) return this.r_fldSorted = e.childNodes[f], this.setSortImgPos();
                    return this.setSortImgState(a, b, c, (d || 1) + 1)
                }
            } else this.sortImg.style.display = "none", this.fldSorted = this.r_fldSorted = null
        }, this.setSortImgPos = function(a, b, c, d) {
            if (!(this._hrrar && this._hrrar[this.r_fldSorted ? this.r_fldSorted._cellIndex : a] || (d || (d = a ? this.hdr.rows[c || 0].cells[a] : this.r_fldSorted), null == d))) {
                var e = this.getPosition(d, this.hdrBox),
                    f = d.offsetWidth;
                this.sortImg.style.left = Number(e[0] + f - 13) + "px", this.sortImg.defLeft = parseInt(this.sortImg.style.left), this.sortImg.style.top = Number(e[1] + 5) + "px", this.useImagesInHeader || b || (this.sortImg.style.display = "inline"), this.sortImg.style.left = this.sortImg.defLeft + "px"
            }
        }, this.setActive = function(a) {
            0 == arguments.length && (a = !0), 1 == a ? (globalActiveDHTMLGridObject && globalActiveDHTMLGridObject != this && (globalActiveDHTMLGridObject.editStop(), globalActiveDHTMLGridObject.callEvent("onBlur", [globalActiveDHTMLGridObject])), globalActiveDHTMLGridObject = this, this.isActive = !0) : (this.isActive = !1, this.callEvent("onBlur", [this]))
        }, this._doClick = function(a) {
            var b = 0,
                c = this.getFirstParentOfType(_isIE ? a.srcElement : a.target, "TD");
            if (c) {
                var d = !0;
                if (this.markedCells) {
                    var e = 0;
                    return (a.shiftKey || a.metaKey) && (e = 1), a.ctrlKey && (e = 2), this.doMark(c, e), !0
                }
                0 != this.selMultiRows && (a.shiftKey && null != this.row && this.selectedRows.length && (b = 1), a.ctrlKey || a.metaKey) && (b = 2), this.doClick(c, d, b)
            }
        }, this._doContClick = function(a) {
            var b = this.getFirstParentOfType(_isIE ? a.srcElement : a.target, "TD");
            if (!b || "undefined" == typeof b.parentNode.idd) return this.callEvent("onEmptyClick", [a]), !0;
            if (2 == a.button || _isMacOS && a.ctrlKey) {
                if (!this.callEvent("onRightClick", [b.parentNode.idd, b._cellIndex, a])) {
                    var c = function(a) {
                        return (a || event).cancelBubble = !0, !1
                    };
                    return (a.srcElement || a.target).oncontextmenu = c, c(a)
                }
                if (this._ctmndx) {
                    if (!this.callEvent("onBeforeContextMenu", [b.parentNode.idd, b._cellIndex, this])) return !0;
                    if (_isIE && (a.srcElement.oncontextmenu = function() {
                            return event.cancelBubble = !0, !1
                        }), this._ctmndx.showContextMenu) {
                        var d = window.document.documentElement,
                            e = window.document.body,
                            f = [d.scrollLeft || e.scrollLeft, d.scrollTop || e.scrollTop];
                        if (_isIE) var g = a.clientX + f[0],
                            h = a.clientY + f[1];
                        else g = a.pageX, h = a.pageY;
                        this._ctmndx.showContextMenu(g - 1, h - 1), this.contextID = this._ctmndx.contextMenuZoneId = b.parentNode.idd + "_" + b._cellIndex, this._ctmndx._skip_hide = !0
                    } else b.contextMenuId = b.parentNode.idd + "_" + b._cellIndex, b.contextMenu = this._ctmndx, b.a = this._ctmndx._contextStart, b.a(b, a), b.a = null;
                    return a.cancelBubble = !0, !1
                }
            } else this._ctmndx && (this._ctmndx.hideContextMenu ? this._ctmndx.hideContextMenu() : this._ctmndx._contextEnd());
            return !0
        }, this.doClick = function(a, b, d, e) {
            this.selMultiRows || (d = 0);
            var f = this.row ? this.row.idd : 0;
            if (this.setActive(!0), d || (d = 0), null != this.cell && (this.cell.className = this.cell.className.replace(/cellselected/g, "")), "TD" == a.tagName) {
                if (this.checkEvent("onSelectStateChanged")) var g = this.getSelectedId();
                var h = this.row;
                if (1 == d) {
                    var i = this.rowsCol._dhx_find(a.parentNode),
                        j = this.rowsCol._dhx_find(this.lastClicked);
                    if (i > j) var k = j,
                        l = i;
                    else k = i, l = j;
                    for (var m = 0; m < this.rowsCol.length; m++)
                        if (m >= k && m <= l) {
                            if (!this.rowsCol[m] || this.rowsCol[m]._sRow) return this.clearSelection(), this.doClick(a, b, 0, e);
                            this.rowsCol[m].className.indexOf("rowselected") == -1 && this.callEvent("onBeforeSelect", [this.rowsCol[m].idd, f]) && (this.rowsCol[m].className += " rowselected", this.selectedRows[this.selectedRows.length] = this.rowsCol[m])
                        }
                } else if (2 == d && a.parentNode.className.indexOf("rowselected") != -1) {
                    a.parentNode.className = a.parentNode.className.replace(/rowselected/g, ""), this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(a.parentNode));
                    var n = !0,
                        e = !1
                }
                if (this.editStop(), "undefined" == typeof a.parentNode.idd) return !0;
                if (n || a.parentNode._sRow || (this.callEvent("onBeforeSelect", [a.parentNode.idd, f]) ? this.getSelectedRowId() != a.parentNode.idd ? (0 == d && this.clearSelection(), this.cell = a, h == a.parentNode && this._chRRS && (b = !1), this.row = a.parentNode, this.row.className += " rowselected", this.selectedRows._dhx_find(this.row) == -1 && (this.selectedRows[this.selectedRows.length] = this.row)) : (this.cell = a, this.row = a.parentNode) : b = !1), this.cell && this.cell.parentNode.className.indexOf("rowselected") != -1 && (this.cell.className = this.cell.className.replace(/cellselected/g, "") + " cellselected"), 1 != d && !this.row) return;
                this.lastClicked = a.parentNode;
                var o = this.row.idd,
                    p = this.cell;
                if (b && "undefined" != typeof o && p && !n ? c.onRowSelectTime = setTimeout(function() {
                        c.callEvent && c.callEvent("onRowSelect", [o, p._cellIndex])
                    }, 100) : this.callEvent("onRowSelectRSOnly", [o]), this.checkEvent("onSelectStateChanged")) {
                    var q = this.getSelectedId();
                    g != q && this.callEvent("onSelectStateChanged", [q, g])
                }
            }
            this.isActive = !0, e !== !1 && this.cell && this.cell.parentNode.idd && this.moveToVisible(this.cell)
        }, this.selectAll = function() {
            this.clearSelection();
            var a = this.rowsBuffer;
            this.pagingOn && (a = this.rowsCol);
            for (var b = 0; b < a.length; b++) this.render_row(b).className += " rowselected";
            this.selectedRows = dhtmlxArray([].concat(a)), this.selectedRows.length && (this.row = this.selectedRows[0], this.cell = this.row.cells[0]), this._fake && !this._realfake && this._fake.selectAll()
        }, this.selectCell = function(a, b, c, d, e, f) {
            if (c || (c = !1), "object" != typeof a && (a = this.render_row(a)), !a || a == -1) return null;
            var g = a._childIndexes ? a.childNodes[a._childIndexes[b]] : a.childNodes[b];
            g || (g = a.childNodes[0]), this.markedCells ? this.doMark(g, d ? 2 : 0) : d ? this.doClick(g, c, 3, f) : this.doClick(g, c, 0, f), e && this.editCell()
        }, this.moveToVisible = function(a, b) {
            if (this.pagingOn) {
                var c = Math.floor(this.getRowIndex(a.parentNode.idd) / this.rowsBufferOutSize) + 1;
                c != this.currentPage && this.changePage(c)
            }
            try {
                if (a.offsetHeight) {
                    var d = a.offsetLeft + a.offsetWidth + 20,
                        e = 0;
                    d > this.objBox.offsetWidth + this.objBox.scrollLeft ? a.offsetLeft > this.objBox.scrollLeft && (e = a.offsetLeft - 5) : a.offsetLeft < this.objBox.scrollLeft && (d -= 2 * a.offsetWidth / 3, d < this.objBox.scrollLeft && (e = a.offsetLeft - 5)), e && !b && (this.objBox.scrollLeft = e)
                }
                if (a.offsetHeight) d = a.offsetTop;
                else var f = this._realfake ? this._fake.rowsAr[a.parentNode.idd] : a.parentNode,
                    d = this.rowsBuffer._dhx_find(f) * this._srdh;
                var g = d + a.offsetHeight + 38;
                if (g > this.objBox.offsetHeight + this.objBox.scrollTop) var h = d;
                else d < this.objBox.scrollTop && (h = d - 5);
                h && (this.objBox.scrollTop = h)
            } catch (a) {}
        }, this.editCell = function() {
            if (!this.editor || this.cell != this.editor.cell) {
                if (this.editStop(), 1 != this.isEditable || !this.cell) return !1;
                var a = this.cell;
                if (a.parentNode._locked) return !1;
                if (this.editor = this.cells4(a), null != this.editor) {
                    if (this.editor.isDisabled()) return this.editor = null, !1;
                    0 != this.callEvent("onEditCell", [0, this.row.idd, this.cell._cellIndex]) && this.editor.edit ? (this._Opera_stop = (new Date).valueOf(), a.className += " editable", this.editor.edit(), this.callEvent("onEditCell", [1, this.row.idd, this.cell._cellIndex])) : this.editor = null
                }
            }
        }, this.editStop = function(a) {
            if (_isOpera && this._Opera_stop) {
                if (1 * this._Opera_stop + 50 > (new Date).valueOf()) return;
                this._Opera_stop = null
            }
            if (this.editor && null != this.editor)
                if (this.editor.cell.className = this.editor.cell.className.replace("editable", ""), a) {
                    var b = this.editor.val;
                    this.editor.detach(), this.editor.setValue(b), this.editor = null, this.callEvent("onEditCancel", [this.row.idd, this.cell._cellIndex, b])
                } else {
                    this.editor.detach() && (this.cell.wasChanged = !0);
                    var c = this.editor;
                    this.editor = null;
                    var d = this.callEvent("onEditCell", [2, this.row.idd, this.cell._cellIndex, c.getValue(), c.val]);
                    "string" == typeof d || "number" == typeof d ? c[c.setImage ? "setLabel" : "setValue"](d) : d || c[c.setImage ? "setLabel" : "setValue"](c.val), this._ahgr && this.multiLine && this.setSizes()
                }
        }, this._nextRowCell = function(a, b, c) {
            return a = this._nextRow((this._groups ? this.rowsCol : this.rowsBuffer)._dhx_find(a), b), a ? a.childNodes[a._childIndexes ? a._childIndexes[c] : c] : null
        }, this._getNextCell = function(a, b, c) {
            var a = a || this.cell,
                d = a.parentNode;
            return this._tabOrder ? (c = this._tabOrder[a._cellIndex], "undefined" != typeof c && (a = c < 0 ? this._nextRowCell(d, b, Math.abs(c) - 1) : d.childNodes[c])) : (c = a._cellIndex + b, c >= 0 && c < this._cCount ? (d._childIndexes && (c = d._childIndexes[a._cellIndex] + b), a = d.childNodes[c]) : a = this._nextRowCell(d, b, 1 == b ? 0 : this._cCount - 1)), a ? "none" == a.style.display || this.smartTabOrder && this.cells(a.parentNode.idd, a._cellIndex).isDisabled() ? this._getNextCell(a, b) : a : (1 == b && this.tabEnd && (this.tabEnd.focus(), this.tabEnd.focus(), this.setActive(!1)), b == -1 && this.tabStart && (this.tabStart.focus(), this.tabStart.focus(), this.setActive(!1)), null)
        }, this._nextRow = function(a, b) {
            var c = this.render_row(a + b);
            return c && c != -1 ? c && "none" == c.style.display ? this._nextRow(a + b, b) : c : null
        }, this.scrollPage = function(a) {
            if (this.rowsBuffer.length) {
                var b = this._realfake ? this._fake : this,
                    c = Math.floor((b._r_select || this.getRowIndex(this.row.idd) || 0) + a * this.objBox.offsetHeight / (this._srdh || 20));
                c < 0 && (c = 0), c >= this.rowsBuffer.length && (c = this.rowsBuffer.length - 1), this._srnd && !this.rowsBuffer[c] ? (this.objBox.scrollTop += Math.floor(a * this.objBox.offsetHeight / (this._srdh || 20)) * (this._srdh || 20), this._fake && (this._fake.objBox.scrollTop = this.objBox.scrollTop), b._r_select = c) : (this.selectCell(c, this.cell._cellIndex, !0, !1, !1, this.multiLine || this._srnd), this.multiLine || this._srnd || this._realfake || (this.objBox.scrollTop = this.getRowById(this.getRowId(c)).offsetTop, !this._fake) || (this._fake.objBox.scrollTop = this.objBox.scrollTop), b._r_select = null)
            }
        }, this.doKey = function(a) {
            if (!a) return !0;
            if ((a.target || a.srcElement).value !== window.undefined) {
                var b = a.target || a.srcElement;
                if (!b.parentNode || b.parentNode.className.indexOf("editable") == -1) return !0
            }
            if (globalActiveDHTMLGridObject && this != globalActiveDHTMLGridObject) return globalActiveDHTMLGridObject.doKey(a);
            if (0 == this.isActive) return !0;
            if (this._htkebl) return !0;
            if (!this.callEvent("onKeyPress", [a.keyCode, a.ctrlKey, a.shiftKey, a])) return !1;
            var c = "k" + a.keyCode + "_" + (a.ctrlKey ? 1 : 0) + "_" + (a.shiftKey ? 1 : 0);
            if (this.cell) {
                if (this._key_events[c]) return !1 === this._key_events[c].call(this) || (a.preventDefault && a.preventDefault(), a.cancelBubble = !0, !1);
                this._key_events.k_other && this._key_events.k_other.call(this, a)
            }
            return !0
        }, this.selectRow = function(a, b, c, d) {
            "object" != typeof a && (a = this.render_row(a)), this.selectCell(a, 0, b, c, !1, d)
        }, this.wasDblClicked = function(a) {
            var b = this.getFirstParentOfType(_isIE ? a.srcElement : a.target, "TD");
            if (b) {
                var c = b.parentNode.idd;
                return this.callEvent("onRowDblClicked", [c, b._cellIndex, a])
            }
        }, this._onHeaderClick = function(a, b) {
            var c = this.grid,
                b = b || c.getFirstParentOfType(_isIE ? event.srcElement : a.target, "TD");
            if (null == this.grid.resized) {
                if (!this.grid.callEvent("onHeaderClick", [b._cellIndexS, a || window.event])) return !1;
                c.sortField(b._cellIndexS, !1, b)
            }
            this.grid.resized = null
        }, this.deleteSelectedRows = function() {
            var a = this.selectedRows.length;
            if (0 != a) {
                var b = this.selectedRows;
                this.selectedRows = dhtmlxArray();
                for (var c = a - 1; c >= 0; c--) {
                    var d = b[c];
                    if (this.deleteRow(d.idd, d)) {
                        if (d == this.row) var e = c
                    } else this.selectedRows[this.selectedRows.length] = d
                }
                if (e) try {
                    e + 1 > this.rowsCol.length && e--, this.selectCell(e, 0, !0)
                } catch (a) {
                    this.cell = this.row = null
                }
            }
        }, this.getSelectedRowId = function() {
            for (var a = [], b = {}, c = 0; c < this.selectedRows.length; c++) {
                var d = this.selectedRows[c].idd;
                b[d] || (a[a.length] = d, b[d] = !0)
            }
            return 0 == a.length ? null : a.join(this.delim)
        }, this.getSelectedCellIndex = function() {
            return null != this.cell ? this.cell._cellIndex : -1
        }, this.getColWidth = function(a) {
            return parseInt(this.cellWidthPX[a])
        }, this.setColWidth = function(a, b) {
            if ("*" == b) this.initCellWidth[a] = "*";
            else {
                if (this._hrrar[a]) return;
                "px" == this.cellWidthType ? this.cellWidthPX[a] = parseInt(b) : this.cellWidthPC[a] = parseInt(b)
            }
            this.setSizes()
        }, this.getRowIndex = function(a) {
            for (var b = 0; b < this.rowsBuffer.length; b++)
                if (this.rowsBuffer[b] && this.rowsBuffer[b].idd == a) return b;
            return -1
        }, this.getRowId = function(a) {
            return this.rowsBuffer[a] ? this.rowsBuffer[a].idd : this.undefined
        }, this.setRowId = function(a, b) {
            this.changeRowId(this.getRowId(a), b)
        }, this.changeRowId = function(a, b) {
            if (a != b) {
                var c = this.rowsAr[a];
                c.idd = b, this.UserData[a] && (this.UserData[b] = this.UserData[a], this.UserData[a] = null), this._h2 && this._h2.get[a] && (this._h2.get[b] = this._h2.get[a], this._h2.get[b].id = b, delete this._h2.get[a]), this.rowsAr[a] = null, this.rowsAr[b] = c;
                for (var d = 0; d < c.childNodes.length; d++) c.childNodes[d]._code && (c.childNodes[d]._code = this._compileSCL(c.childNodes[d]._val, c.childNodes[d]));
                if (this._mat_links && this._mat_links[a]) {
                    var e = this._mat_links[a];
                    delete this._mat_links[a];
                    for (var f in e)
                        for (d = 0; d < e[f].length; d++) this._compileSCL(e[f][d].original, e[f][d])
                }
                this.callEvent("onRowIdChange", [a, b])
            }
        }, this.setColumnIds = function(a) {
            this.columnIds = a.split(this.delim)
        }, this.setColumnId = function(a, b) {
            this.columnIds[a] = b
        }, this.getColIndexById = function(a) {
            for (var b = 0; b < this.columnIds.length; b++)
                if (this.columnIds[b] == a) return b
        }, this.getColumnId = function(a) {
            return this.columnIds[a]
        }, this.getColLabel = this.getColumnLabel = function(a, b, c) {
            for (var d = (c || this.hdr).rows[(b || 0) + 1], e = 0; e < d.cells.length; e++)
                if (d.cells[e]._cellIndexS == a) return _isIE ? d.cells[e].innerText : d.cells[e].textContent;
            return ""
        }, this.getFooterLabel = function(a, b) {
            return this.getColumnLabel(a, b, this.ftr)
        }, this.setRowTextBold = function(a) {
            var b = this.getRowById(a);
            b && (b.style.fontWeight = "bold")
        }, this.setRowTextStyle = function(a, b) {
            var c = this.getRowById(a);
            if (c)
                for (var d = 0; d < c.childNodes.length; d++) {
                    var e = c.childNodes[d]._attrs.style || "";
                    this._hrrar && this._hrrar[d] && (e = "display:none;"), c.childNodes[d].style.cssText = e + "width:" + c.childNodes[d].style.width + ";" + b
                }
        }, this.setRowColor = function(a, b) {
            for (var c = this.getRowById(a), d = 0; d < c.childNodes.length; d++) c.childNodes[d].bgColor = b
        }, this.setCellTextStyle = function(a, b, c) {
            var d = this.getRowById(a);
            if (d) {
                var e = d.childNodes[d._childIndexes ? d._childIndexes[b] : b];
                if (e) {
                    var f = "";
                    this._hrrar && this._hrrar[b] && (f = "display:none;"), e.style.cssText = f + "width:" + e.style.width + ";" + c
                }
            }
        }, this.setRowTextNormal = function(a) {
            var b = this.getRowById(a);
            b && (b.style.fontWeight = "normal")
        }, this.doesRowExist = function(a) {
            return null != this.getRowById(a)
        }, this.getColumnsNum = function() {
            return this._cCount
        }, this.moveRowUp = function(a) {
            var b = this.getRowById(a);
            if (this.isTreeGrid()) return this.moveRowUDTG(a, -1);
            var c = this.rowsCol._dhx_find(b);
            if (b.previousSibling && 0 != c) {
                b.parentNode.insertBefore(b, b.previousSibling), this.rowsCol._dhx_swapItems(c, c - 1), this.setSizes();
                var d = this.rowsBuffer._dhx_find(b);
                this.rowsBuffer._dhx_swapItems(d, d - 1), this._cssEven && this._fixAlterCss(c - 1)
            }
        }, this.moveRowDown = function(a) {
            var b = this.getRowById(a);
            if (this.isTreeGrid()) return this.moveRowUDTG(a, 1);
            var c = this.rowsCol._dhx_find(b);
            if (b.nextSibling) {
                this.rowsCol._dhx_swapItems(c, c + 1), b.nextSibling.nextSibling ? b.parentNode.insertBefore(b, b.nextSibling.nextSibling) : b.parentNode.appendChild(b), this.setSizes();
                var d = this.rowsBuffer._dhx_find(b);
                this.rowsBuffer._dhx_swapItems(d, d + 1), this._cssEven && this._fixAlterCss(c)
            }
        }, this.getCombo = function(a) {
            return this.combos[a] || (this.combos[a] = new dhtmlXGridComboObject), this.combos[a]
        }, this.setUserData = function(a, b, c) {
            a || (a = "gridglobaluserdata"), this.UserData[a] || (this.UserData[a] = new Hashtable), this.UserData[a].put(b, c)
        }, this.getUserData = function(a, b) {
            a || (a = "gridglobaluserdata"), this.getRowById(a);
            var c = this.UserData[a];
            return c ? c.get(b) : ""
        }, this.setEditable = function(a) {
            this.isEditable = convertStringToBoolean(a)
        }, this.selectRowById = function(a, b, c, d) {
            d || (d = !1), this.selectCell(this.getRowById(a), 0, d, b, !1, c)
        }, this.clearSelection = function() {
            this.editStop();
            for (var a = 0; a < this.selectedRows.length; a++) {
                var b = this.rowsAr[this.selectedRows[a].idd];
                b && (b.className = b.className.replace(/rowselected/g, ""))
            }
            this.selectedRows = dhtmlxArray(), this.row = null, null != this.cell && (this.cell.className = this.cell.className.replace(/cellselected/g, ""), this.cell = null), this.callEvent("onSelectionCleared", [])
        }, this.copyRowContent = function(a, b) {
            var c = this.getRowById(a);
            if (this.isTreeGrid()) this._copyTreeGridRowContent(c, a, b);
            else
                for (var d = 0; d < c.cells.length; d++) this.cells(b, d).setValue(this.cells(a, d).getValue());
            _isIE || (this.getRowById(a).cells[0].height = c.cells[0].offsetHeight)
        }, this.setFooterLabel = function(a, b, c) {
            return this.setColumnLabel(a, b, c, this.ftr)
        }, this.setColumnLabel = function(a, b, c, d) {
            var e = (d || this.hdr).rows[c || 1],
                f = e._childIndexes ? e._childIndexes[a] : a;
            if (e.cells[f]) {
                if (this.useImagesInHeader) {
                    e.cells[f].style.textAlign = "left", e.cells[f].innerHTML = "<img src='" + this.imgURL + b + "' onerror='this.src = \"" + this.imgURL + "imageloaderror.gif\"'>";
                    var g = new Image;
                    g.src = this.imgURL + "" + b.replace(/(\.[a-z]+)/, ".des$1"), this.preloadImagesAr[this.preloadImagesAr.length] = g;
                    var h = new Image;
                    h.src = this.imgURL + "" + b.replace(/(\.[a-z]+)/, ".asc$1"), this.preloadImagesAr[this.preloadImagesAr.length] = h
                } else {
                    var i = "<div class='hdrcell'>";
                    if (b.indexOf("img:[") != -1) {
                        var j = b.replace(/.*\[([^>]+)\].*/, "$1"),
                            b = b.substr(b.indexOf("]") + 1, b.length);
                        i += "<img width='18px' height='18px' align='absmiddle' src='" + j + "' hspace='2'>"
                    }
                    i += b, i += "</div>", e.cells[f].innerHTML = i, this._hstyles[f] && (e.cells[f].style.cssText = this._hstyles[f])
                }
                if ((b || "").indexOf("#") != -1) {
                    var k = b.match(/(^|{)#([^}]+)(}|$)/);
                    if (k) {
                        var l = "_in_header_" + k[2];
                        this[l] && this[l](this.forceDivInHeader ? e.cells[f].firstChild : e.cells[f], f, b.split(k[0]))
                    }
                }
            }
        }, this.setColLabel = function(a, b, c, d) {
            return this.setColumnLabel(a, b, (c || 0) + 1, d)
        }, this.clearAll = function(a) {
            if (this.obj.rows[0]) {
                this._h2 && (this._h2 = new dhtmlxHierarchy, this._fake) && (this._realfake ? this._h2 = this._fake._h2 : this._fake._h2 = this._h2), this.limit = this._limitC = 0, this.editStop(!0), this._dLoadTimer && window.clearTimeout(this._dLoadTimer), this._dload && (this.objBox.scrollTop = 0, this.limit = this._limitC || 0, this._initDrF = !0);
                for (var b = this.rowsCol.length, b = this.obj.rows.length, c = b - 1; c > 0; c--) {
                    var d = this.obj.rows[c];
                    d.parentNode.removeChild(d)
                }
                if (a) {
                    for (this._master_row = null, this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]), c = this.hdr.rows.length - 1; c >= 0; c--) d = this.hdr.rows[c], d.parentNode.removeChild(d);
                    this.ftr && (this.ftr.parentNode.removeChild(this.ftr), this.ftr = null), this._aHead = this.ftr = this.cellWidth = this._aFoot = null, this.cellType = dhtmlxArray(), this._hrrar = [], this.columnIds = [], this.combos = [], this._strangeParams = [], this.defVal = [], this._ivizcol = null
                }
                this.cell = this.row = null, this.rowsCol = dhtmlxArray(), this.rowsAr = {}, this._RaSeCol = [], this.rowsBuffer = dhtmlxArray(), this.UserData = [], this.selectedRows = dhtmlxArray(), (this.pagingOn || this._srnd) && (this.xmlFileUrl = ""), this.pagingOn && this.changePage(1), this._contextCallTimer && window.clearTimeout(this._contextCallTimer),
                    this._sst && this.enableStableSorting(!0), this._fillers = this.undefined, this.setSortImgState(!1), this.setSizes(), this.callEvent("onClearAll", [])
            }
        }, this.sortField = function(a, b, c) {
            if (0 == this.getRowsNum()) return !1;
            var d = this.hdr.rows[0].cells[a];
            if (d && "TH" == d.tagName && this.fldSort.length - 1 >= d._cellIndex && "na" != this.fldSort[d._cellIndex]) {
                var e = this.getSortingState(),
                    f = e[0] == a && "asc" == e[1] ? "des" : "asc";
                if (this.callEvent("onBeforeSorting", [a, this.fldSort[a], f])) {
                    if (this.sortImg.src = this.imgURL + "sort_" + ("asc" == f ? "asc" : "desc") + ".gif", this.useImagesInHeader) {
                        var g = this.hdr.rows[1].cells[d._cellIndex].firstChild;
                        if (null != this.fldSorted) {
                            var h = this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;
                            h.src = h.src.replace(/(\.asc\.)|(\.des\.)/, ".")
                        }
                        g.src = g.src.replace(/(\.[a-z]+)$/, "." + f + "$1")
                    }
                    this.sortRows(d._cellIndex, this.fldSort[d._cellIndex], f), this.fldSorted = d, this.r_fldSorted = c;
                    var i = this.hdr.rows[1],
                        i = c.parentNode;
                    i._childIndexes ? i._childIndexes[d._cellIndex] : d._cellIndex, this.setSortImgPos(!1, !1, !1, c)
                }
            }
        }, this.setCustomSorting = function(a, b) {
            this._customSorts || (this._customSorts = []), this._customSorts[b] = "string" == typeof a ? eval(a) : a, this.fldSort[b] = "cus"
        }, this.enableHeaderImages = function(a) {
            this.useImagesInHeader = a
        }, this.setHeader = function(a, b, c) {
            var d = "object" != typeof a ? this._eSplit(a) : [].concat(a),
                e = [],
                f = new dhtmlxArray(0),
                g = [],
                h = [],
                i = [];

            for (j = 0; j < d.length; j++)

                e[e.length] = Math.round(100 / d.length),
                f[f.length] = "ed", g[g.length] = "left",
                h[h.length] = "middle", i[i.length] = "na";

            this.splitSign = b || "#cspan",
                this.hdrLabels = d,
                this.cellWidth = e,
                this.initCellWidth.length || this.setInitWidthsP(e.join(this.delim), !0),
                this.cellType = f,
                this.cellAlign = g,
                this.cellVAlign = h,
                this.fldSort = i,
                this._hstyles = c || []
        }, this._eSplit = function(a) {
            if (![].push) return a.split(this.delim);
            var b = "r" + (new Date).valueOf(),
                c = this.delim.replace(/([\|\+\*\^])/g, "\\$1");
            return (a || "").replace(RegExp(c, "g"), b).replace(RegExp("\\\\" + b, "g"), this.delim).split(b)
        }, this.getColType = function(a) {
            return this.cellType[a]
        }, this.getColTypeById = function(a) {
            return this.cellType[this.getColIndexById(a)]
        }, this.setColTypes = function(a) {
            this.cellType = dhtmlxArray(a.split(this.delim)), this._strangeParams = [];
            for (var b = 0; b < this.cellType.length; b++) {
                if (this.cellType[b].indexOf("[") != -1) {
                    var c = this.cellType[b].split(/[\[\]]+/g);
                    this.cellType[b] = c[0], this.defVal[b] = c[1], 0 == c[1].indexOf("=") && (this.cellType[b] = "math", this._strangeParams[b] = c[0])
                }
                window["eXcell_" + this.cellType[b]] || dhtmlxError.throwError("Configuration", "Incorrect cell type: " + this.cellType[b], [this, this.cellType[b]])
            }
        }, this.setColSorting = function(a) {
            this.fldSort = a.split(this.delim);
            for (var b = 0; b < this.fldSort.length; b++) this.fldSort[b].length > 4 && "function" == typeof window[this.fldSort[b]] && (this._customSorts || (this._customSorts = []), this._customSorts[b] = window[this.fldSort[b]], this.fldSort[b] = "cus")
        }, this.setColAlign = function(a) {
            this.cellAlign = a.split(this.delim);
            for (var b = 0; b < this.cellAlign.length; b++) this.cellAlign[b] = this.cellAlign[b]._dhx_trim()
        }, this.setColVAlign = function(a) {
            this.cellVAlign = a.split(this.delim)
        }, this.setNoHeader = function(a) {
            this.noHeader = convertStringToBoolean(a)
        }, this.showRow = function(a) {
            this.getRowById(a), this._h2 && this.openItem(this._h2.get[a].parent.id);
            for (var b = this.getRowById(a).childNodes[0]; b && "none" == b.style.display;) b = b.nextSibling;
            b && this.moveToVisible(b, !0)
        }, this.setStyle = function(a, b, c, d) {
            this.ssModifier = [a, b, c, c, d];
            for (var e = ["#" + this.entBox.id + " table.hdr td", "#" + this.entBox.id + " table.obj td", "#" + this.entBox.id + " table.obj tr.rowselected td.cellselected", "#" + this.entBox.id + " table.obj td.cellselected", "#" + this.entBox.id + " table.obj tr.rowselected td"], f = 0; !_isIE;) {
                try {
                    document.styleSheets[f].cssRules.length
                } catch (a) {
                    f++;
                    continue
                }
                break
            }
            for (var g = 0; g < e.length; g++) this.ssModifier[g] && (_isIE ? document.styleSheets[0].addRule(e[g], this.ssModifier[g]) : document.styleSheets[f].insertRule(e[g] + (" { " + this.ssModifier[g] + " }"), document.styleSheets[f].cssRules.length))
        }, this.setColumnColor = function(a) {
            this.columnColor = a.split(this.delim)
        }, this.enableAlterCss = function(a, b, c, d) {
            (a || b) && this.attachEvent("onGridReconstructed", function() {
                this._fixAlterCss(), this._fake && this._fake._fixAlterCss()
            }), this._cssSP = c, this._cssSU = d, this._cssEven = a, this._cssUnEven = b
        }, this._fixAlterCss = function(a) {
            if (this._h2 && (this._cssSP || this._cssSU)) return this._fixAlterCssTGR(a);
            if (this._cssEven || this._cssUnEven)
                for (var b = a = a || 0, c = a; c < this.rowsCol.length; c++) this.rowsCol[c] && "none" != this.rowsCol[c].style.display && (this.rowsCol[c]._cntr ? b = 1 : (this.rowsCol[c].className = this.rowsCol[c].className.indexOf("rowselected") != -1 ? b % 2 == 1 ? this._cssUnEven + " rowselected " + (this.rowsCol[c]._css || "") : this._cssEven + " rowselected " + (this.rowsCol[c]._css || "") : b % 2 == 1 ? this._cssUnEven + " " + (this.rowsCol[c]._css || "") : this._cssEven + " " + (this.rowsCol[c]._css || ""), b++))
        }, this.clearChangedState = function() {
            for (var a = 0; a < this.rowsCol.length; a++) {
                var b = this.rowsCol[a];
                if (b && b.childNodes)
                    for (var c = b.childNodes.length, d = 0; d < c; d++) b.childNodes[d].wasChanged = !1
            }
        }, this.getChangedRows = function(a) {
            var b = [];
            return this.forEachRow(function(c) {
                var d = this.rowsAr[c];
                if ("TR" == d.tagName) {
                    var e = d.childNodes.length;
                    if (a && d._added) b[b.length] = d.idd;
                    else
                        for (var f = 0; f < e; f++)
                            if (d.childNodes[f].wasChanged) {
                                b[b.length] = d.idd;
                                break
                            }
                }
            }), b.join(this.delim)
        }, this._sAll = this._sUDa = !1, this.setSerializationLevel = function(a, b, c, d, e, f) {
            this._sUDa = a, this._sAll = b, this._sConfig = c, this._chAttr = d, this._onlChAttr = e, this._asCDATA = f
        }, this.setSerializableColumns = function(a) {
            if (a) {
                this._srClmn = (a || "").split(",");
                for (var b = 0; b < this._srClmn.length; b++) this._srClmn[b] = convertStringToBoolean(this._srClmn[b])
            } else this._srClmn = null
        }, this._serialise = function() {
            this.editStop();
            var a = [],
                b = "</" + this.xml.s_row + ">";
            if (this.isTreeGrid()) this._h2.forEachChildF(0, function(b) {
                var c = this._serializeRow(this.render_row_tree(-1, b.id));
                return a.push(c), !!c
            }, this, function() {
                a.push(b)
            });
            else
                for (var c = 0; c < this.rowsBuffer.length; c++)
                    if (this.rowsBuffer[c] && (!this._chAttr || !this.rowsBuffer[c]._locator)) {
                        var d = this._serializeRow(this.render_row(c));
                        a.push(d), d && a.push(b)
                    } return [a.join("")]
        }, this._serializeRow = function(a, b) {
            var c = [],
                d = this.xml.row_attrs,
                e = this.xml.cell_attrs;
            if (c.push("<" + this.xml.s_row), c.push(" id='" + a.idd + "'"), this._sAll && this.selectedRows._dhx_find(a) != -1 && c.push(" selected='1'"), this._h2 && "minus" == this._h2.get[a.idd].state && c.push(" open='1'"), d.length)
                for (b = 0; b < d.length; b++) c.push(" " + d[b] + "='" + a._attrs[d[b]] + "'");
            if (c.push(">"), this._sUDa && this.UserData[a.idd]) {
                keysAr = this.UserData[a.idd].getKeys();
                for (var f = 0; f < keysAr.length; f++) c.push("<userdata name='" + keysAr[f] + "'>" + (this._asCDATA ? "<![CDATA[" : "") + this.UserData[a.idd].get(keysAr[f]) + (this._asCDATA ? "]]>" : "") + "</userdata>")
            }
            for (var g = !1, h = 0; h < this._cCount; h++)
                if (!this._srClmn || this._srClmn[h]) {
                    var i = this.cells3(a, h);
                    if (c.push("<cell"), e.length)
                        for (b = 0; b < e.length; b++) c.push(" " + e[b] + "='" + i.cell._attrs[e[b]] + "'");
                    if (zxVal = i[this._agetm](), this._asCDATA && (zxVal = "<![CDATA[" + zxVal + "]]>"), this._ecspn && i.cell.colSpan && i.cell.colSpan > 1 && c.push(' colspan="' + i.cell.colSpan + '" '), this._chAttr ? i.wasChanged() && (c.push(' changed="1"'), g = !0) : this._onlChAttr && i.wasChanged() && (g = !0), this._sAll && "tree" == this.cellType[h] ? c.push((this._h2 ? " image='" + this._h2.get[a.idd].image + "'" : "") + ">" + zxVal + "</cell>") : c.push(">" + zxVal + "</cell>"), this._ecspn && i.cell.colSpan)
                        for (var j = 0; j < i.cell.colSpan - 1; j++) c.push("<cell/>"), h++
                }
            return !this._onlChAttr || g || a._added ? c.join("") : ""
        }, this._serialiseConfig = function() {
            for (var a = "<head>", b = 0; b < this.hdr.rows[0].cells.length; b++)
                if (!this._srClmn || this._srClmn[b]) {
                    var c = this.fldSort[b];
                    "cus" == c && (c = this._customSorts[b].toString(), c = c.replace(/function[\ ]*/, "").replace(/\([^\f]*/, "")), a += "<column width='" + this.getColWidth(b) + "' align='" + this.cellAlign[b] + "' type='" + this.cellType[b] + "' sort='" + (c || "na") + "' color='" + this.columnColor[b] + "'" + (this.columnIds[b] ? " id='" + this.columnIds[b] + "'" : "") + ">", a += this._asCDATA ? "<![CDATA[" + this.getHeaderCol(b) + "]]>" : this.getHeaderCol(b);
                    var d = this.getCombo(b);
                    if (d)
                        for (var e = 0; e < d.keys.length; e++) a += "<option value='" + d.keys[e] + "'>" + d.values[e] + "</option>";
                    a += "</column>"
                }
            return a += "</head>"
        }, this.serialize = function() {
            var a = '<?xml version="1.0"?><rows>';
            if (this._agetm = this._mathSerialization ? "getMathValue" : "getValue", this._sUDa && this.UserData.gridglobaluserdata)
                for (var b = this.UserData.gridglobaluserdata.getKeys(), c = 0; c < b.length; c++) a += "<userdata name='" + b[c] + "'>" + this.UserData.gridglobaluserdata.get(b[c]) + "</userdata>";
            return this._sConfig && (a += this._serialiseConfig()), a += this._serialise(), a += "</rows>"
        }, this.getPosition = function(a, b) {
            if (!b) {
                var c = getOffset(a);
                return [c.left, c.top]
            }
            for (var b = b || document.body, d = a, e = 0, f = 0; d && d != b;) e += d.offsetLeft - d.scrollLeft, f += d.offsetTop - d.scrollTop, d = d.offsetParent;
            return b == document.body && (_isIE ? (f += document.body.offsetTop || document.documentElement.offsetTop, e += document.body.offsetLeft || document.documentElement.offsetLeft) : _isFF || (e += document.body.offsetLeft, f += document.body.offsetTop)), [e, f]
        }, this.getFirstParentOfType = function(a, b) {
            for (; a && a.tagName != b && "BODY" != a.tagName;) a = a.parentNode;
            return a
        }, this.objBox.onscroll = function() {
            this.grid._doOnScroll()
        }, this.objBox.ontouchend = function() {
            this.hdrBox.scrollLeft = this.objBox.scrollLeft
        }, this.hdrBox.onscroll = function() {
            this._try_header_sync || (this._try_header_sync = !0, this.grid.objBox.scrollLeft != this.scrollLeft && (this.grid.objBox.scrollLeft = this.scrollLeft), this._try_header_sync = !1)
        }, (!_isOpera || _OperaRv > 8.5) && (this.hdr.onmousemove = function(a) {
            this.grid.changeCursorState(a || window.event)
        }, this.hdr.onmousedown = function(a) {
            return this.grid.startColResize(a || window.event)
        }), this.obj.onmousemove = this._drawTooltip, this.objBox.onclick = function(a) {
            (a || event).cancelBubble = !0
        }, this.obj.onclick = function(a) {
            this.grid._doClick(a || window.event), this.grid._sclE ? this.grid.editCell(a || window.event) : this.grid.editStop(), (a || event).cancelBubble = !0
        }, _isMacOS ? this.entBox.oncontextmenu = function(a) {
            a.cancelBubble = !0, a.returnValue = !1;
            var b = this.grid;
            return b._realfake && (b = b._fake), b._doContClick(a || window.event)
        } : (this.entBox.onmousedown = function(a) {
            return this.grid._doContClick(a || window.event)
        }, this.entBox.oncontextmenu = function(a) {
            return this.grid._ctmndx && ((a || event).cancelBubble = !0), !this.grid._ctmndx
        }), this.obj.ondblclick = function(a) {
            if (!this.grid.wasDblClicked(a || window.event)) return !1;
            if (this.grid._dclE) {
                var b = this.grid.getFirstParentOfType(_isIE ? event.srcElement : a.target, "TR");
                b == this.grid.row && this.grid.editCell(a || window.event)
            }
            return (a || event).cancelBubble = !0, !_isOpera && void 0
        }, this.hdr.onclick = this._onHeaderClick, this.sortImg.onclick = function() {
            c._onHeaderClick.apply({
                grid: c
            }, [null, c.r_fldSorted])
        }, this.hdr.ondblclick = this._onHeaderDblClick, document.body._dhtmlxgrid_onkeydown || (dhtmlxEvent(document, "keydown", function(a) {
            if (globalActiveDHTMLGridObject) return globalActiveDHTMLGridObject.doKey(a || window.event)
        }), document.body._dhtmlxgrid_onkeydown = !0), dhtmlxEvent(document.body, "click", function() {
            c.editStop && c.editStop(), c.isActive && c.setActive(!1)
        }), this.entBox.style.height.toString().indexOf("%") != -1 && (this._delta_y = this.entBox.style.height), this.entBox.style.width.toString().indexOf("%") != -1 && (this._delta_x = this.entBox.style.width), (this._delta_x || this._delta_y) && this._setAutoResize(), this.setColHidden = this.setColumnsVisibility, this.enableCollSpan = this.enableColSpan, this.setMultiselect = this.enableMultiselect, this.setMultiLine = this.enableMultiline, this.deleteSelectedItem = this.deleteSelectedRows, this.getSelectedId = this.getSelectedRowId, this.getHeaderCol = this.getColumnLabel, this.isItemExists = this.doesRowExist, this.getColumnCount = this.getColumnsNum, this.setSelectedRow = this.selectRowById, this.setHeaderCol = this.setColumnLabel, this.preventIECashing = this.preventIECaching, this.enableAutoHeigth = this.enableAutoHeight, this.getUID = this.uid, dhtmlx.image_path && this.setImagePath(dhtmlx.image_path), dhtmlx.skin && this.setSkin(dhtmlx.skin), this
}

function dhtmlXGridCellObject(a) {
    this.destructor = function() {
        return this.base = this.grid = this.cell = this.cell.obj = null
    }, this.cell = a, this.getValue = function() {
        return this.cell.firstChild && "TEXTAREA" == this.cell.firstChild.tagName ? this.cell.firstChild.value : this.cell.innerHTML._dhx_trim()
    }, this.getMathValue = function() {
        return this.cell.original ? this.cell.original : this.getValue()
    }, this.getFont = function() {
        return arOut = Array(3), this.cell.style.fontFamily && (arOut[0] = this.cell.style.fontFamily), "bold" != this.cell.style.fontWeight && "bold" != this.cell.parentNode.style.fontWeight || (arOut[1] = "bold"), "italic" != this.cell.style.fontStyle && "italic" != this.cell.parentNode.style.fontWeight || (arOut[1] += "italic"), arOut[2] = this.cell.style.fontSize ? this.cell.style.fontSize : "", arOut.join("-")
    }, this.getTextColor = function() {
        return this.cell.style.color ? this.cell.style.color : "#000000"
    }, this.getBgColor = function() {
        return this.cell.bgColor ? this.cell.bgColor : "#FFFFFF"
    }, this.getHorAlign = function() {
        return this.cell.style.textAlign ? this.cell.style.textAlign : this.cell.style.textAlign ? this.cell.style.textAlign : "left"
    }, this.getWidth = function() {
        return this.cell.scrollWidth
    }, this.setFont = function(a) {
        fntAr = a.split("-"), this.cell.style.fontFamily = fntAr[0], this.cell.style.fontSize = fntAr[fntAr.length - 1], 3 == fntAr.length && (/bold/.test(fntAr[1]) && (this.cell.style.fontWeight = "bold"), /italic/.test(fntAr[1]) && (this.cell.style.fontStyle = "italic"), /underline/.test(fntAr[1]) && (this.cell.style.textDecoration = "underline"))
    }, this.setTextColor = function(a) {
        this.cell.style.color = a
    }, this.setBgColor = function(a) {
        "" == a && (a = null), this.cell.bgColor = a
    }, this.setHorAlign = function(a) {
        this.cell.style.textAlign = 1 == a.length ? "c" == a ? "center" : "l" == a ? "left" : "right" : a
    }, this.wasChanged = function() {
        return !!this.cell.wasChanged
    }, this.isCheckbox = function() {
        var a = this.cell.firstChild;
        return !(!a || "INPUT" != a.tagName) && (type = a.type, "radio" == type || "checkbox" == type)
    }, this.isChecked = function() {
        if (this.isCheckbox()) return this.cell.firstChild.checked
    }, this.isDisabled = function() {
        return this.cell._disabled
    }, this.setChecked = function(a) {
        this.isCheckbox() && ("true" != a && 1 != a && (a = !1), this.cell.firstChild.checked = a)
    }, this.setDisabled = function(a) {
        "true" != a && 1 != a && (a = !1), this.isCheckbox() && (this.cell.firstChild.disabled = a, this.disabledF && this.disabledF(a)), this.cell._disabled = a
    }
}

function eXcell() {
    this.val = this.obj = null, this.changeState = function() {
        return !1
    }, this.edit = function() {
        this.val = this.getValue()
    }, this.detach = function() {
        return !1
    }, this.getPosition = function(a) {
        for (var b = a, c = 0, d = 0;
            "BODY" != b.tagName;) c += b.offsetLeft, d += b.offsetTop, b = b.offsetParent;
        return [c, d]
    }
}

function eXcell_ed(a) {
    a && (this.cell = a, this.grid = this.cell.parentNode.grid), this.edit = function() {
        this.cell.atag = !this.grid.multiLine && (_isKHTML || _isMacOS || _isFF) ? "INPUT" : "TEXTAREA", this.val = this.getValue(), this.obj = document.createElement(this.cell.atag), this.obj.setAttribute("autocomplete", "off"), this.obj.style.height = this.cell.offsetHeight - (_isIE, 4) + "px", this.obj.className = "dhx_combo_edit", this.obj.wrap = "soft", this.obj.style.textAlign = this.cell.style.textAlign, this.obj.onclick = function(a) {
            (a || event).cancelBubble = !0
        }, this.obj.onmousedown = function(a) {
            (a || event).cancelBubble = !0
        }, this.obj.value = this.val, this.cell.innerHTML = "", this.cell.appendChild(this.obj), this.obj.onselectstart = function(a) {
            return a || (a = event), a.cancelBubble = !0
        }, _isIE && (this.obj.focus(), this.obj.blur()), this.obj.focus()
    }, this.getValue = function() {
        return this.cell.firstChild && this.cell.atag && this.cell.firstChild.tagName == this.cell.atag ? this.cell.firstChild.value : this.cell._clearCell ? "" : this.cell.innerHTML.toString()._dhx_trim()
    }, this.detach = function() {
        return this.setValue(this.obj.value), this.val != this.getValue()
    }
}

function eXcell_edtxt(a) {
    a && (this.cell = a, this.grid = this.cell.parentNode.grid), this.getValue = function() {
        return this.cell.firstChild && this.cell.atag && this.cell.firstChild.tagName == this.cell.atag ? this.cell.firstChild.value : this.cell._clearCell ? "" : _isIE ? this.cell.innerText : this.cell.textContent
    }, this.setValue = function(a) {
        a && "" != a.toString()._dhx_trim() ? this.cell._clearCell = !1 : (a = " ", this.cell._clearCell = !0), this.setCTxtValue(a)
    }
}

function eXcell_edn(a) {
    a && (this.cell = a, this.grid = this.cell.parentNode.grid), this.getValue = function() {
        return this.cell.firstChild && "TEXTAREA" == this.cell.firstChild.tagName ? this.cell.firstChild.value : this.cell._clearCell ? "" : this.cell._orig_value || this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(), this.cell._cellIndex)
    }, this.detach = function() {
        var a = this.obj.value;
        return this.setValue(a), this.val != this.getValue()
    }
}

function eXcell_ch(a) {
    a && (this.cell = a, this.grid = this.cell.parentNode.grid), this.disabledF = function(a) {
        this.cell.innerHTML = 1 == a || 1 == a ? this.cell.innerHTML.replace("item_chk0.", "item_chk0_dis.").replace("item_chk1.", "item_chk1_dis.") : this.cell.innerHTML.replace("item_chk0_dis.", "item_chk0.").replace("item_chk1_dis.", "item_chk1.")
    }, this.changeState = function(a) {
        a === !0 && !this.grid.isActive && (null != window.globalActiveDHTMLGridObject && window.globalActiveDHTMLGridObject != this.grid && window.globalActiveDHTMLGridObject.isActive && window.globalActiveDHTMLGridObject.setActive(!1), this.grid.setActive(!0)), !this.grid.isEditable || this.cell.parentNode._locked || this.isDisabled() || (this.grid.callEvent("onEditCell", [0, this.cell.parentNode.idd, this.cell._cellIndex]) ? (this.val = this.getValue(), "1" == this.val ? this.setValue("0") : this.setValue("1"), this.cell.wasChanged = !0, this.grid.callEvent("onEditCell", [1, this.cell.parentNode.idd, this.cell._cellIndex]), this.grid.callEvent("onCheckbox", [this.cell.parentNode.idd, this.cell._cellIndex, "1" != this.val]), this.grid.callEvent("onCheck", [this.cell.parentNode.idd, this.cell._cellIndex, "1" != this.val])) : this.editor = null)
    }, this.getValue = function() {
        return this.cell.chstate ? this.cell.chstate.toString() : "0"
    }, this.isCheckbox = function() {
        return !0
    }, this.isChecked = function() {
        return "1" == this.getValue()
    }, this.setChecked = function(a) {
        this.setValue(a.toString())
    }, this.detach = function() {
        return this.val != this.getValue()
    }, this.edit = null
}

function eXcell_ra(a) {
    this.base = eXcell_ch, this.base(a), this.grid = a.parentNode.grid, this.disabledF = function(a) {
        this.cell.innerHTML = 1 == a || 1 == a ? this.cell.innerHTML.replace("radio_chk0.", "radio_chk0_dis.").replace("radio_chk1.", "radio_chk1_dis.") : this.cell.innerHTML.replace("radio_chk0_dis.", "radio_chk0.").replace("radio_chk1_dis.", "radio_chk1.")
    }, this.changeState = function(a) {
        a === !1 && 1 == this.getValue() || !this.grid.isEditable || this.cell.parentNode._locked || (0 != this.grid.callEvent("onEditCell", [0, this.cell.parentNode.idd, this.cell._cellIndex]) ? (this.val = this.getValue(), "1" == this.val ? this.setValue("0") : this.setValue("1"), this.cell.wasChanged = !0, this.grid.callEvent("onEditCell", [1, this.cell.parentNode.idd, this.cell._cellIndex]), this.grid.callEvent("onCheckbox", [this.cell.parentNode.idd, this.cell._cellIndex, "1" != this.val]), this.grid.callEvent("onCheck", [this.cell.parentNode.idd, this.cell._cellIndex, "1" != this.val])) : this.editor = null)
    }, this.edit = null
}

function eXcell_txt(a) {
    a && (this.cell = a, this.grid = this.cell.parentNode.grid), this.edit = function() {
        this.val = this.getValue(), this.obj = document.createElement("TEXTAREA"), this.obj.className = "dhx_textarea", this.obj.onclick = function(a) {
            (a || event).cancelBubble = !0
        };
        var a = this.grid.getPosition(this.cell);
        if (this.obj.value = this.val, this.obj.style.display = "", this.obj.style.textAlign = this.cell.style.textAlign, _isFF) {
            var b = document.createElement("DIV");
            b.appendChild(this.obj), b.style.overflow = "auto", b.className = "dhx_textarea", this.obj.style.margin = "0px 0px 0px 0px", this.obj.style.border = "0px", this.obj = b
        }
        document.body.appendChild(this.obj), _isOpera && (this.obj.onkeypress = function(a) {
            if (9 == a.keyCode) return !1
        }), this.obj.onkeydown = function(a) {
            var b = a || event;
            if (9 == b.keyCode) return globalActiveDHTMLGridObject.entBox.focus(), globalActiveDHTMLGridObject.doKey({
                keyCode: b.keyCode,
                shiftKey: b.shiftKey,
                srcElement: "0"
            }), !1
        }, this.obj.style.left = a[0] + "px", this.obj.style.top = a[1] + this.cell.offsetHeight + "px";
        var c = this.cell.offsetWidth < 200 ? 200 : this.cell.offsetWidth;
        this.obj.style.width = c + (_isFF ? 18 : 16) + "px", _isFF && (this.obj.firstChild.style.width = parseInt(this.obj.style.width) + "px", this.obj.firstChild.style.height = this.obj.offsetHeight - 3 + "px"), _isIE && (this.obj.select(), this.obj.value = this.obj.value), _isFF ? this.obj.firstChild.focus() : this.obj.focus()
    }, this.detach = function() {
        var a = "",
            a = _isFF ? this.obj.firstChild.value : this.obj.value;
        return this.cell._clearCell = "" == a, this.setValue(a), document.body.removeChild(this.obj), this.obj = null, this.val != this.getValue()
    }, this.getValue = function() {
        return this.obj ? _isFF ? this.obj.firstChild.value : this.obj.value : this.cell._clearCell ? "" : "undefined" != typeof this.cell._brval ? this.cell._brval : this.grid.multiLine ? this.cell._brval || this.cell.innerHTML.replace(/<br[^>]*>/gi, "\n")._dhx_trim() : this.cell._brval || this.cell.innerHTML
    }
}

function eXcell_txttxt(a) {
    a && (this.cell = a, this.grid = this.cell.parentNode.grid), this.getValue = function() {
        return this.cell.firstChild && "TEXTAREA" == this.cell.firstChild.tagName ? this.cell.firstChild.value : this.cell._clearCell ? "" : !this.grid.multiLine && this.cell._brval ? this.cell._brval : _isIE ? this.cell.innerText : this.cell.textContent
    }, this.setValue = function(a) {
        this.cell._brval = a, a && "" != a.toString()._dhx_trim() ? this.cell._clearCell = !1 : (a = " ", this.cell._clearCell = !0), this.setCTxtValue(a)
    }
}

function eXcell_co(a) {
    a && (this.cell = a, this.grid = this.cell.parentNode.grid, this.combo = this.cell._combo || this.grid.getCombo(this.cell._cellIndex), this.editable = !0), this.shiftNext = function() {
        var a = this.list.options[this.list.selectedIndex + 1];
        return a && (a.selected = !0), this.obj.value = this.list.options[this.list.selectedIndex].text, !0
    }, this.shiftPrev = function() {
        if (0 != this.list.selectedIndex) {
            var a = this.list.options[this.list.selectedIndex - 1];
            a && (a.selected = !0), this.obj.value = this.list.options[this.list.selectedIndex].text
        }
        return !0
    }, this.edit = function() {
        this.val = this.getValue(), this.text = this.getText()._dhx_trim();
        var a = this.grid.getPosition(this.cell);
        this.obj = document.createElement("TEXTAREA"), this.obj.className = "dhx_combo_edit", this.obj.style.height = this.cell.offsetHeight - 4 + "px", this.obj.wrap = "soft", this.obj.style.textAlign = this.cell.style.textAlign, this.obj.onclick = function(a) {
            (a || event).cancelBubble = !0
        }, this.obj.onmousedown = function(a) {
            (a || event).cancelBubble = !0
        }, this.obj.value = this.text, this.obj.onselectstart = function(a) {
            return a || (a = event), a.cancelBubble = !0
        };
        var b = this;
        this.obj.onkeyup = function(a) {
            var c = (a || event).keyCode;
            if (38 != c && 40 != c && 9 != c)
                for (var d = this.readonly ? String.fromCharCode(c) : this.value, e = b.list.options, f = 0; f < e.length; f++)
                    if (0 == e[f].text.indexOf(d)) return e[f].selected = !0
        }, this.list = document.createElement("SELECT"), this.list.className = "dhx_combo_select", this.list.style.width = this.cell.offsetWidth + "px", this.list.style.left = a[0] + "px", this.list.style.top = a[1] + this.cell.offsetHeight + "px", this.list.onclick = function(a) {
            var c = a || window.event,
                d = c.target || c.srcElement;
            "OPTION" == d.tagName && (d = d.parentNode), b.editable = !1, b.grid.editStop(), c.cancelBubble = !0
        };
        for (var c = this.combo.getKeys(), d = !1, e = 0, f = 0; f < c.length; f++) {
            var g = this.combo.get(c[f]);
            this.list.options[this.list.options.length] = new Option(g, c[f]), c[f] == this.val && (e = this.list.options.length - 1, d = !0)
        }
        0 == d && (this.list.options[this.list.options.length] = new Option(this.text, null === this.val ? "" : this.val), e = this.list.options.length - 1), document.body.appendChild(this.list), this.list.size = "6", this.cstate = 1, this.editable ? this.cell.innerHTML = "" : (this.obj.style.width = "1px", this.obj.style.height = "1px"), this.cell.appendChild(this.obj), this.list.options[e].selected = !0, _isFF && !this.editable || (this.obj.focus(), this.obj.focus()), this.editable || (this.obj.style.visibility = "hidden", this.list.focus(), this.list.onkeydown = function(a) {
            if (a = a || window.event, b.grid.setActive(!0), a.keyCode < 30) return b.grid.doKey({
                target: b.cell,
                keyCode: a.keyCode,
                shiftKey: a.shiftKey,
                ctrlKey: a.ctrlKey
            })
        })
    }, this.getValue = function() {
        return this.cell.combo_value == window.undefined ? "" : this.cell.combo_value
    }, this.detach = function() {
        if (this.val != this.getValue() && (this.cell.wasChanged = !0), null != this.list.parentNode)
            if (this.editable) {
                var a = this.list.options[this.list.selectedIndex];
                if (a && a.text == this.obj.value) this.setValue(this.list.value);
                else {
                    var b = this.cell._combo || this.grid.getCombo(this.cell._cellIndex),
                        c = b.values._dhx_find(this.obj.value);
                    c != -1 ? this.setValue(b.keys[c]) : this.setCValue(this.cell.combo_value = this.obj.value)
                }
            } else this.setValue(this.list.value);
        return this.list.parentNode && this.list.parentNode.removeChild(this.list), this.obj.parentNode && this.obj.parentNode.removeChild(this.obj), this.val != this.getValue()
    }
}

function eXcell_coro(a) {
    this.base = eXcell_co, this.base(a), this.editable = !1
}

function eXcell_cotxt(a) {
    this.base = eXcell_co, this.base(a)
}

function eXcell_corotxt(a) {
    this.base = eXcell_co, this.base(a), this.editable = !1
}

function eXcell_cp(a) {
    try {
        this.cell = a, this.grid = this.cell.parentNode.grid
    } catch (a) {}
    this.edit = function() {
        this.val = this.getValue(), this.obj = document.createElement("SPAN"), this.obj.style.border = "1px solid black", this.obj.style.position = "absolute";
        var a = this.grid.getPosition(this.cell);
        this.colorPanel(4, this.obj), document.body.appendChild(this.obj), this.obj.style.left = a[0] + "px", this.obj.style.zIndex = 1e3, this.obj.style.top = a[1] + this.cell.offsetHeight + "px"
    }, this.toolDNum = function(a) {
        return 1 == a.length && (a = "0" + a), a
    }, this.colorPanel = function(a, b) {
        var c = document.createElement("TABLE");
        b.appendChild(c), c.cellSpacing = 0, c.editor_obj = this, c.style.cursor = "default", c.onclick = function(a) {
            var b = a || window.event,
                c = b.target || b.srcElement,
                d = c.parentNode.parentNode.parentNode.editor_obj;
            d.setValue(c._bg), d.grid.editStop()
        };
        for (var d = 256 / a, e = 0; e <= 256 / d; e++)
            for (var f = c.insertRow(e), g = 0; g <= 256 / d; g++)
                for (var h = 0; h <= 256 / d; h++) {
                    R = new Number(d * e) - (0 == e ? 0 : 1), G = new Number(d * g) - (0 == g ? 0 : 1), B = new Number(d * h) - (0 == h ? 0 : 1);
                    var i = this.toolDNum(R.toString(16)) + "" + this.toolDNum(G.toString(16)) + this.toolDNum(B.toString(16)),
                        j = f.insertCell(g);
                    j.width = "10px", j.innerHTML = "&nbsp;", j.title = i.toUpperCase(), j.style.backgroundColor = "#" + i, j._bg = "#" + i, null != this.val && "#" + i.toUpperCase() == this.val.toUpperCase() && (j.style.border = "2px solid white")
                }
    }, this.getValue = function() {
        return this.cell.firstChild._bg || ""
    }, this.getRed = function() {
        return Number(parseInt(this.getValue().substr(1, 2), 16))
    }, this.getGreen = function() {
        return Number(parseInt(this.getValue().substr(3, 2), 16))
    }, this.getBlue = function() {
        return Number(parseInt(this.getValue().substr(5, 2), 16))
    }, this.detach = function() {
        return null != this.obj.offsetParent && document.body.removeChild(this.obj), this.val != this.getValue()
    }
}

function eXcell_img(a) {
    try {
        this.cell = a, this.grid = this.cell.parentNode.grid
    } catch (a) {}
    this.getValue = function() {
        if ("IMG" == this.cell.firstChild.tagName) return this.cell.firstChild.src + (null != this.cell.titFl ? "^" + this.cell._brval : "");
        if ("A" == this.cell.firstChild.tagName) {
            var a = this.cell.firstChild.firstChild.src + (null != this.cell.titFl ? "^" + this.cell._brval : "");
            return a += "^" + this.cell.lnk, this.cell.trg && (a += "^" + this.cell.trg), a
        }
    }, this.isDisabled = function() {
        return !0
    }
}

function eXcell_price(a) {
    this.base = eXcell_ed, this.base(a), this.getValue = function() {
        return this.cell.childNodes.length > 1 ? this.cell.childNodes[1].innerHTML.toString()._dhx_trim() : "0"
    }
}

function eXcell_dyn(a) {
    this.base = eXcell_ed, this.base(a), this.getValue = function() {
        return this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim()
    }
}

function eXcell_ro(a) {
    a && (this.cell = a, this.grid = this.cell.parentNode.grid), this.edit = function() {}, this.isDisabled = function() {
        return !0
    }, this.getValue = function() {
        return this.cell._clearCell ? "" : this.cell.innerHTML.toString()._dhx_trim()
    }
}

function eXcell_ron(a) {
    this.cell = a, this.grid = this.cell.parentNode.grid, this.edit = function() {}, this.isDisabled = function() {
        return !0
    }, this.getValue = function() {
        return this.cell._clearCell ? "" : this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(), this.cell._cellIndex).toString()
    }
}

function eXcell_rotxt(a) {
    this.cell = a, this.grid = this.cell.parentNode.grid, this.edit = function() {}, this.isDisabled = function() {
        return !0
    }, this.setValue = function(a) {
        a ? this.cell._clearCell = !1 : (a = " ", this.cell._clearCell = !0), this.setCTxtValue(a)
    }, this.getValue = function() {
        return this.cell._clearCell ? "" : _isIE ? this.cell.innerText : this.cell.textContent
    }
}

function dhtmlXGridComboObject() {
    return this.keys = new dhtmlxArray, this.values = new dhtmlxArray, this.put = function(a, b) {
        for (var c = 0; c < this.keys.length; c++)
            if (this.keys[c] == a) return this.values[c] = b, !0;
        this.values[this.values.length] = b, this.keys[this.keys.length] = a
    }, this.get = function(a) {
        for (var b = 0; b < this.keys.length; b++)
            if (this.keys[b] == a) return this.values[b];
        return null
    }, this.clear = function() {
        this.keys = new dhtmlxArray, this.values = new dhtmlxArray
    }, this.remove = function(a) {
        for (var b = 0; b < this.keys.length; b++)
            if (this.keys[b] == a) return this.keys._dhx_removeAt(b), this.values._dhx_removeAt(b), !0
    }, this.size = function() {
        for (var a = 0, b = 0; b < this.keys.length; b++) null != this.keys[b] && a++;
        return a
    }, this.getKeys = function() {
        for (var a = [], b = 0; b < this.keys.length; b++) null != this.keys[b] && (a[a.length] = this.keys[b]);
        return a
    }, this.save = function() {
        this._save = [];
        for (var a = 0; a < this.keys.length; a++) this._save[a] = [this.keys[a], this.values[a]]
    }, this.restore = function() {
        if (this._save) {
            this.keys[a] = [], this.values[a] = [];
            for (var a = 0; a < this._save.length; a++) this.keys[a] = this._save[a][0], this.values[a] = this._save[a][1]
        }
    }, this
}

function Hashtable() {
    return this.keys = new dhtmlxArray, this.values = new dhtmlxArray, this
}

function dragContext(a, b, c, d, e, f, g, h, i, j) {
    return this.source = a || "grid", this.target = b || "grid", this.mode = c || "move", this.dropmode = d || "child", this.sid = e || 0, this.tid = f, this.sobj = g || null, this.tobj = h || null, this.sExtra = i || null, this.tExtra = j || null, this
}

function eXcell_math(a) {
    a && (this.cell = a, this.grid = this.cell.parentNode.grid), this.edit = function() {
        this.grid.editor = new eXcell_ed(this.cell), this.grid.editor.fix_self = !0, this.grid.editor.getValue = this.cell.original ? function() {
            return this.cell.original
        } : this.getValue, this.grid.editor.setValue = this.setValue, this.grid.editor.edit()
    }, this.isDisabled = function() {
        return !this.grid._mathEdit
    }, this.setValue = function(a) {
        a = this.grid._compileSCL(a, this.cell, this.fix_self), this.grid._strangeParams[this.cell._cellIndex] ? this.grid.cells5(this.cell, this.grid._strangeParams[this.cell._cellIndex]).setValue(a) : (this.setCValue(a), this.cell._clearCell = !1)
    }, this.getValue = function() {
        return this.grid._strangeParams[this.cell._cellIndex] ? this.grid.cells5(this.cell, this.grid._strangeParams[this.cell._cellIndex]).getValue() : this.cell.innerHTML
    }
}

function dhtmlXGridFromTable(a, b) {
    "object" != typeof a && (a = document.getElementById(a));
    var c = document.createElement("DIV");
    c.setAttribute("width", a.getAttribute("gridWidth") || (a.offsetWidth ? a.offsetWidth + "px" : 0) || (window.getComputedStyle ? window.getComputedStyle(a, null).width : a.currentStyle ? a.currentStyle.width : 0)), c.setAttribute("height", a.getAttribute("gridHeight") || (a.offsetHeight ? a.offsetHeight + "px" : 0) || (window.getComputedStyle ? window.getComputedStyle(a, null).height : a.currentStyle ? a.currentStyle.height : 0)), c.className = a.className, a.className = "", a.id && (c.id = a.id);
    var d = a,
        e = a.getAttribute("dragAndDrop");
    d.parentNode.insertBefore(c, d);
    var f = d.getAttribute("name") || "name_" + (new Date).valueOf(),
        g = new dhtmlXGridObject(c);
    window[f] = g;
    var h = d.getAttribute("onbeforeinit"),
        i = d.getAttribute("oninit");
    h && eval(h), g.setImagePath(g.imgURL || d.getAttribute("imgpath") || d.getAttribute("image_path") || "");
    var j = d.getAttribute("skin");
    j && g.setSkin(j), b && b(g);
    for (var k = d.rows[0], l = "", m = "", n = "", o = "", p = "", q = 0; q < k.cells.length; q++) {
        l += (l ? "," : "") + k.cells[q].innerHTML;
        var r = k.cells[q].getAttribute("width") || k.cells[q].offsetWidth || (window.getComputedStyle ? window.getComputedStyle(k.cells[q], null).width : k.cells[q].currentStyle ? k.cells[q].currentStyle.width : 0);
        m += (m ? "," : "") + ("*" == r ? r : parseInt(r)), n += (n ? "," : "") + (k.cells[q].getAttribute("align") || "left"), o += (o ? "," : "") + (k.cells[q].getAttribute("type") || "ed"), p += (p ? "," : "") + (k.cells[q].getAttribute("sort") || "str");
        var s = k.cells[q].getAttribute("format");
        s && (k.cells[q].getAttribute("type").toLowerCase().indexOf("calendar") != -1 ? g._dtmask = s : g.setNumberFormat(s, q))
    }
    g.setHeader(l), g.setInitWidths(m),
        g.setColAlign(n), g.setColTypes(o), g.setColSorting(p), "auto" == a.getAttribute("gridHeight") && g.enableAutoHeigth(!0), a.getAttribute("multiline") && g.enableMultiline(!0);
    var v = d.getAttribute("lightnavigation");
    v && g.enableLightMouseNavigation(v);
    var t = d.getAttribute("evenrow"),
        u = d.getAttribute("unevenrow");
    return (t || u) && g.enableAlterCss(t, u), e && g.enableDragAndDrop(!0), g.init(), a.getAttribute("split") && g.splitAt(a.getAttribute("split")), g._process_inner_html(d, 1), i && eval(i), a.parentNode && a.parentNode.removeChild && a.parentNode.removeChild(a), g
}

function eXcell_sub_row(a) {
    a && (this.cell = a, this.grid = this.cell.parentNode.grid), this.getValue = function() {
        return this.grid.getUserData(this.cell.parentNode.idd, "__sub_row")
    }, this._setState = function(a, b) {
        (b || this.cell).innerHTML = "<img src='" + this.grid.imgURL + a + "' width='18' height='18' />", (b || this.cell).firstChild.onclick = this.grid._expandMonolite
    }, this.open = function() {
        this.cell.firstChild.onclick(null, !0)
    }, this.close = function() {
        this.cell.firstChild.onclick(null, !1, !0)
    }, this.isOpen = function() {
        return !!this.cell.parentNode._expanded
    }, this.setValue = function(a) {
        a && this.grid.setUserData(this.cell.parentNode.idd, "__sub_row", a), this._setState(a ? "plus.gif" : "blanc.gif")
    }, this.setContent = function(a) {
        this.cell.parentNode._expanded ? (this.cell.parentNode._expanded.innerHTML = a, this.resize()) : (this.cell._previous_content = null, this.setValue(a), this.cell._sub_row_type = null)
    }, this.resize = function() {
        this.grid._detectHeight(this.cell.parentNode._expanded, this.cell, this.cell.parentNode._expanded.scrollHeight)
    }, this.isDisabled = function() {
        return !0
    }, this.getTitle = function() {
        return this.grid.getUserData(this.cell.parentNode.idd, "__sub_row") ? "click to expand|collapse" : ""
    }
}

function eXcell_sub_row_ajax(a) {
    this.base = eXcell_sub_row, this.base(a), this.setValue = function(a) {
        a && this.grid.setUserData(this.cell.parentNode.idd, "__sub_row", a), this.cell._sub_row_type = "ajax", this.cell._previous_content = null, this._setState(a ? "plus.gif" : "blanc.gif")
    }
}

function eXcell_sub_row_grid(a) {
    this.base = eXcell_sub_row, this.base(a), this.setValue = function(a) {
        a && this.grid.setUserData(this.cell.parentNode.idd, "__sub_row", a), this.cell._sub_row_type = "grid", this._setState(a ? "plus.gif" : "blanc.gif")
    }, this.getSubGrid = function() {
        return a._sub_grid ? a._sub_grid : null
    }
}

function eXcell_dhxCalendar(a) {
    if (a && (this.cell = a, this.grid = this.cell.parentNode.grid, !this.grid._grid_calendarA)) {
        var b = this.grid._grid_calendarA = new dhtmlxCalendarObject;
        this.grid.callEvent("onDhxCalendarCreated", [b]);
        var c = this.grid;
        b.attachEvent("onClick", function() {
            return this._last_operation_calendar = !0, window.setTimeout(function() {
                c.editStop()
            }, 1), !0
        });
        var d = function(a) {
            (a || event).cancelBubble = !0
        };
        dhtmlxEvent(b.base, "click", d), b = null
    }
}

function eXcell_dhxCalendarA(a) {
    if (a && (this.cell = a, this.grid = this.cell.parentNode.grid, !this.grid._grid_calendarA)) {
        var b = this.grid._grid_calendarA = new dhtmlxCalendarObject;
        this.grid.callEvent("onDhxCalendarCreated", [b]);
        var c = this.grid;
        b.attachEvent("onClick", function() {
            return this._last_operation_calendar = !0, window.setTimeout(function() {
                c.editStop()
            }, 1), !0
        });
        var d = function(a) {
            (a || event).cancelBubble = !0
        };
        dhtmlxEvent(b.base, "click", d)
    }
}

function eXcell_combo(a) {
    a && (this.cell = a, this.grid = a.parentNode.grid, this._combo_pre = "", this.edit = function() {
        window.dhx_globalImgPath || (window.dhx_globalImgPath = this.grid.imgURL), this.val = this.getValue();
        var a = this.getText();
        this.cell._clearCell && (a = ""), this.cell.innerHTML = "", this.combo = this.cell._brval ? this.cell._brval : (this.grid._realfake ? this.grid._fake : this.grid)._col_combos[this.cell._cellIndex], this.cell.appendChild(this.combo.DOMParent), this.combo.DOMParent.style.margin = "0", this.combo.DOMelem_input.focus(), this.combo.setSize(this.cell.offsetWidth - 2), this.combo._xml ? this.combo.setComboText(a) : this.combo.getIndexByValue(this.cell.combo_value) != -1 ? this.combo.selectOption(this.combo.getIndexByValue(this.cell.combo_value)) : this.combo.getOptionByLabel(a) ? this.combo.selectOption(this.combo.getIndexByValue(this.combo.getOptionByLabel(a).value)) : this.combo.setComboText(a), this.combo.openSelect()
    }, this.selectComboOption = function(a, b) {
        b.selectOption(b.getIndexByValue(b.getOptionByLabel(a).value))
    }, this.getValue = function() {
        return this.cell.combo_value || ""
    }, this.getText = function() {
        var a = this.cell;
        return "" == this._combo_pre && a.childNodes[1] && (a = a.childNodes[1]), _isIE ? a.innerText : a.textContent
    }, this.setValue = function(a) {
        if ("object" == typeof a) {
            this.cell._brval = this.initCombo();
            var b = this.cell._cellIndex,
                c = this.cell.parentNode.idd;
            a.firstChild ? this.cell.combo_value = a.firstChild.data : (this.cell.combo_value = "&nbsp;", this.cell._clearCell = !0), this.setComboOptions(this.cell._brval, a, this.grid, b, c)
        } else {
            this.cell.combo_value = a;
            var d = null;
            (d = this.cell._brval) && "object" == typeof this.cell._brval ? a = (d.getOption(a) || {}).text || a : (d = this.grid._col_combos[this.cell._cellIndex] || this.grid._fake && (d = this.grid._fake._col_combos[this.cell._cellIndex])) && (a = (d.getOption(a) || {}).text || a), "" == (a || "").toString()._dhx_trim() && (a = null), null !== a ? this.setComboCValue(a) : (this.setComboCValue("&nbsp;", ""), this.cell._clearCell = !0)
        }
    }, this.detach = function() {
        this.cell.removeChild(this.combo.DOMParent);
        var a = this.cell.combo_value;
        return this.combo.getComboText() && "" != this.combo.getComboText().toString()._dhx_trim() ? (this.setComboCValue(this.combo.getComboText().replace(/\&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;"), this.combo.getActualValue()), this.cell._clearCell = !1) : (this.setComboCValue("&nbsp;"), this.cell._clearCell = !0), this.combo._confirmSelection(), this.cell.combo_value = this.combo.getActualValue(), this.combo.closeAll(), this.grid._still_active = !0, this.grid.setActive(1), a != this.cell.combo_value
    })
}

function eXcell_cntr(a) {
    this.cell = a, this.grid = this.cell.parentNode.grid, this.grid._ex_cntr_ready || this._realfake || (this.grid._ex_cntr_ready = !0, this.grid._h2 && this.grid.attachEvent("onOpenEn", function() {
        this.resetCounter(a._cellIndex)
    }), this.grid.attachEvent("onBeforeSorting", function() {
        var b = this;
        return window.setTimeout(function() {
            b.resetCounter && (b._fake && !b._realfake && a._cellIndex < b._fake._cCount ? b._fake.resetCounter(a._cellIndex) : b.resetCounter(a._cellIndex))
        }, 1), !0
    })), this.edit = function() {}, this.getValue = function() {
        return this.cell.innerHTML
    }, this.setValue = function() {
        this.cell.style.paddingRight = "2px";
        var a = this.cell;
        window.setTimeout(function() {
            if (a.parentNode) {
                var b = a.parentNode.rowIndex;
                (a.parentNode.grid.currentPage || b < 0 || a.parentNode.grid._srnd) && (b = a.parentNode.grid.rowsBuffer._dhx_find(a.parentNode) + 1), b <= 0 || (a.innerHTML = b, a.parentNode.grid._fake && a._cellIndex < a.parentNode.grid._fake._cCount && a.parentNode.grid._fake.rowsAr[a.parentNode.idd] && a.parentNode.grid._fake.cells(a.parentNode.idd, a._cellIndex).setCValue(b), a = null)
            }
        }, 100)
    }
}

function eXcell_link(a) {
    this.cell = a, this.grid = this.cell.parentNode.grid, this.isDisabled = function() {
        return !0
    }, this.edit = function() {}, this.getValue = function() {
        if (this.cell.firstChild.getAttribute) {
            var a = this.cell.firstChild.getAttribute("target");
            return this.cell.firstChild.innerHTML + "^" + this.cell.firstChild.getAttribute("href") + (a ? "^" + a : "")
        }
        return ""
    }, this.setValue = function(a) {
        if ("number" != typeof a && (!a || "" == a.toString()._dhx_trim())) return this.setCValue("&nbsp;", b), this.cell._clearCell = !0;
        var b = a.split("^");
        1 == b.length ? b[1] = "" : b.length > 1 && (b[1] = "href='" + b[1] + "'", b[1] += 3 == b.length ? " target='" + b[2] + "'" : " target='_blank'"), this.setCValue("<a " + b[1] + " onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>" + b[0] + "</a>", b)
    }
}

function eXcell_clist(a) {
    try {
        this.cell = a, this.grid = this.cell.parentNode.grid
    } catch (a) {}
    this.edit = function() {
        this.val = this.getValue();
        var a = this.cell._combo || this.grid.clists[this.cell._cellIndex];
        if (a) {
            this.obj = document.createElement("DIV");
            for (var b = this.val.split(","), c = "", d = 0; d < a.length; d++) {
                for (var e = !1, f = 0; f < b.length; f++) a[d] == b[f] && (e = !0);
                c += e ? "<div><input type='checkbox' id='dhx_clist_" + d + "' checked='true' /><label for='dhx_clist_" + d + "'>" + a[d] + "</label></div>" : "<div><input type='checkbox' id='dhx_clist_" + d + "'/><label for='dhx_clist_" + d + "'>" + a[d] + "</label></div>"
            }
            c += "<div><input type='button' value='" + (this.grid.applyButtonText || "Apply") + "' style='width:100px; font-size:8pt;' onclick='this.parentNode.parentNode.editor.grid.editStop();'/></div>", this.obj.editor = this, this.obj.innerHTML = c, document.body.appendChild(this.obj), this.obj.style.position = "absolute", this.obj.className = "dhx_clist", this.obj.onclick = function(a) {
                return (a || event).cancelBubble = !0
            };
            var g = this.grid.getPosition(this.cell);
            this.obj.style.left = g[0] + "px", this.obj.style.top = g[1] + this.cell.offsetHeight + "px", this.obj.getValue = function() {
                for (var a = "", b = 0; b < this.childNodes.length - 1; b++) this.childNodes[b].childNodes[0].checked && (a && (a += ","), a += this.childNodes[b].childNodes[1].innerHTML);
                return a.replace(/&amp;/g, "&")
            }
        }
    }, this.getValue = function() {
        return this.cell._clearCell ? "" : this.cell.innerHTML.toString()._dhx_trim().replace(/&amp;/g, "&")
    }, this.detach = function() {
        return this.obj && (this.setValue(this.obj.getValue()), this.obj.editor = null, this.obj.parentNode.removeChild(this.obj), this.obj = null), this.val != this.getValue()
    }
}

function eXcell_ra_str(a) {
    a && (this.base = eXcell_ra, this.base(a), this.grid = a.parentNode.grid)
}

function dhtmlXLayoutPanel() {}

function dhtmlXLayoutObject(a, b, c) {
    if (window.dhtmlXContainer) {
        var d = this;
        if (this._autodetectSkin = function() {
                var a = document.createElement("DIV");
                a.className = "dhxlayout_skin_detect", document.body.childNodes.length > 0 ? document.body.insertBefore(a, document.body.childNodes[0]) : document.body.appendChild(a);
                var b = a.offsetWidth;
                return document.body.removeChild(a), a = null, 199 == b ? "dhx_skyblue" : 299 == b ? "dhx_blue" : 399 == b ? "dhx_black" : 499 == b ? "dhx_web" : 599 == b ? "dhx_terrace" : "dhx_skyblue"
            }, this.skin = null != c ? c : "undefined" != typeof dhtmlx && "string" == typeof dhtmlx.skin ? dhtmlx.skin : this._autodetectSkin(), this.setSkin = function(a) {
                if (this.skinParams[a]) {
                    this.skin = a, this._CPanelHeight = this.skinParams[this.skin].cpanel_height, this._collapsedW = this.skinParams[this.skin].cpanel_collapsed_width, this._collapsedH = this.skinParams[this.skin].cpanel_collapsed_height, this.tpl.className = "dhtmlxLayoutPolyContainer_" + this.skin + (this._r ? " dhxlayout_rtl" : ""), this.sizer.className = "dhxLayout_Sizer_" + this.skin, this.dhxWins && this.dhxWins.setSkin(this.skin);
                    for (var b in this.polyObj) this.polyObj[b].skin = this.skin;
                    this.base.skin = this.skin, this._fixIcons(), this.setSizes()
                }
            }, this._isIPad = navigator.userAgent.search(/iPad/gi) >= 0, this._dblClickTM = 600, this._mBottom = this._mTop = 0, "string" == typeof a && (a = document.getElementById(a)), (1 == a._isWindow || a._isCell) && !this.base) {
            if (a._isCell && a.attachLayout) return a.attachLayout(b, c);
            if (a.isWindow) return a.attachLayout(b, c);
            this.base = a
        }
        if (a != document.body || this.base || (document.body.style.overflow = "hidden"), ("object" == typeof a || a == document.body) && !this.base) {
            var e = document.createElement("DIV");
            e.className = "dhxcont_global_layout_area", a.appendChild(e), a._isLayout = !0, this.cont = new dhtmlXContainer(a), this.cont.setContent(e), a == document.body && ("dhx_skyblue" != this.skin && "dhx_blue" != this.skin || (
                    this.cont.obj._offsetTop = 2, this.cont.obj._offsetLeft = 2, this.cont.obj._offsetHeight = -4, this.cont.obj._offsetWidth = -4),
                "dhx_web" == this.skin && (this.cont.obj._offsetTop = 9, this.cont.obj._offsetLeft = 9, this.cont.obj._offsetHeight = -18, this.cont.obj._offsetWidth = -18),
                "dhx_terrace" == this.skin && (this.cont.obj._offsetTop = 2, this.cont.obj._offsetLeft = 2, this.cont.obj._offsetHeight = -4, this.cont.obj._offsetWidth = -4),

                document.body.className += " dhxlayout_fullscreened"), a.adjustContent(a, this._mTop, null, null, this._mBottom), this.base = document.createElement("DIV"), this.base.style.overflow = "hidden", this.base.style.position = "absolute", this.base.style.left = "0px", this.base.style.top = "0px", this.base.style.width = e.childNodes[0].style.width, this.base.style.height = e.childNodes[0].style.height, e.childNodes[0].appendChild(this.base), a == document.body && (this._lw = this._tmTime = null, this._doOnResizeStart = function() {

                window.clearTimeout(this._tmTime), this._tmTime = window.setTimeout(function() {
                    d._doOnResizeEnd()
                }, 200)
            }, this._doOnResizeEnd = function() {
                this.setSizes(!1)
            }, "undefined" != typeof window.addEventListener ? window.addEventListener("resize", d._doOnResizeStart, !1) : window.attachEvent("onresize", d._doOnResizeStart)), a._doOnAttachToolbar = function() {
                null != d && "function" == typeof d.setSizes && d.setSizes()
            }
        }
        this.items = [], this.cells = function(a) {
            return null != this.polyObj[a] ? this.polyObj[a] : null
        }, this.getIdByIndex = function(a) {
            return a < 0 ? null : a >= this.items.length ? null : this.items[a]._idd
        }, this.getIndexById = function(a) {
            return null != this.cells(a) ? this.cells(a).getIndex() : null
        }, this.imagePath = dhtmlx.image_path || "codebase/imgs/", this.setImagePath = function(a) {
            this.imagePath = a
        }, this.polyObj = {}, this.sepHor = [], this.sepVer = [], this._layoutView = null != b ? String(b).toUpperCase() : "3E", this._minHeight = this._minWidth = 40, this._CPanelBtnsWidth = 32, this.skinParams = {
            dhx_black: {
                hor_sep_height: 5,
                ver_sep_width: 5,
                cpanel_height: 34,
                cpanel_collapsed_width: 18,
                cpanel_collapsed_height: 18
            },
            dhx_blue: {
                hor_sep_height: 5,
                ver_sep_width: 5,
                cpanel_height: 34,
                cpanel_collapsed_width: 18,
                cpanel_collapsed_height: 18
            },
            dhx_skyblue: {
                hor_sep_height: 5,
                ver_sep_width: 5,
                cpanel_height: 26,
                cpanel_collapsed_width: 18,
                cpanel_collapsed_height: 18
            },
            dhx_web: {
                hor_sep_height: 9,
                ver_sep_width: 9,
                cpanel_height: 27,
                cpanel_collapsed_width: 18,
                cpanel_collapsed_height: 18,
                cell_pading_max: 1,
                cell_pading_min: 0
            },
            dhx_terrace: {
                hor_sep_height: 5,
                ver_sep_width: 5,
                cpanel_height: 26,
                cpanel_collapsed_width: 18,
                cpanel_collapsed_height: 18,
                cell_pading_max: 1,
                cell_pading_min: 0
            }
        }, this._CPanelHeight = this.skinParams[this.skin].cpanel_height, this._collapsedW = this.skinParams[this.skin].cpanel_collapsed_width, this._collapsedH = this.skinParams[this.skin].cpanel_collapsed_height, this.tpl = document.createElement("TABLE"), this.tpl.dir = "ltr", this.tpl.className = "dhtmlxLayoutPolyContainer_" + this.skin, this.tpl.cellSpacing = 0, this.tpl.cellPadding = 0;
        var f = document.createElement("TBODY");
        this.tpl.appendChild(f), this.tpl.border = 0, this.tplSizes = {}, this._effects = {
            collapse: !1,
            resize: !1,
            highlight: !0
        }, this.sizer = document.createElement("DIV"), this.sizer.className = "dhxLayout_Sizer_" + this.skin, this.sizer.style.display = "none", document.body.appendChild(this.sizer), this._attachSizer = function(a) {
            d.sizer.style.left = getAbsoluteLeft(a) + "px", d.sizer.style.top = getAbsoluteTop(a) + "px", d.sizer.style.width = a.offsetWidth + "px", d.sizer.style.height = a.offsetHeight + "px", null != d._sizerML && (d.sizer.style.marginLeft = d._sizerML + "px"), null != d._sizerMT && (d.sizer.style.marginTop = d._sizerMT + "px"), d.sizer.style.display = "", d.sizer.className = "dhxLayout_Sizer_" + d.skin, null != a._dir && (d.sizer.className += " " + ("hor" == a._dir ? "dhxCursorNResize" : "dhxCursorWResize"))
        }, this.listViews = function() {
            var a, b = [];
            for (a in this.tplData) b[b.length] = a;
            return b
        }, this._init = function() {
            this.obj = document.createElement("DIV"), this.obj.className = "dhtmlxLayoutObject", this.base.appendChild(this.obj), this.obj.appendChild(this.tpl), this.w = this.obj.offsetWidth, this.h = this.obj.offsetHeight, this._xmlLoader.loadXMLString(null != this.tplData[this._layoutView] ? this.tplData[this._layoutView] : this.tplData["3E"]), this._initWindows()
        }, this._autoHor = [], this._autoVer = [], this._dimension = [320, 200], this._colsRatio = this._rowsRatio = 100, this._xmlParser = function() {
            for (var a = [], b = [], c = {}, e = this.getXMLTopNode("layout"), f = 0; f < e.childNodes.length; f++) {
                if ("row" == e.childNodes[f].tagName) {
                    var g = e.childNodes[f],
                        h = document.createElement("TR");
                    d.tpl.childNodes[0].appendChild(h);
                    for (var i = 0; i < g.childNodes.length; i++)
                        if ("cell" == g.childNodes[i].tagName) {
                            var j = g.childNodes[i],
                                k = document.createElement("TD");
                            if (k._dir = "null", null != j.getAttribute("obj")) {
                                for (var l = j.getAttribute("obj"), m = String(j.getAttribute("wh")).split(","), n = isNaN(m[0]), o = isNaN(m[0]) ? parseInt(d.polyObj[m[0]].style.width) : 0, p = 0; p < a.length; p++)
                                    for (var q = 0; q < a[p].length; q++)
                                        if (a[p][q] == l) {
                                            if (!n) {
                                                for (var n = !0, r = d.base.offsetWidth - c[l][0] * d.skinParams[d.skin].ver_sep_width, s = 0; s < a[p].length; s++) isNaN(a[p][s]) || (r -= a[p][s], m[0] -= 1);
                                                o = Math.ceil(r / m[0])
                                            }
                                            a[p][q] = o
                                        }
                                k.style.width = o + "px";
                                for (var n = isNaN(m[1]), t = isNaN(m[1]) ? parseInt(d.polyObj[m[1]].style.height) : 0, p = 0; p < b.length; p++)
                                    for (q = 0; q < b[p].length; q++)
                                        if (b[p][q] == l) {
                                            if (!n) {
                                                for (var n = !0, u = d.base.offsetHeight - c[l][1] * d.skinParams[d.skin].hor_sep_height, s = 0; s < b.length; s++) isNaN(b[s][q]) || (u -= b[s][q], m[1] -= 1);
                                                t = Math.ceil(u / m[1])
                                            }
                                            b[p][q] = t
                                        }
                                k.style.height = t + "px",
                                    k.className = "dhtmlxLayoutSinglePoly",
                                    k.innerHTML = "",
                                    k._minW = null != j.getAttribute("minWidth") ? Number(j.getAttribute("minWidth")) : d._minWidth,
                                    k._minH = null != j.getAttribute("minHeight") ? Number(j.getAttribute("minHeight")) : d._minHeight,
                                    k._initCPanel = null == j.getAttribute("cpanel") || "false" != j.getAttribute("cpanel"),
                                    k._resize = j.getAttribute("resize");

                                for (var v = String(j.getAttribute("neighbors")).split(";"), w = 0; w < v.length; w++) {
                                    var x = String(v[w]).split(",");
                                    x.length > 1 && (v[w] = x)
                                }
                                k._rowData = v, d.polyObj[l] = k
                            }
                            if (null != j.getAttribute("sep")) {
                                var y = j.getAttribute("sep");
                                if ("hor" == y) {
                                    k.className = "dhtmlxLayoutPolySplitterHor", k._dir = "hor";
                                    for (var z = j.getAttribute("top").split(";"), w = 0; w < z.length; w++) x = String(z[w]).split(","), x.length > 1 && (z[w] = x);
                                    k._top = z;
                                    for (var A = j.getAttribute("bottom").split(";"), w = 0; w < A.length; w++) x = String(A[w]).split(","), x.length > 1 && (A[w] = x);
                                    k._bottom = A, d.sepHor[d.sepHor.length] = k
                                } else {
                                    k.className = "dhtmlxLayoutPolySplitterVer", k._dir = "ver";
                                    for (var B = j.getAttribute("left").split(";"), w = 0; w < B.length; w++) x = String(B[w]).split(","), x.length > 1 && (B[w] = x);
                                    k._left = B;
                                    for (var C = j.getAttribute("right").split(";"), w = 0; w < C.length; w++) x = String(C[w]).split(","), x.length > 1 && (C[w] = x);
                                    k._right = C, d.sepVer[d.sepVer.length] = k
                                }
                                k._dblClick = j.getAttribute("dblclick"), k._isSep = !0, k.innerHTML = '<div style="height:2px;overflow:hidden;">&nbsp;</div>'
                            }
                            null != j.getAttribute("colspan") && (k.colSpan = j.getAttribute("colspan")), null != j.getAttribute("rowspan") && (k.rowSpan = j.getAttribute("rowspan")), h.appendChild(k)
                        }
                }
                if ("autosize" == e.childNodes[f].tagName && (d._autoHor = e.childNodes[f].getAttribute("hor").split(";"), d._autoVer = e.childNodes[f].getAttribute("ver").split(";"), d._totalCols = e.childNodes[f].getAttribute("cols"), d._totalRows = e.childNodes[f].getAttribute("rows"), d._dimension[0] = d._totalCols * d._colsRatio, d._dimension[1] = d._totalRows * d._rowsRatio), "table" == e.childNodes[f].tagName) {
                    for (var D = e.childNodes[f].getAttribute("data"), s = String(D).split(";"), p = 0; p < s.length; p++) {
                        a[p] = [], b[p] = [];
                        for (var E = String(s[p]).split(","), q = 0; q < E.length; q++) a[p][q] = E[q], b[p][q] = E[q], null == c[E[q]] && (c[E[q]] = [0, 0])
                    }
                    for (var F in c)
                        for (n = !1, p = 0; p < a.length; p++)
                            for (q = 0; q < a[p].length; q++)
                                if (a[p][q] == F && !n) {
                                    for (var n = !0, G = 0; G < a[p].length; G++) a[p][G] != F && c[F][0]++;
                                    for (G = 0; G < a.length; G++) a[G][q] != F && c[F][1]++
                                }
                }
            }
            b = a = null, d._buildSurface(), this.destructor()
        }, this._xmlLoader = new dtmlXMLLoaderObject(this._xmlParser, window), this.listAutoSizes = function() {
            var a = this._availAutoSize[this._layoutView + "_hor"],
                b = this._availAutoSize[this._layoutView + "_ver"],
                c = this._autoHor.join(";"),
                d = this._autoVer.join(";");
            return [c, d, a, b]
        }, this.setAutoSize = function(a, b) {
            if (null != a) {
                for (var c = !1, d = this._availAutoSize[this._layoutView + "_hor"], e = 0; e < d.length; e++) c = c || d[e] == a;
                1 == c && (this._autoHor = a.split(";"))
            }
            if (null != b) {
                for (c = !1, d = this._availAutoSize[this._layoutView + "_ver"], e = 0; e < d.length; e++) c = c || d[e] == b;
                1 == c && (this._autoVer = b.split(";"))
            }
        }, this._buildSurface = function() {
            for (var a = 0; a < this.tpl.childNodes[0].childNodes.length; a++)
                for (var b = this.tpl.childNodes[0].childNodes[a], c = 0; c < b.childNodes.length; c++) {
                    var d = b.childNodes[c],
                        e = this;
                    d._isSep || (d._isCell = !0, d.skin = this.skin, d.getId = function() {
                        return this._idd
                    }, d.getIndex = function() {
                        return this._ind
                    }, d.showHeader = function() {
                        e.showPanel(this._idd)
                    }, d.hideHeader = function() {
                        e.hidePanel(this._idd)
                    }, d.isHeaderVisible = function() {
                        return e.isPanelVisible(this._idd)
                    }, d.setText = function(a) {
                        e.setText(this._idd, a)
                    }, d.getText = function() {
                        return e.getText(this._idd)
                    }, d.expand = function() {
                        e._isCollapsed(this._idd) && e._expand(this._idd, "hide")
                    }, d.collapse = function() {
                        e._isCollapsed(this._idd) || e._collapse(this._idd, "hide")
                    }, d.isCollapsed = function() {
                        return e._isCollapsed(this._idd)
                    }, d.dock = function() {
                        e._isCollapsed(this._idd) && (e._expand(this._idd, "dock"), e.dockWindow(this._idd))
                    }, d.undock = function() {
                        e._isCollapsed(this._idd) || (e.unDockWindow(this._idd), e._collapse(this._idd, "dock"))
                    }, d.setWidth = function(a) {
                        if (Number(a)) {
                            var b = this._isBlockedWidth || !1;
                            this._isBlockedWidth = !1, e._setWidth(this._idd, a), this._isBlockedWidth = b
                        }
                    }, d.getWidth = function() {
                        return parseInt(this.style.width)
                    }, d.setHeight = function(a) {
                        if (Number(a)) {
                            var b = this._isBlockedHeight || !1;
                            this._isBlockedHeight = !1, e._setHeight(this._idd, a), this._isBlockedHeight = b
                        }
                    }, d.getHeight = function() {
                        return parseInt(this.style.height)
                    }, d.fixSize = function(a, b) {
                        e._fixSize(this._idd, a, b)
                    }, d.progressOn = function() {
                        e._progressControl(this._idd, !0)
                    }, d.progressOff = function() {
                        e._progressControl(this._idd, !1)
                    }, d._doOnAttachMenu = function() {
                        this.adjustContent(this.childNodes[0], this._noHeader ? 0 : e.skinParams[e.skin].cpanel_height), this.updateNestedObjects()
                    }, d._doOnAttachToolbar = function() {
                        this.adjustContent(this.childNodes[0], this._noHeader ? 0 : e.skinParams[e.skin].cpanel_height), this.updateNestedObjects()
                    }, d._doOnAttachStatusBar = function() {
                        this.adjustContent(this.childNodes[0], this._noHeader ? 0 : e.skinParams[e.skin].cpanel_height), this.updateNestedObjects()
                    }, d._doOnFrameContentLoaded = function() {
                        e.callEvent("onContentLoaded", [this._idd])
                    }, d._doOnResize = function() {
                        this.adjustContent(this.childNodes[0], this._noHeader ? 0 : e.skinParams[e.skin].cpanel_height), this.updateNestedObjects()
                    }, d._redraw = function() {}, d.showArrow = function() {
                        this.childNodes[0].childNodes[0].childNodes[4].style.display = ""
                    }, d.hideArrow = function() {
                        this.childNodes[0].childNodes[0].childNodes[4].style.display = "none"
                    }, d.isArrowVisible = function() {
                        return "none" != this.childNodes[0].childNodes[0].childNodes[4].style.display
                    }), "ver" == d._dir && (d.onselectstart = function(a) {
                        a = a || event, a.returnValue = !1
                    }, _isIE && (d.ondblclick = function() {
                        e._doOnDoubleClick(this)
                    }), d[this._isIPad ? "ontouchstart" : "onmousedown"] = function(a) {
                        if (a = a || event, !_isIE)
                            if (this._lastClick) {
                                var b = this._lastClick;
                                if (this._lastClick = (new Date).getTime(), b + e._dblClickTM >= this._lastClick && e._doOnDoubleClick(this) === !0) return
                            } else this._lastClick = (new Date).getTime();
                        var c = e._findDockCellsVer(this);
                        if (e._resAreaData = [], null != c[0] && null != c[1]) {
                            if (String(document.body.className).search("dhxCursorWResize") == -1 && (document.body.className += " dhxCursorWResize"), e._resObj = this, e._anyExpL = c[0], e._anyExpR = c[1], e._collectResAreaData(c), e._resX = e._isIPad ? a.touches[0].clientX : a.clientX, 0 == e._effects.resize) {
                                e._attachSizer(this), e.sizer._leftXStart = parseInt(e.sizer.style.left);
                                var d = e.polyObj[e._anyExpL[0]];
                                e._resXMaxWidthLeft = parseInt(d.style.width) - e._minWidth;
                                var f = e.polyObj[e._anyExpR[0]];
                                if (e._resXMaxWidthRight = parseInt(f.style.width) - e._minWidth, e._alterSizes.length > 0)
                                    for (var g = 0; g < e._alterSizes.length; g++) {
                                        for (var h = 0; h < e._anyExpL.length; h++)
                                            if (e._alterSizes[g][0] == e._anyExpL[h]) {
                                                var i = e._resXMaxWidthLeft = parseInt(d.style.width) - e._alterSizes[g][1];
                                                i < e._resXMaxWidthLeft && (e._resXMaxWidthLeft = i)
                                            }
                                        for (h = 0; h < e._anyExpR.length; h++) e._alterSizes[g][0] == e._anyExpR[h] && (i = parseInt(f.style.width) - e._alterSizes[g][1], i < e._resXMaxWidthRight) && (e._resXMaxWidthRight = i)
                                    }
                                e._resXStart = e._resX
                            }
                            e._resFunc = e._resizeVer, e._isIPad && a.preventDefault()
                        }
                    }, d.onmouseup = function() {
                        1 == e._effects.resize && (e._resizeStop(), e._anyExpL = null, e._anyExpR = null)
                    }), "hor" == d._dir && (d.onselectstart = function(a) {
                        a = a || event, a.returnValue = !1
                    }, d[this._isIPad ? "ontouchstart" : "onmousedown"] = function(a) {
                        if (a = a || event, this._lastClick) {
                            var b = this._lastClick;
                            if (this._lastClick = (new Date).getTime(), b + e._dblClickTM >= this._lastClick && e._doOnDoubleClick(this) === !0) return
                        } else this._lastClick = (new Date).getTime();
                        var c = e._findDockCellsHor(this);
                        if (e._resAreaData = [], null != c[0] && null != c[1]) {
                            if (String(document.body.className).search("dhxCursorNResize") == -1 && (document.body.className += " dhxCursorNResize"), e._resObj = this, e._anyExpT = c[0], e._anyExpB = c[1], e._collectResAreaData(c), e._resY = e._isIPad ? a.touches[0].clientY : a.clientY, 0 == e._effects.resize) {
                                e._attachSizer(this), e.sizer._topYStart = parseInt(e.sizer.style.top);
                                var d = e.polyObj[e._anyExpT[0]];
                                e._resYMaxHeightTop = parseInt(d.style.height) - e._minHeight;
                                var f = e.polyObj[e._anyExpB[0]];
                                if (e._resYMaxHeightBottom = parseInt(f.style.height) - e._minHeight, e._alterSizes.length > 0)
                                    for (var g = 0; g < e._alterSizes.length; g++) {
                                        for (var h = 0; h < e._anyExpT.length; h++)
                                            if (e._alterSizes[g][0] == e._anyExpT[h]) {
                                                var i = parseInt(d.style.height) - e._alterSizes[g][2] - ("none" != d.childNodes[0].style.display ? e.skinParams[e.skin].cpanel_height : 0);
                                                i < e._resYMaxHeightTop && (e._resYMaxHeightTop = i)
                                            }
                                        for (h = 0; h < e._anyExpB.length; h++) e._alterSizes[g][0] == e._anyExpB[h] && (i = parseInt(f.style.height) - e._alterSizes[g][2] - ("none" != f.childNodes[0].style.display ? e.skinParams[e.skin].cpanel_height : 0), i < e._resYMaxHeightBottom) && (e._resYMaxHeightBottom = i)
                                    }
                                e._resYStart = e._resY
                            }
                            e._resFunc = e._resizeHor, e._isIPad && a.preventDefault()
                        }
                    }, d.onmouseup = function() {
                        1 == e._effects.resize && (e._resizeStop(), e._anyExpT = null, e._anyExpB = null)
                    })
                }
            for (var f in this.polyObj) {
                this.polyObj[f]._collapsed = !1, this.polyObj[f]._idd = f, this.polyObj[f]._ind = this.items.length, this.items[this.items.length] = this.polyObj[f];
                var g = document.createElement("DIV");
                g.style.position = "relative", g.style.left = "0px", g.style.top = "0px", g.style.width = this.polyObj[f].style.width, g.style.height = this.polyObj[f].style.height, g.style.overflow = "hidden", this.polyObj[f].appendChild(g);
                var h = document.createElement("DIV");
                for (h._dockCell = f, h._resize = this.polyObj[f]._resize, h.className = "dhtmlxPolyInfoBar", h.innerHTML = "<div class='dhtmlxInfoBarLabel'>" + f + "</div><div class='dhtmlxInfoBarButtonsFake'><div class='dhtmlxInfoBarButtonsFake2'></div></div><div class='dhtmlxInfoButtonDock' title='" + this.i18n.dock + "'></div><div class='dhtmlxInfoButtonUnDock' style='display: none;' title='" + this.i18n.undock + "'></div><div class='dhtmlxInfoButtonShowHide_" + h._resize + "' title='" + this.i18n.collapse + "'></div><div class='dhtmlxLineL'></div><div class='dhtmlxLineR'></div>", 1 == this.polyObj[f]._initCPanel ? (h._h = this._CPanelHeight, h.style.display = "") : (h._h = 0, h.style.display = "none"), this.polyObj[f].childNodes[0].appendChild(h), h.ondblclick = function() {
                        e.callEvent("onDblClick", [this._dockCell])
                    }, h.childNodes[4].onclick = function() {
                        var a = this.parentNode._dockCell;
                        e._isCollapsed(a) ? e._expand(a, "hide") : e._collapse(a, "hide")
                    }, a = 0; a < h.childNodes.length; a++) h.childNodes[a].onselectstart = function(a) {
                    a = a || event, a.returnValue = !1
                };
                var i = document.createElement("DIV");
                i.className = "dhxcont_global_content_area", this.polyObj[f].childNodes[0].appendChild(i);
                var j = new dhtmlXContainer(this.polyObj[f]);
                j.setContent(i), "dhx_web" == this.skin && this.polyObj[f]._setPadding(this.skinParams[this.skin].cell_pading_max, "dhxcont_layout_dhx_web"), "dhx_terrace" == this.skin && (this.polyObj[f]._setPadding(this.skinParams[this.skin].cell_pading_max, "dhxcont_layout_dhx_terrace"), this.polyObj[f].childNodes[0].style.borderRadius = "0px", this.polyObj[f].childNodes[0].childNodes[1].style.borderBottomLeftRadius = this.polyObj[f].childNodes[0].childNodes[1].style.borderBottomRightRadius = "3px"), this.polyObj[f].adjustContent(this.polyObj[f].childNodes[0], this.skinParams[this.skin].cpanel_height)
            }
            this._fixIcons()
        }, this._anyExpB = this._anyExpT = this._anyExpR = this._anyExpL = this._resFunc = this._resObj = this._resY = this._resX = null, this._expand = function(a, b) {
            this._doExpand(this.polyObj[a]._resize, a, this.polyObj[a]._rowData, b)
        }, this._collapse = function(a, b) {
            this._isCollapsed(a) || (this.polyObj[a]._savedW = parseInt(this.polyObj[a].style.width), this.polyObj[a]._savedH = parseInt(this.polyObj[a].style.height), this._doCollapse(this.polyObj[a]._resize, a, this.polyObj[a]._rowData, b))
        }, this._isCollapsed = function(a) {
            return this.polyObj[a]._collapsed
        }, this._checkAlterMinSize = function(a) {
            this._alterSizes = [];
            for (var b = 0; b < a.length; b++)
                for (var c = 0; c < a[b].length; c++)
                    if (null != this.polyObj[a[b][c]].vs[this.polyObj[a[b][c]].av].layout) {
                        var d = this.polyObj[a[b][c]].vs[this.polyObj[a[b][c]].av].layout._defineWindowMinDimension(this.polyObj[a[b][c]], !0);
                        d[0] = a[b][c], this._alterSizes[this._alterSizes.length] = d
                    }
        }, this._findDockCellsVer = function(a) {
            var b = [null, null];
            if (null == a) return b;
            for (var c = null, d = a._left.length - 1; d >= 0; d--)
                if (null == c)
                    if ("object" == typeof a._left[d]) {
                        for (var e = !1, f = 0; f < a._left[d].length; f++) e = e || this.polyObj[a._left[d][f]]._isBlockedWidth || !1;
                        e || (c = a._left[d])
                    } else 0 == this.polyObj[a._left[d]]._collapsed && (this.polyObj[a._left[d]]._isBlockedWidth || (c = a._left[d]));
            for (var g = null, d = 0; d < a._right.length; d++)
                if (null == g)
                    if ("object" == typeof a._right[d]) {
                        for (e = !1, f = 0; f < a._right[d].length; f++) e = e || this.polyObj[a._right[d][f]]._isBlockedWidth || !1;
                        e || (g = a._right[d])
                    } else 0 == this.polyObj[a._right[d]]._collapsed && (this.polyObj[a._right[d]]._isBlockedWidth || (g = a._right[d]));
            if (null == c || null == g) return b;
            if ("string" == typeof c && (c = Array(c)), "string" == typeof g && (g = Array(g)), b[0] = c, b[1] = g, this._checkAlterMinSize(b), this._minWRAlter = this._minWLAlter = 0, this._alterSizes.length > 0 && 1 == this._effects.resize) {
                for (var h = [], i = [], d = 0; d < c.length; d++) h[d] = this.polyObj[c[d]];
                for (d = 0; d < g.length; d++) i[d] = this.polyObj[g[d]];
                for (d = 0; d < h.length; d++)
                    for (f = 0; f < this._alterSizes.length; f++) this._alterSizes[f][0] == h[d]._idd && this._minWLAlter < this._alterSizes[f][1] && (this._minWLAlter = this._alterSizes[f][1]);
                for (d = 0; d < i.length; d++)
                    for (f = 0; f < this._alterSizes.length; f++) this._alterSizes[f][0] == i[d]._idd && this._maxWRAlter < this._alterSizes[f][1] && (this._minWRAlter = this._alterSizes[f][1])
            }
            return b
        }, this._findDockCellsHor = function(a) {
            var b = [null, null];
            if (null == a) return b;
            for (var c = null, d = a._top.length - 1; d >= 0; d--)
                if (null == c)
                    if ("object" == typeof a._top[d]) {
                        for (var e = !1, f = 0; f < a._top[d].length; f++) e = e || this.polyObj[a._top[d][f]]._isBlockedHeight || !1;
                        e || (c = a._top[d])
                    } else 0 == this.polyObj[a._top[d]]._collapsed && (this.polyObj[a._top[d]]._isBlockedHeight || (c = a._top[d]));
            for (var g = null, d = 0; d < a._bottom.length; d++)
                if (null == g)
                    if ("object" == typeof a._bottom[d]) {
                        for (e = !1, f = 0; f < a._bottom[d].length; f++) e = e || this.polyObj[a._bottom[d][f]]._isBlockedHeight || !1;
                        e || (g = a._bottom[d])
                    } else 0 == this.polyObj[a._bottom[d]]._collapsed && (this.polyObj[a._bottom[d]]._isBlockedHeight || (g = a._bottom[d]));
            if (null == c || null == g) return b;
            if ("string" == typeof c && (c = Array(c)), "string" == typeof g && (g = Array(g)), b[0] = c, b[1] = g, this._checkAlterMinSize(b), this._minHBAlter = this._minHTAlter = 0, this._alterSizes.length > 0 && 1 == this._effects.resize) {
                for (var h = [], i = [], d = 0; d < c.length; d++) h[d] = this.polyObj[c[d]];
                for (d = 0; d < g.length; d++) i[d] = this.polyObj[g[d]];
                for (d = 0; d < h.length; d++)
                    for (f = 0; f < this._alterSizes.length; f++) this._alterSizes[f][0] == h[d]._idd && this._minHTAlter < this._alterSizes[f][2] && (this._minHTAlter = this._alterSizes[f][2]);
                for (d = 0; d < i.length; d++)
                    for (f = 0; f < this._alterSizes.length; f++) this._alterSizes[f][0] == i[d]._idd && this._minHBAlter < this._alterSizes[f][2] && (this._minHBAlter = this._alterSizes[f][2])
            }
            return b
        }, this._resizeVer = function(a) {
            if (this._isIPad && a.preventDefault(), null != this._resObj && null != this._anyExpL && null != this._anyExpR) {
                this._showCovers();
                var b = this._isIPad ? a.touches[0].clientX : a.clientX;
                if (0 == this._effects.resize) {
                    this._resX = b;
                    var c = b - this._resXStart; - c > this._resXMaxWidthLeft && c < 0 && (c = -this._resXMaxWidthLeft, this._resX = c + this._resXStart), c > this._resXMaxWidthRight && c > 0 && (c = this._resXMaxWidthRight, this._resX = c + this._resXStart), this.sizer.style.left = this.sizer._leftXStart + c + "px"
                } else {
                    for (var e = this._anyExpL, f = this._anyExpR, g = b, c = b - d._resX, h = [], i = [], j = 0; j < e.length; j++) h[j] = this.polyObj[e[j]];
                    for (j = 0; j < f.length; j++) i[j] = this.polyObj[f[j]];
                    var k = parseInt(h[0].style.width),
                        l = parseInt(i[0].style.width);
                    if (c < 0) {
                        var m = k + c;
                        if (m > h[0]._minW && m > this._minWLAlter) {
                            for (var n = l + k - m, j = 0; j < h.length; j++) this._setW(h[j], m);
                            for (j = 0; j < i.length; j++) this._setW(i[j], n);
                            this._resX = g
                        }
                    } else if (c > 0 && (n = l - c, n > i[0]._minW && n > this._minWRAlter)) {
                        for (m = k + l - n, j = 0; j < h.length; j++) this._setW(h[j], m);
                        for (j = 0; j < i.length; j++) this._setW(i[j], n);
                        this._resX = g
                    }
                }
            }
        }, this._resizeHor = function(a) {
            if (null != this._resObj && null != this._anyExpT && null != this._anyExpB) {
                this._showCovers();
                var b = this._isIPad ? a.touches[0].clientY : a.clientY;
                if (0 == this._effects.resize) {
                    this._resY = b;
                    var c = b - this._resYStart; - c > this._resYMaxHeightTop && c < 0 && (c = -this._resYMaxHeightTop, this._resY = c + this._resYStart), c > this._resYMaxHeightBottom && c > 0 && (c = this._resYMaxHeightBottom, this._resY = c + this._resYStart), this.sizer.style.top = this.sizer._topYStart + c + "px"
                } else {
                    for (var e = this._anyExpT, f = this._anyExpB, g = b, c = b - d._resY, h = [], i = [], j = 0; j < e.length; j++) h[j] = this.polyObj[e[j]];
                    for (j = 0; j < f.length; j++) i[j] = this.polyObj[f[j]];
                    var k = parseInt(h[0].style.height),
                        l = parseInt(i[0].style.height);
                    if (c < 0) {
                        var m = k + c;
                        if (m > h[0]._minH + this._minHTAlter) {
                            for (var n = l + k - m, j = 0; j < h.length; j++) this._setH(h[j], m);
                            for (j = 0; j < i.length; j++) this._setH(i[j], n);
                            this._resY = g
                        }
                    } else if (c > 0 && (n = l - c, n > i[0]._minH + this._minHBAlter)) {
                        for (m = k + l - n, j = 0; j < h.length; j++) this._setH(h[j], m);
                        for (j = 0; j < i.length; j++) this._setH(i[j], n);
                        this._resY = g
                    }
                }
            }
        }, this._resizeStop = function() {
            var a = document.body.className;
            if (a.search("dhxCursorWResize") === -1 && a.search("dhxCursorNResize") === -1 || (document.body.className = String(document.body.className).replace(/dhxCursorWResize/g, "").replace(/dhxCursorNResize/g, "")), null != this._resObj)
                if (0 == this._effects.resize) {
                    if (this.sizer.style.display = "none", "hor" == this._resObj._dir) {
                        var b = "object" == typeof this._anyExpT[0] ? this._anyExpT[0][0] : this._anyExpT[0],
                            c = this._resY - this._resYStart,
                            d = parseInt(this.polyObj[b].style.height) + c;
                        this._setHeight(b, d)
                    } else {
                        var e = "object" == typeof this._anyExpL[0] ? this._anyExpL[0][0] : this._anyExpL[0],
                            f = this._resX - this._resXStart,
                            g = parseInt(this.polyObj[e].style.width) + f;
                        this._setWidth(e, g)
                    }
                    var h = {},
                        i = function(a) {
                            if (null != a)
                                for (var b = 0; b < a.length; b++) "object" == typeof a[b] && i(a[b]), h[a[b]] = !0
                        };
                    i(this._anyExpT), i(this._anyExpB), i(this._anyExpL), i(this._anyExpR);
                    var j, k = [];
                    for (j in h) k[k.length] = j;
                    "object" == typeof this._anyExpT && null != this._anyExpT && (this.updateNestedObjectsArray(this._anyExpT), this._anyExpT = null), "object" == typeof this._anyExpB && null != this._anyExpB && (this.updateNestedObjectsArray(this._anyExpB), this._anyExpB = null), "object" == typeof this._anyExpL && null != this._anyExpL && (this.updateNestedObjectsArray(this._anyExpL), this._anyExpL = null), "object" == typeof this._anyExpR && null != this._anyExpR && (this.updateNestedObjectsArray(this._anyExpR), this._anyExpR = null), this._resFunc = this._resObj = null, this._hideCovers(), this._fixToolbars(), this._fixCollapsedText(), this.callEvent("onPanelResizeFinish", [k])
                } else {
                    var l = [];
                    if (null != this._resObj._left)
                        for (var m = 0; m < this._resObj._left.length; m++) l[l.length] = this._resObj._left[m];
                    if (null != this._resObj._right)
                        for (m = 0; m < this._resObj._right.length; m++) l[l.length] = this._resObj._right[m];
                    if (null != this._resObj._top)
                        for (m = 0; m < this._resObj._top.length; m++) l[l.length] = this._resObj._top[m];
                    if (null != this._resObj._bottom)
                        for (m = 0; m < this._resObj._bottom.length; m++) l[l.length] = this._resObj._bottom[m];
                    this._resObj = this._resFunc = null, this._hideCovers();
                    for (var n = [], m = 0; m < l.length; m++)
                        if ("object" == typeof l[m])
                            for (var o = 0; o < l[m].length; o++) n[n.length] = this.polyObj[l[m][o]];
                        else n[n.length] = this.polyObj[l[m]];
                    for (m = 0; m < n.length; m++) n[m].updateNestedObjects();
                    this._fixCollapsedText(), this.callEvent("onPanelResizeFinish", [])
                }
        }, this._showCovers = function() {
            if (!this._cv) {
                for (var a in this.polyObj) this._effects.highlight && this._isResizable(a) && this.polyObj[a].showCoverBlocker();
                this._fixToolbars(), this._cv = !0
            }
        }, this._hideCovers = function() {
            if (this._cv) {
                for (var a in this.polyObj) this.polyObj[a].hideCoverBlocker();
                this._fixToolbars(), this._cv = !1
            }
        }, this._isResizable = function(a) {
            for (var b = !1, c = 0; c < this._resAreaData.length; c++) b = b || this._resAreaData[c] == a;
            return b
        }, this._collectResAreaData = function(a) {
            for (var b = 0; b < a.length; b++) "string" == typeof a[b] ? this._resAreaData[this._resAreaData.length] = a[b] : "object" == typeof a[b] && this._collectResAreaData(a[b])
        }, this._doOnDoubleClick = function(a) {
            if (null != a._dblClick && null != this.polyObj[a._dblClick] && !this.polyObj[a._dblClick]._noHeader) {
                var b = this.polyObj[a._dblClick];
                if ("none" != b.childNodes[0].style.display) return 1 == b._collapsed ? this._doExpand(b._resize, a._dblClick, b._rowData, "hide") : (b._savedW = parseInt(b.style.width), b._savedH = parseInt(b.style.height), this._doCollapse(b._resize, a._dblClick, b._rowData, "hide")), !0
            }
        }, this._doOnSelectStart = function(a) {
            a = a || event, null != d._resObj && (a.returnValue = !1)
        }, this._doOnMouseMove = function(a) {
            a = a || event, null != d._resObj && null != d._resFunc && d._resFunc(a)
        }, this._doOnMouseUp = function() {
            d._resizeStop()
        }, this._isIPad ? (document.addEventListener("touchmove", d._doOnMouseMove, !1), document.addEventListener("touchend", d._doOnMouseUp, !1)) : "undefined" != typeof window.addEventListener ? (document.body.addEventListener("mousemove", d._doOnMouseMove, !1), document.body.addEventListener("mouseup", d._doOnMouseUp, !1)) : (document.body.attachEvent("onselectstart", d._doOnSelectStart), document.body.attachEvent("onmousemove", d._doOnMouseMove), document.body.attachEvent("onmouseup", d._doOnMouseUp)), this._doExpand = function(a, b, c, d) {
            if (!(c.length <= 1)) {
                for (var e = -1, f = 0; f < c.length; f++) c[f] == b && (e = f);
                if (e != -1) {
                    for (var g = null, f = e + 1; f < c.length; f++) null == g && ("string" == typeof c[f] ? 0 == this.polyObj[c[f]]._collapsed && (g = c[f]) : g = c[f]);
                    if (null == g)
                        for (f = e - 1; f >= 0; f--) null == g && ("string" == typeof c[f] ? 0 == this.polyObj[c[f]]._collapsed && (g = c[f]) : g = c[f]);
                    if (null != g) {
                        if ("object" != typeof g && (g = Array(g)), "hor" == a) {
                            for (var h = 65536, f = 0; f < g.length; f++) {
                                var i = null != this.polyObj[g[f]].vs[this.polyObj[g[f]].av].layout ? this.polyObj[g[f]].vs[this.polyObj[g[f]].av].layout._defineWindowMinDimension(this.polyObj[g[f]], !0) : [0, 0],
                                    j = parseInt(this.polyObj[g[f]].style.width) - this._minWidth - i[1];
                                j < h && (h = j)
                            }
                            var k = this.polyObj[b]._savedW;
                            if (k > h && (k = h), k < this._minWidth) return;
                            var l = Math.round(k / 3)
                        } else {
                            for (h = 65536, f = 0; f < g.length; f++) i = null != this.polyObj[g[f]].vs[this.polyObj[g[f]].av].layout ? this.polyObj[g[f]].vs[this.polyObj[g[f]].av].layout._defineWindowMinDimension(this.polyObj[g[f]], !0) : [0, 0, 0], j = parseInt(this.polyObj[g[f]].style.height) - this._minHeight - i[2], j < h && (h = j);
                            if (k = this.polyObj[b]._savedH, k > h && (k = h), k < this._minHeight) return;
                            l = Math.round(k / 3)
                        }
                        this.polyObj[b].childNodes[0].childNodes[1].style.display = "", this.polyObj[b].childNodes[0].childNodes[0].className = "dhtmlxPolyInfoBar", this.polyObj[b].childNodes[0].childNodes[0].childNodes[1].style.display = "", this.polyObj[b].childNodes[0].childNodes[0].childNodes[2].style.display = "", this.polyObj[b].childNodes[0].childNodes[0].childNodes[4].style.display = "";
                        for (var m = [], f = 0; f < g.length; f++) m[f] = this.polyObj[g[f]];
                        "dhtmlxLayoutSinglePolyTabbarCollapsed" == this.polyObj[b].className && (this.polyObj[b].className = "dhtmlxLayoutSinglePolyTabbar"), this._expandEffect(this.polyObj[b], m, k, d, 1 == this._effects.collapse ? l : 1e6, a)
                    }
                }
            }
        }, this._doCollapse = function(a, b, c, d) {
            if (!(c.length <= 1)) {
                for (var e = -1, f = 0; f < c.length; f++) c[f] == b && (e = f);
                if (e != -1) {
                    for (var g = null, f = e + 1; f < c.length; f++) null == g && ("string" == typeof c[f] ? 0 == this.polyObj[c[f]]._collapsed && (g = c[f]) : g = c[f]);
                    if (null == g)
                        for (f = e - 1; f >= 0; f--) null == g && ("string" == typeof c[f] ? 0 == this.polyObj[c[f]]._collapsed && (g = c[f]) : g = c[f]);
                    if (null == g && null != c[e + 1] && (g = c[e + 1]), null == g && e - 1 >= 0 && null != c[e - 1] && (g = c[e - 1]), null != g) {
                        "object" != typeof g && (1 == this.polyObj[g]._collapsed && (this.polyObj[g].childNodes[0].childNodes[1].style.display = "", this.polyObj[g]._collapsed = !1, this.polyObj[g].childNodes[0].childNodes[0].className = "dhtmlxPolyInfoBar", this.polyObj[g].childNodes[0].childNodes[0].childNodes[1].style.display = "", this.polyObj[g].childNodes[0].childNodes[0].childNodes[4].title = this.i18n.collapse, this.polyObj[g].childNodes[0].childNodes[0].childNodes[2].style.display = "", this.polyObj[g].childNodes[0].childNodes[0].childNodes[3].style.display = "none", this.polyObj[g].childNodes[0].childNodes[0].childNodes[4].style.display = "", this.polyObj[g]._isUnDocked === !0 && this.dockWindow(g), "dhtmlxLayoutSinglePolyTabbarCollapsed" == this.polyObj[g].className && (this.polyObj[g].className = "dhtmlxLayoutSinglePolyTabbar"), this._fixSplitters(), this._fixIcons(), this.polyObj[g].removeAttribute("title"), this._fixToolbars(), this._fixCollapsedText(), this.callEvent("onExpand", [g])), g = Array(g));
                        for (var h = [], f = 0; f < g.length; f++) h[f] = this.polyObj[g[f]];
                        var i = "hor" == a ? Math.round(Math.max(this.polyObj[b].offsetWidth, this.polyObj[g[0]].offsetWidth) / 3) : Math.round(Math.max(this.polyObj[b].offsetHeight, this.polyObj[g[0]].offsetHeight) / 3);
                        this.polyObj[b].childNodes[0].childNodes[1].style.display = "none", this._collapseEffect(this.polyObj[b], h, d, 1 == this._effects.collapse ? i : 1e6, a)
                    }
                }
            }
        }, this.setEffect = function(a, b) {
            null != this._effects[a] && "boolean" == typeof b && (this._effects[a] = b)
        }, this.getEffect = function(a) {
            return null != this._effects[a] ? this._effects[a] : null
        }, this._expandEffect = function(a, b, c, e, f, g) {
            if ("hor" == g) var h = parseInt(a.style.width),
                i = parseInt(b[0].style.width);
            else h = parseInt(a.style.height), i = parseInt(b[0].style.height);
            var j = h + f;
            j > c && (j = c), "hor" == g ? (a.style.width = j + "px", a.childNodes[0].style.width = a.style.width) : (a.style.height = j + "px", a.childNodes[0].style.height = a.style.height), a.adjustContent(a.childNodes[0], a._noHeader ? 0 : this.skinParams[this.skin].cpanel_height);
            for (var k = 0; k < b.length; k++) "hor" == g ? (b[k].style.width = i + h - j + "px", b[k].childNodes[0].style.width = b[k].style.width) : (b[k].style.height = i + h - j + "px", b[k].childNodes[0].style.height = b[k].style.height), b[k].adjustContent(b[k].childNodes[0], b[k]._noHeader ? 0 : this.skinParams[this.skin].cpanel_height);
            if (j != c) window.setTimeout(function() {
                d._expandEffect(a, b, c, e, f, g)
            }, 4);
            else {
                for (a._collapsed = !1, k = 0; k < b.length; k++) b[k].updateNestedObjects();
                this.polyObj[a._idd].updateNestedObjects(), this.polyObj[a._idd].childNodes[0].childNodes[0].childNodes[4].title = this.i18n.collapse, this._fixSplitters(), this._fixIcons(), a.removeAttribute("title"), this._fixToolbars(), this._fixCollapsedText(), this.callEvent("onExpand", [a._idd])
            }
        }, this._collapseEffect = function(a, b, c, e, f) {
            if ("hor" == f) var g = parseInt(a.style.width),
                h = parseInt(b[0].style.width);
            else g = parseInt(a.style.height), h = parseInt(b[0].style.height);
            var i = g - e;
            "hor" == f ? (i < this._collapsedW && (i = this._collapsedW), a.style.width = i + "px", a.childNodes[0].style.width = a.style.width) : (i < this._collapsedH && (i = this._collapsedH), a.style.height = i + "px", a.childNodes[0].style.height = a.style.height);
            for (var j = 0; j < b.length; j++) "hor" == f ? (b[j].style.width = h + (g - i) + "px", b[j].childNodes[0].style.width = b[j].style.width) : (b[j].style.height = h + (g - i) + "px", b[j].childNodes[0].style.height = b[j].style.height), b[j].adjustContent(b[j].childNodes[0], b[j]._noHeader ? 0 : this.skinParams[this.skin].cpanel_height);
            if (i > this._collapsedW && "hor" == f || i > this._collapsedH && "ver" == f) window.setTimeout(function() {
                d._collapseEffect(a, b, c, e, f)
            }, 4);
            else {
                for (j = 0; j < b.length; j++) "hor" == f ? (b[j].style.width = h + (g - i) + "px", b[j].childNodes[0].style.width = b[j].style.width) : (b[j].style.height = h + (g - i) + "px", b[j].childNodes[0].style.height = b[j].style.height), b[j].adjustContent(b[j].childNodes[0], b[j]._noHeader ? 0 : this.skinParams[this.skin].cpanel_height);
                for (a._collapsed = !0, a.childNodes[0].childNodes[0].className = "hor" == f ? "dhtmlxPolyInfoBarCollapsedVer" : "dhtmlxPolyInfoBarCollapsedHor", j = 0; j < b.length; j++) b[j].updateNestedObjects();
                "hide" == c ? (a.childNodes[0].childNodes[0].childNodes[1].style.display = "", a.childNodes[0].childNodes[0].childNodes[2].style.display = "none", a.childNodes[0].childNodes[0].childNodes[3].style.display = "none", a.childNodes[0].childNodes[0].childNodes[4].style.display = "") : (a.childNodes[0].childNodes[0].childNodes[1].style.display = "", a.childNodes[0].childNodes[0].childNodes[2].style.display = "", a.childNodes[0].childNodes[0].childNodes[3].style.display = "none", a.childNodes[0].childNodes[0].childNodes[4].style.display = "none"), "dhtmlxLayoutSinglePolyTabbar" == a.className && (a.className = "dhtmlxLayoutSinglePolyTabbarCollapsed"), this.polyObj[a._idd].childNodes[0].childNodes[0].childNodes[4].title = this.i18n.expand, this._fixSplitters(), this._fixIcons(), a.title = this.getTextTooltip(a._idd), this._fixToolbars(), this._fixCollapsedText(), this.callEvent("onCollapse", [a._idd])
            }
        }, this._setW = function(a, b) {
            a.style.width = b + "px", a.childNodes[0].style.width = a.style.width, a.adjustContent(a.childNodes[0], a._noHeader ? 0 : this.skinParams[this.skin].cpanel_height)
        }, this._setH = function(a, b) {
            a.style.height = b + "px", a.childNodes[0].style.height = a.style.height, a.adjustContent(a.childNodes[0], a._noHeader ? 0 : this.skinParams[this.skin].cpanel_height)
        }, this._setWidth = function(a, b) {
            if (null != this.polyObj[a] && Number(b)) {
                for (var c = null, d = 0; d < this.sepVer.length; d++) {
                    var e = this.sepVer[d]._left;
                    if (e[e.length - 1] == a) c = [this.sepVer[d], "left"];
                    else if ("object" == typeof e[e.length - 1])
                        for (var f = e[e.length - 1], g = 0; g < f.length; g++) f[g] == a && (c = [this.sepVer[d], "left"]);
                    if (e = this.sepVer[d]._right, e[0] == a) c = [this.sepVer[d], "right"];
                    else if ("object" == typeof e[0])
                        for (f = e[0], g = 0; g < f.length; g++) f[g] == a && (c = [this.sepVer[d], "right"])
                }
                if (null != c) {
                    var h = this._findDockCellsVer(c[0]),
                        i = h[0],
                        j = h[1];
                    if (null != i && null != j) {
                        var k = parseInt(this.polyObj[i[0]].style.width) + parseInt(this.polyObj[j[0]].style.width);
                        b < this._minWidth ? b = this._minWidth : b > k - this._minWidth && (b = k - this._minWidth);
                        for (var l = k - b, d = 0; d < i.length; d++) this._setW(this.polyObj[i[d]], "left" == c[1] ? b : l), this.polyObj[i[d]].updateNestedObjects();
                        for (d = 0; d < j.length; d++) this._setW(this.polyObj[j[d]], "right" == c[1] ? b : l), this.polyObj[j[d]].updateNestedObjects()
                    }
                }
            }
        }, this._setHeight = function(a, b) {
            if (null != this.polyObj[a] && Number(b)) {
                for (var c = null, d = 0; d < this.sepHor.length; d++) {
                    var e = this.sepHor[d]._top;
                    if (e[e.length - 1] == a) c = [this.sepHor[d], "top"];
                    else if ("object" == typeof e[e.length - 1])
                        for (var f = e[e.length - 1], g = 0; g < f.length; g++) f[g] == a && (c = [this.sepHor[d], "top"]);
                    if (e = this.sepHor[d]._bottom, e[0] == a) c = [this.sepHor[d], "bottom"];
                    else if ("object" == typeof e[0])
                        for (f = e[0], g = 0; g < f.length; g++) f[g] == a && (c = [this.sepHor[d], "bottom"])
                }
                if (null != c) {
                    var h = this._findDockCellsHor(c[0]),
                        i = h[0],
                        j = h[1];
                    if (null != i && null != j) {
                        var k = parseInt(this.polyObj[i[0]].style.height) + parseInt(this.polyObj[j[0]].style.height);
                        b < this._minHeight ? b = this._minHeight : b > k - this._minHeight && (b = k - this._minHeight);
                        for (var l = k - b, d = 0; d < i.length; d++) this._setH(this.polyObj[i[d]], "top" == c[1] ? b : l), this.polyObj[i[d]].updateNestedObjects();
                        for (d = 0; d < j.length; d++) this._setH(this.polyObj[j[d]], "bottom" == c[1] ? b : l), this.polyObj[j[d]].updateNestedObjects()
                    }
                }
            }
        }, this.updateNestedObjectsArray = function(a) {
            for (var b = 0; b < a.length; b++) "object" == typeof a[b] ? this.updateNestedObjectsArray(a[b]) : this.polyObj[a[b]].updateNestedObjects()
        }, this.dockWindow = function(a) {
            this.dhxWins && this.dhxWins.window(this.dhxWinsIdPrefix + a) && (this.dhxWins.window(this.dhxWinsIdPrefix + a).close(), this.dhxWins.window(this.dhxWinsIdPrefix + a).moveContentTo(this.polyObj[a]), this.polyObj[a]._isUnDocked = !1, this.callEvent("onDock", [a]))
        }, this.unDockWindow = function(a) {
            this._initWindows(a), this.polyObj[a].moveContentTo(this.dhxWins.window(this.dhxWinsIdPrefix + a)), this.polyObj[a]._isUnDocked = !0, this.callEvent("onUnDock", [a])
        }, this._initWindows = function(a) {
            if (window.dhtmlXWindows) {
                if (!this.dhxWins && (this.dhxWins = new dhtmlXWindows, this.dhxWins.setSkin(this.skin), this.dhxWins.setImagePath(this.imagePath), this.dhxWinsIdPrefix = "", !a)) return;
                var b = this.dhxWinsIdPrefix + a;
                if (this.dhxWins.window(b)) this.dhxWins.window(b).show();
                else {
                    var c = this,
                        d = this.dhxWins.createWindow(b, 20, 20, 320, 200);
                    d.setText(this.polyObj[a].getText()), d.button("close").hide(), d.attachEvent("onClose", function(a) {
                        a.hide()
                    }), d.button("dock").show(), d.button("dock").attachEvent("onClick", function() {
                        c.polyObj[a].dock()
                    }), d.dockedCell = this.polyObj[a]
                }
            }
        }, this.isPanelVisible = function(a) {
            return !this.polyObj[a]._noHeader
        }, this.showPanel = function(a) {
            if (null != this.polyObj[a] && 1 != this.polyObj[a]._collapsed) {
                var b = this.polyObj[a].childNodes[0].childNodes[0];
                b.style.display = "", this.polyObj[a]._noHeader = !1, "dhx_web" == this.skin && this.polyObj[a]._setPadding(this.skinParams[this.skin].cell_pading_max, "dhxcont_layout_dhx_web"), "dhx_terrace" == this.skin && this.polyObj[a]._setPadding(this.skinParams[this.skin].cell_pading_max, "dhxcont_layout_dhx_terrace"), this.polyObj[a].adjustContent(this.polyObj[a].childNodes[0], this.skinParams[this.skin].cpanel_height), this.polyObj[a].updateNestedObjects()
            }
        }, this.hidePanel = function(a) {
            if (null != this.polyObj[a] && 1 != this.polyObj[a]._collapsed) {
                var b = this.polyObj[a].childNodes[0].childNodes[0];
                b.style.display = "none", this.polyObj[a]._noHeader = !0, "dhx_web" == this.skin && this.polyObj[a]._setPadding(this.skinParams[this.skin].cell_pading_min, ""), "dhx_terrace" == this.skin && this.polyObj[a]._setPadding(this.skinParams[this.skin].cell_pading_min, ""), this.polyObj[a].adjustContent(this.polyObj[a].childNodes[0], 0), this.polyObj[a].updateNestedObjects()
            }
        }, this.setText = function(a, b) {
            this._changeCPanelText(a, b)
        }, this.getText = function(a) {
            return this.polyObj[a].childNodes[0].childNodes[0].childNodes[0].innerHTML
        }, this.getTextTooltip = function(a) {
            var b = this.polyObj[a].childNodes[0].childNodes[0].childNodes[0];
            return b.innerText || b.textContent
        }, this._changeCPanelText = function(a, b) {
            var c = d;
            null != c.polyObj[a] && (c.polyObj[a].childNodes[0].childNodes[0].childNodes[0].innerHTML = b, null != d.dhxWins && null != d.dhxWins.window(d.dhxWinsIdPrefix + a) && d.dhxWins.window(d.dhxWinsIdPrefix + a).setText(b))
        }, this.forEachItem = function(a) {
            for (var b = 0; b < this.items.length; b++) a(this.items[b])
        }, this._fixPositionInWin = function(a, b) {
            this.base.style.width = a + "px", this.base.style.height = b + "px"
        }, this.attachMenu = function() {
            return this.base._isWindow ? this.menu = this.base._window.attachMenu() : (this.cont.obj.skin = this.skin, this.menu = this.cont.obj.attachMenu(), this.cont.obj.adjustContent(this.cont.obj, 0), this.setSizes()), this.menu
        }, this.detachMenu = function() {
            this.menu && (this.cont.obj.detachMenu(), this.setSizes(), this.menu = null)
        }, this.showMenu = function() {
            this.menu && (this.cont.obj.showMenu(), this.setSizes())
        }, this.hideMenu = function() {
            this.menu && (this.cont.obj.hideMenu(), this.setSizes())
        }, this.attachToolbar = function() {
            return this.base._isWindow ? this.toolbar = this.base._window.attachToolbar() : (this.cont.obj.skin = this.skin, this.toolbar = this.cont.obj.attachToolbar(), this.cont.obj.adjustContent(this.cont.obj, 0), this.setSizes()), this.toolbar
        }, this.detachToolbar = function() {
            this.toolbar && (this.cont.obj.detachToolbar(), this.setSizes(), this.toolbar = null)
        }, this.showToolbar = function() {
            this.toolbar && (this.cont.obj.showToolbar(), this.setSizes())
        }, this.hideToolbar = function() {
            this.toolbar && (this.cont.obj.hideToolbar(), this.setSizes())
        }, this.attachStatusBar = function() {
            return this.base._isWindow ? this.statusbar = this.base._window.attachStatusBar() : (this.statusbar = this.cont.obj.attachStatusBar(), this.cont.obj.adjustContent(this.cont.obj, 0), this.setSizes()), this.statusbar
        }, this.detachStatusBar = function() {
            this.statusbar && (this.cont.obj.detachStatusBar(), this.setSizes(), this.statusbar = null)
        }, this.showStatusBar = function() {
            this.statusbar && (this.cont.obj.showStatusBar(), this.setSizes())
        }, this.hideStatusBar = function() {
            this.statusbar && (this.cont.obj.hideStatusBar(), this.setSizes())
        }, this.progressOn = function() {
            this._progressControlGlobal(!0)
        }, this.progressOff = function() {
            this._progressControlGlobal(!1)
        }, this._progressControl = function(a, b) {
            if (null != this.polyObj[a]) {
                if (null == this.polyObj[a]._progressCover) {
                    var c = document.createElement("DIV");
                    c.className = "dhtmlxLayoutPolyProgress", this.polyObj[a].childNodes[0].appendChild(c);
                    var d = document.createElement("DIV");
                    d.className = "dhtmlxLayoutPolyProgressBGIMG", this.polyObj[a].childNodes[0].appendChild(d), this.polyObj[a]._progressCover = [c, d]
                }
                this.polyObj[a]._progressCover[0].style.display = 1 == b ? "" : "none", this.polyObj[a]._progressCover[1].style.display = this.polyObj[a]._progressCover[0].style.display
            }
        }, this._progressControlGlobal = function(a) {
            if (null == this._progressCover) {
                var b = document.createElement("DIV");
                b.className = "dhtmlxLayoutPolyProgressGlobal_" + this.skin, this.obj.appendChild(b);
                var c = document.createElement("DIV");
                c.className = "dhtmlxLayoutPolyProgressBGIMGGlobal_" + this.skin, this.obj.appendChild(c), this._progressCover = [b, c]
            }
            this._progressCover[0].style.display = 1 == a ? "" : "none", this._progressCover[1].style.display = this._progressCover[0].style.display
        }, this._fixSize = function(a, b, c) {
            null != this.polyObj[a] && (this.polyObj[a]._isBlockedWidth = b, this.polyObj[a]._isBlockedHeight = c, this._fixSplitters())
        }, this._fixSplitters = function() {
            for (var a = 0; a < this.sepVer.length; a++) {
                var b = this._findDockCellsVer(this.sepVer[a]);
                null == b[0] || null == b[1] ? "dhtmlxLayoutPolySplitterVerInactive" != this.sepVer[a].className && (this.sepVer[a].className = "dhtmlxLayoutPolySplitterVerInactive") : "dhtmlxLayoutPolySplitterVer" != this.sepVer[a].className && (this.sepVer[a].className = "dhtmlxLayoutPolySplitterVer")
            }
            for (a = 0; a < this.sepHor.length; a++) b = this._findDockCellsHor(this.sepHor[a]), null == b[0] || null == b[1] ? "dhtmlxLayoutPolySplitterHorInactive" != this.sepHor[a].className && (this.sepHor[a].className = "dhtmlxLayoutPolySplitterHorInactive") : "dhtmlxLayoutPolySplitterHor" != this.sepHor[a].className && (this.sepHor[a].className = "dhtmlxLayoutPolySplitterHor")
        }, this._fixIcons = function() {
            for (var a in this.polyObj) {
                for (var b = this.polyObj[a]._rowData, c = this.polyObj[a]._collapsed, d = -1, e = 0; e < b.length; e++) "object" != typeof b[e] && b[e] == a && (d = e);
                var f = null;
                if (d != -1) {
                    for (e = d + 1; e < b.length; e++) "object" == typeof b[e] ? f = "ver" == this.polyObj[a]._resize ? c ? "b" : "t" : c ? "r" : "l" : 0 == this.polyObj[b[e]]._collapsed && (f = "ver" == this.polyObj[a]._resize ? c ? "b" : "t" : c ? "r" : "l");
                    if (null == f && d >= 1)
                        for (e = d - 1; e >= 0; e--) "object" == typeof b[e] ? f = "ver" == this.polyObj[a]._resize ? c ? "t" : "b" : c ? "l" : "r" : 0 == this.polyObj[b[e]]._collapsed && (f = "ver" == this.polyObj[a]._resize ? c ? "t" : "b" : c ? "l" : "r")
                }
                if (null != f) {
                    var g = this.polyObj[a]._resize;
                    this.polyObj[a].childNodes[0].childNodes[0].childNodes[4].className = "dhtmlxInfoButtonShowHide_" + g + " dhxLayoutButton_" + this.skin + "_" + g + (this.polyObj[a]._collapsed ? "2" : "1") + f
                }
            }
        }, this._defineWindowMinDimension = function(a, b) {
            if (1 == b) {
                var c = [];
                c[0] = parseInt(a.style.width), c[1] = parseInt(a.style.height)
            } else c = a.getDimension(), "100%" == c[0] && (c[0] = a.offsetWidth), "100%" == c[1] && (c[1] = a.offsetHeight);
            var e = d._getNearestParents("hor"),
                f = d._getNearestParents("ver");
            if (!b) {
                var g, h = [],
                    i = [];
                for (g in e) h[h.length] = g;
                for (g in f) i[i.length] = g;
                d._checkAlterMinSize([h, i]);
                for (var j = {}, k = {}, l = 0; l < d._alterSizes.length; l++) {
                    g = d._alterSizes[l][0];
                    var m = d._alterSizes[l][1],
                        n = d._alterSizes[l][2];
                    null == j[g] ? j[g] = m : m > j[g] && (j[g] = m), null == k[g] ? k[g] = n : n > k[g] && (k[g] = n)
                }
                for (g in e) null != j[g] && (e[g] = e[g] - j[g] + d._minWidth);
                for (g in f) null != k[g] && (f[g] = f[g] - k[g] + d._minHeight - ("none" != d.polyObj[g].childNodes[0].style.display ? d.skinParams[d.skin].cpanel_height : 0))
            }
            var o = 65536;
            for (g in e) e[g] < o && (o = e[g]);
            o -= d._minWidth, o = c[0] - o, o < d._dimension[0] && !b && (o = d._dimension[0]);
            var p = 65536;
            for (g in f) f[g] < p && (p = f[g]);
            return p -= d._minHeight, p = c[1] - p, p < d._dimension[1] && !b && (p = d._dimension[1]), 1 == b ? ["", o, p] : void a.setMinDimension(o, p)
        }, this._getNearestParents = function(a) {
            for (var b = "hor" == a ? this._autoHor : this._autoVer, c = {}, d = 0; d < b.length; d++) {
                var e = b[d];
                if (1 == this.polyObj[e]._collapsed && this.polyObj[e]._resize == a) {
                    for (var f = this.polyObj[e]._rowData, g = -1, h = 0; h < f.length; h++) "object" == typeof f[h] ? g = h : f[h] == e && (g = h);
                    var i = g,
                        e = null;
                    if (g > 0)
                        for (h = g - 1; h >= 0; h--) "object" == typeof f[h] ? e = f[h] : 0 == this.polyObj[f[h]]._collapsed && null == e && (e = f[h]);
                    if (null == e)
                        for (h = i; h < f.length; h++) "object" == typeof f[h] ? e = f[h] : 0 == this.polyObj[f[h]]._collapsed && null == e && (e = f[h])
                }
                if (null != e)
                    for ("string" == typeof e && (e = Array(e)), h = 0; h < e.length; h++) c[e[h]] = parseInt("hor" == a ? this.polyObj[e[h]].style.width : this.polyObj[e[h]].style.height)
            }
            return c
        }, this.setSizes = function(a) {
            var b = this._defineWindowMinDimension(this.base, !0);
            if (this.cont.obj.setMinContentSize(b[1], b[2]), this.cont.obj.adjustContent(this.cont.obj, 0), this.base.offsetParent) {
                this.cont && a !== !1 && this.cont.obj.adjustContent(this.cont.obj, this._mTop, null, null, this._mBottom);
                var c = this.base.offsetParent.offsetWidth - this.base.offsetWidth + (null != this._baseWFix ? this._baseWFix : 0),
                    d = this.base.offsetParent.offsetHeight - this.base.offsetHeight + (null != this._baseHFix ? this._baseHFix : 0);
                this.base.style.width = parseInt(this.base.style.width) + c + "px", this.base.style.height = parseInt(this.base.style.height) + d + "px";
                var e, f = {};
                for (e in this._getNearestParents("hor")) this.polyObj[e].style.width = Math.max(0, parseInt(this.polyObj[e].style.width) + c) + "px", this.polyObj[e].childNodes[0].style.width = this.polyObj[e].style.width, f[e] = 1;
                for (e in this._getNearestParents("ver")) this.polyObj[e].style.height = Math.max(0, parseInt(this.polyObj[e].style.height) + d) + "px", this.polyObj[e].childNodes[0].style.height = this.polyObj[e].style.height, f[e] = 1;
                for (e in f) this.polyObj[e].adjustContent(this.polyObj[e].childNodes[0], this.polyObj[e]._noHeader ? 0 : this.skinParams[this.skin].cpanel_height), this.polyObj[e].updateNestedObjects();
                this._fixCollapsedText(), this.callEvent("onResizeFinish", [])
            }
        }, dhtmlxEventable(this), this._init()
    } else alert(this.i18n.dhxcontalert)
}

function dhtmlXMenuObject(a, b) {
    var c = this;
    if (this.addBaseIdAsContextZone = null, this.isDhtmlxMenuObject = !0, this.skin = null != b ? b : "undefined" != typeof dhtmlx && "string" == typeof dhtmlx.skin ? dhtmlx.skin : "dhx_skyblue", this.imagePath = "", this._isIE6 = !1, _isIE && (this._isIE6 = null == window.XMLHttpRequest), null == a) this.base = document.body;
    else {
        var d = "string" == typeof a ? document.getElementById(a) : a;
        if (null != d) {
            for (this.base = d, this.base.id || (this.base.id = (new Date).valueOf()); this.base.childNodes.length > 0;) this.base.removeChild(this.base.childNodes[0]);
            this.base.className += " dhtmlxMenu_" + this.skin + "_Middle dir_left", this.base._autoSkinUpdate = !0, this.base.oncontextmenu && (this.base._oldContextMenuHandler = this.base.oncontextmenu), this.addBaseIdAsContextZone = this.base.id, this.base.onselectstart = function(a) {
                return a = a || event, a.returnValue = !1
            }, this.base.oncontextmenu = function(a) {
                return a = a || event, a.returnValue = !1
            }
        } else this.base = document.body
    }
    if (this.topId = "dhxWebMenuTopId", !this.extendedModule) {
        for (var e = function() {
                alert(this.i18n.dhxmenuextalert)
            }, f = "setItemEnabled,setItemDisabled,isItemEnabled,_changeItemState,getItemText,setItemText,loadFromHTML,hideItem,showItem,isItemHidden,_changeItemVisible,setUserData,getUserData,setOpenMode,setWebModeTimeout,enableDynamicLoading,_updateLoaderIcon,getItemImage,setItemImage,clearItemImage,setAutoShowMode,setAutoHideMode,setContextMenuHideAllMode,getContextMenuHideAllMode,setVisibleArea,setTooltip,getTooltip,setHotKey,getHotKey,setItemSelected,setTopText,setRTL,setAlign,setHref,clearHref,getCircuit,_clearAllSelectedSubItemsInPolygon,_checkArrowsState,_addUpArrow,_addDownArrow,_removeUpArrow,_removeDownArrow,_isArrowExists,_doScrollUp,_doScrollDown,_countPolygonItems,setOverflowHeight,_getRadioImgObj,_setRadioState,_radioOnClickHandler,getRadioChecked,setRadioChecked,addRadioButton,_getCheckboxState,_setCheckboxState,_readLevel,_updateCheckboxImage,_checkboxOnClickHandler,setCheckboxState,getCheckboxState,addCheckbox,serialize".split(","), g = 0; g < f.length; g++) this[f[g]] || (this[f[g]] = e);
        f = null
    }
    return this.fixedPosition = !1, this.menuLastClicked = this.menuSelected = -1, this.idPrefix = "", this.itemTagName = "item", this.itemTextTagName = "itemtext", this.userDataTagName = "userdata", this.itemTipTagName = "tooltip", this.itemHotKeyTagName = "hotkey", this.itemHrefTagName = "href", this.dirTopLevel = "bottom", this.dirSubLevel = "right", this.menuY2 = this.menuY1 = this.menuX2 = this.menuX1 = null, this.menuMode = "web", this.menuTimeoutMsec = 400, this.menuTimeoutHandler = null, this.autoOverflow = !1, this.idPull = {}, this.itemPull = {}, this.userData = {}, this.radio = {}, this._rtl = !1, this._align = "left", this.menuTouched = !1, this.zInd = this.zIndInit = 1200, this.zIndStep = 50, this.menuModeTopLevelTimeout = !0, this.menuModeTopLevelTimeoutTime = 200, this._topLevelBottomMargin = 1, this._topLevelRightMargin = 0, this._topLevelOffsetLeft = 1, this._arrowFFFix = _isIE && "BackCompat" == document.compatMode ? 0 : -4, this.setSkin = function(a) {
        var b = this.skin;
        switch (this.skin = a, this.skin) {
            case "dhx_black":
            case "dhx_blue":
            case "dhx_skyblue":
            case "dhx_web":
                this._topLevelBottomMargin = 2, this._topLevelOffsetLeft = this._topLevelRightMargin = 1, this._arrowFFFix = _isIE && "BackCompat" == document.compatMode ? 0 : -4;
                break;
            case "dhx_web":
                this._arrowFFFix = 0;
                break;
            case "dhx_terrace":
                this._topLevelOffsetLeft = this._topLevelRightMargin = this._topLevelBottomMargin = 0, this._arrowFFFix = _isIE && "BackCompat" == document.compatMode ? 0 : -4
        }
        this.base._autoSkinUpdate && (this.base.className = this.base.className.replace("dhtmlxMenu_" + b + "_Middle", "") + " dhtmlxMenu_" + this.skin + "_Middle");
        for (var c in this.idPull) this.idPull[c].className = String(this.idPull[c].className).replace(b, this.skin)
    }, this.setSkin(this.skin), this.dLoad = !1, this.dLoadUrl = "", this.dLoadSign = "?", this.loaderIcon = !1, this.limit = 0, this._scrollUpTM = null, this._scrollUpTMTime = 20, this._scrollUpTMStep = 3, this._scrollDownTM = null, this._scrollDownTMTime = 20, this._scrollDownTMStep = 3, this.context = !1, this.contextZones = {}, this.contextMenuZoneId = !1, this.contextHideAllMode = this.contextAutoHide = this.contextAutoShow = !0, this._selectedSubItems = [], this._openedPolygons = [], this._addSubItemToSelected = function(a, b) {
        for (var c = !0, d = 0; d < this._selectedSubItems.length; d++) this._selectedSubItems[d][0] == a && this._selectedSubItems[d][1] == b && (c = !1);
        return 1 == c && this._selectedSubItems.push([a, b]), c
    }, this._removeSubItemFromSelected = function(a, b) {
        for (var c = [], d = !1, e = 0; e < this._selectedSubItems.length; e++) this._selectedSubItems[e][0] == a && this._selectedSubItems[e][1] == b ? d = !0 : c[c.length] = this._selectedSubItems[e];
        return 1 == d && (this._selectedSubItems = c), d
    }, this._getSubItemToDeselectByPolygon = function(a) {
        for (var b = [], c = 0; c < this._selectedSubItems.length; c++)
            if (this._selectedSubItems[c][1] == a) {
                b[b.length] = this._selectedSubItems[c][0];
                for (var b = b.concat(this._getSubItemToDeselectByPolygon(this._selectedSubItems[c][0])), d = !0, e = 0; e < this._openedPolygons.length; e++) this._openedPolygons[e] == this._selectedSubItems[c][0] && (d = !1);
                1 == d && (this._openedPolygons[this._openedPolygons.length] = this._selectedSubItems[c][0]), this._selectedSubItems[c][0] = -1, this._selectedSubItems[c][1] = -1
            }
        return b
    }, this._hidePolygon = function(a) {
        if (null != this.idPull["polygon_" + a]) {
            if ("undefined" != typeof this._menuEffect && this._menuEffect !== !1) this._hidePolygonEffect("polygon_" + a);
            else {
                if ("none" == this.idPull["polygon_" + a].style.display) return;
                this.idPull["polygon_" + a].style.display = "none", null != this.idPull["arrowup_" + a] && (this.idPull["arrowup_" + a].style.display = "none"), null != this.idPull["arrowdown_" + a] && (this.idPull["arrowdown_" + a].style.display = "none"), this._updateItemComplexState(a, !0, !1), this._isIE6 && null != this.idPull["polygon_" + a + "_ie6cover"] && (this.idPull["polygon_" + a + "_ie6cover"].style.display = "none")
            }
            a = String(a).replace(this.idPrefix, ""), a == this.topId && (a = null), this.callEvent("onHide", [a]), null != a && "dhx_terrace" == this.skin && this.itemPull[this.idPrefix + a].parent == this.idPrefix + this.topId && this._improveTerraceButton(this.idPrefix + a, !0)
        }
    }, this._showPolygon = function(a, b) {
        var c = this._countVisiblePolygonItems(a);
        if (0 != c) {
            var d = "polygon_" + a;
            if (null != this.idPull[d] && null != this.idPull[a] && (!this.menuModeTopLevelTimeout || "web" != this.menuMode || this.context || this.idPull[a]._mouseOver || b != this.dirTopLevel)) {
                this.fixedPosition || this._autoDetectVisibleArea();
                var e = 0,
                    f = 0,
                    g = null,
                    h = null;
                if (this.idPull[d].style.visibility = "hidden", this.idPull[d].style.left = "0px", this.idPull[d].style.top = "0px", this.idPull[d].style.display = "", this.idPull[d].style.zIndex = this.zInd, this.autoOverflow)
                    if (this.idPull[d].firstChild.offsetHeight > this.menuY1 + this.menuY2) {
                        var i = Math.floor((this.menuY2 - this.menuY1 - 35) / 24);
                        this.limit = i
                    } else this.limit = 0, null != this.idPull["arrowup_" + a] && this._removeUpArrow(String(a).replace(this.idPrefix, "")), null != this.idPull["arrowdown_" + a] && this._removeDownArrow(String(a).replace(this.idPrefix, ""));
                if (this.limit > 0 && this.limit < c && (null == this.idPull["arrowup_" + a] && this._addUpArrow(String(a).replace(this.idPrefix, "")), null == this.idPull["arrowdown_" + a] && this._addDownArrow(String(a).replace(this.idPrefix, "")), g = this.idPull["arrowup_" + a], g.style.visibility = "hidden", g.style.display = "", g.style.zIndex = this.zInd, e = g.offsetHeight, h = this.idPull["arrowdown_" + a], h.style.visibility = "hidden", h.style.display = "", h.style.zIndex = this.zInd, f = h.offsetHeight), this.limit > 0 && (this.limit < c ? (this.idPull[d].style.height = 24 * this.limit + "px", this.idPull[d].scrollTop = 0) : this.idPull[d].style.height = ""), this.zInd += this.zIndStep,
                    null != this.itemPull[a]) var j = "polygon_" + this.itemPull[a].parent;
                else this.context && (j = this.idPull[this.idPrefix + this.topId]);
                var k = null != this.idPull[a].tagName ? getAbsoluteLeft(this.idPull[a]) : this.idPull[a][0],
                    l = null != this.idPull[a].tagName ? getAbsoluteTop(this.idPull[a]) : this.idPull[a][1],
                    m = null != this.idPull[a].tagName ? this.idPull[a].offsetWidth : 0,
                    n = null != this.idPull[a].tagName ? this.idPull[a].offsetHeight : 0,
                    o = 0,
                    p = 0,
                    q = this.idPull[d].offsetWidth,
                    r = this.idPull[d].offsetHeight + e + f;
                if ("bottom" == b && (o = this._rtl ? k + (null != m ? m : 0) - q : "right" == this._align ? k + m - q : k - 1 + (b == this.dirTopLevel ? this._topLevelRightMargin : 0), p = l - 1 + n + this._topLevelBottomMargin), "right" == b && (o = k + m - 1, p = l + 2), "left" == b && (o = k - this.idPull[d].offsetWidth + 2, p = l + 2), "top" == b && (o = k - 1, p = l - r + 2), this.fixedPosition) var s = 65536,
                    t = 65536;
                else s = null != this.menuX2 ? this.menuX2 : 0, t = null != this.menuY2 ? this.menuY2 : 0, 0 == s && (window.innerWidth ? (s = window.innerWidth, t = window.innerHeight) : (s = document.body.offsetWidth, t = document.body.scrollHeight));
                if (o + q > s && !this._rtl && (o = k - q + 2), o < this.menuX1 && this._rtl && (o = k + m - 2), o < 0 && (o = 0), p + r > t && null != this.menuY2 && (p = Math.max(l + n - r + 2, this._isVisibleArea ? this.menuY1 + 2 : 2), this.context && this.idPrefix + this.topId == a && null != h && (p -= 2), null != this.itemPull[a] && !this.context && this.itemPull[a].parent == this.idPrefix + this.topId && (p -= this.base.offsetHeight)), this.idPull[d].style.left = o + "px", this.idPull[d].style.top = p + e + "px", "undefined" != typeof this._menuEffect && this._menuEffect !== !1) this._showPolygonEffect(d);
                else if (this.idPull[d].style.visibility = "", this.limit > 0 && this.limit < c && (g.style.left = o + "px", g.style.top = p + "px", g.style.width = q + this._arrowFFFix + "px", g.style.visibility = "", h.style.left = o + "px", h.style.top = p + r - f + "px", h.style.width = q + this._arrowFFFix + "px", h.style.visibility = "", this._checkArrowsState(a)), this._isIE6) {
                    var u = d + "_ie6cover";
                    if (null == this.idPull[u]) {
                        var v = document.createElement("IFRAME");
                        v.className = "dhtmlxMenu_IE6CoverFix_" + this.skin, v.frameBorder = 0, v.setAttribute("src", "javascript:false;"), document.body.insertBefore(v, document.body.firstChild), this.idPull[u] = v
                    }
                    this.idPull[u].style.left = o + "px", this.idPull[u].style.top = p + "px", this.idPull[u].style.width = q + "px", this.idPull[u].style.height = r + "px", this.idPull[u].style.zIndex = this.idPull[d].style.zIndex - 1, this.idPull[u].style.display = ""
                }
                a = String(a).replace(this.idPrefix, ""), a == this.topId && (a = null), this.callEvent("onShow", [a]), null != a && "dhx_terrace" == this.skin && this.itemPull[this.idPrefix + a].parent == this.idPrefix + this.topId && this._improveTerraceButton(this.idPrefix + a, !1)
            }
        }
    }, this._redistribSubLevelSelection = function(a, b) {
        for (; this._openedPolygons.length > 0;) this._openedPolygons.pop();
        var c = this._getSubItemToDeselectByPolygon(b);
        this._removeSubItemFromSelected(-1, -1);
        for (var d = 0; d < c.length; d++) null != this.idPull[c[d]] && c[d] != a && "enabled" == this.itemPull[c[d]].state && (this.idPull[c[d]].className = "sub_item");
        for (d = 0; d < this._openedPolygons.length; d++) this._openedPolygons[d] != b && this._hidePolygon(this._openedPolygons[d]);
        if ("enabled" == this.itemPull[a].state) {
            if (this.idPull[a].className = "sub_item_selected", this.itemPull[a].complex && this.dLoad && "no" == this.itemPull[a].loaded) {
                1 == this.loaderIcon && this._updateLoaderIcon(a, !0);
                var e = new dtmlXMLLoaderObject(this._xmlParser, window);
                this.itemPull[a].loaded = "get", this.callEvent("onXLS", []), e.loadXML(this.dLoadUrl + this.dLoadSign + "action=loadMenu&parentId=" + a.replace(this.idPrefix, "") + "&etc=" + (new Date).getTime())
            }(this.itemPull[a].complex || this.dLoad && "yes" == this.itemPull[a].loaded) && this.itemPull[a].complex && null != this.idPull["polygon_" + a] && (this._updateItemComplexState(a, !0, !0), this._showPolygon(a, this.dirSubLevel)), this._addSubItemToSelected(a, b), this.menuSelected = a
        }
    }, this._doOnClick = function(a, b, c) {
        if (this.menuLastClicked = a, null != this.itemPull[this.idPrefix + a].href_link && "enabled" == this.itemPull[this.idPrefix + a].state) {
            var d = document.createElement("FORM"),
                e = String(this.itemPull[this.idPrefix + a].href_link).split("?");
            if (d.action = e[0], null != e[1])
                for (var f = String(e[1]).split("&"), g = 0; g < f.length; g++) {
                    var h = String(f[g]).split("="),
                        i = document.createElement("INPUT");
                    i.type = "hidden", i.name = h[0] || "", i.value = h[1] || "", d.appendChild(i)
                }
            null != this.itemPull[this.idPrefix + a].href_target && (d.target = this.itemPull[this.idPrefix + a].href_target), d.style.display = "none", document.body.appendChild(d), d.submit(), null != d && (document.body.removeChild(d), d = null)
        } else if ("c" != b.charAt(0) && "d" != b.charAt(1) && "s" != b.charAt(2)) {
            if (this.checkEvent("onClick")) this.callEvent("onClick", [a, this.contextMenuZoneId, c]);
            else if ("d" == b.charAt(1) || "win" == this.menuMode && "t" == b.charAt(2)) return;
            this.context && this._isContextMenuVisible() && this.contextAutoHide ? this._hideContextMenu() : this._clearAndHide && this._clearAndHide()
        }
    }, this._doOnTouchMenu = function(a) {
        0 == this.menuTouched && (this.menuTouched = !0, this.checkEvent("onTouch") && this.callEvent("onTouch", [a]))
    }, this._searchMenuNode = function(a, b) {
        for (var c = [], d = 0; d < b.length; d++)
            if ("object" == typeof b[d]) {
                5 == b[d].length && "object" != typeof b[d][0] && b[d][0].replace(this.idPrefix, "") == a && 0 == d && (c = b);
                var e = this._searchMenuNode(a, b[d]);
                e.length > 0 && (c = e)
            }
        return c
    }, this._getMenuNodes = function(a) {
        var b, c = [];
        for (b in this.itemPull) this.itemPull[b].parent == a && (c[c.length] = b);
        return c
    }, this._genStr = function(a) {
        for (var b = "", c = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789", d = 0; d < a; d++) b += c.charAt(Math.round(Math.random() * (c.length - 1)));
        return b
    }, this.getItemType = function(a) {
        return a = this.idPrefix + a, null == this.itemPull[a] ? null : this.itemPull[a].type
    }, this.forEachItem = function(a) {
        for (var b in this.itemPull) a(String(b).replace(this.idPrefix, ""))
    }, this._clearAndHide = function() {
        for (c.menuSelected = -1, c.menuLastClicked = -1; c._openedPolygons.length > 0;) c._openedPolygons.pop();
        for (var a = 0; a < c._selectedSubItems.length; a++) {
            var b = c._selectedSubItems[a][0];
            null != c.idPull[b] && "enabled" == c.itemPull[b].state && ("sub_item_selected" == c.idPull[b].className && (c.idPull[b].className = "sub_item"), c.idPull[b].className == "dhtmlxMenu_" + c.skin + "_TopLevel_Item_Selected" && (c.idPull[b].className = null != c.itemPull[b].cssNormal ? c.itemPull[b].cssNormal : "dhtmlxMenu_" + c.skin + "_TopLevel_Item_Normal")), c._hidePolygon(b)
        }
        c.menuTouched = !1, c.context && (c.contextHideAllMode ? (c._hidePolygon(c.idPrefix + c.topId), c.zInd = c.zIndInit) : c.zInd = c.zIndInit + c.zIndStep)
    }, this._doOnLoad = function() {}, this.loadXML = function(a, b) {
        b && (this._doOnLoad = function() {
            b()
        }), this.callEvent("onXLS", []), this._xmlLoader.loadXML(a)
    }, this.loadXMLString = function(a, b) {
        b && (this._doOnLoad = function() {
            b()
        }), this._xmlLoader.loadXMLString(a)
    }, this._buildMenu = function(a, b) {
        for (var c = 0, d = 0; d < a.childNodes.length; d++)
            if (a.childNodes[d].tagName == this.itemTagName) {
                var e = a.childNodes[d],
                    f = {};
                f.id = this.idPrefix + (e.getAttribute("id") || this._genStr(24)), f.title = e.getAttribute("text") || "", f.imgen = e.getAttribute("img") || "", f.imgdis = e.getAttribute("imgdis") || "", f.tip = "", f.hotkey = "", null != e.getAttribute("cssNormal") && (f.cssNormal = e.getAttribute("cssNormal")), f.type = e.getAttribute("type") || "item", "checkbox" == f.type && (f.checked = null != e.getAttribute("checked"), f.imgen = "chbx_" + (f.checked ? "1" : "0"), f.imgdis = f.imgen), "radio" == f.type && (f.checked = null != e.getAttribute("checked"), f.imgen = "rdbt_" + (f.checked ? "1" : "0"), f.imgdis = f.imgen, f.group = e.getAttribute("group") || this._genStr(24), null == this.radio[f.group] && (this.radio[f.group] = []), this.radio[f.group][this.radio[f.group].length] = f.id), f.state = null == e.getAttribute("enabled") && null == e.getAttribute("disabled") || "false" != e.getAttribute("enabled") && "true" != e.getAttribute("disabled") ? "enabled" : "disabled", f.parent = null != b ? b : this.idPrefix + this.topId, f.complex = this.dLoad ? null != e.getAttribute("complex") : this._buildMenu(e, f.id) > 0, this.dLoad && f.complex && (f.loaded = "no"), this.itemPull[f.id] = f;
                for (var g = 0; g < e.childNodes.length; g++) {
                    var h = e.childNodes[g].tagName;
                    if (null != h && (h = h.toLowerCase()), h == this.userDataTagName) {
                        var i = e.childNodes[g];
                        null != i.getAttribute("name") && (this.userData[f.id + "_" + i.getAttribute("name")] = null != i.firstChild && null != i.firstChild.nodeValue ? i.firstChild.nodeValue : "")
                    }
                    h == this.itemTextTagName && (f.title = e.childNodes[g].firstChild.nodeValue), h == this.itemTipTagName && (f.tip = e.childNodes[g].firstChild.nodeValue), h == this.itemHotKeyTagName && (f.hotkey = e.childNodes[g].firstChild.nodeValue), h == this.itemHrefTagName && "item" == f.type && (f.href_link = e.childNodes[g].firstChild.nodeValue, null != e.childNodes[g].getAttribute("target") && (f.href_target = e.childNodes[g].getAttribute("target")))
                }
                c++
            }
        return c
    }, this._xmlParser = function() {
        if (c.dLoad) {
            var a = this.getXMLTopNode("menu");
            if (parentId = null != a.getAttribute("parentId") ? a.getAttribute("parentId") : null, null == parentId) c._buildMenu(a, null), c._initTopLevelMenu();
            else {
                if (c._buildMenu(a, c.idPrefix + parentId), c._addSubMenuPolygon(c.idPrefix + parentId, c.idPrefix + parentId), c.menuSelected == c.idPrefix + parentId) {
                    var b = c.idPrefix + parentId,
                        d = c.itemPull[c.idPrefix + parentId].parent == c.idPrefix + c.topId,
                        e = d && !c.context ? c.dirTopLevel : c.dirSubLevel,
                        f = !1;
                    if (d && c.menuModeTopLevelTimeout && "web" == c.menuMode && !c.context) {
                        var g = c.idPull[c.idPrefix + parentId];
                        if (1 == g._mouseOver) {
                            var h = c.menuModeTopLevelTimeoutTime - ((new Date).getTime() - g._dynLoadTM);
                            h > 1 && (g._menuOpenTM = window.setTimeout(function() {
                                c._showPolygon(b, e)
                            }, h), f = !0)
                        }
                    }
                    f || c._showPolygon(b, e)
                }
                c.itemPull[c.idPrefix + parentId].loaded = "yes", 1 == c.loaderIcon && c._updateLoaderIcon(c.idPrefix + parentId, !1)
            }
            this.destructor(), c.callEvent("onXLE", [])
        } else a = this.getXMLTopNode("menu"), c._buildMenu(a, null), c.init(), c.callEvent("onXLE", []), c._doOnLoad()
    }, this._xmlLoader = new dtmlXMLLoaderObject(this._xmlParser, window), this._showSubLevelItem = function(a, b) {
        null != document.getElementById("arrow_" + this.idPrefix + a) && (document.getElementById("arrow_" + this.idPrefix + a).style.display = b ? "none" : ""), null != document.getElementById("image_" + this.idPrefix + a) && (document.getElementById("image_" + this.idPrefix + a).style.display = b ? "none" : ""), null != document.getElementById(this.idPrefix + a) && (document.getElementById(this.idPrefix + a).style.display = b ? "" : "none")
    }, this._hideSubLevelItem = function(a) {
        this._showSubLevelItem(a, !0)
    }, this.idPrefix = this._genStr(12), this._bodyClick = function(a) {
        a = a || event, 2 == a.button || _isOpera && 1 == a.ctrlKey || (c.context ? c.contextAutoHide && (!_isOpera || c._isContextMenuVisible() && _isOpera) && c._hideContextMenu() : c._clearAndHide && c._clearAndHide())
    }, this._bodyContext = function(a) {
        var a = a || event,
            b = String((a.srcElement || a.target).className);
        if (b.search("dhtmlxMenu") == -1 || b.search("SubLevelArea") == -1) {
            for (var d = !0, e = a.target || a.srcElement; null != e;) null != e.id && c.isContextZone(e.id) && (d = !1), e == document.body && (d = !1), e = e.parentNode;
            d && c.hideContextMenu()
        }
    }, "undefined" != typeof window.addEventListener ? (window.addEventListener("click", this._bodyClick, !1), window.addEventListener("contextmenu", this._bodyContext, !1)) : (document.body.attachEvent("onclick", this._bodyClick), document.body.attachEvent("oncontextmenu", this._bodyContext)), this._UID = this._genStr(32), dhtmlxMenuObjectLiveInstances[this._UID] = this, dhtmlxEventable(this), this
}

function dhtmlXPopup(a) {
    var b = this;
    if (this.conf = a || {}, a = null, this.mode = this.conf.mode || "bottom", this.p = document.createElement("DIV"), this.p.style.display = "none", this.p.innerHTML = "<div class='dhx_popup_area" + (_isIE ? " dhx_popup_area_ie" : "") + "'><table cellspacing='0' cellpadding='0' border='0' class='dhx_popup_table'><tbody></tbody></table></div><div class='dhx_popup_arrow dhx_popup_arrow_" + this.mode + "'></div>", document.body.appendChild(this.p), this.skinParams = {
            dhx_terrace: {
                t0: 19,
                t1: 9,
                t2: 19,
                t3: 9
            },
            dhx_skyblue: {
                t0: 12,
                t1: 9,
                t2: 12,
                t3: 9
            },
            dhx_web: {
                t0: 12,
                t1: 9,
                t2: 12,
                t3: 9
            }
        }, this.p.onclick = function(a) {
            if (a = a || event, a.cancelBubble = !0, null != b._nodeObj) return b.callEvent("onContentClick", []), !0;
            for (var c = a.target || a.srcElement, d = null; c != b.p;) "undefined" == typeof c._idd || c._isSeparator || (d = c._idd), c = c.parentNode;
            c = null, d && (b.callEvent("onClick", [d]), null != b && null != b.isVisible && b.isVisible() && b.callEvent("onBeforeHide", ["select", a, d]) === !0 && b.hide())
        }, this.separator = "DHXSEP" + (new Date).getTime(), this.tpl = [], this.setTemplate = function(a) {
            this.tpl = a.split(",")
        }, this.uid = function() {
            return this.idd ? this.idd++ : this.idd = (new Date).getTime(), this.idd
        }, this.show = function(a) {
            var b = null;
            if (1 == arguments.length) {
                if (a) {
                    if (!this._idExists(a)) return
                } else a = this.conf.id[0];
                this.conf.toolbar && (b = this.conf.toolbar.getItemDim(a)), this.conf.form && (b = this.conf.form.getItemDim(a))
            } else 4 == arguments.length && (this._clearClick = !0, b = {
                left: arguments[0],
                top: arguments[1],
                width: arguments[2],
                height: arguments[3]
            }, a = null);
            b && (this.p.style.visibility = "hidden", this.p.style.display = "", this._setPos(b), this.p.style.visibility = "visible", this._lastId = a, this.callEvent("onShow", [a]))
        }, this._setPos = function(a, b) {
            var c = a.left,
                d = a.top,
                e = a.width,
                f = a.height;
            this._posData = {
                left: c,
                top: d,
                width: e,
                height: f
            };
            var g = Math.max((_isIE ? document.documentElement : document.getElementsByTagName("html")[0]).scrollLeft, document.body.scrollLeft),
                h = g + (_isIE ? Math.max(document.documentElement.clientWidth || 0, document.documentElement.offsetWidth || 0, document.body.clientWidth || 0) : window.innerWidth),
                i = Math.max((_isIE ? document.documentElement : document.getElementsByTagName("html")[0]).scrollTop, document.body.scrollTop),
                j = i + (_isIE ? Math.max(document.documentElement.clientHeight || 0, document.documentElement.offsetHeight || 0, document.body.clientHeight || 0) : window.innerHeight),
                k = b || this.mode;
            "undefined" == typeof b && (b = !1);
            var l = {
                top: d - this.p.offsetHeight - i,
                bottom: j - (d + f + this.p.offsetHeight),
                left: c - this.p.offsetWidth - g,
                right: h - (c + e + this.p.offsetWidth)
            };
            if (!b && l[k] < 0) {
                var m = this._getAvailPos(k, l);
                if (m !== !1) return void this._setPos(a, m)
            }
            if ("top" == k || "bottom" == k) {
                var n = this.skinParams[this.skin].t2,
                    o = this.skinParams[this.skin].t3,
                    p = Math.round(this.p.offsetWidth / 2),
                    q = Math.round(this.p.lastChild.offsetWidth / 2);
                if (c < g) var r = Math.min(c + e, g),
                    e = c + e - r,
                    c = r;
                c + e > h && (e = h - c);
                var s = Math.round(c + e / 2),
                    t = s - p,
                    u = s - n - q,
                    v = s + q + n - this.p.offsetWidth;
                t < g - o ? t = Math.min(g - o, u) : t + this.p.offsetWidth > h + o && (t = Math.max(v, h + o - this.p.offsetWidth)), this.p.style.left = t + "px", this.p.style.top = ("top" == k ? d - this.p.offsetHeight : d + f) + "px", s = s - t - q, this.p.lastChild.className = "dhx_popup_arrow dhx_popup_arrow_" + k, this.p.lastChild.style.top = ("top" == k ? this.p.offsetHeight - this.p.lastChild.offsetHeight : 0) + "px", this.p.lastChild.style.left = s + "px"
            }
            if ("left" == k || "right" == k) {
                var n = this.skinParams[this.skin].t0,
                    o = this.skinParams[this.skin].t1,
                    w = Math.round(this.p.offsetHeight / 2),
                    x = Math.round(this.p.lastChild.offsetHeight / 2);
                if (d < i) var y = Math.min(d + f, i),
                    f = d + f - y,
                    d = y;
                d + f > j && (f = j - d);
                var s = Math.round(d + f / 2),
                    z = s - w,
                    A = s - n - x,
                    B = s + x + n - this.p.offsetHeight;
                z < i - o ? z = Math.min(i - o, A) : z + this.p.offsetHeight > j + o && (z = Math.max(B, j + o - this.p.offsetHeight)), this.p.style.left = ("left" == k ? c - this.p.offsetWidth : c + e) + "px", this.p.style.top = z + "px", s = s - z - x, this.p.lastChild.className = "dhx_popup_arrow dhx_popup_arrow_" + k, this.p.lastChild.style.left = ("left" == k ? this.p.offsetWidth - this.p.lastChild.offsetWidth : 0) + "px", this.p.lastChild.style.top = s + "px"
            }
            if (this._IEDisp && null != this._nodeId) {
                var C = document.getElementById(this._nodeId);
                window.setTimeout(function() {
                    C.style.visibility = "visible", C = null
                }, 1)
            }
        }, this._getAvailPos = function(a, b) {
            for (var c = {
                    top: ["bottom", "right", "left"],
                    bottom: ["top", "right", "left"],
                    left: ["right", "bottom", "top"],
                    right: ["left", "bottom", "top"]
                }, d = null, e = 0; e < c[a].length; e++) null == d && b[c[a][e]] > 0 && (d = c[a][e]);
            if (null == d) {
                var f, d = "bottom";
                for (f in b) b[f] > b[d] && (d = f)
            }
            return d != a && d
        }, this._repaint = function() {
            this.isVisible() && this._setPos(this._posData)
        }, this.clear = function() {
            this._nodeObj && (_isIE && "undefined" != typeof dhtmlXLayoutObject && this._nodeObj instanceof dhtmlXLayoutObject && (this.p.onmousedown = null), this._nodeObj.unload ? this._nodeObj.unload() : this._nodeObj.destruct && this._nodeObj.destruct(), this._nodeObj = this._nodeId = null), this._IEHoverInited && this._IEHoverClear();
            for (var a = this.p.firstChild.firstChild.firstChild; a.childNodes.length > 0;) a.removeChild(a.lastChild);
            a = null, this.itemData = {}
        }, this.hide = function() {
            if ("none" != this.p.style.display) {
                this.p.style.display = "none";
                var a = this._lastId;
                this._lastId = null, this.callEvent("onHide", [a])
            }
        }, this.isVisible = function() {
            return "" == this.p.style.display
        }, this.itemData = {}, this.getItemData = function(a) {
            return a ? this.itemData[a] ? this.itemData[a] : {} : this.itemData
        }, this.setSkin = function(a) {
            this.skin = a, this.p.className = "dhx_popup_" + this.skin, null != this._nodeObj && "function" == typeof this._nodeObj.setSkin && this._nodeObj.setSkin(this.skin), this._repaint()
        }, this.skinDetect = function() {
            var a = document.createElement("DIV");
            a.className = "dhx_popup_skin_detect", document.body.firstChild ? document.body.insertBefore(a, document.body.firstChild) : document.body.appendChild(a);
            var b = a.offsetWidth;
            return a.parentNode.removeChild(a), a = null, {
                10: "dhx_skyblue",
                20: "dhx_web",
                30: "dhx_terrace"
            }[b] || null
        }, this.attachList = function(a, b) {
            this.setTemplate(a), this.clear();
            for (var c = this.p.firstChild.firstChild.firstChild, d = 0; d < b.length; d++) {
                var e = document.createElement("TR");
                if (e._idd = b[d].id || this.uid(), c.appendChild(e), this.itemData[e._idd] = b[d], b[d] == this.separator) {
                    e.className = "dhx_popup_sep", e._isSeparator = !0;
                    var f = document.createElement("TD");
                    f.className = "dhx_popup_sep", f.colSpan = this.tpl.length, f.innerHTML = "<div class='dhx_popup_sep'>&nbsp;</div>", e.appendChild(f), f = null
                } else {
                    for (var g = 0; g < this.tpl.length; g++) {
                        var h = "dhx_popup_td";
                        !this._IEFirstLast || 1 != this.tpl.length && 0 != g && g != this.tpl.length - 1 || (h += 1 == this.tpl.length ? " dhx_popup_td_single" : 0 == g ? " dhx_popup_td_first" : " dhx_popup_td_last"), f = document.createElement("TD"), f.className = h, f.innerHTML = b[d][this.tpl[g]] || "&nbsp;", e.appendChild(f), f = null
                    }
                    this._IEHover && (e._IEHover = !0, this._IEHoverInited || this._IEHoverInit())
                }
                e = null
            }
            c = null, this._repaint()
        }, this.attachObject = function(a) {
            return this._attachNode("object", {
                obj: a
            })
        }, this.attachHTML = function(a) {
            return this._attachNode("html", {
                html: a
            })
        }, this.attachForm = function(a) {
            return this._attachNode("form", {
                struct: a
            })
        }, this.attachCalendar = function() {
            return this._attachNode("calendar", {})
        }, this.attachGrid = function(a, b) {
            return this._attachNode("grid", {
                width: a || 400,
                height: b || 200
            })
        }, this.attachTree = function(a, b, c) {
            return this._attachNode("tree", {
                width: a || 400,
                height: b || 200,
                rootId: c || 0
            })
        }, this.attachLayout = function(a, b, c) {
            return this._attachNode("layout", {
                width: a || 400,
                height: b || 200,
                pattern: c || "3L"
            })
        }, this.attachAccordion = function(a, b) {
            return this._attachNode("accordion", {
                width: a || 400,
                height: b || 200
            })
        }, this.attachTabbar = function(a, b, c) {
            return this._attachNode("tabbar", {
                width: a || 400,
                height: b || 200,
                mode: c || "top"
            })
        }, this._attachNode = function(a, c) {
            this.clear(), this._nodeId = "cn_" + (new Date).getTime();
            var d = this.p.firstChild.firstChild.firstChild,
                e = document.createElement("TR");
            e.className = "dhxnode", d.appendChild(e);
            var f = document.createElement("TD");
            return f.className = "dhx_popup_td", f.innerHTML = "<div id='" + this._nodeId + "' style='position:relative;'></div>", c.width && (f.firstChild.style.width = c.width + "px"), c.height && (f.firstChild.style.height = c.height + "px"), e.appendChild(f), f = e = d = null, "object" == a && (this._nodeObj = "string" == typeof c.obj ? document.getElementById(c.obj) : c.obj, c.obj = null, document.getElementById(this._nodeId).appendChild(this._nodeObj), this._nodeObj.style.display = "", this._nodeObj.style.visibility = "visible"), "html" == a && (document.getElementById(this._nodeId).innerHTML = c.html, this._nodeObj = {
                text: c.html
            }), "form" == a && (this._nodeObj = new dhtmlXForm(this._nodeId, c.struct), this._nodeObj.setSkin(this.skin)), "calendar" == a && (this._nodeObj = new dhtmlXCalendarObject(this._nodeId), this._nodeObj.setSkin(this.skin), this._nodeObj.show()), "grid" == a && (this._nodeObj = new dhtmlXGridObject(this._nodeId), this._nodeObj.setSkin(this.skin)), "tree" == a && (this._nodeObj = new dhtmlXTreeObject(this._nodeId, "100%", "100%", c.rootId)), "layout" == a && (this._nodeObj = new dhtmlXLayoutObject(this._nodeId, c.pattern, this.skin), _isIE) && (this.p.onmousedown = function() {
                b._clearClick = !0
            }), "accordion" == a && (this._nodeObj = new dhtmlXAccordion(this._nodeId, this.skin)), "tabbar" == a && (this._nodeObj = new dhtmlXTabBar(this._nodeId, c.mode), this._nodeObj.setSkin(this.skin)), this._repaint(), this._nodeObj
        }, this.unload = function() {
            window.addEventListener ? (window.removeEventListener("click", this._doOnClick, !1), window.removeEventListener("unload", this._doOnUnload, !1)) : (document.body.detachEvent("onclick", this._doOnClick, !1), document.body.detachEvent("onunload", this._doOnUnload, !1)), this.clear(), this._doOnKeyUp = this._doOnUnload = this._doOnClick = null, null != this.conf.toolbarEvent && null != this.conf.toolbar && (null != this.conf.toolbar.detachEvent ? this.conf.toolbar.detachEvent(this.conf.toolbarEvent) : this.conf.toolbar.getItemDim = null), this.detachAllEvents(), this._clearClick = this._lastId = this._posData = this.skinParams = this.skinParent = this.tpl = this.idd = this.uid = this.itemData = this.separator = this.skin = this.mode = this.show = this.hide = this.isVisible = this.setTemplate = this._repaint = this._setPos = this.getItemData = this.clear = this._idExists = this._doOnToolbarClick = this.setSkin = this.skinDetect = this.attachList = this.attachAccordion = this.attachCalendar = this.attachForm = this.attachGrid = this.attachLayout = this.attachTabbar = this.attachTree = this.attachHTML = this.attachObject = this._attachNode = this.attachEvent = this.detachEvent = this.callEvent = this.checkEvent = this.detachAllEvents = this.eventCatcher = null, this.p.onclick = null, this.p.parentNode.removeChild(this.p), this.p = null, b = this.unload = this._IEDisp = this._IEHover = this._IEHoverTM = this._IEHoverInit = this._IEHoverClear = this._IEHoverRender = this._IEHoverInited = this.conf = this.conf.toolbar = this.conf.toolbarEvent = this.conf.form = this.conf.id = null
        }, dhtmlxEventable(this), this._doOnClick = function(a) {
            if (a = a || event, b._clearClick) b._clearClick = !1;
            else {
                if (null != b.conf.form) {
                    var c, d = a.target || a.srcElement;
                    if ("option" == (d.tagName || "").toLowerCase() && (d = d.parentNode), null != d.className && d.className.search("dhxform") >= 0) null != d.parentNode && null != d.parentNode.parentNode && null != d.parentNode.parentNode._idd && (c = d.parentNode.parentNode._idd, "ra" == d.parentNode.parentNode._type && (c = [d.parentNode.parentNode._group, d.parentNode.parentNode._value]));
                    else {
                        for (var e = !0, f = !1; e && !f;) f = "dhxform_btn" == (d.className || "").toLowerCase() || (d.className || "").search(/dhxeditor_inside/gi) >= 0, d = d.parentNode, e = null != d;
                        if (f) return
                    }
                    if (d = null, null != c && b._idExists(c)) return
                }
                b.isVisible() && b.callEvent("onBeforeHide", ["click", a]) === !0 && b.hide()
            }
        }, this._doOnKeyUp = function(a) {
            a = a || event, 27 == a.keyCode && b.isVisible() && b.callEvent("onBeforeHide", ["esc", a]) === !0 && b.hide()
        }, this._doOnUnload = function() {
            b.unload()
        }, window.addEventListener ? (window.addEventListener("click", this._doOnClick, !1), window.addEventListener("keyup", this._doOnKeyUp, !1), window.addEventListener("unload", this._doOnUnload, !1)) : (document.body.attachEvent("onclick", this._doOnClick, !1), document.body.attachEvent("onkeyup", this._doOnKeyUp, !1), document.body.attachEvent("onunload", this._doOnUnload, !1)), this._idExists = function(a) {
            for (var b = !1, c = 0; c < this.conf.id.length; c++) b = this.conf.id[c] instanceof Array ? b || this.conf.id[c][0] == a[0] && this.conf.id[c][1] == a[1] : b || this.conf.id[c] == a;
            return b
        }, this._IEDisp = _isIE && (navigator.userAgent.search("MSIE 6.0") >= 0 || "CSS1Compat" != document.compatMode), (this._IEHover = _isIE && navigator.userAgent.search("MSIE 6.0") >= 0) && (this._IEHoverInit = function() {
            this.p.onmouseover = function() {
                for (var a = event.srcElement; a != this && 1 != a._IEHover;) a = a.parentNode;
                a._IEHover && (b._IEHoverTM && window.clearTimeout(b._IEHoverTM), b._lastIEHover != a && (b._IEHoverRender(a), a = null))
            }, this.p.onmouseout = function() {
                b._IEHoverTM && window.clearTimeout(b._IEHoverTM), b._IEHoverTM = window.setTimeout(function() {
                    b._IEHoverRender(null)
                }, 1)
            }, this._IEHoverRender = function(a) {
                null != this._lastIEHover && this._lastIEHover.className.search(/tr_hover/gi) >= 0 && (this._lastIEHover.className = this._lastIEHover.className.replace(/\s{0,}tr_hover/gi, ""), this._lastIEHover = null), null != a && a.className.search(/tr_hover/gi) < 0 && (a.className += " tr_hover", b._lastIEHover = a)
            }, this._IEHoverInited = !0
        }, this._IEHoverClear = function() {
            this.p.onmouseover = null, this.p.onmouseout = null, this._IEHoverInited = !1
        }), this._IEFirstLast = _isIE && navigator.userAgent.search(/MSIE [6,7,8]\.0/i) >= 0, "undefined" != typeof dhtmlXToolbarObject && null != this.conf.toolbar && this.conf.toolbar instanceof dhtmlXToolbarObject && null != this.conf.id && (this.conf.id instanceof Array || (this.conf.id = [this.conf.id]), this.skinParent = this.conf.toolbar.skin, this._doOnToolbarClick = function(a) {
            for (var c = 0; c < b.conf.id.length; c++) a == b.conf.id[c] && a != b._lastId && (b.show(a), b._clearClick = !0)
        }, "undefined" == typeof dhtmlXToolbarObject.prototype.getItemDim && (dhtmlXToolbarObject.prototype.getItemDim = function(a) {
            var b = this.objPull[this.idPrefix + a],
                c = {
                    left: getAbsoluteLeft(b.obj),
                    top: getAbsoluteTop(b.obj),
                    width: b.obj.offsetWidth + (b.arw ? b.arw.offsetWidth : 0),
                    height: b.obj.offsetHeight
                },
                b = null;
            return c
        }), this.conf.toolbarEvent = this.conf.toolbar.attachEvent("onClick", b._doOnToolbarClick)), "undefined" != typeof dhtmlXForm && null != this.conf.form && this.conf.form instanceof dhtmlXForm && null != this.conf.id && (this.conf.id instanceof Array || (this.conf.id = [this.conf.id]), this.conf.mode || (this.mode = "right"), this.skinParent = this.conf.form.skin, "undefined" == typeof dhtmlXForm.prototype.getItemDim)) {
        dhtmlXForm.prototype.getItemDim = function(a) {
            return this.doWithItem(a, "_getDim")
        };
        for (var c in {
                input: 1,
                password: 1,
                select: 1,
                multiselect: 1,
                checkbox: 1,
                radio: 1,
                button: 1,
                combo: 1,
                btn2state: 1,
                calendar: 1,
                colorpicker: 1,
                editor: 1
            }) null != dhtmlXForm.prototype.items[c] && (dhtmlXForm.prototype.items[c]._getDim = function(a) {
            var b = a;
            ({
                ta: !0,
                pw: !0,
                se: !0,
                calendar: !0,
                colorpicker: 1,
                editor: !0
            })[a._type] && (b = a.childNodes[a._ll ? 1 : 0].childNodes[0]), {
                ch: !0,
                ra: !0,
                btn2state: !0
            }[a._type] && (b = a.childNodes[a._ll ? 1 : 0].childNodes[1]), {
                bt: !0
            }[a._type] && (b = a.firstChild), {
                combo: !0
            }[a._type] && (b = a._combo.DOMParent.firstChild);
            var c = {
                    left: getAbsoluteLeft(b),
                    top: getAbsoluteTop(b),
                    width: b.offsetWidth,
                    height: b.offsetHeight
                },
                b = null;
            return c
        })
    }
    return this.setSkin(this.conf.skin || ("undefined" != typeof dhtmlx ? dhtmlx.skin : null) || this.skinParent || this.skinDetect() || "dhx_skyblue"), this
}

function dhtmlxSlider(a, b, c, d, e, f, g, h) {
    if (_isIE) try {
        document.execCommand("BackgroundImageCache", !1, !0)
    } catch (a) {}
    var i;
    if (a && "object" == typeof a && !a.nodeName && (i = a.parent, c = a.skin, e = a.min, f = a.max, h = a.step, d = a.vertical, g = a.value, b = a.size), a) i = "object" != typeof a ? document.getElementById(a) : a;
    else {
        var j = "slider_div_" + (new Date).valueOf() + Math.random(1e3);
        i = document.createElement("div"), i.setAttribute("id", j);
        for (var k = document.body.lastChild; k.lastChild && 1 == k.lastChild.nodeType;) k = k.lastChild;
        k.parentNode.insertBefore(i, k)
    }
    return "object" == typeof b && (c = b.skin, e = b.min, f = b.max, h = b.step, d = b.vertical, g = b.value, b = b.size), this.size = b, this.vMode = d || !1, this.skin = dhtmlx.skin || c || "default", this.parent = i, this.disabled = this.isInit = !1, this.value = "undefined" == g ? e || 0 : g, this.inputPriority = !0, this.stepping = !1, this.imgURL = window.dhx_globalImgPath || dhtmlx.image_path || "", this._skinsImgs = {
        default: {
            ls: 1,
            lz: 1,
            rz: 1,
            rs: 1
        },
        ball: {
            ls: 1,
            lz: 1,
            rz: 1,
            rs: 1
        },
        zipper: {
            bg: 1,
            lz: 1,
            rz: 1
        },
        arrow: {
            bg: 1,
            ls: 1,
            rs: 1
        },
        arrowgreen: {
            bg: 1,
            ls: 1,
            rs: 1
        },
        simplesilver: {
            lz: 1,
            ls: 1,
            rs: 1,
            rz: 1
        },
        simplegray: {
            lz: 1,
            ls: 1,
            rs: 1,
            rz: 1
        },
        bar: {
            bg: 1,
            ls: 1,
            rs: 1
        },
        dhx_skyblue: {
            bg: 1
        }
    }, this._def = [e - 0 || 0, f - 0 || 100, h - 0 || 1, g - 0 || 0, b - 0], dhtmlxEventable(this), this
}

function dhtmlXTabBar(a, b, c) {
    switch (b = b || "top", dhtmlxEventable(this), this._hrefs = {}, this._s = {}, this._c = {}, this._s.mode = b, this._s.scrolls = !0, this._custom_height = c, this._s.line_height = (parseInt(c) || 20) + 3, this._s.skin_line = 1, this._s.tab_margin = 0, this._s.expand = 0, this._s.ext_border = 2, this._s._bMode = "right" == b || "bottom" == b ? 1 : 0, this._s._vMode = "right" == b || "left" == b ? 1 : 0, this._dx = this._s._vMode ? "height" : "width", this._dy = this._s._vMode ? "width" : "height", b) {
        case "top":
            this._py = "top", this._px = "left", this._pxc = "right";
            break;
        case "bottom":
            this._py = "bottom", this._px = "left", this._pxc = "right";
            break;
        case "right":
            this._py = "right", this._px = "top", this._pxc = "bottom";
            break;
        case "left":
            this._py = "left", this._px = "top", this._pxc = "bottom"
    }
    return this._active = null, this._tabs = {}, this._content = {}, this._href = {}, this._rows = [], this._s._tabSize = 150, this._styles = {
        default: {
            left: 3,
            right: 3,
            select_shift: 3,
            select_top: 2,
            margin: 1,
            offset: 5,
            tab_color: "#F4F3EE",
            data_color: "#F0F8FF"
        },
        winbiscarf: {
            left: 18,
            right: 18,
            select_shift: 3,
            select_top: 2,
            margin: 1,
            offset: 5
        },
        winscarf: {
            left: 18,
            right: 4,
            select_shift: 3,
            select_top: 2,
            margin: 5,
            offset: 5
        },
        modern: {
            left: 5,
            right: 5,
            select_shift: 3,
            select_top: 2,
            margin: 1,
            offset: 5,
            tab_color: "#F4F3EE",
            data_color: "#F0F8FF"
        },
        silver: {
            left: 7,
            right: 7,
            select_shift: 3,
            select_top: 2,
            margin: 1,
            offset: 5,
            tab_color: "#F4F3EE",
            data_color: "#F0F8FF"
        },
        dark_blue: {
            left: 2,
            right: 2,
            select_shift: 3,
            select_top: 2,
            margin: 1,
            offset: 5
        },
        glassy_blue: {
            left: 2,
            right: 3,
            select_shift: 3,
            select_top: 2,
            margin: 1,
            offset: 5
        },
        dhx_terrace: {
            left: 7,
            right: 7,
            select_shift: 0,
            select_top: 0,
            margin: -1,
            offset: 0,
            tab_color: "",
            data_color: "#ffffff"
        },
        dhx_black: {
            left: 2,
            right: 2,
            select_shift: 3,
            select_top: 0,
            margin: 1,
            offset: 5
        },
        dhx_blue: {
            left: 2,
            right: 2,
            select_shift: 3,
            select_top: 0,
            margin: 1,
            offset: 5,
            tab_color: "#F4F3EE",
            data_color: "#F0F8FF"
        },
        dhx_skyblue: {
            left: 3,
            right: 3,
            select_shift: 0,
            select_top: 0,
            margin: -1,
            offset: 5,
            data_color: "white",
            hover: !0
        },
        dhx_web: {
            left: 3,
            right: 3,
            select_shift: 1,
            select_top: 0,
            margin: 5,
            offset: 15,
            data_color: "white"
        }
    }, "object" != typeof a && (a = document.getElementById(a)), this.entBox = a, this.entBox.className += " dhx_tabbar_zone_" + this._s.mode, dhtmlx.image_path && this.setImagePath(dhtmlx.image_path), this.setStyle("default"), this.__skin = !1, this._createSelf(), _isIE && this.preventIECashing(!0), this
}

function dhx_init_tabbars() {
    for (var a = document.getElementsByTagName("div"), b = 0; b < a.length; b++)
        if (a[b].className.indexOf("dhtmlxTabBar") != -1) {
            var c = a[b],
                d = c.id;
            c.className = "";
            for (var e = [], f = 0; f < c.childNodes.length; f++) c.childNodes[f].tagName && "!" != c.childNodes[f].tagName && (e[e.length] = c.childNodes[f]);
            var g = new dhtmlXTabBar(d, c.getAttribute("mode") || "top", c.getAttribute("tabheight") || 20);
            window[d] = g, (h = c.getAttribute("onbeforeinit")) && eval(h), c.getAttribute("enableForceHiding") && g.enableForceHiding(!0), g.setImagePath(c.getAttribute("imgpath"));
            var h = c.getAttribute("margin");
            null != h && (g._margin = h), (h = c.getAttribute("align")) && (g._align = h), (h = c.getAttribute("hrefmode")) && g.setHrefMode(h), h = c.getAttribute("offset"), null != h && (g._offset = h), h = c.getAttribute("tabstyle"), null != h && g.setStyle(h);
            var h = c.getAttribute("select"),
                i = c.getAttribute("skinColors");
            for (i && g.setSkinColors(i.split(",")[0], i.split(",")[1]), f = 0; f < e.length; f++) {
                var j = e[f];
                j.parentNode.removeChild(j), g.addTab(j.id, j.getAttribute("name"), j.getAttribute("width"), null, j.getAttribute("row"));
                var k = j.getAttribute("href");
                k ? g.setContentHref(j.id, k) : g.setContent(j.id, j), g._dspN || "none" != j.style.display || (j.style.display = "")
            }
            e.length && g.setTabActive(h || e[0].id), (h = c.getAttribute("oninit")) && eval(h)
        }
}

function dhtmlXToolbarObject(a, b) {
    var c = this;
    for (this.cont = "object" != typeof a ? document.getElementById(a) : a; this.cont.childNodes.length > 0;) this.cont.removeChild(this.cont.childNodes[0]);
    return this.cont.dir = "ltr", this.cont.innerHTML += "<div class='dhxtoolbar_hdrline_ll'></div><div class='dhxtoolbar_hdrline_rr'></div><div class='dhxtoolbar_hdrline_l'></div><div class='dhxtoolbar_hdrline_r'></div>", this.base = document.createElement("DIV"), this.base.className = "float_left", this.cont.appendChild(this.base), this.align = "left", this.setAlign = function(a) {
        this.align = "right" == a ? "right" : "left", this.base.className = "right" == a ? "float_right" : "float_left", this._spacer && (this._spacer.className = "dhxtoolbar_spacer " + ("right" == a ? " float_left" : " float_right"))
    }, this._isIE6 = !1, _isIE && (this._isIE6 = null == window.XMLHttpRequest), (this._isIPad = navigator.userAgent.search(/iPad/gi) >= 0) && (this.cont.ontouchstart = function(a) {
        return a = a || event, "input" == String(a.target.tagName || "").toLowerCase() || (a.returnValue = !1, a.cancelBubble = !0, !1)
    }), this.iconSize = 18, this.setIconSize = function(a) {
        this.iconSize = {
            18: !0,
            24: !0,
            32: !0,
            48: !0
        }[a] ? a : 18, this.setSkin(this.skin, !0), this.callEvent("_onIconSizeChange", [this.iconSize])
    }, this.selectPolygonOffsetLeft = this.selectPolygonOffsetTop = 0, this._improveTerraceSkin = function() {
        var a = [],
            b = {
                buttonInput: !0,
                separator: !0,
                text: !0
            },
            c = [this.base];
        null != this._spacer && c.push(this._spacer);
        for (var d = 0; d < c.length; d++) {
            a[d] = [];
            for (var e = 0; e < c[d].childNodes.length; e++)
                if (null != c[d].childNodes[e].idd && "none" != c[d].childNodes[e].style.display) {
                    var f = this.idPrefix + c[d].childNodes[e].idd;
                    null != this.objPull[f] && this.objPull[f].obj == c[d].childNodes[e] && a[d].push({
                        a: f,
                        type: this.objPull[f].type,
                        node: this.objPull[f]["buttonSelect" == this.objPull[f].type ? "arw" : "obj"]
                    })
                }
            c[d] = null
        }
        for (d = 0; d < a.length; d++)
            for (e = 0; e < a[d].length; e++) {
                var g = a[d][e];
                "buttonInput" == g.type && (g.node.className = g.node.className.replace(/dhx_toolbar_btn/, "dhx_toolbar_inp"));
                var h = !1,
                    i = !1;
                b[g.type] || ((e == a[d].length - 1 || null != a[d][e + 1] && b[a[d][e + 1].type]) && (h = !0), (0 == e || e - 1 >= 0 && null != a[d][e - 1] && b[a[d][e - 1].type]) && (i = !0)), g.node.style.borderRight = h ? "1px solid #cecece" : "0px solid white", g.node.style.borderTopRightRadius = g.node.style.borderBottomRightRadius = h ? "5px" : "0px", "buttonSelect" == g.type ? (g.node.previousSibling.style.borderTopLeftRadius = g.node.previousSibling.style.borderBottomLeftRadius = i ? "5px" : "0px", g.node.previousSibling._br = h, g.node.previousSibling._bl = i) : g.node.style.borderTopLeftRadius = g.node.style.borderBottomLeftRadius = i ? "5px" : "0px", g.node._br = h, g.node._bl = i
            }
        for (d = 0; d < a.length; d++) {
            for (e = 0; e < a[d].length; e++) {
                for (f in a[d][e]) a[d][e][f] = null;
                a[d][e] = null
            }
            a[d] = null
        }
        a = c = null
    }, this._improveTerraceButtonSelect = function(a, b) {
        var c = this.objPull[a];
        1 == b ? (c.obj.style.borderBottomLeftRadius = c.obj._bl ? "5px" : "0px", c.arw.style.borderBottomRightRadius = c.obj._br ? "5px" : "0px") : (c.obj.style.borderBottomLeftRadius = "0px", c.arw.style.borderBottomRightRadius = "0px"), c = null
    }, this.setSkin = function(a, b) {
        b === !0 ? this.cont.className = this.cont.className.replace(/dhx_toolbar_base_\d{1,}_/, "dhx_toolbar_base_" + this.iconSize + "_") : (this.skin = a, "dhx_skyblue" == this.skin && (this.selectPolygonOffsetTop = 1), "dhx_web" == this.skin && (this.selectPolygonOffsetLeft = this.selectPolygonOffsetTop = 1), "dhx_terrace" == this.skin && (this.selectPolygonOffsetTop = -1, this.selectPolygonOffsetLeft = 0), this.cont.className = "dhx_toolbar_base_" + this.iconSize + "_" + this.skin + (this.rtl ? " rtl" : ""));
        for (var c in this.objPull) {
            var d = this.objPull[c];
            "slider" == d.type && (d.pen._detectLimits(), d.pen._definePos(), d.label.className = "dhx_toolbar_slider_label_" + this.skin + (this.rtl ? " rtl" : "")), "buttonSelect" == d.type && (d.polygon.className = "dhx_toolbar_poly_" + this.iconSize + "_" + this.skin + (this.rtl ? " rtl" : ""))
        }
        "dhx_terrace" == a && this._improveTerraceSkin()
    }, this.setSkin(null != b ? b : "undefined" != typeof dhtmlx && "string" == typeof dhtmlx.skin ? dhtmlx.skin : "dhx_skyblue"), this.objPull = {}, this.anyUsed = "none", this.imagePath = "", this.setIconPath = this.setIconsPath = function(a) {
        this.imagePath = a
    }, this._doOnLoad = function() {}, this.loadXML = function(a, b) {
        null != b && (this._doOnLoad = function() {
            b()
        }), this.callEvent("onXLS", []), this._xmlLoader = new dtmlXMLLoaderObject(this._xmlParser, window), this._xmlLoader.loadXML(a)
    }, this.loadXMLString = function(a, b) {
        null != b && (this._doOnLoad = function() {
            b()
        }), this._xmlLoader = new dtmlXMLLoaderObject(this._xmlParser, window), this._xmlLoader.loadXMLString(a)
    }, this._xmlParser = function() {
        for (var a = this.getXMLTopNode("toolbar"), b = "id,type,hidden,title,text,enabled,img,imgdis,action,openAll,renderSelect,mode,maxOpen,width,value,selected,length,textMin,textMax,toolTip,valueMin,valueMax,valueNow".split(","), d = "id,type,enabled,disabled,action,selected,img,text".split(","), e = 0; e < a.childNodes.length; e++)
            if ("item" == a.childNodes[e].tagName) {
                for (var f = {}, g = 0; g < b.length; g++) f[b[g]] = a.childNodes[e].getAttribute(b[g]);
                f.items = [], f.userdata = [];
                for (var h = 0; h < a.childNodes[e].childNodes.length; h++) {
                    if ("item" == a.childNodes[e].childNodes[h].tagName && "buttonSelect" == f.type) {
                        for (var i = {}, g = 0; g < d.length; g++) i[d[g]] = a.childNodes[e].childNodes[h].getAttribute(d[g]);
                        var j = a.childNodes[e].childNodes[h].getElementsByTagName("itemText");
                        null != j && null != j[0] && (i.itemText = j[0].firstChild.nodeValue);
                        for (var k = a.childNodes[e].childNodes[h].getElementsByTagName("userdata"), g = 0; g < k.length; g++) {
                            i.userdata || (i.userdata = {});
                            var l = {};
                            try {
                                l.name = k[g].getAttribute("name")
                            } catch (a) {
                                l.name = ""
                            }
                            try {
                                l.value = k[g].firstChild.nodeValue
                            } catch (a) {
                                l.value = ""
                            }
                            "" != l.name && (i.userdata[l.name] = l.value)
                        }
                        f.items[f.items.length] = i
                    }
                    if ("userdata" == a.childNodes[e].childNodes[h].tagName) {
                        i = {};
                        try {
                            i.name = a.childNodes[e].childNodes[h].getAttribute("name")
                        } catch (a) {
                            i.name = ""
                        }
                        try {
                            i.value = a.childNodes[e].childNodes[h].firstChild.nodeValue
                        } catch (a) {
                            i.value = ""
                        }
                        f.userdata[f.userdata.length] = i
                    }
                }
                c._addItemToStorage(f)
            }
            "dhx_terrace" == c.skin && c._improveTerraceSkin(), c.callEvent("onXLE", []), c._doOnLoad(), this.destructor()
    }, this._addItemToStorage = function(a, b) {
        var c = a.id || this._genStr(24),
            d = a.type || "";
        if ("" != d && null != this["_" + d + "Object"] && ("undefined" != typeof a.openAll && null != a.openAll || "dhx_terrace" != this.skin || (a.openAll = !0), this.objPull[this.idPrefix + c] = new this["_" + d + "Object"](this, c, a), this.objPull[this.idPrefix + c].type = d, this.setPosition(c, b)), a.userdata)
            for (var e = 0; e < a.userdata.length; e++) this.setUserData(c, a.userdata[e].name, a.userdata[e].value)
    }, this._genStr = function(a) {
        for (var b = "", c = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789", d = 0; d < a; d++) b += c.charAt(Math.round(Math.random() * (c.length - 1)));
        return b
    }, this.rootTypes = "button,buttonSelect,buttonTwoState,separator,label,slider,text,buttonInput".split(","), this.idPrefix = this._genStr(12), dhtmlxEventable(this), this._getObj = function(a, b) {
        for (var c = null, d = 0; d < a.childNodes.length; d++) null != a.childNodes[d].tagName && String(a.childNodes[d].tagName).toLowerCase() == String(b).toLowerCase() && (c = a.childNodes[d]);
        return c
    }, this._addImgObj = function(a) {
        var b = document.createElement("IMG");
        return a.childNodes.length > 0 ? a.insertBefore(b, a.childNodes[0]) : a.appendChild(b), b
    }, this._setItemImage = function(a, b, c) {
        if (1 == c ? a.imgEn = b : a.imgDis = b, !(!a.state && 1 == c || a.state && 0 == c)) {
            var d = this._getObj(a.obj, "img");
            null == d && (d = this._addImgObj(a.obj)), d.src = this.imagePath + b
        }
    }, this._clearItemImage = function(a, b) {
        if (1 == b ? a.imgEn = "" : a.imgDis = "", !(!a.state && 1 == b || a.state && 0 == b)) {
            var c = this._getObj(a.obj, "img");
            null != c && c.parentNode.removeChild(c)
        }
    }, this._setItemText = function(a, b) {
        var c = this._getObj(a.obj, "div");
        null == b || 0 == b.length ? null != c && c.parentNode.removeChild(c) : (null == c && (c = document.createElement("DIV"), a.obj.appendChild(c)), c.innerHTML = b)
    }, this._getItemText = function(a) {
        var b = this._getObj(a.obj, "div");
        return null != b ? b.innerHTML : ""
    }, this._enableItem = function(a) {
        if (!a.state) {
            a.state = !0, "buttonTwoState" == this.objPull[a.id].type && 1 == this.objPull[a.id].obj.pressed ? (a.obj.className = "dhx_toolbar_btn pres", a.obj.renderAs = "dhx_toolbar_btn over") : (a.obj.className = "dhx_toolbar_btn def", a.obj.renderAs = a.obj.className), a.arw && (a.arw.className = String(a.obj.className).replace("btn", "arw"));
            var b = this._getObj(a.obj, "img");
            "" != a.imgEn ? (null == b && (b = this._addImgObj(a.obj)), b.src = this.imagePath + a.imgEn) : null != b && b.parentNode.removeChild(b)
        }
    }, this._disableItem = function(a) {
        if (a.state) {
            a.state = !1, a.obj.className = "dhx_toolbar_btn " + ("buttonTwoState" == this.objPull[a.id].type && a.obj.pressed ? "pres_" : "") + "dis", a.obj.renderAs = "dhx_toolbar_btn def", a.arw && (a.arw.className = String(a.obj.className).replace("btn", "arw"));
            var b = this._getObj(a.obj, "img");
            "" != a.imgDis ? (null == b && (b = this._addImgObj(a.obj)), b.src = this.imagePath + a.imgDis) : null != b && b.parentNode.removeChild(b), null != a.polygon && "none" != a.polygon.style.display && (a.polygon.style.display = "none", a.polygon._ie6cover && (a.polygon._ie6cover.style.display = "none"), "dhx_terrace" == this.skin && this._improveTerraceButtonSelect(a.id, !0)), this.anyUsed = "none"
        }
    }, this.clearAll = function() {
        for (var a in this.objPull) this._removeItem(String(a).replace(this.idPrefix, ""))
    }, this._isWebToolbar = !0, this._doOnClick = function() {
        c && c.forEachItem && c.forEachItem(function(a) {
            if ("buttonSelect" == c.objPull[c.idPrefix + a].type) {
                var b = c.objPull[c.idPrefix + a];
                b.arw._skip === !0 ? b.arw._skip = !1 : "none" != b.polygon.style.display && (b.obj.renderAs = "dhx_toolbar_btn def", b.obj.className = b.obj.renderAs, b.arw.className = String(b.obj.renderAs).replace("btn", "arw"), c.anyUsed = "none", b.polygon.style.display = "none", b.polygon._ie6cover && (b.polygon._ie6cover.style.display = "none"), "dhx_terrace" == c.skin && c._improveTerraceButtonSelect(b.id, !0))
            }
        })
    }, this._isIPad ? document.addEventListener("touchstart", this._doOnClick, !1) : "undefined" != typeof window.addEventListener ? window.addEventListener("mousedown", this._doOnClick, !1) : document.body.attachEvent("onmousedown", this._doOnClick), this
}

function xmlPointer(a) {
    this.d = a
}

function dhtmlXTreeObject(a, b, c, d) {
    if (_isIE) try {
        document.execCommand("BackgroundImageCache", !1, !0)
    } catch (a) {}
    this.parentObject = "object" != typeof a ? document.getElementById(a) : a, this.parentObject.style.overflow = "hidden", this._itim_dg = !0, this.dlmtr = ",", this.dropLower = !1, this.enableIEImageFix(), this.xmlstate = 0, this.mytype = "tree", this.smcheck = !0, this.width = b, this.height = c, this.rootId = d, this.childCalc = null, this.def_line_img_y = this.def_line_img_x = this.def_img_y = this.def_img_x = "18px", this._dragged = [], this._selected = [], this.style_pointer = "pointer", this._aimgs = !0, this.htmlcA = " [", this.htmlcB = "]", this.lWin = window, this.mlitems = this.cMenu = 0, this.iconURL = "", this.dadmode = 0, this.slowParse = !1, this.autoScroll = !0, this.hfMode = 0, this.nodeCut = [], this.XMLloadingWarning = this.XMLsource = 0, this._idpull = {}, this._pullSize = 0, this.treeLinesOn = !0, this.tscheck = !1, this.timgen = !0, this.dpcpy = !1, this._ld_id = null, this._oie_onXLE = [], this.imPath = window.dhx_globalImgPath || "", this.checkArray = "iconUncheckAll.gif,iconCheckAll.gif,iconCheckGray.gif,iconUncheckDis.gif,iconCheckDis.gif,iconCheckDis.gif".split(","), this.radioArray = "radio_off.gif,radio_on.gif,radio_on.gif,radio_off.gif,radio_on.gif,radio_on.gif".split(","), this.lineArray = "line2.gif,line3.gif,line4.gif,blank.gif,blank.gif,line1.gif".split(","), this.minusArray = ["minus2.gif", "minus3.gif", "minus4.gif", "minus.gif", "minus5.gif"], this.plusArray = ["plus2.gif", "plus3.gif", "plus4.gif", "plus.gif", "plus5.gif"], this.imageArray = ["leaf.gif", "folderOpen.gif", "folderClosed.gif"], this.cutImg = [0, 0, 0], this.cutImage = "but_cut.gif", dhtmlxEventable(this), this.dragger = new dhtmlDragAndDropObject, this.htmlNode = new dhtmlXTreeItemObject(this.rootId, "", 0, this), this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display = "none", this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className = "hiddenRow", this.allTree = this._createSelf(), this.allTree.appendChild(this.htmlNode.htmlNode), dhtmlx.$customScroll && dhtmlx.CustomScroll.enable(this), _isFF && (this.allTree.childNodes[0].width = "100%", this.allTree.childNodes[0].style.overflow = "hidden");
    var e = this;
    return this.allTree.onselectstart = new Function("return false;"), _isMacOS && (this.allTree.oncontextmenu = function(a) {
        return e._doContClick(a || window.event, !0)
    }), this.allTree.onmousedown = function(a) {
        return e._doContClick(a || window.event)
    }, this.XMLLoader = new dtmlXMLLoaderObject(this._parseXMLTree, this, !0, this.no_cashe), _isIE && this.preventIECashing(!0), this.selectionBar = document.createElement("DIV"), this.selectionBar.className = "selectionBar", this.selectionBar.innerHTML = "&nbsp;", this.selectionBar.style.display = "none", this.allTree.appendChild(this.selectionBar), window.addEventListener && window.addEventListener("unload", function() {
        try {
            e.destructor()
        } catch (a) {}
    }, !1), window.attachEvent && window.attachEvent("onunload", function() {
        try {
            e.destructor()
        } catch (a) {}
    }), this.setImagesPath = this.setImagePath, this.setIconsPath = this.setIconPath, dhtmlx.image_path && this.setImagePath(dhtmlx.image_path), dhtmlx.skin && this.setSkin(dhtmlx.skin), this
}

function cObject() {
    return this
}

function dhtmlXTreeItemObject(a, b, c, d, e, f) {
    return this.scolor = this.acolor = this.htmlNode = "", this.span = this.dragMove = this.dragSpan = this.tempDOMU = this.tempDOMM = this.childsCount = this.tr = 0, this.closeble = 1, this.childNodes = [], this.userData = new cObject, this.checkstate = 0, this.treeNod = d, this.label = b, this.parentObject = c, this.actionHandler = e, this.images = [d.imageArray[0], d.imageArray[1], d.imageArray[2]], this.id = d._globalIdStorageAdd(a, this), this.htmlNode = this.treeNod.checkBoxOff ? this.treeNod._createItem(1, this, f) : this.treeNod._createItem(0, this, f), this.htmlNode.objBelong = this, this
}

function dhx_dragSomethingInTree() {
    this.lWin = window, this._createDragNode = function(a) {
        var b = document.createElement("div");
        return b.style.position = "absolute", b.innerHTML = a.innerHTML || a.value, b.className = "dragSpanDiv", b
    }, this._preventNsDrag = function(a) {
        return (a || window.event).cancelBubble = !0, a && a.preventDefault && a.preventDefault(), !1
    }, this._nonTrivialNode = function(a, b, c, d) {
        if (this._customDrop) return this._customDrop(a, d.img.id, b.id, c ? c.id : null);
        var e = d.img.getAttribute("image") || "",
            f = d.img.id || "new",
            g = d.img.getAttribute("text") || (_isIE ? d.img.innerText : d.img.textContent);
        a[c ? "insertNewNext" : "insertNewItem"](c ? c.id : b.id, f, g, "", e, e, e)
    }
}

function jsonPointer(a, b) {
    this.d = a, this.dp = b
}

function dhtmlXTreeFromHTML(a) {
    "object" != typeof a && (a = document.getElementById(a));
    for (var b = a, c = b.id, d = "", e = 0; e < a.childNodes.length; e++)
        if ("1" == a.childNodes[e].nodeType) {
            if ("XMP" == a.childNodes[e].tagName)
                for (var f = a.childNodes[e], g = 0; g < f.childNodes.length; g++) d += f.childNodes[g].data;
            else "ul" == a.childNodes[e].tagName.toLowerCase() && (d = dhx_li2trees(a.childNodes[e], [], 0));
            break
        }
    a.innerHTML = "";
    var h = new dhtmlXTreeObject(a, "100%", "100%", 0),
        i = [];
    for (b in h) i[b.toLowerCase()] = b;
    for (var j = a.attributes, k = 0; k < j.length; k++)
        if (0 == j[k].name.indexOf("set") || 0 == j[k].name.indexOf("enable")) {
            var l = j[k].name;
            h[l] || (l = i[j[k].name]), h[l].apply(h, j[k].value.split(","))
        }
    if ("object" == typeof d) {
        h.XMLloadingWarning = 1;
        for (var m = 0; m < d.length; m++) b = h.insertNewItem(d[m][0], d[m][3], d[m][1]), d[m][2] && h._setCheck(b, d[m][2]);
        h.XMLloadingWarning = 0, h.lastLoadedXMLId = 0, h._redrawFrom(h)
    } else h.loadXMLString("<tree id='0'>" + d + "</tree>");
    window[c] = h;
    var n = a.getAttribute("oninit");
    return n && eval(n), h
}

function dhx_init_trees() {
    for (var a = document.getElementsByTagName("div"), b = 0; b < a.length; b++) "dhtmlxTree" == a[b].className && dhtmlXTreeFromHTML(a[b])
}

function dhx_li2trees(a, b, c) {
    for (var d = 0; d < a.childNodes.length; d++) {
        var e = a.childNodes[d];
        if (1 == e.nodeType && "li" == e.tagName.toLowerCase()) {
            for (var f = "", g = null, h = e.getAttribute("checked"), i = 0; i < e.childNodes.length; i++) {
                var j = e.childNodes[i];
                3 == j.nodeType ? f += j.data : "ul" != j.tagName.toLowerCase() ? f += dhx_outer_html(j) : g = j
            }
            b[b.length] = [c, f, h, e.id || b.length + 1], g && (b = dhx_li2trees(g, b, e.id || b.length))
        }
    }
    return b
}

function dhx_outer_html(a) {
    if (a.outerHTML) return a.outerHTML;
    var b = document.createElement("DIV");
    return b.appendChild(a.cloneNode(!0)), b = b.innerHTML
}

function setCookie(a, b) {
    document.cookie = a + "=" + b
}

function getCookie(a) {
    var b = a + "=";
    if (document.cookie.length > 0) {
        var c = document.cookie.indexOf(b);
        if (c != -1) {
            c += b.length;
            var d = document.cookie.indexOf(";", c);
            return d == -1 && (d = document.cookie.length), document.cookie.substring(c, d)
        }
    }
}

function dhtmlxHierarchy() {
    var a = {
        id: 0,
        childs: [],
        level: -1,
        parent: null,
        index: 0,
        state: dhtmlXGridObject._emptyLineImg
    };
    return this.order = [a], this.get = {
        0: a
    }, this.swap = function(a, b) {
        var c = a.parent,
            d = a.index;
        c.childs[d] = b, c.childs[b.index] = a, a.index = b.index, b.index = d
    }, this.forEachChildF = function(a, b, c, d) {
        for (var e = this.get[a], f = 0; f < e.childs.length; f++) b.apply(c || this, [e.childs[f]]) && (e.childs[f].childs.length && this.forEachChildF(e.childs[f].id, b, c, d), d && d.call(c || this, e.childs[f]))
    }, this.forEachChild = function(a, b, c) {
        for (var d = this.get[a], e = 0; e < d.childs.length; e++) b.apply(c || this, [d.childs[e]]), d.childs[e].childs.length && this.forEachChild(d.childs[e].id, b, c)
    }, this.change = function(a, b, c) {
        var d = this.get[a];
        d[b] != c && (d[b] = c, d.update = !0)
    }, this.add = function(a, b) {
        return this.addAfter(a, b)
    }, this.addAfter = function(a, b, c, d) {
        var e = this.get[b || 0],
            f = c ? this.get[c].index + (d ? 0 : 1) : e.childs.length,
            g = {
                id: a,
                childs: [],
                level: e.level + 1,
                parent: e,
                index: f,
                state: dhtmlXGridObject._emptyLineImg
            };
        if (e.state == dhtmlXGridObject._emptyLineImg && this.change(b, "state", 0 == b ? "minus" : "plus"), c) {
            for (var h = f; h < e.childs.length; h++) e.childs[h].index++;
            e.childs = e.childs.slice(0, f).concat([g]).concat(e.childs.slice(f, e.childs.length))
        } else e.childs.push(g);
        return this.get[a] = g
    }, this.addBefore = function(a, b, c) {
        return this.addAfter(a, b, c, !0)
    }, this.remove = function(a) {
        for (var b = this.get[a || 0], c = 0; c < b.childs.length; c++) this.deleteAll(b.childs[c].id);
        for (b.childs = [], b.parent.childs = b.parent.childs.slice(0, b.index).concat(b.parent.childs.slice(b.index + 1)), c = b.index; c < b.parent.childs.length; c++) b.parent.childs[c].index--;
        delete this.get[a]
    }, this.deleteAll = function(a) {
        for (var b = this.get[a || 0], c = 0; c < b.childs.length; c++) this.deleteAll(b.childs[c].id);
        b.childs = [], delete this.get[a]
    }, this
}

function eXcell_tree(a) {
    a && (this.cell = a, this.grid = this.cell.parentNode.grid), this.isDisabled = function() {
        return this.cell._disabled || this.grid._edtc
    }, this.edit = function() {
        this.er || this.grid._edtc || (this.er = this.cell.parentNode.valTag, this.val = this.getLabel(), this.cell.atag = !this.grid.multiLine && (_isKHTML || _isMacOS || _isFF) ? "INPUT" : "TEXTAREA", this.er.innerHTML = "<" + this.cell.atag + " class='dhx_combo_edit' type='text' style='height:" + (this.cell.offsetHeight - 6) + "px; width:100%; border:0px; margin:0px; padding:0px; padding-top:" + (_isFF ? 1 : 2) + "px; overflow:hidden;'></" + this.cell.atag + ">", this.er.childNodes[0].onmousedown = function(a) {
            (a || event).cancelBubble = !0
        }, this.er.childNodes[0].onselectstart = function(a) {
            return a || (a = event), a.cancelBubble = !0
        }, _isFF && (this.er.style.top = "1px"), this.er.className += " editable", this.er.firstChild.onclick = function(a) {
            (a || event).cancelBubble = !0
        }, this.er.firstChild.value = this.val, this.obj = this.er.firstChild, this.er.firstChild.style.width = Math.max(0, this.cell.offsetWidth - this.er.offsetLeft) + "px", this.er.firstChild.focus(), _isIE && this.er.firstChild.focus())
    }, this.detach = function() {
        if (this.er) {
            this.setLabel(this.er.firstChild.value), this.er.className = this.er.className.replace("editable", "");
            var a = this.val != this.er.innerHTML;
            return _isFF && (this.er.style.top = "2px"), this.obj = this.er = null, a
        }
    }, this.getValue = function() {
        return this.getLabel()
    }, this.setImage = function(a) {
        this.cell.parentNode.imgTag.nextSibling.src = this.grid.iconURL + a, this.grid._h2.get[this.cell.parentNode.idd].image = a
    }, this.getImage = function() {
        return this.grid._h2.get[this.cell.parentNode.idd].image
    }, this.setLabel = function(a) {
        this.setValueA(a)
    }, this.getLabel = function() {
        return this.cell.parentNode.valTag.innerHTML
    }
}

function dhtmlXWindowsSngl() {}

function dhtmlXWindowsBtn() {}

function dhtmlXWindows() {
    if (window.dhtmlXContainer) {
        this.engine = "dhx";
        var a = "_" + this.engine + "_Engine";
        if (this[a]) {
            this[a](), this._isIPad = navigator.userAgent.search(/iPad/gi) >= 0;
            var b = this;
            this.pathPrefix = "dhxwins_", this.imagePath = dhtmlx.image_path || "codebase/imgs/", this.setImagePath = function(a) {
                this.imagePath = a
            }, this.skin = "undefined" != typeof dhtmlx && "string" == typeof dhtmlx.skin ? dhtmlx.skin : "dhx_skyblue", this.skinParams = {
                dhx_black: {
                    header_height: 21,
                    border_left_width: 2,
                    border_right_width: 2,
                    border_bottom_height: 2
                },
                dhx_blue: {
                    header_height: 21,
                    border_left_width: 2,
                    border_right_width: 2,
                    border_bottom_height: 2
                },
                dhx_skyblue: {
                    header_height: 21,
                    border_left_width: 2,
                    border_right_width: 2,
                    border_bottom_height: 2
                }
            }, this.setSkin = function(a) {
                this.skin = a, this._engineRedrawSkin()
            }, this.isWindow = function(a) {
                var b = null != this.wins[a];
                return b
            }, this.findByText = function(a) {
                var b, c = [];
                for (b in this.wins) this.wins[b].getText().search(a, "gi") >= 0 && (c[c.length] = this.wins[b]);
                return c
            }, this.window = function(a) {
                var b = null;
                return null != this.wins[a] && (b = this.wins[a]), b
            }, this.forEachWindow = function(a) {
                for (var b in this.wins) a(this.wins[b])
            }, this.getBottommostWindow = function() {
                var a, b = this.getTopmostWindow();
                for (a in this.wins) this.wins[a].zi < b.zi && (b = this.wins[a]);
                return 0 != b.zi ? b : null
            }, this.getTopmostWindow = function(a) {
                var b, c = {
                    zi: 0
                };
                for (b in this.wins) this.wins[b].zi > c.zi && (1 == a && !this._isWindowHidden(this.wins[b]) && (c = this.wins[b]), 1 != a && (c = this.wins[b]));
                return 0 != c.zi ? c : null
            }, this.wins = {};
            for (var c in this.wins) delete this.wins[c];
            return this.autoViewport = !0, this._createViewport = function() {
                this.vp = document.body, this._clearVPCss(), this.vp._css = String(this.vp.className).length > 0 ? this.vp.className : "", this.vp.className += " dhtmlx_skin_" + this.skin + (this._r ? " dhx_wins_rtl" : ""), this.modalCoverI = document.createElement("IFRAME"), this.modalCoverI.frameBorder = "0", this.modalCoverI.className = "dhx_modal_cover_ifr", this.modalCoverI.setAttribute("src", "javascript:false;"), this.modalCoverI.style.display = "none", this.modalCoverI.style.zIndex = 0, this.vp.appendChild(this.modalCoverI), this.modalCoverD = document.createElement("DIV"), this.modalCoverD.className = "dhx_modal_cover_dv", this.modalCoverD.style.display = "none", this.modalCoverD.style.zIndex = 0, this.vp.appendChild(this.modalCoverD), this._vpcover = document.createElement("DIV"), this._vpcover.className = "dhx_content_vp_cover", this._vpcover.style.display = "none", this.vp.appendChild(this._vpcover), this._carcass = document.createElement("DIV"), this._carcass.className = "dhx_carcass_resmove", this._carcass.style.display = "none", _isIE && (this._carcass.innerHTML = "<iframe border=0 frameborder=0 style='filter: alpha(opacity=0); width: 100%; height:100%; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; z-index:1;'></iframe><div style='position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;z-index:2;background:white;filter:alpha(opacity=0);opacity:0;'></div>", navigator.userAgent.indexOf("MSIE 10") >= 0 || this._carcass.childNodes[0].setAttribute("src", "javascript:false;")), this._carcass.onselectstart = function(a) {
                    a = a || event, a.returnValue = !1
                }, this.vp.appendChild(this._carcass)
            }, this._clearVPCss = function() {
                this.vp.className = String(this.vp.className).replace(/[a-z_]{1,}/gi, function(a) {
                    return 1 == {
                        dhtmlx_skin_dhx_skyblue: 1,
                        dhtmlx_skin_dhx_blue: 1,
                        dhtmlx_skin_dhx_black: 1,
                        dhtmlx_skin_dhx_web: 1,
                        dhtmlx_skin_dhx_terrace: 1
                    }[a] ? "" : a
                })
            }, this._autoResizeViewport = function() {
                for (var a in this.wins) this.wins[a]._isFullScreened && (this.wins[a].adjustContent(document.body, 0, 0, !1, 0), this.wins[a].updateNestedObjects()), this.wins[a]._isMaximized && "none" != this.wins[a].style.display && (this._restoreWindow(a), this._maximizeWindow(a));
                if (this.vp != document.body && 0 != this.autoViewport)
                    for (a in this.vp.style.width = (_isIE ? document.body.offsetWidth - 4 : window.innerWidth) + "px", this.vp.style.height = (_isIE ? document.body.offsetHeight - 4 : window.innerHeight) + "px", this.wins) {
                        var b = this.wins[a],
                            c = !1,
                            d = !1;
                        b.x > this.vp.offsetWidth - 10 && (b.x = this.vp.offsetWidth - 10, c = !0);
                        var e = null != b._skinParams ? b._skinParams : this.skinParams[this.skin];
                        b.y + e.header_height > this.vp.offsetHeight && (b.y = this.vp.offsetHeight - e.header_height, d = !0), (c || d) && this._engineRedrawWindowPos(b)
                    }
            }, this.enableAutoViewport = function(a) {
                this.vp == document.body && (this.autoViewport = a, 0 == a) && (this.vp == document.body && (document.body.className = this.vp._css), this.vp.removeChild(this.modalCoverI), this.vp.removeChild(this.modalCoverD), this.vp.removeChild(this._vpcover), this.vp.removeChild(this._carcass), this.vp = null, this.vp = document.createElement("DIV"), this.vp.autocreated = !0, this.vp.className = "dhtmlx_winviewport dhtmlx_skin_" + this.skin + (this._r ? " dhx_wins_rtl" : ""), this.vp.style.left = "0px", this.vp.style.top = "0px", document.body.appendChild(this.vp), this.vp.ax = 0, this.vp.ay = 0, this._autoResizeViewport(), this.vp.appendChild(this.modalCoverI), this.vp.appendChild(this.modalCoverD), this.vp.appendChild(this._vpcover), this.vp.appendChild(this._carcass))
            }, this.attachViewportTo = function(a) {
                0 == this.autoViewport && (this.vp.removeChild(this.modalCoverI), this.vp.removeChild(this.modalCoverD), this.vp.removeChild(this._vpcover), this.vp.removeChild(this._carcass), this.vp != document.body && this.vp.parentNode.removeChild(this.vp), this.vp = null, this.vp = "string" == typeof a ? document.getElementById(a) : a, this.vp.autocreated = !1, this._clearVPCss(), this.vp.className += " dhtmlx_skin_" + this.skin + (this._r ? " dhx_wins_rtl" : ""), this.vp.style.position = "relative", this.vp.style.overflow = "hidden", this.vp.ax = 0, this.vp.ay = 0, this.vp.appendChild(this.modalCoverI), this.vp.appendChild(this.modalCoverD), this.vp.appendChild(this._vpcover), this.vp.appendChild(this._carcass))
            }, this.setViewport = function(a, b, c, d, e) {
                0 == this.autoViewport && (this.vp.style.left = a + "px", this.vp.style.top = b + "px", this.vp.style.width = c + "px", this.vp.style.height = d + "px", null != e && e.appendChild(this.vp), this.vp.ax = getAbsoluteLeft(this.vp), this.vp.ay = getAbsoluteTop(this.vp))
            }, this._effects = {
                move: !1,
                resize: !1
            }, this.setEffect = function(a, b) {
                null != this._effects[a] && "boolean" == typeof b && (this._effects[a] = b)
            }, this.getEffect = function(a) {
                return this._effects[a]
            }, this.createWindow = function(a, c, d, e, f) {
                var g = document.createElement("DIV");
                g.className = "dhtmlx_window_inactive", g.dir = "ltr";
                for (var h in this.wins) this.wins[h].zi += this.zIndexStep, this.wins[h].style.zIndex = this.wins[h].zi, this.iframeMode && this.wins[h].ifr && (this.wins[h].ifr.style.zIndex = this.wins[h].style.zIndex - 1);
                return g.zi = this.zIndexStep, g.style.zIndex = g.zi, g.active = !1, g._isWindow = !0, g.isWindow = !0, g.w = Number(e), g.h = Number(f), g.x = c, g.y = d, this._engineFixWindowPosInViewport(g), g._isModal = !1, g._allowResize = !0, g.maxW = "auto", g.maxH = "auto", g.minW = 200, g.minH = 140, g.iconsPresent = !0, g.icons = [this.imagePath + this.pathPrefix + this.skin + "/active/icon_normal.gif", this.imagePath + this.pathPrefix + this.skin + "/inactive/icon_normal.gif"], g._allowMove = !0, g._allowMoveGlobal = !0, g._allowResizeGlobal = !0, g._keepInViewport = !1, this.skinParams[this.skin], g.idd = a, this.vp.appendChild(g), this._engineSetWindowBody(g), this._engineRedrawWindowPos(g), this._engineRedrawWindowSize(g), this._engineUpdateWindowIcon(g, g.icons[0]), this._engineDiableOnSelectInWindow(g, !0), this.wins[a] = g, dhtmlxEventable(g), this._engineGetWindowHeader(g)[this._isIPad ? "ontouchstart" : "onmousedown"] = function(a) {
                    var a = a || event,
                        c = b.wins[this.idd];
                    if (c.isOnTop() || c.bringToTop(), !b._engineGetWindowHeaderState(c) && b._engineCheckHeaderMouseDown(c, a) && c._allowMove && c._allowMoveGlobal) return b._wasMoved = !1, c.moveOffsetX = c.x - (b._isIPad ? a.touches[0].clientX : a.clientX), c.moveOffsetY = c.y - (b._isIPad ? a.touches[0].clientY : a.clientY), b.movingWin = c, 0 == b._effects.move && (b._carcass.x = b.movingWin.x, b._carcass.y = b.movingWin.y, b._carcass.w = parseInt(b.movingWin.style.width) + (_isIE ? 0 : -2), b._carcass.h = parseInt(b.movingWin.style.height) + (_isIE ? 0 : -2), b._carcass.style.left = b._carcass.x + "px", b._carcass.style.top = b._carcass.y + "px", b._carcass.style.width = b._carcass.w + "px", b._carcass.style.height = b._carcass.h + "px", b._carcass.style.zIndex = b._getTopZIndex(!0) + 1, b._carcass._keepInViewport = g._keepInViewport), b._blockSwitcher(!0), b._vpcover.style.zIndex = b.movingWin.style.zIndex - 1, b._vpcover.style.display = "", a.returnValue = !1, a.cancelBubble = !0, !1
                }, this._engineGetWindowHeader(g).ondblclick = function(a) {
                    var c = b.wins[this.idd];
                    b._engineCheckHeaderMouseDown(c, a || event) && (c._allowResizeGlobal && !c._isParked && (1 == c._isMaximized ? b._restoreWindow(c.idd) : b._maximizeWindow(c.idd)), c = null)
                }, g.setText = function(a) {
                    b._engineGetWindowLabel(this).innerHTML = a
                }, g.getText = function() {
                    return b._engineGetWindowLabel(this).innerHTML
                }, g.getId = function() {
                    return this.idd
                }, g.show = function() {
                    b._showWindow(this)
                }, g.hide = function() {
                    b._hideWindow(this)
                }, g.minimize = function() {
                    b._restoreWindow(this.idd)
                }, g.maximize = function() {
                    b._maximizeWindow(this.idd)
                }, g.close = function() {
                    b._closeWindow(this.idd)
                }, g.park = function() {
                    this._isParkedAllowed && b._parkWindow(this.idd)
                }, g.stick = function() {
                    b._stickWindow(this.idd)
                }, g.unstick = function() {
                    b._unstickWindow(this.idd)
                }, g.isSticked = function() {
                    return this._isSticked
                }, g.setIcon = function(a, c) {
                    b._setWindowIcon(g, a, c)
                }, g.getIcon = function() {
                    return b._getWindowIcon(this)
                }, g.clearIcon = function() {
                    b._clearWindowIcons(this)
                }, g.restoreIcon = function() {
                    b._restoreWindowIcons(this)
                }, g.keepInViewport = function(a) {
                    this._keepInViewport = a
                }, g.setModal = function(a) {
                    1 == a ? null != b.modalWin || b.modalWin == this || b._setWindowModal(this, !0) : b.modalWin == this && b._setWindowModal(this, !1)
                }, g.isModal = function() {
                    return this._isModal
                }, g.isHidden = function() {
                    return b._isWindowHidden(this)
                }, g.isMaximized = function() {
                    return this._isMaximized
                }, g.isParked = function() {
                    return this._isParked
                }, g.allowPark = function() {
                    b._allowParking(this)
                }, g.denyPark = function() {
                    b._denyParking(this)
                }, g.isParkable = function() {
                    return this._isParkedAllowed
                }, g.allowResize = function() {
                    b._allowReszieGlob(this)
                }, g.denyResize = function() {
                    b._denyResize(this)
                }, g.isResizable = function() {
                    return this._allowResizeGlobal
                }, g.allowMove = function() {
                    this._isMaximized || (this._allowMove = !0), this._allowMoveGlobal = !0
                }, g.denyMove = function() {
                    this._allowMoveGlobal = !1
                }, g.isMovable = function() {
                    return this._allowMoveGlobal
                }, g.bringToTop = function() {
                    b._bringOnTop(this), b._makeActive(this)
                }, g.bringToBottom = function() {
                    b._bringOnBottom(this)
                }, g.isOnTop = function() {
                    return b._isWindowOnTop(this)
                }, g.isOnBottom = function() {
                    return b._isWindowOnBottom(this)
                }, g.setPosition = function(a, c) {
                    this.x = a, this.y = c, b._engineFixWindowPosInViewport(this), b._engineRedrawWindowPos(this)
                }, g.getPosition = function() {
                    return [this.x, this.y]
                }, g.setDimension = function(a, c) {
                    null != a && ("auto" != this.maxW && a > this.maxW && (a = this.maxW), a < this.minW && (a = this.minW), this.w = a), null != c && ("auto" != this.maxH && c > this.maxH && (c = this.maxH), c < this.minH && (c = this.minH), this.h = c), b._fixWindowDimensionInViewport(this), b._engineFixWindowPosInViewport(this), b._engineRedrawWindowSize(this), this.updateNestedObjects()
                }, g.getDimension = function() {
                    return [this.w, this.h]
                }, g.setMaxDimension = function(a, c) {
                    this.maxW = isNaN(a) ? "auto" : a, this.maxH = isNaN(c) ? "auto" : c, b._engineRedrawWindowSize(this)
                }, g.getMaxDimension = function() {
                    return [this.maxW, this.maxH]
                }, g.setMinDimension = function(a, c) {
                    null != a && (this.minW = a), null != c && (this.minH = c), b._fixWindowDimensionInViewport(this), b._engineRedrawWindowPos(this)
                }, g.getMinDimension = function() {
                    return [this.minW, this.minH]
                }, g._adjustToContent = function(a, c) {
                    b._engineAdjustWindowToContent(this, a, c)
                }, g._doOnAttachMenu = function() {
                    b._engineRedrawWindowSize(this), this.updateNestedObjects()
                }, g._doOnAttachToolbar = function() {
                    b._engineRedrawWindowSize(this), this.updateNestedObjects()
                }, g._doOnAttachStatusBar = function() {
                    b._engineRedrawWindowSize(this), this.updateNestedObjects()
                }, g._doOnFrameMouseDown = function() {
                    this.bringToTop()
                }, g._doOnFrameContentLoaded = function() {
                    b.callEvent("onContentLoaded", [this])
                }, g.addUserButton = function(a, c, d, e) {
                    var f = b._addUserButton(this, a, c, d, e);
                    return f
                }, g.removeUserButton = function(a) {
                    a = String(a).toLowerCase(), "minmax1" == a || "minmax2" == a || "park" == a || "close" == a || "stick" == a || "unstick" == a || "help" == a || null != btn && b._removeUserButton(this, a)
                }, g.progressOn = function() {
                    b._engineSwitchWindowProgress(this, !0)
                }, g.progressOff = function() {
                    b._engineSwitchWindowProgress(this, !1)
                }, g.setToFullScreen = function(a) {
                    b._setWindowToFullScreen(this, a)
                }, g.showHeader = function() {
                    b._engineSwitchWindowHeader(this, !0)
                }, g.hideHeader = function() {
                    b._engineSwitchWindowHeader(this, !1)
                }, g.progressOff(), g.canStartResize = !1, g.onmousemove = function(a) {
                    if (_isIE && this._isMaximized) return !0;
                    var a = a || event,
                        c = a.target || a.srcElement;
                    if (String(c.className).search("dhtmlx_wins_resizer") < 0 && (c = null), !this._allowResize || 0 == this._allowResizeGlobal || !c) return c && "default" != c.style.cursor && (c.style.cursor = "default"), "default" != this.style.cursor && (this.style.cursor = "default"), this.canStartResize = !1, !0;
                    if (null == b.resizingWin && null == b.movingWin && !this._isParked) {
                        if (b._isIPad) var d = a.touches[0].clientX,
                            e = a.touches[0].clientY;
                        else d = _isIE || _isOpera ? a.offsetX : a.layerX, e = _isIE || _isOpera ? a.offsetY : a.layerY;
                        var f = b._engineAllowWindowResize(g, c, d, e);
                        if (null != f) {
                            b.resizingDirs = f;
                            var h = {
                                x: a.clientX,
                                y: a.clientY
                            };
                            switch (b.resizingDirs) {
                                case "border_left":
                                    c.style.cursor = "w-resize", this.resizeOffsetX = this.x - h.x;
                                    break;
                                case "border_right":
                                    c.style.cursor = "e-resize", this.resizeOffsetXW = this.x + this.w - h.x;
                                    break;
                                case "border_top":
                                    c.style.cursor = "n-resize", this.resizeOffsetY = this.y - h.y;
                                    break;
                                case "border_bottom":
                                    c.style.cursor = "n-resize", this.resizeOffsetYH = this.y + this.h - h.y;
                                    break;
                                case "corner_left":
                                    c.style.cursor = "sw-resize", this.resizeOffsetX = this.x - a.clientX, this.resizeOffsetYH = this.y + this.h - h.y;
                                    break;
                                case "corner_up_left":
                                    c.style.cursor = "nw-resize", this.resizeOffsetY = this.y - h.y, this.resizeOffsetX = this.x - h.x;
                                    break;
                                case "corner_right":
                                    c.style.cursor = "nw-resize", this.resizeOffsetXW = this.x + this.w - h.x, this.resizeOffsetYH = this.y + this.h - h.y;
                                    break;
                                case "corner_up_right":
                                    c.style.cursor = "sw-resize", this.resizeOffsetY = this.y - h.y, this.resizeOffsetXW = this.x + this.w - h.x
                            }
                            return this.canStartResize = !0, this.style.cursor = c.style.cursor, a.cancelBubble = !0, a.returnValue = !1
                        }
                        this.canStartResize = !1, "default" != c.style.cursor && (c.style.cursor = "default"),
                            "default" != this.style.cursor && (this.style.cursor = "default")
                    }
                }, g.onmousedown = function(a) {
                    b._getActive() != this && b._makeActive(this), b._bringOnTop(this), this.canStartResize && (b._blockSwitcher(!0), b.resizingWin = this, b._effects.resize || (b._carcass.x = b.resizingWin.x, b._carcass.y = b.resizingWin.y, b._carcass.w = Number(b.resizingWin.w) + (_isIE ? 0 : -2), b._carcass.h = Number(b.resizingWin.h) + (_isIE ? 0 : -2), b._carcass.style.left = b._carcass.x + "px", b._carcass.style.top = b._carcass.y + "px", b._carcass.style.width = b._carcass.w + "px", b._carcass.style.height = b._carcass.h + "px", b._carcass.style.zIndex = b._getTopZIndex(!0) + 1, b._carcass.style.cursor = this.style.cursor, b._carcass._keepInViewport = this._keepInViewport, b._carcass.style.display = ""), b._vpcover.style.zIndex = b.resizingWin.style.zIndex - 1, b._vpcover.style.display = "", this.vs[this.av].layout && this.callEvent("_onBeforeTryResize", [this]), a = a || event)
                }, this._addDefaultButtons(g.idd), g.button = function(a) {
                    var a = String(a).toLowerCase(),
                        b = null;
                    return null != this.btns[a] && (b = this.btns[a]), b
                }, g.center = function() {
                    b._centerWindow(this, !1)
                }, g.centerOnScreen = function() {
                    b._centerWindow(this, !0)
                }, g._attachContent("empty", null), g._redraw = function() {
                    b._engineRedrawWindowSize(this)
                }, g.bringToTop(), this._engineRedrawWindowSize(g), this.wins[a]
            }, this.zIndexStep = 50, this._getTopZIndex = function(a) {
                var b, c = 0;
                for (b in this.wins) 1 == a ? this.wins[b].zi > c && (c = this.wins[b].zi) : this.wins[b].zi > c && !this.wins[b]._isSticked && (c = this.wins[b].zi);
                return c
            }, this.movingWin = null, this._moveWindow = function(a) {
                if (null != this.movingWin) {
                    if (!this.movingWin._allowMove || !this.movingWin._allowMoveGlobal) return;
                    1 == this._effects.move ? ("move" != this._engineGetWindowHeader(this.movingWin).style.cursor && (this._engineGetWindowHeader(this.movingWin).style.cursor = "move"), this._wasMoved = !0, this.movingWin.x = (this._isIPad ? a.touches[0].clientX : a.clientX) + this.movingWin.moveOffsetX, this.movingWin.y = (this._isIPad ? a.touches[0].clientY : a.clientY) + this.movingWin.moveOffsetY, this._engineFixWindowPosInViewport(this.movingWin), this._engineRedrawWindowPos(this.movingWin)) : ("" != this._carcass.style.display && (this._carcass.style.display = ""), "move" != this._carcass.style.cursor && (this._carcass.style.cursor = "move"), "move" != this._engineGetWindowHeader(this.movingWin).style.cursor && (this._engineGetWindowHeader(this.movingWin).style.cursor = "move"), this._carcass.x = (this._isIPad ? a.touches[0].clientX : a.clientX) + this.movingWin.moveOffsetX, this._carcass.y = (this._isIPad ? a.touches[0].clientY : a.clientY) + this.movingWin.moveOffsetY, this._wasMoved = !0, this._engineFixWindowPosInViewport(this._carcass), this._carcass.style.left = this._carcass.x + "px", this._carcass.style.top = this._carcass.y + "px")
                }
                if (null != this.resizingWin && this.resizingWin._allowResize) {
                    var b = {
                        x: a.clientX,
                        y: a.clientY
                    };
                    if ("border_left" == this.resizingDirs || "corner_left" == this.resizingDirs || "corner_up_left" == this.resizingDirs)
                        if (this._effects.resize) {
                            var c = b.x + this.resizingWin.resizeOffsetX,
                                d = c > this.resizingWin.x ? -1 : 1;
                            newW = this.resizingWin.w + Math.abs(c - this.resizingWin.x) * d, newW < this.resizingWin.minW && d < 0 ? (this.resizingWin.x = this.resizingWin.x + this.resizingWin.w - this.resizingWin.minW, this.resizingWin.w = this.resizingWin.minW) : (this.resizingWin.w = newW, this.resizingWin.x = c), this._engineRedrawWindowPos(this.resizingWin), this._engineRedrawWindowSize(this.resizingWin)
                        } else c = b.x + this.resizingWin.resizeOffsetX, d = c > this._carcass.x ? -1 : 1, newW = this._carcass.w + Math.abs(c - this._carcass.x) * d, newW > this.resizingWin.maxW && (newW = this.resizingWin.maxW, c = this._carcass.x + this._carcass.w - this.resizingWin.maxW), newW < this.resizingWin.minW && d < 0 ? (this._carcass.x = this._carcass.x + this._carcass.w - this.resizingWin.minW, this._carcass.w = this.resizingWin.minW) : (this._carcass.w = newW, this._carcass.x = c), this._carcass.style.left = this._carcass.x + "px", this._carcass.style.width = this._carcass.w + "px";
                        "border_right" != this.resizingDirs && "corner_right" != this.resizingDirs && "corner_up_right" != this.resizingDirs || (this._effects.resize ? (c = b.x - (this.resizingWin.x + this.resizingWin.w) + this.resizingWin.resizeOffsetXW, newW = this.resizingWin.w + c, newW < this.resizingWin.minW && (newW = this.resizingWin.minW), this.resizingWin.w = newW, this._engineRedrawWindowPos(this.resizingWin), this._engineRedrawWindowSize(this.resizingWin)) : (c = b.x - (this._carcass.x + this._carcass.w) + this.resizingWin.resizeOffsetXW, newW = this._carcass.w + c, newW < this.resizingWin.minW && (newW = this.resizingWin.minW), "auto" != this.resizingWin.maxW && newW > this.resizingWin.maxW && (newW = this.resizingWin.maxW), this._carcass.w = newW, this._carcass.style.width = this._carcass.w + "px")), "border_bottom" != this.resizingDirs && "corner_left" != this.resizingDirs && "corner_right" != this.resizingDirs || (this._effects.resize ? (c = b.y - (this.resizingWin.y + this.resizingWin.h) + this.resizingWin.resizeOffsetYH, newH = this.resizingWin.h + c, newH < this.resizingWin.minH && (newH = this.resizingWin.minH), this.resizingWin.h = newH, this._engineRedrawWindowPos(this.resizingWin), this._engineRedrawWindowSize(this.resizingWin)) : (c = b.y - (this._carcass.y + this._carcass.h) + this.resizingWin.resizeOffsetYH, newH = this._carcass.h + c, newH < this.resizingWin.minH && (newH = this.resizingWin.minH), newH > this.resizingWin.maxH && (newH = this.resizingWin.maxH), this._carcass.h = newH, this._carcass.style.height = this._carcass.h + "px")), "border_top" != this.resizingDirs && "corner_up_right" != this.resizingDirs && "corner_up_left" != this.resizingDirs || this._effects.resize || (c = b.y + this.resizingWin.resizeOffsetY, d = c > this.resizingWin.y ? -1 : 1, newH = this.resizingWin.h + Math.abs(c - this.resizingWin.y) * d, newH > this.resizingWin.maxH && (newH = this.resizingWin.maxH, c = this.resizingWin.y + this.resizingWin.h - this.resizingWin.maxH), newH < this.resizingWin.minH && d < 0 ? (this._carcass.y = this._carcass.y + this._carcass.h - this.resizingWin.minH, this._carcass.h = this.resizingWin.minH) : (this._carcass.h = newH + (_isIE ? 0 : -2), this._carcass.y = c), this._carcass.style.top = this._carcass.y + "px", this._carcass.style.height = this._carcass.h + "px")
                }
            }, this._stopMove = function() {
                if (null != this.movingWin) {
                    if (this._effects.move) {
                        var a = this.movingWin;
                        this.movingWin = null, this._blockSwitcher(!1), this._engineGetWindowHeader(a).style.cursor = "", _isFF && (a.h++, b._engineRedrawWindowPos(a), a.h--, b._engineRedrawWindowPos(a))
                    } else this._carcass.style.cursor = "", this._carcass.style.display = "none", a = this.movingWin, this._engineGetWindowHeader(a).style.cursor = "", this.movingWin = null, this._blockSwitcher(!1), a.setPosition(parseInt(this._carcass.style.left), parseInt(this._carcass.style.top));
                    this._vpcover.style.display = "none", this._wasMoved && (a.checkEvent("onMoveFinish") ? a.callEvent("onMoveFinish", [a]) : this.callEvent("onMoveFinish", [a])), this._wasMoved = !1
                }
                null != this.resizingWin && (a = this.resizingWin, this.resizingWin = null, this._blockSwitcher(!1), this._effects.resize ? a.updateNestedObjects() : (this._carcass.style.display = "none", a.setDimension(this._carcass.w + (_isIE ? 0 : 2), this._carcass.h + (_isIE ? 0 : 2)), a.setPosition(this._carcass.x, this._carcass.y)), a.vs[a.av].layout && a.vs[a.av].layout.callEvent("onResize", []), this._vpcover.style.display = "none", a.checkEvent("onResizeFinish") ? a.callEvent("onResizeFinish", [a]) : this.callEvent("onResizeFinish", [a]))
            }, this._fixWindowDimensionInViewport = function(a) {
                a.w < a.minW && (a.w = a.minW), !a._isParked && a.h < a.minH && (a.h = a.minH)
            }, this._bringOnTop = function(a) {
                var b, c = a.zi,
                    d = this._getTopZIndex(a._isSticked);
                for (b in this.wins) this.wins[b] != a && (a._isSticked || !a._isSticked && !this.wins[b]._isSticked) && this.wins[b].zi > c && (this.wins[b].zi -= this.zIndexStep, this.wins[b].style.zIndex = this.wins[b].zi, this.iframeMode && this.wins[b].ifr && (this.wins[b].ifr.style.zIndex = this.wins[b].style.zIndex - 1));
                a.zi = d, a.style.zIndex = a.zi, this.iframeMode && a.ifr && (a.ifr.style.zIndex = d - 1)
            }, this._makeActive = function(a, b) {
                for (var c in this.wins)
                    if (this.wins[c] == a) {
                        var d = !1;
                        "dhtmlx_window_active" != this.wins[c].className && !b && (d = !0), this.wins[c].className = "dhtmlx_window_active", this._engineUpdateWindowIcon(this.wins[c], this.wins[c].icons[0]), 1 == d && (a.checkEvent("onFocus") ? a.callEvent("onFocus", [a]) : this.callEvent("onFocus", [a]))
                    } else this.wins[c].className = "dhtmlx_window_inactive", this._engineUpdateWindowIcon(this.wins[c], this.wins[c].icons[1])
            }, this._getActive = function() {
                var a, b = null;
                for (a in this.wins) "dhtmlx_window_active" == this.wins[a].className && (b = this.wins[a]);
                return b
            }, this._centerWindow = function(a, b) {
                if (1 != a._isMaximized) {
                    if (1 == b) var c = _isIE ? document.body.offsetWidth : window.innerWidth,
                        d = _isIE ? document.body.offsetHeight : window.innerHeight;
                    else c = this.vp == document.body ? document.body.offsetWidth : Number(parseInt(this.vp.style.width)) && String(this.vp.style.width).search("%") == -1 ? parseInt(this.vp.style.width) : this.vp.offsetWidth, d = this.vp == document.body ? document.body.offsetHeight : Number(parseInt(this.vp.style.height)) && String(this.vp.style.height).search("%") == -1 ? parseInt(this.vp.style.height) : this.vp.offsetHeight;
                    var e = Math.round(c / 2 - a.w / 2),
                        f = Math.round(d / 2 - a.h / 2);
                    a.x = e, a.y = f, this._engineFixWindowPosInViewport(a), this._engineRedrawWindowPos(a)
                }
            }, this._addDefaultButtons = function(a) {
                var c = this.wins[a],
                    d = this._engineGetWindowButton(c, "stick");
                d.title = this.i18n.stick, d.isVisible = !1, d.style.display = "none", d._isEnabled = !0, d.isPressed = !1, d.label = "stick", d._doOnClick = function() {
                    this.isPressed = !0, b._stickWindow(this.winId)
                };
                var e = this._engineGetWindowButton(c, "sticked");
                e.title = this.i18n.unstick, e.isVisible = !1, e.style.display = "none", e._isEnabled = !0, e.isPressed = !1, e.label = "sticked", e._doOnClick = function() {
                    this.isPressed = !1, b._unstickWindow(this.winId)
                };
                var f = this._engineGetWindowButton(c, "help");
                f.title = this.i18n.help, f.isVisible = !1, f.style.display = "none", f._isEnabled = !0, f.isPressed = !1, f.label = "help", f._doOnClick = function() {
                    b._needHelp(this.winId)
                };
                var g = this._engineGetWindowButton(c, "park");
                g.titleIfParked = this.i18n.parkdown, g.titleIfNotParked = this.i18n.parkup, g.title = g.titleIfNotParked, g.isVisible = !0, g._isEnabled = !0, g.isPressed = !1, g.label = "park", g._doOnClick = function() {
                    b._parkWindow(this.winId)
                };
                var h = this._engineGetWindowButton(c, "minmax1");
                h.title = this.i18n.maximize, h.isVisible = !0, h._isEnabled = !0, h.isPressed = !1, h.label = "minmax1", h._doOnClick = function() {
                    b._maximizeWindow(this.winId)
                };
                var i = this._engineGetWindowButton(c, "minmax2");
                i.title = this.i18n.restore, i.isVisible = !1, i.style.display = "none", i._isEnabled = !0, i.isPressed = !1, i.label = "minmax2", i._doOnClick = function() {
                    b._restoreWindow(this.winId)
                };
                var j = this._engineGetWindowButton(c, "close");
                j.title = this.i18n.close, j.isVisible = !0, j._isEnabled = !0, j.isPressed = !1, j.label = "close", j._doOnClick = function() {
                    b._closeWindow(this.winId)
                };
                var k = this._engineGetWindowButton(c, "dock");
                k.title = this.i18n.dock, k.style.display = "none", k.isVisible = !1, k._isEnabled = !0, k.isPressed = !1, k.label = "dock", k._doOnClick = function() {}, c._isSticked = !1, c._isParked = !1, c._isParkedAllowed = !0, c._isMaximized = !1, c._isDocked = !1, c.btns = {}, c.btns.stick = d, c.btns.sticked = e, c.btns.help = f, c.btns.park = g, c.btns.minmax1 = h, c.btns.minmax2 = i, c.btns.close = j, c.btns.dock = k;
                for (var l in c.btns) c.btns[l].winId = c.idd, this._attachEventsOnButton(c.idd, l);
                c = d = e = f = g = h = i = j = k = null
            }, this._attachEventsOnButton = function(a, c) {
                var d = this.wins[a].btns[c];
                this._isIPad ? (d.ontouchstart = function(a) {
                    return a.cancelBubble = !0, a.returnValue = !1
                }, d.ontouchend = function(a) {
                    return a.cancelBubble = !0, a.returnValue = !1, !!this._isEnabled && (this.checkEvent("onClick") ? this.callEvent("onClick", [b.wins[this.winId], this]) : this._doOnClick(), !1)
                }) : (d.onmouseover = function() {
                    this.className = this._isEnabled ? "dhtmlx_wins_btns_button dhtmlx_button_" + this.label + "_over_" + (this.isPressed ? "pressed" : "default") : "dhtmlx_wins_btns_button dhtmlx_button_" + this.label + "_disabled"
                }, d.onmouseout = function() {
                    this._isEnabled ? (this.isPressed = !1, this.className = "dhtmlx_wins_btns_button dhtmlx_button_" + this.label + "_default") : this.className = "dhtmlx_wins_btns_button dhtmlx_button_" + this.label + "_disabled"
                }, d.onmousedown = function() {
                    this._isEnabled ? (this.isPressed = !0, this.className = "dhtmlx_wins_btns_button dhtmlx_button_" + this.label + "_over_pressed") : this.className = "dhtmlx_wins_btns_button dhtmlx_button_" + this.label + "_disabled"
                }, d.onmouseup = function() {
                    if (this._isEnabled) {
                        var a = this.isPressed;
                        this.isPressed = !1, this.className = "dhtmlx_wins_btns_button dhtmlx_button_" + this.label + "_over_default", a && (this.checkEvent("onClick") ? this.callEvent("onClick", [b.wins[this.winId], this]) : this._doOnClick())
                    } else this.className = "dhtmlx_wins_btns_button dhtmlx_button_" + this.label + "_disabled"
                }), d.show = function() {
                    b._showButton(b.wins[this.winId], this.label, !0)
                }, d.hide = function() {
                    b._hideButton(b.wins[this.winId], this.label, !0)
                }, d.enable = function() {
                    b._enableButton(b.wins[this.winId], this.label)
                }, d.disable = function() {
                    b._disableButton(b.wins[this.winId], this.label)
                }, d.isEnabled = function() {
                    return this._isEnabled
                }, d.isHidden = function() {
                    return !this.isVisible
                }, dhtmlxEventable(d), d = null
            }, this._parkWindow = function(a, b) {
                var c = this.wins[a];
                if ((c._isParkedAllowed || b) && (!this.enableParkEffect || !c.parkBusy)) {
                    if (c._isParked) this.enableParkEffect && !b ? (c.parkBusy = !0, this._doParkDown(c)) : (c.h = c.lastParkH, this._engineRedrawWindowSize(c), this._engineDoOnWindowParkDown(c), c.updateNestedObjects(), c.btns.park.title = c.btns.park.titleIfNotParked, 1 == c._allowResizeGlobal && (this._enableButton(c, "minmax1"), this._enableButton(c, "minmax2")), c._isParked = !1, b || (c.checkEvent("onParkDown") ? c.callEvent("onParkDown", [c]) : this.callEvent("onParkDown", [c])));
                    else if (this.enableParkEffect && !b)
                        if (c.lastParkH = String(c.h).search(/\%$/) == -1 ? c.h : c.offsetHeight, 1 == c._allowResizeGlobal && (this._disableButton(c, "minmax1"), this._disableButton(c, "minmax2")), this.enableParkEffect) c.parkBusy = !0, this._doParkUp(c);
                        else {
                            var d = null != c._skinParams ? c._skinParams : this.skinParams[this.skin];
                            c.h = d.header_height + d.border_bottom_height, c.btns.park.title = c.btns.park.titleIfParked
                        }
                    else c.lastParkH = String(c.h).search(/\%$/) == -1 ? c.h : c.offsetHeight, c.h = this._engineGetWindowParkedHeight(c), this._engineRedrawWindowSize(c), this._engineDoOnWindowParkUp(c), c.btns.park.title = c.btns.park.titleIfParked, c._isParked = !0, b || (c.checkEvent("onParkUp") ? c.callEvent("onParkUp", [c]) : this.callEvent("onParkUp", [c]));
                    c = null
                }
            }, this._allowParking = function(a) {
                a._isParkedAllowed = !0, this._enableButton(a, "park")
            }, this._denyParking = function(a) {
                a._isParkedAllowed = !1, this._disableButton(a, "park")
            }, this.enableParkEffect = !1, this.parkSpeed = this.parkStartSpeed = 80, this.parkTM = null, this.parkTMTime = 5, this._doParkUp = function(a) {
                String(a.h).search(/\%$/) != -1 && (a.h = a.offsetHeight), a.h -= this.parkSpeed;
                var c = this._engineGetWindowParkedHeight(a);
                a.h <= c ? (a.h = c, this._engineGetWindowButton(a, "park").title = this._engineGetWindowButton(a, "park").titleIfParked, a._isParked = !0, a.parkBusy = !1, this._engineRedrawWindowSize(a), this._engineDoOnWindowParkUp(a), a.checkEvent("onParkUp") ? a.callEvent("onParkUp", [a]) : this.callEvent("onParkUp", [a])) : (this._engineRedrawWindowSize(a), this.parkTM = window.setTimeout(function() {
                    b._doParkUp(a)
                }, this.parkTMTime))
            }, this._doParkDown = function(a) {
                a.h += this.parkSpeed, a.h >= a.lastParkH ? (a.h = a.lastParkH, this._engineGetWindowButton(a, "park").title = this._engineGetWindowButton(a, "park").titleIfNotParked, 1 == a._allowResizeGlobal && (this._enableButton(a, "minmax1"), this._enableButton(a, "minmax2")), a._isParked = !1, a.parkBusy = !1, this._engineRedrawWindowSize(a), a.updateNestedObjects(), this._engineDoOnWindowParkDown(a), a.checkEvent("onParkDown") ? a.callEvent("onParkDown", [a]) : this.callEvent("onParkDown", [a])) : (this._engineRedrawWindowSize(a), this.parkTM = window.setTimeout(function() {
                    b._doParkDown(a)
                }, this.parkTMTime))
            }, this._enableButton = function(a, b) {
                var c = this._engineGetWindowButton(a, b);
                c && (c._isEnabled = !0, c.className = "dhtmlx_wins_btns_button dhtmlx_button_" + c.label + "_default", c = null)
            }, this._disableButton = function(a, b) {
                var c = this._engineGetWindowButton(a, b);
                c && (c._isEnabled = !1, c.className = "dhtmlx_wins_btns_button dhtmlx_button_" + a.btns[b].label + "_disabled", c = null)
            }, this._allowReszieGlob = function(a) {
                a._allowResizeGlobal = !0, this._enableButton(a, "minmax1"), this._enableButton(a, "minmax2")
            }, this._denyResize = function(a) {
                a._allowResizeGlobal = !1, this._disableButton(a, "minmax1"), this._disableButton(a, "minmax2")
            }, this._maximizeWindow = function(a) {
                var b = this.wins[a];
                if (0 != b._allowResizeGlobal) {
                    var c = b._isParked;
                    c && this._parkWindow(b.idd, !0), b.lastMaximizeX = b.x, b.lastMaximizeY = b.y, b.lastMaximizeW = b.w, b.lastMaximizeH = b.h, "auto" != b.maxW && "auto" != b.maxW ? (b.x = Math.round(b.x + (b.w - b.maxW) / 2), b.y = Math.round(b.y + (b.h - b.maxH) / 2), b._allowMove = !0) : (b.x = 0, b.y = 0, b._allowMove = !1), b._isMaximized = !0, b._allowResize = !1, b.w = "auto" == b.maxW ? this.vp == document.body ? "100%" : "" != this.vp.style.width && String(this.vp.style.width).search("%") == -1 ? parseInt(this.vp.style.width) : this.vp.offsetWidth : b.maxW, b.h = "auto" == b.maxH ? this.vp == document.body ? "100%" : "" != this.vp.style.height && String(this.vp.style.width).search("%") == -1 ? parseInt(this.vp.style.height) : this.vp.offsetHeight : b.maxH, this._hideButton(b, "minmax1"), this._showButton(b, "minmax2"), this._engineRedrawWindowPos(b), c ? this._parkWindow(b.idd, !0) : (this._engineRedrawWindowSize(b), b.updateNestedObjects()), b.checkEvent("onMaximize") ? b.callEvent("onMaximize", [b]) : this.callEvent("onMaximize", [b]), b = null
                }
            }, this._restoreWindow = function(a) {
                var b = this.wins[a];
                if (0 != b._allowResizeGlobal) {
                    b.layout && b.layout._defineWindowMinDimension(b);
                    var c = b._isParked;
                    c && this._parkWindow(b.idd, !0), "auto" != b.maxW && "auto" != b.maxW ? (b.x = Math.round(b.x + (b.w - b.lastMaximizeW) / 2), b.y = Math.round(b.y + (b.h - b.lastMaximizeH) / 2)) : (b.x = b.lastMaximizeX, b.y = b.lastMaximizeY), b.w = b.lastMaximizeW, b.h = b.lastMaximizeH, b._isMaximized = !1, b._allowMove = b._allowMoveGlobal, b._allowResize = !0, this._fixWindowDimensionInViewport(b), this._hideButton(b, "minmax2"), this._showButton(b, "minmax1"), this._engineRedrawWindowPos(b), c ? this._parkWindow(b.idd, !0) : (this._engineRedrawWindowSize(b), b.updateNestedObjects()), b.checkEvent("onMinimize") ? b.callEvent("onMinimize", [b]) : this.callEvent("onMinimize", [b]), b = null
                }
            }, this._showButton = function(a, b, c) {
                var d = this._engineGetWindowButton(a, b);
                !d || !c && d._userHide || d.isVisible === !0 || (d.isVisible = !0, d.style.display = "", d.style.visibility = "visible", d._userHide = 1 != c, this._engineRedrawWindowTitle(a), d = null)
            }, this._hideButton = function(a, b, c) {
                var d = this._engineGetWindowButton(a, b);
                d && (c || d.isVisible !== !1) && (d.isVisible = !1, d.style.display = "none", d.style.visibility = "hidden", d._userHide = 1 == c, this._engineRedrawWindowTitle(a), d = null)
            }, this._showWindow = function(a) {
                a.style.display = "", a.checkEvent("onShow") ? a.callEvent("onShow", [a]) : this.callEvent("onShow", [a]);
                var b = this._getActive();
                null == b ? (this._bringOnTop(a), this._makeActive(a)) : this._isWindowHidden(b) && (this._bringOnTop(a), this._makeActive(a)), this.iframeMode && a.ifr && (a.ifr.style.display = "")
            }, this._hideWindow = function(a) {
                a.style.display = "none", a.checkEvent("onHide") ? a.callEvent("onHide", [a]) : this.callEvent("onHide", [a]);
                var b = this.getTopmostWindow(!0);
                null != b && (this._bringOnTop(b), this._makeActive(b)), this.iframeMode && a.ifr && (a.ifr.style.display = "none")
            }, this._isWindowHidden = function(a) {
                var b = "none" == a.style.display;
                return b
            }, this._closeWindow = function(a) {
                var b = this.wins[a];
                if (this._focusFixIE && (this._focusFixIE.style.top = (this.vp == document.body ? 0 : getAbsoluteTop(this.vp)) + Number(b.y) + "px", this._focusFixIE.focus()), b.checkEvent("onClose")) {
                    if (!b.callEvent("onClose", [b])) return
                } else if (!this.callEvent("onClose", [b])) return;
                b = null, this._removeWindowGlobal(a);
                var c, d = {
                    zi: 0
                };
                for (c in this.wins) this.wins[c].zi > d.zi && (d = this.wins[c]);
                null != d && this._makeActive(d)
            }, this._needHelp = function(a) {
                var b = this.wins[a];
                b.checkEvent("onHelp") ? b.callEvent("onHelp", [b]) : this.callEvent("onHelp", [b]), b = null
            }, this._setWindowIcon = function(a, b, c) {
                a.iconsPresent = !0, a.icons[0] = this.imagePath + b, a.icons[1] = this.imagePath + c, this._engineUpdateWindowIcon(a, a.icons[a.isOnTop() ? 0 : 1])
            }, this._getWindowIcon = function(a) {
                return a.iconsPresent ? [a.icons[0], a.icons[1]] : [null, null]
            }, this._clearWindowIcons = function(a) {
                a.iconsPresent = !1, a.icons[0] = this.imagePath + this.pathPrefix + this.skin + "/active/icon_blank.gif", a.icons[1] = this.imagePath + this.pathPrefix + this.skin + "/inactive/icon_blank.gif", this._engineUpdateWindowIcon(a, a.icons[a.isOnTop() ? 0 : 1])
            }, this._restoreWindowIcons = function(a) {
                a.iconsPresent = !0, a.icons[0] = this.imagePath + this.pathPrefix + this.skin + "/active/icon_normal.gif", a.icons[1] = this.imagePath + this.pathPrefix + this.skin + "/inactive/icon_normal.gif", this._engineUpdateWindowIcon(a, a.icons["dhtmlx_window_active" == a.className ? 0 : 1])
            }, this._attachWindowContentTo = function(a, b, c, d) {
                var e = this._engineGetWindowContent(a).parentNode;
                e.parentNode.removeChild(e), a.hide(), e.style.left = "0px", e.style.top = "0px", e.style.width = (null != c ? c : b.offsetWidth) + "px", e.style.height = (null != d ? d : b.offsetHeight) + "px", e.style.position = "relative", b.appendChild(e), this._engineGetWindowContent(a).style.width = e.style.width, this._engineGetWindowContent(a).style.height = e.style.height
            }, this._setWindowToFullScreen = function(a, b) {
                1 != b || a._isFullScreened || (a._p1 = a.vs[a.av].dhxcont.nextSibling, a._p1.parentNode.removeChild(a.vs[a.av].dhxcont), a.hide(), a._isFullScreened = !0, a._FSoffsetHeight = a._offsetHeight, a._FSoffsetHeightSaved = a._offsetHeightSaved, a._FSoffsetLeft = a._offsetLeft, a._FSoffsetWidth = a._offsetWidth, a._offsetHeight = 0, a._offsetHeightSaved = 0, a._offsetLeft = 0, a._offsetWidth = 0, a.vs[a.av].dhxcont.style.position = "absolute", document.body.appendChild(a.vs[a.av].dhxcont), a.adjustContent(document.body, 0, 0, !1, 0), a.updateNestedObjects()), 0 == b && a._isFullScreened && (a._p1.parentNode.insertBefore(a.vs[a.av].dhxcont, a._p1), a._p1 = null, a._isFullScreened = !1, a._offsetHeight = a._FSoffsetHeight, a._offsetHeightSaved = a._FSoffsetHeightSaved, a._offsetLeft = a._FSoffsetLeft, a._offsetWidth = a._FSoffsetWidth, a._FSoffsetHeight = a._FSoffsetHeightSaved = a._FSoffsetLeft = a._FSoffsetWidth = null, a.show(), a.setDimension(a.w, a.h), a.bringToTop())
            }, this._isWindowOnTop = function(a) {
                var b = this.getTopmostWindow() == a;
                return b
            }, this._bringOnBottom = function(a) {
                for (var b in this.wins) this.wins[b].zi < a.zi && (this.wins[b].zi += this.zIndexStep, this.wins[b].style.zIndex = this.wins[b].zi);
                a.zi = 50, a.style.zIndex = a.zi, this._makeActive(this.getTopmostWindow())
            }, this._isWindowOnBottom = function(a) {
                var b, c = !0;
                for (b in this.wins) this.wins[b] != a && (c = c && this.wins[b].zi > a.zi);
                return c
            }, this._stickWindow = function(a) {
                var b = this.wins[a];
                b._isSticked = !0, this._hideButton(b, "stick"), this._showButton(b, "sticked"), this._bringOnTop(b), b = null
            }, this._unstickWindow = function(a) {
                var b = this.wins[a];
                b._isSticked = !1, this._hideButton(b, "sticked"), this._showButton(b, "stick"), this._bringOnTopAnyStickedWindows(), b = null
            }, this._addUserButton = function(a, b, c, d) {
                var b = String(b).toLowerCase(),
                    e = this._engineAddUserButton(a, b, c);
                e.title = d, e.isVisible = !0, e._isEnabled = !0, e.isPressed = !1, e.label = b, a.btns[b] = e, a.btns[b].winId = a.idd, a.btns[b]._doOnClick = function() {}, this._attachEventsOnButton(a.idd, b), e = null
            }, this._removeUserButton = function(a, b) {
                this._removeButtonGlobal(a, b)
            }, this._blockSwitcher = function(a) {
                for (var b in this.wins) 1 == a ? this.wins[b].showCoverBlocker() : this.wins[b].hideCoverBlocker()
            }, this.modalWin = this.resizingWin = null, this.resizingDirs = "none", _isIE && (this._focusFixIE = document.createElement("INPUT"), this._focusFixIE.className = "dhx_windows_ieonclosefocusfix", this._focusFixIE.style.position = "absolute", this._focusFixIE.style.width = "1px", this._focusFixIE.style.height = "1px", this._focusFixIE.style.border = "none", this._focusFixIE.style.background = "none", this._focusFixIE.style.left = "-10px", this._focusFixIE.style.fontSize = "1px", document.body.appendChild(this._focusFixIE)), this._createViewport(), this._doOnMouseUp = function() {
                null != b && b._stopMove()
            }, this._doOnMoseMove = function(a) {
                a = a || event, null != b && b._moveWindow(a)
            }, this._resizeTM = null, this._resizeTMTime = 200, this._lw = null, this._doOnResize = function() {
                b._lw != document.documentElement.clientHeight && (window.clearTimeout(b._resizeTM), b._resizeTM = window.setTimeout(function() {
                    b._autoResizeViewport()
                }, b._resizeTMTime)), b._lw = document.documentElement.clientHeight
            }, this._doOnUnload = function() {
                b.unload()
            }, this._doOnSelectStart = function(a) {
                a = a || event, null == b.movingWin && null == b.resizingWin || (a.returnValue = !1)
            }, _isIE && ("undefined" != typeof window.addEventListener ? document.body.addEventListener("selectstart", this._doOnSelectStart, !1) : document.body.attachEvent("onselectstart", this._doOnSelectStart)), dhtmlxEvent(window, "resize", this._doOnResize), dhtmlxEvent(document.body, "unload", this._doOnUnload), this._isIPad ? (document.addEventListener("touchmove", this._doOnMoseMove, !1), document.addEventListener("touchend", this._doOnMouseUp, !1)) : (dhtmlxEvent(document.body, "mouseup", this._doOnMouseUp), dhtmlxEvent(this.vp, "mousemove", this._doOnMoseMove), dhtmlxEvent(this.vp, "mouseup", this._doOnMouseUp)), this._setWindowModal = function(a, b) {
                1 == b ? (this._makeActive(a), this._bringOnTop(a), this.modalWin = a, a._isModal = !0, this.modalCoverI.style.zIndex = a.zi - 2, this.modalCoverI.style.display = "", this.modalCoverD.style.zIndex = a.zi - 2, this.modalCoverD.style.display = "") : (this.modalWin = null, a._isModal = !1, this.modalCoverI.style.zIndex = 0, this.modalCoverI.style.display = "none", this.modalCoverD.style.zIndex = 0, this.modalCoverD.style.display = "none")
            }, this._bringOnTopAnyStickedWindows = function() {
                var a, b = [];
                for (a in this.wins) this.wins[a]._isSticked && (b[b.length] = this.wins[a]);
                for (var c = 0; c < b.length; c++) this._bringOnTop(b[c]);
                if (0 == b.length)
                    for (a in this.wins) "dhtmlx_window_active" == this.wins[a].className && this._bringOnTop(this.wins[a])
            }, this.unload = function() {
                this._clearAll()
            }, this._removeButtonGlobal = function(a, b) {
                if (this.wins[a] && this.wins[a].btns[b]) {
                    var c = this.wins[a].btns[b];
                    c.title = null, c.isVisible = null, c._isEnabled = null, c.isPressed = null, c.label = null, c._doOnClick = null, c.detachAllEvents(), c.attachEvent = null, c.callEvent = null, c.checkEvent = null, c.detachEvent = null, c.detachAllEvents = null, c.disable = null, c.enable = null, c.eventCatcher = null, c.hide = null, c.isEnabled = null, c.isHidden = null, c.show = null, c.onmousedown = null, c.onmouseout = null, c.onmouseover = null, c.onmouseup = null, c.ontouchstart = null, c.ontouchend = null, c.parentNode && c.parentNode.removeChild(c), c = null, this.wins[a].btns[b] = null, delete this.wins[a].btns[b]
                }
            }, this._removeWindowGlobal = function(a) {
                var b = this.wins[a];
                this.modalWin == b && this._setWindowModal(b, !1), this.iframeMode && b.ifr && (b.ifr.parentNode.removeChild(b.ifr), b.ifr = null);
                var c = b.coverBlocker(),
                    c = c.onselectstart = null;
                this._engineDiableOnSelectInWindow(b, !1), b._dhxContDestruct(), this._engineGetWindowHeader(b).onmousedown = null, this.resizingWin = this.movingWin = this._engineGetWindowHeader(b).ondblclick = null;
                for (var d in b.btns) this._removeButtonGlobal(b, d);
                if (b.btns = null, b.detachAllEvents(), b._adjustToContent = null, b._doOnAttachMenu = null, b._doOnAttachStatusBar = null, b._doOnAttachToolbar = null, b._doOnFrameMouseDown = null, b._doOnFrameContentLoaded = null, b._redraw = null, b.addUserButton = null, b.allowMove = null, b.allowPark = null, b.allowResize = null, b.attachEvent = null, b.bringToBottom = null, b.bringToTop = null, b.callEvent = null, b.center = null, b.centerOnScreen = null, b.checkEvent = null, b.clearIcon = null, b.close = null, b.denyMove = null, b.denyPark = null, b.denyResize = null, b.detachEvent = null, b.detachAllEvents = null, b.eventCatcher = null, b.getDimension = null, b.getIcon = null, b.getId = null, b.getMaxDimension = null, b.getMinDimension = null, b.getPosition = null, b.getText = null, b.hide = null, b.hideHeader = null, b.isHidden = null, b.isMaximized = null, b.isModal = null, b.isMovable = null, b.isOnBottom = null, b.isOnTop = null, b.isParkable = null, b.isParked = null, b.isResizable = null, b.isSticked = null, b.keepInViewport = null, b.maximize = null, b.minimize = null, b.park = null, b.progressOff = null, b.progressOn = null, b.removeUserButton = null, b.restoreIcon = null, b.setDimension = null, b.setIcon = null, b.setMaxDimension = null, b.setMinDimension = null, b.setModal = null, b.setPosition = null, b.setText = null, b.setToFullScreen = null, b.show = null, b.showHeader = null, b.stick = null, b.unstick = null, b.onmousemove = null, b.onmousedown = null, b.icons = null, b.button = null, b._dhxContDestruct = null, b.dhxContGlobal.obj = null, b.dhxContGlobal.setContent = null, b.dhxContGlobal.dhxcont = null, b.dhxContGlobal = null, b._frame) {
                    for (; b._frame.childNodes.length > 0;) b._frame.removeChild(b._frame.childNodes[0]);
                    b._frame = null
                }
                this._parseNestedForEvents(b), b._content = null, b.innerHTML = "", b.parentNode.removeChild(b), b = null, this.wins[a] = null, delete this.wins[a]
            }, this._removeEvents = function(a) {
                a.onmouseover = null, a.onmouseout = null, a.onmousemove = null, a.onclick = null, a.ondblclick = null, a.onmouseenter = null, a.onmouseleave = null, a.onmouseup = null, a.onmousewheel = null, a.onmousedown = null, a.onselectstart = null, a.onfocus = null, a.style.display = "", a = null
            }, this._parseNestedForEvents = function(a) {
                this._removeEvents(a);
                for (var b = 0; b < a.childNodes.length; b++) null != a.childNodes[b].tagName && this._parseNestedForEvents(a.childNodes[b]);
                a = null
            }, this._clearAll = function() {
                this._clearDocumentEvents();
                for (var a in this.wins) this._removeWindowGlobal(a);
                for (this.wins = null, this._parseNestedForEvents(this._carcass); this._carcass.childNodes.length > 0;) this._carcass.removeChild(this._carcass.childNodes[0]);
                this._carcass.onselectstart = null, this._carcass.parentNode.removeChild(this._carcass), this._carcass = null, this._parseNestedForEvents(this._vpcover), this._vpcover.parentNode.removeChild(this._vpcover), this._vpcover = null, this._parseNestedForEvents(this.modalCoverD), this.modalCoverD.parentNode.removeChild(this.modalCoverD), this.modalCoverD = null, this._parseNestedForEvents(this.modalCoverI), this.modalCoverI.parentNode.removeChild(this.modalCoverI), this.modalCoverI = null, 1 == this.vp.autocreated && this.vp.parentNode.removeChild(this.vp), this.vp = null;
                for (a in this.skinParams) delete this.skinParams[a];
                b = this.window = this.unload = this.setViewport = this.setSkin = this.setImagePath = this.setEffect = this.isWindow = this.getTopmostWindow = this.getEffect = this.getBottommostWindow = this.forEachWindow = this.findByText = this.eventCatcher = this.enableAutoViewport = this.detachEvent = this.createWindow = this.checkEvent = this.callEvent = this.attachViewportTo = this.attachEvent = this._unstickWindow = this._stopMove = this._stickWindow = this._showWindow = this._showButton = this._setWindowToFullScreen = this._setWindowModal = this._setWindowIcon = this._restoreWindowIcons = this._restoreWindow = this._removeWindowGlobal = this._removeUserButton = this._removeEvents = this._removeButtonGlobal = this._parseNestedForEvents = this._parkWindow = this._needHelp = this._moveWindow = this._maximizeWindow = this._makeActive = this._isWindowOnTop = this._isWindowOnBottom = this._isWindowHidden = this._hideWindow = this._hideButton = this._getWindowIcon = this._getTopZIndex = this._getActive = this._genStr = this._fixWindowDimensionInViewport = this._engineUpdateWindowIcon = this._engineSwitchWindowProgress = this._engineSwitchWindowHeader = this._engineSetWindowBody = this._engineRedrawWindowTitle = this._engineRedrawWindowSize = this._engineRedrawWindowPos = this._engineRedrawSkin = this._engineGetWindowParkedHeight = this._engineGetWindowLabel = this._engineGetWindowHeaderState = this._engineGetWindowHeader = this._engineGetWindowContent = this._engineGetWindowButton = this._engineFixWindowPosInViewport = this._engineDoOnWindowParkUp = this._engineDoOnWindowParkDown = this._engineDiableOnSelectInWindow = this._engineCheckHeaderMouseDown = this._engineAllowWindowResize = this._engineAdjustWindowToContent = this._engineAddUserButton = this._enableButton = this._doParkUp = this._doParkDown = this._doOnUnload = this._doOnSelectStart = this._doOnResize = this._doOnMouseUp = this._doOnMoseMove = this._disableButton = this._dhx_Engine = this._denyResize = this._denyParking = this._createViewport = this._closeWindow = this._clearWindowIcons = this._clearDocumentEvents = this._clearAll = this._centerWindow = this._bringOnTopAnyStickedWindows = this._bringOnTop = this._bringOnBottom = this._blockSwitcher = this._autoResizeViewport = this._attachWindowContentTo = this._attachEventsOnButton = this._allowReszieGlob = this._allowParking = this._addUserButton = this._addDefaultButtons = this._engineSkinParams = this._effects = this.skinParams = null
            }, this._clearDocumentEvents = function() {
                "function" == typeof window.addEventListener ? (window.removeEventListener("resize", this._doOnResize, !1), document.body.removeEventListener("mouseup", this._doOnMouseUp, !1), document.body.removeEventListener("unload", this._doOnUnload, !1), this.vp.removeEventListener("mousemove", this._doOnMoseMove, !1), this.vp.removeEventListener("mouseup", this._doOnMouseUp, !1)) : (window.detachEvent("onresize", this._doOnResize),
                    document.body.detachEvent("onselectstart", this._doOnSelectStart), document.body.detachEvent("onmouseup", this._doOnMouseUp), document.body.detachEvent("onunload", this._doOnUnload), this.vp.detachEvent("onmousemove", this._doOnMoseMove), this.vp.detachEvent("onmouseup", this._doOnMouseUp))
            }, this._genStr = function(a) {
                for (var b = "", c = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789", d = 0; d < a; d++) b += c.charAt(Math.round(Math.random() * (c.length - 1)));
                return b
            }, dhtmlxEventable(this), this
        }
        alert(this.i18n.noenginealert)
    } else alert(this.i18n.dhx)
}
dhtmlx = function(a) {
        for (var b in a) dhtmlx[b] = a[b];
        return dhtmlx
    }, dhtmlx.extend_api = function(a, b, c) {
        var d = window[a];
        d && (window[a] = function(a) {
            if (a && "object" == typeof a && !a.tagName) {
                var c, e = d.apply(this, b._init ? b._init(a) : arguments);
                for (c in dhtmlx) b[c] && this[b[c]](dhtmlx[c]);
                for (c in a) b[c] ? this[b[c]](a[c]) : 0 == c.indexOf("on") && this.attachEvent(c, a[c])
            } else e = d.apply(this, arguments);
            return b._patch && b._patch(this), e || this
        }, window[a].prototype = d.prototype, c && dhtmlXHeir(window[a].prototype, c))
    }, dhtmlxAjax = {
        get: function(a, b) {
            var c = new dtmlXMLLoaderObject(!0);
            return c.async = arguments.length < 3, c.waitCall = b, c.loadXML(a), c
        },
        post: function(a, b, c) {
            var d = new dtmlXMLLoaderObject(!0);
            return d.async = arguments.length < 4, d.waitCall = c, d.loadXML(a, !0, b), d
        },
        getSync: function(a) {
            return this.get(a, null, !0)
        },
        postSync: function(a, b) {
            return this.post(a, b, null, !0)
        }
    }, dtmlXMLLoaderObject.count = 0, dtmlXMLLoaderObject.prototype.waitLoadFunction = function(a) {
        var b = !0;
        return this.check = function() {
            !a || null == a.onloadAction || a.xmlDoc.readyState && 4 != a.xmlDoc.readyState || !b || (b = !1, dtmlXMLLoaderObject.count++, "function" == typeof a.onloadAction && a.onloadAction(a.mainObject, null, null, null, a), a.waitCall && (a.waitCall.call(this, a), a.waitCall = null))
        }
    }, dtmlXMLLoaderObject.prototype.getXMLTopNode = function(a, b) {
        if (this.xmlDoc.responseXML) {
            var c = this.xmlDoc.responseXML.getElementsByTagName(a);
            0 == c.length && a.indexOf(":") != -1 && (c = this.xmlDoc.responseXML.getElementsByTagName(a.split(":")[1]));
            var d = c[0]
        } else d = this.xmlDoc.documentElement;
        return d ? (this._retry = !1, d) : !this._retry && _isIE ? (this._retry = !0, b = this.xmlDoc, this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/, ""), !0), this.getXMLTopNode(a, b)) : (dhtmlxError.throwError("LoadXML", "Incorrect XML", [b || this.xmlDoc, this.mainObject]), document.createElement("DIV"))
    }, dtmlXMLLoaderObject.prototype.loadXMLString = function(a, b) {
        if (_isIE) this.xmlDoc = new ActiveXObject("Microsoft.XMLDOM"), this.xmlDoc.async = this.async, this.xmlDoc.onreadystatechange = function() {}, this.xmlDoc.loadXML(a);
        else {
            var c = new DOMParser;
            this.xmlDoc = c.parseFromString(a, "text/xml")
        }
        b || (this.onloadAction && this.onloadAction(this.mainObject, null, null, null, this), this.waitCall && (this.waitCall(), this.waitCall = null))
    }, dtmlXMLLoaderObject.prototype.loadXML = function(a, b, c, d) {
        this.rSeed && (a += (a.indexOf("?") != -1 ? "&" : "?") + "a_dhx_rSeed=" + (new Date).valueOf()), this.filePath = a, this.xmlDoc = !_isIE && window.XMLHttpRequest ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP"), this.async && (this.xmlDoc.onreadystatechange = new this.waitLoadFunction(this)), this.xmlDoc.open(b ? "POST" : "GET", a, this.async), d ? (this.xmlDoc.setRequestHeader("User-Agent", "dhtmlxRPC v0.1 (" + navigator.userAgent + ")"), this.xmlDoc.setRequestHeader("Content-type", "text/xml")) : b && this.xmlDoc.setRequestHeader("Content-type", this.contenttype || "application/x-www-form-urlencoded"), this.xmlDoc.setRequestHeader("X-Requested-With", "XMLHttpRequest"), this.xmlDoc.send(c), this.async || new this.waitLoadFunction(this)()
    }, dtmlXMLLoaderObject.prototype.destructor = function() {
        return this.setXSLParamValue = this.getXMLTopNode = this.xmlNodeToJSON = this.doSerialization = this.loadXMLString = this.loadXML = this.doXSLTransToString = this.doXSLTransToObject = this.doXPathOpera = this.doXPath = this.xmlDoc = this.mainObject = this.onloadAction = this.filePath = this.rSeed = this.async = this._retry = this._getAllNamedChilds = this._filterXPath = null
    }, dtmlXMLLoaderObject.prototype.xmlNodeToJSON = function(a) {
        for (var b = {}, c = 0; c < a.attributes.length; c++) b[a.attributes[c].name] = a.attributes[c].value;
        for (b._tagvalue = a.firstChild ? a.firstChild.nodeValue : "", c = 0; c < a.childNodes.length; c++) {
            var d = a.childNodes[c].tagName;
            d && (b[d] || (b[d] = []), b[d].push(this.xmlNodeToJSON(a.childNodes[c])))
        }
        return b
    }, dhtmlDragAndDropObject.prototype.removeDraggableItem = function(a) {
        a.onmousedown = null, a.dragStarter = null, a.dragLanding = null
    }, dhtmlDragAndDropObject.prototype.addDraggableItem = function(a, b) {
        a.onmousedown = this.preCreateDragCopy, a.dragStarter = b, this.addDragLanding(a, b)
    }, dhtmlDragAndDropObject.prototype.addDragLanding = function(a, b) {
        a.dragLanding = b
    }, dhtmlDragAndDropObject.prototype.preCreateDragCopy = function(a) {
        if (!a && !window.event || 2 != (a || event).button) return window.dhtmlDragAndDrop.waitDrag ? (window.dhtmlDragAndDrop.waitDrag = 0, document.body.onmouseup = window.dhtmlDragAndDrop.tempDOMU, document.body.onmousemove = window.dhtmlDragAndDrop.tempDOMM, !1) : (window.dhtmlDragAndDrop.dragNode && window.dhtmlDragAndDrop.stopDrag(a), window.dhtmlDragAndDrop.waitDrag = 1, window.dhtmlDragAndDrop.tempDOMU = document.body.onmouseup, window.dhtmlDragAndDrop.tempDOMM = document.body.onmousemove, window.dhtmlDragAndDrop.dragStartNode = this, window.dhtmlDragAndDrop.dragStartObject = this.dragStarter, document.body.onmouseup = window.dhtmlDragAndDrop.preCreateDragCopy, document.body.onmousemove = window.dhtmlDragAndDrop.callDrag, window.dhtmlDragAndDrop.downtime = (new Date).valueOf(), a && a.preventDefault && a.preventDefault(), !1)
    }, dhtmlDragAndDropObject.prototype.callDrag = function(a) {
        if (a || (a = window.event), dragger = window.dhtmlDragAndDrop, !((new Date).valueOf() - dragger.downtime < 100)) {
            if (!dragger.dragNode) {
                if (!dragger.waitDrag) return dragger.stopDrag(a, !0);
                if (dragger.dragNode = dragger.dragStartObject._createDragNode(dragger.dragStartNode, a), !dragger.dragNode) return dragger.stopDrag();
                dragger.dragNode.onselectstart = function() {
                    return !1
                }, dragger.gldragNode = dragger.dragNode, document.body.appendChild(dragger.dragNode), document.body.onmouseup = dragger.stopDrag, dragger.waitDrag = 0, dragger.dragNode.pWindow = window, dragger.initFrameRoute()
            }
            if (dragger.dragNode.parentNode != window.document.body && dragger.gldragNode) {
                var b = dragger.gldragNode;
                dragger.gldragNode.old && (b = dragger.gldragNode.old), b.parentNode.removeChild(b);
                var c = dragger.dragNode.pWindow;
                if (b.pWindow && b.pWindow.dhtmlDragAndDrop.lastLanding && b.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(b.pWindow.dhtmlDragAndDrop.lastLanding), _isIE) {
                    var d = document.createElement("Div");
                    d.innerHTML = dragger.dragNode.outerHTML, dragger.dragNode = d.childNodes[0]
                } else dragger.dragNode = dragger.dragNode.cloneNode(!0);
                dragger.dragNode.pWindow = window, dragger.gldragNode.old = dragger.dragNode, document.body.appendChild(dragger.dragNode), c.dhtmlDragAndDrop.dragNode = dragger.dragNode
            }
            dragger.dragNode.style.left = a.clientX + 15 + (dragger.fx ? dragger.fx * -1 : 0) + (document.body.scrollLeft || document.documentElement.scrollLeft) + "px", dragger.dragNode.style.top = a.clientY + 3 + (dragger.fy ? dragger.fy * -1 : 0) + (document.body.scrollTop || document.documentElement.scrollTop) + "px";
            var e = a.srcElement ? a.srcElement : a.target;
            dragger.checkLanding(e, a)
        }
    }, dhtmlDragAndDropObject.prototype.calculateFramePosition = function(a) {
        if (window.name) {
            for (var b = parent.frames[window.name].frameElement.offsetParent, c = 0, d = 0; b;) c += b.offsetLeft, d += b.offsetTop, b = b.offsetParent;
            if (parent.dhtmlDragAndDrop) {
                var e = parent.dhtmlDragAndDrop.calculateFramePosition(1);
                c += 1 * e.split("_")[0], d += 1 * e.split("_")[1]
            }
            if (a) return c + "_" + d;
            this.fx = c, this.fy = d
        }
        return "0_0"
    }, dhtmlDragAndDropObject.prototype.checkLanding = function(a, b) {
        a && a.dragLanding ? (this.lastLanding && this.lastLanding.dragLanding._dragOut(this.lastLanding), this.lastLanding = a, this.lastLanding = this.lastLanding.dragLanding._dragIn(this.lastLanding, this.dragStartNode, b.clientX, b.clientY, b), this.lastLanding_scr = _isIE ? b.srcElement : b.target) : a && "BODY" != a.tagName ? this.checkLanding(a.parentNode, b) : (this.lastLanding && this.lastLanding.dragLanding._dragOut(this.lastLanding, b.clientX, b.clientY, b), this.lastLanding = 0, this._onNotFound && this._onNotFound())
    }, dhtmlDragAndDropObject.prototype.stopDrag = function(a, b) {
        if (dragger = window.dhtmlDragAndDrop, !b) {
            dragger.stopFrameRoute();
            var c = dragger.lastLanding;
            dragger.lastLanding = null, c && c.dragLanding._drag(dragger.dragStartNode, dragger.dragStartObject, c, _isIE ? event.srcElement : a.target)
        }
        dragger.lastLanding = null, dragger.dragNode && dragger.dragNode.parentNode == document.body && dragger.dragNode.parentNode.removeChild(dragger.dragNode), dragger.dragNode = 0, dragger.gldragNode = 0, dragger.fx = 0, dragger.fy = 0, dragger.dragStartNode = 0, dragger.dragStartObject = 0, document.body.onmouseup = dragger.tempDOMU, document.body.onmousemove = dragger.tempDOMM, dragger.tempDOMU = null, dragger.tempDOMM = null, dragger.waitDrag = 0
    }, dhtmlDragAndDropObject.prototype.stopFrameRoute = function(a) {
        a && window.dhtmlDragAndDrop.stopDrag(1, 1);
        for (var b = 0; b < window.frames.length; b++) try {
            window.frames[b] != a && window.frames[b].dhtmlDragAndDrop && window.frames[b].dhtmlDragAndDrop.stopFrameRoute(window)
        } catch (a) {}
        try {
            parent.dhtmlDragAndDrop && parent != window && parent != a && parent.dhtmlDragAndDrop.stopFrameRoute(window)
        } catch (a) {}
    }, dhtmlDragAndDropObject.prototype.initFrameRoute = function(a, b) {
        a && (window.dhtmlDragAndDrop.preCreateDragCopy(), window.dhtmlDragAndDrop.dragStartNode = a.dhtmlDragAndDrop.dragStartNode, window.dhtmlDragAndDrop.dragStartObject = a.dhtmlDragAndDrop.dragStartObject, window.dhtmlDragAndDrop.dragNode = a.dhtmlDragAndDrop.dragNode, window.dhtmlDragAndDrop.gldragNode = a.dhtmlDragAndDrop.dragNode, window.document.body.onmouseup = window.dhtmlDragAndDrop.stopDrag, window.waitDrag = 0, !_isIE && b && (!_isFF || _FFrv < 1.8) && window.dhtmlDragAndDrop.calculateFramePosition());
        try {
            parent.dhtmlDragAndDrop && parent != window && parent != a && parent.dhtmlDragAndDrop.initFrameRoute(window)
        } catch (a) {}
        for (var c = 0; c < window.frames.length; c++) try {
            window.frames[c] != a && window.frames[c].dhtmlDragAndDrop && window.frames[c].dhtmlDragAndDrop.initFrameRoute(window, !a || b ? 1 : 0)
        } catch (a) {}
    }, _OperaRv = _KHTMLrv = _FFrv = _isChrome = _isMacOS = _isKHTML = _isOpera = _isIE = _isFF = !1, navigator.userAgent.indexOf("Macintosh") != -1 && (_isMacOS = !0), navigator.userAgent.toLowerCase().indexOf("chrome") > -1 && (_isChrome = !0), navigator.userAgent.indexOf("Safari") != -1 || navigator.userAgent.indexOf("Konqueror") != -1 ? (_KHTMLrv = parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari") + 7, 5)), _KHTMLrv > 525 ? (_isFF = !0, _FFrv = 1.9) : _isKHTML = !0) : navigator.userAgent.indexOf("Opera") != -1 ? (_isOpera = !0, _OperaRv = parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera") + 6, 3))) : navigator.appName.indexOf("Microsoft") != -1 ? (_isIE = !0, (navigator.appVersion.indexOf("MSIE 8.0") != -1 || navigator.appVersion.indexOf("MSIE 9.0") != -1 || navigator.appVersion.indexOf("MSIE 10.0") != -1 || document.documentMode > 7) && "BackCompat" != document.compatMode && (_isIE = 8)) : "Netscape" == navigator.appName && navigator.userAgent.indexOf("Trident") != -1 ? _isIE = 8 : (_isFF = !0, _FFrv = parseFloat(navigator.userAgent.split("rv:")[1])), dtmlXMLLoaderObject.prototype.doXPath = function(a, b, c, d) {
        if (_isKHTML || !_isIE && !window.XPathResult) return this.doXPathOpera(a, b);
        if (_isIE) return b || (b = this.xmlDoc.nodeName ? this.xmlDoc : this.xmlDoc.responseXML), b || dhtmlxError.throwError("LoadXML", "Incorrect XML", [b || this.xmlDoc, this.mainObject]), null != c && b.setProperty("SelectionNamespaces", "xmlns:xsl='" + c + "'"), "single" == d ? b.selectSingleNode(a) : b.selectNodes(a) || [];
        var e = b;
        b || (b = this.xmlDoc.nodeName ? this.xmlDoc : this.xmlDoc.responseXML), b || dhtmlxError.throwError("LoadXML", "Incorrect XML", [b || this.xmlDoc, this.mainObject]), b.nodeName.indexOf("document") != -1 ? e = b : (e = b, b = b.ownerDocument);
        var f = XPathResult.ANY_TYPE;
        "single" == d && (f = XPathResult.FIRST_ORDERED_NODE_TYPE);
        var g = [],
            h = b.evaluate(a, e, function() {
                return c
            }, f, null);
        if (f == XPathResult.FIRST_ORDERED_NODE_TYPE) return h.singleNodeValue;
        for (var i = h.iterateNext(); i;) g[g.length] = i, i = h.iterateNext();
        return g
    }, M.prototype.catchError = function(a, b) {
        this.catches[a] = b
    }, M.prototype.throwError = function(a, b, c) {
        return this.catches[a] ? this.catches[a](a, b, c) : this.catches.ALL ? this.catches.ALL(a, b, c) : (alert("Error type: " + a + "\nDescription: " + b), null)
    }, window.dhtmlxError = new M, dtmlXMLLoaderObject.prototype.doXPathOpera = function(a, b) {
        var c = a.replace(/[\/]+/gi, "/").split("/"),
            d = null,
            e = 1;
        if (!c.length) return [];
        if ("." == c[0]) d = [b];
        else {
            if ("" != c[0]) return [];
            d = (this.xmlDoc.responseXML || this.xmlDoc).getElementsByTagName(c[e].replace(/\[[^\]]*\]/g, "")), e++
        }
        for (; e < c.length; e++) d = this._getAllNamedChilds(d, c[e]);
        return c[e - 1].indexOf("[") != -1 && (d = this._filterXPath(d, c[e - 1])), d
    }, dtmlXMLLoaderObject.prototype._filterXPath = function(a, b) {
        for (var c = [], b = b.replace(/[^\[]*\[\@/g, "").replace(/[\[\]\@]*/g, ""), d = 0; d < a.length; d++) a[d].getAttribute(b) && (c[c.length] = a[d]);
        return c
    }, dtmlXMLLoaderObject.prototype._getAllNamedChilds = function(a, b) {
        var c = [];
        _isKHTML && (b = b.toUpperCase());
        for (var d = 0; d < a.length; d++)
            for (var e = 0; e < a[d].childNodes.length; e++) _isKHTML ? a[d].childNodes[e].tagName && a[d].childNodes[e].tagName.toUpperCase() == b && (c[c.length] = a[d].childNodes[e]) : a[d].childNodes[e].tagName == b && (c[c.length] = a[d].childNodes[e]);
        return c
    }, dtmlXMLLoaderObject.prototype.xslDoc = null, dtmlXMLLoaderObject.prototype.setXSLParamValue = function(a, b, c) {
        c || (c = this.xslDoc), c.responseXML && (c = c.responseXML);
        var d = this.doXPath("/xsl:stylesheet/xsl:variable[@name='" + a + "']", c, "http://www.w3.org/1999/XSL/Transform", "single");
        null != d && (d.firstChild.nodeValue = b)
    }, dtmlXMLLoaderObject.prototype.doXSLTransToObject = function(a, b) {
        if (a || (a = this.xslDoc), a.responseXML && (a = a.responseXML), b || (b = this.xmlDoc), b.responseXML && (b = b.responseXML), _isIE) {
            c = new ActiveXObject("Msxml2.DOMDocument.3.0");
            try {
                b.transformNodeToObject(a, c)
            } catch (d) {
                c = b.transformNode(a)
            }
        } else {
            this.XSLProcessor || (this.XSLProcessor = new XSLTProcessor, this.XSLProcessor.importStylesheet(a));
            var c = this.XSLProcessor.transformToDocument(b)
        }
        return c
    }, dtmlXMLLoaderObject.prototype.doXSLTransToString = function(a, b) {
        var c = this.doXSLTransToObject(a, b);
        return "string" == typeof c ? c : this.doSerialization(c)
    }, dtmlXMLLoaderObject.prototype.doSerialization = function(a) {
        if (a || (a = this.xmlDoc), a.responseXML && (a = a.responseXML), _isIE) return a.xml;
        var b = new XMLSerializer;
        return b.serializeToString(a)
    }, dhtmlxEventable = function(a) {
        a.attachEvent = function(a, b, c) {
            return a = "ev_" + a.toLowerCase(), this[a] || (this[a] = new this.eventCatcher(c || this)), a + ":" + this[a].addEvent(b)
        }, a.callEvent = function(a, b) {
            return a = "ev_" + a.toLowerCase(), !this[a] || this[a].apply(this, b)
        }, a.checkEvent = function(a) {
            return !!this["ev_" + a.toLowerCase()]
        }, a.eventCatcher = function(a) {
            var c = [],
                d = function() {
                    for (var b = !0, d = 0; d < c.length; d++)
                        if (null != c[d]) var e = c[d].apply(a, arguments),
                            b = b && e;
                    return b
                };
            return d.addEvent = function(a) {
                return "function" != typeof a && (a = eval(a)), !!a && c.push(a) - 1
            }, d.removeEvent = function(a) {
                c[a] = null
            }, d
        }, a.detachEvent = function(a) {
            if (0 != a) {
                var b = a.split(":");
                this[b[0]].removeEvent(b[1])
            }
        }, a.detachAllEvents = function() {
            for (var a in this) 0 == a.indexOf("ev_") && (this.detachEvent(a), this[a] = null)
        }, a = null
    }, window.dhtmlx || (window.dhtmlx = {}),
    function() {
        function a(a, b) {
            var d = a.callback;
            c(!1), a.box.parentNode.removeChild(a.box), m = a.box = null, d && d(b)
        }

        function b(b) {
            if (m) {
                var b = b || event,
                    c = b.which || event.keyCode;
                return dhtmlx.message.keyboard && ((13 == c || 32 == c) && a(m, !0), 27 == c && a(m, !1)), b.preventDefault && b.preventDefault(), !(b.cancelBubble = !0)
            }
        }

        function c(a) {
            c.cover || (c.cover = document.createElement("DIV"), c.cover.onkeydown = b, c.cover.className = "dhx_modal_cover", document.body.appendChild(c.cover)), document.body.scrollHeight, c.cover.style.display = a ? "inline-block" : "none"
        }

        function d(a, b) {
            return "<div class='dhtmlx_popup_button' result='" + b + "' ><div>" + a + "</div></div>"
        }

        function e(a) {
            n.area || (n.area = document.createElement("DIV"), n.area.className = "dhtmlx_message_area", n.area.style[n.position] = "5px", document.body.appendChild(n.area)), n.hide(a.id);
            var b = document.createElement("DIV");
            return b.innerHTML = "<div>" + a.text + "</div>", b.className = "dhtmlx-info dhtmlx-" + a.type, b.onclick = function() {
                n.hide(a.id), a = null
            }, "bottom" == n.position && n.area.firstChild ? n.area.insertBefore(b, n.area.firstChild) : n.area.appendChild(b), a.expire > 0 && (n.timers[a.id] = window.setTimeout(function() {
                n.hide(a.id)
            }, a.expire)), n.pull[a.id] = b, b = null, a.id
        }

        function f(b, c, e) {
            var f = document.createElement("DIV");
            f.className = " dhtmlx_modal_box dhtmlx-" + b.type, f.setAttribute("dhxbox", 1);
            var g = "";
            if (b.width && (f.style.width = b.width), b.height && (f.style.height = b.height), b.title && (g += '<div class="dhtmlx_popup_title">' + b.title + "</div>"), g += '<div class="dhtmlx_popup_text"><span>' + (b.content ? "" : b.text) + '</span></div><div  class="dhtmlx_popup_controls">', c && (g += d(b.ok || "OK", !0)), e && (g += d(b.cancel || "Cancel", !1)), b.buttons)
                for (var h = 0; h < b.buttons.length; h++) g += d(b.buttons[h], h);
            if (g += "</div>", f.innerHTML = g, b.content) {
                var i = b.content;
                "string" == typeof i && (i = document.getElementById(i)), "none" == i.style.display && (i.style.display = ""), f.childNodes[b.title ? 1 : 0].appendChild(i)
            }
            return f.onclick = function(c) {
                var c = c || event,
                    d = c.target || c.srcElement;
                if (d.className || (d = d.parentNode), "dhtmlx_popup_button" == d.className) {
                    var e = d.getAttribute("result"),
                        e = "true" == e || "false" != e && e;
                    a(b, e)
                }
            }, b.box = f, (c || e) && (m = b), f
        }

        function g(a, d, e) {
            var g = a.tagName ? a : f(a, d, e);
            a.hidden || c(!0), document.body.appendChild(g);
            var h = a.left || Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - g.offsetWidth) / 2)),
                i = a.top || Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - g.offsetHeight) / 2));
            return g.style.top = "top" == a.position ? "-3px" : i + "px", g.style.left = h + "px", g.onkeydown = b, g.focus(), a.hidden && dhtmlx.modalbox.hide(g), g
        }

        function h(a) {
            return g(a, !0, !1)
        }

        function i(a) {
            return g(a, !0, !0)
        }

        function j(a) {
            return g(a)
        }

        function k(a, b, c) {
            return "object" != typeof a && ("function" == typeof b && (c = b, b = ""), a = {
                text: a,
                type: b,
                callback: c
            }), a
        }

        function l(a, b, c, d) {
            return "object" != typeof a && (a = {
                text: a,
                type: b,
                expire: c,
                id: d
            }), a.id = a.id || n.uid(), a.expire = a.expire || n.expire, a
        }
        var m = null;
        document.attachEvent ? document.attachEvent("onkeydown", b) : document.addEventListener("keydown", b, !0), dhtmlx.alert = function() {
            var a = k.apply(this, arguments);
            return a.type = a.type || "confirm", h(a)
        }, dhtmlx.confirm = function() {
            var a = k.apply(this, arguments);
            return a.type = a.type || "alert", i(a)
        }, dhtmlx.modalbox = function() {
            var a = k.apply(this, arguments);
            return a.type = a.type || "alert", j(a)
        }, dhtmlx.modalbox.hide = function(a) {
            for (; a && a.getAttribute && !a.getAttribute("dhxbox");) a = a.parentNode;
            a && (a.parentNode.removeChild(a), c(!1))
        };
        var n = dhtmlx.message = function(a, b, c, d) {
            a = l.apply(this, arguments), a.type = a.type || "info";
            var f = a.type.split("-")[0];
            switch (f) {
                case "alert":
                    return h(a);
                case "confirm":
                    return i(a);
                case "modalbox":
                    return j(a);
                default:
                    return e(a)
            }
        };
        n.seed = (new Date).valueOf(), n.uid = function() {
            return n.seed++
        }, n.expire = 4e3, n.keyboard = !0, n.position = "top", n.pull = {}, n.timers = {}, n.hideAll = function() {
            for (var a in n.pull) n.hide(a)
        }, n.hide = function(a) {
            var b = n.pull[a];
            b && b.parentNode && (window.setTimeout(function() {
                b.parentNode.removeChild(b), b = null
            }, 2e3), b.className += " hidden", n.timers[a] && window.clearTimeout(n.timers[a]), delete n.pull[a])
        }
    }(), dhtmlXAccordion.prototype.i18n = {
        dhxcontalert: "dhtmlxcontainer.js is missed on the page"
    },
    function() {
        dhtmlx.extend_api("dhtmlXAccordion", {
            _init: function(a) {
                return [a.parent, a.skin]
            },
            icon_path: "setIconsPath",
            items: "_items",
            effect: "setEffect",
            multi_mode: "enableMultiMode"
        }, {
            _items: function(a) {
                for (var b = [], c = [], d = 0; d < a.length; d++) {
                    var e = a[d];
                    this.addItem(e.id, e.text), e.img && this.cells(e.id).setIcon(e.img), e.height && this.cells(e.id).setHeight(e.height), e.open === !0 && (b[b.length] = e.id), e.open === !1 && (c[c.length] = e.id)
                }
                for (var f = 0; f < b.length; f++) this.cells(b[f]).open();
                for (f = 0; f < c.length; f++) this.cells(c[f]).close()
            }
        })
    }(), dhtmlXAccordion.prototype.loadJSON = function(a) {
        var b, c = {
            skin: "setSkin",
            icons_path: "setIconsPath",
            multi_mode: "enableMultiMode",
            effect: "setEffect"
        };
        for (b in c) "undefined" != typeof a[b] && this[c[b]](a[b]);
        for (var d = null, e = 0; e < a.cells.length; e++) this.addItem(a.cells[e].id, a.cells[e].text), "undefined" != typeof a.cells[e].icon && this.setIcon(a.cells[e].id, a.cells[e].icon), "undefined" != typeof a.cells[e].height && this.setItemHeight(a.cells[e].id, a.cells[e].height), "undefined" != typeof a.cells[e].open && (d = a.cells[e].id);
        null != d && this.openItem(d)
    }, dhtmlXAccordion.prototype.loadXML = function(a, b) {
        var c = this;
        this.callEvent("onXLS", []), dhtmlxAjax.get(a, function(a) {
            var d = a.xmlDoc.responseXML.getElementsByTagName("accordion")[0],
                e = {
                    0: !1,
                    true: !0,
                    1: !0,
                    y: !0,
                    yes: !0
                },
                f = {
                    cells: []
                };
            null != d.getAttribute("skin") && (f.skin = d.getAttribute("skin")), null != d.getAttribute("iconsPath") && (f.icons_path = d.getAttribute("iconsPath")), "multi" == d.getAttribute("mode") && (f.multi_mode = !0), e[d.getAttribute("openEffect") || 0] && (f.effect = !0);
            for (var g = 0; g < d.childNodes.length; g++)
                if ("indefined" != typeof d.childNodes[g].tagName && "cell" == String(d.childNodes[g].tagName).toLowerCase()) {
                    var h = d.childNodes[g].getAttribute("id") || c._genStr(12),
                        i = d.childNodes[g].firstChild.nodeValue || "";
                    f.cells.push({
                        id: h,
                        text: i
                    }), null != d.childNodes[g].getAttribute("icon") && (f.cells[f.cells.length - 1].icon = d.childNodes[g].getAttribute("icon")), null != d.childNodes[g].getAttribute("height") && (f.cells[f.cells.length - 1].height = d.childNodes[g].getAttribute("height")), e[d.childNodes[g].getAttribute("open") || 0] && (f.cells[f.cells.length - 1].open = !0)
                }
            c.loadJSON(f), c.callEvent("onXLE", []), "function" == typeof b && b(), c = b = null
        })
    }, dhtmlXCalendarObject.prototype.setYearsRange = function() {}, dhtmlXCalendarObject.prototype.lang = "en", dhtmlXCalendarObject.prototype.langData = {
        en: {
            dateformat: "%Y-%m-%d",
            monthesFNames: "Janeiro,Fevereiro,Março,Abril,Maio,Junho,Julho,Agosto,Setembro,Outubro,Novembro,Dezembro".split(","),
            monthesSNames: "Jan,Fev,Mar,Abr,Mai,Jun,Jul,Ago,Set,Out,Nov,Dez".split(","),
            daysFNames: "Domingo,Segunda,Terça,Quarta,Quinta,Sexta,Sábado".split(","),
            daysSNames: "D,S,T,Q,Q,S,S".split(","),
            weekstart: 1,
            weekname: "w"
        }
    }, dhtmlXCalendarObject.prototype.enableIframe = function(a) {
        1 == a ? this._ifr || (this._ifr = document.createElement("IFRAME"), this._ifr.frameBorder = 0, this._ifr.border = 0, this._ifr.setAttribute("src", "javascript:false;"), this._ifr.className = "dhtmlxcalendar_ifr", this._ifr.onload = function() {
            this.onload = null, this.contentWindow.document.open("text/html", "replace"), this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")
        }, this.base.parentNode.insertBefore(this._ifr, this.base), this._ifrSize()) : this._ifr && (this._ifr.parentNode.removeChild(this._ifr), this._ifr = null)
    }, dhtmlXCalendarObject.prototype._ifrSize = function() {
        this._ifr && (this._ifr.style.left = this.base.style.left, this._ifr.style.top = this.base.style.top, this._ifr.style.width = this.base.offsetWidth + "px", this._ifr.style.height = this.base.offsetHeight + "px")
    }, dhtmlxCalendarObject = dhtmlXCalendarObject, dhtmlXColorPicker.prototype.generate = function() {
        if (X = "BackCompat" != document.compatMode ? "X" : "", this.fullview) a = "<div class='dhtmlxcolorpicker" + ("" != this.skinName ? "_" + this.skinName : "") + "' csid='cs_Content' style='display:none;'>", document.all && "absolute" == this.container.style.position && (a += "<iframe src='" + (this.imgURL || "") + "blank.html' style='position:absolute; top:0px; left:0px; width:320px;  height:" + (this._cc ? 454 : 407) + "px; z-index:-1;'></iframe>"), a += "<table cellpadding='0' cellspacing='0'>", a += "<tr><td style='width:2px;height:2px;background:url(" + (this.imgURL || "") + "left_top.gif);'></td><td style='height:2px;background:url(" + (this.imgURL || "") + "top.gif);'></td><td style='width:2px;height:2px;background:url(" + (this.imgURL || "") + "right_top.gif);'></td></tr>", a += "<tr><td style='width:2px;background:url(" + (this.imgURL || "") + "left.gif);'></td><td style='width:316px;height:" + (this._cc ? 446 : 392) + "px;background:#E6E5E5;'>", a += "<table class='cs_ContentTable' csid='cs_ContentTable' cellpadding='0px' cellspacing='0px'>", a += "<tr>", a += "<td><div class='cs_SelectorDiv' csid='cs_SelectorDiv'><div class='cs_SelectorVer' csid='cs_SelectorVer' style='left:100px;top:0px;'></div><div class='cs_SelectorHor' csid='cs_SelectorHor' style='left:0px;top:100px;'></div></div></td>", a += "<td><div class='cs_LumSelect' csid='cs_LumSelect'><div class='cs_LumSelectArrow' csid='cs_LumSelectArrow' style='left:16px;top:124px;'></div><div class='cs_LumSelectLine' csid='cs_LumSelectLine' style='left:0px;top:0px;'></div></div></td>", a += "</tr>", a += "<tr><td style='padding-top:10px;' colspan='2'>", a += "<table class='cs_ColorArea' cellpadding='0px' cellspacing='0px'>", a += "<tr><td rowspan='3'><div class='cs_EndColor' csid='cs_EndColor'></div></td><td valign='top' style='text-align:center;width:80px;'># <input csid='cs_Hex' class='cs_Hex'></td><td>" + this.language.labelHue + ":</td><td><input tabindex='1' class='cs_Input' csid='cs_InputHue' value='' /></td><td>" + this.language.labelRed + ":</td><td><input tabindex='4' class='cs_Input' csid='cs_InputRed' value='' /></td></tr>", a += "<tr><td></td><td>" + this.language.labelSat + ":</td><td><input tabindex='2' class='cs_Input' csid='cs_InputSat' value='' /></td><td>" + this.language.labelGreen + ":</td><td><input tabindex='4' class='cs_Input' csid='cs_InputGreen' value='' /></td></tr>", a += "<tr><td></td><td>" + this.language.labelLum + ":</td><td><input tabindex='2' class='cs_Input' csid='cs_InputLum' value='' /></td><td>" + this.language.labelBlue + ":</td><td><input tabindex='4' class='cs_Input' csid='cs_InputBlue' value='' /></td></tr>", this._cc && (a += "<tr><td>", a += "<div class='cs_CustomColors' csid='cs_CustomColors'></div>", a += "</td><td></td><td colspan='4' valign='top'><input tabindex='7' class='cs_CustomColorAdd' csid='cs_CustomColorAdd' type='button' value='" + this.language.btnAddColor + "'></td></tr>"), a += "</table>", a += "</td></tr>", a += "</table>", a += "<table cellpadding='0' cellspacing='0' style='width:100%;'><tr><td style='height:49px;background:url(" + (this.imgURL || "") + "buttons_panel.gif);'><input tabindex='9' class='cs_ButtonCancel' csid='cs_ButtonCancel' type='button' value='" + this.language.btnCancel + "' /><input tabindex='8' class='cs_ButtonOk' csid='cs_ButtonOk' type='button' value='" + this.language.btnSelect + "' /></td></tr></table>";
        else {
            var a = "<div class='dhtmlxcolorpicker" + ("" != this.skinName ? "_" + this.skinName : "") + "' csid='cs_Content' style='display:none;'>";
            document.all && "absolute" == this.container.style.position && (a += "<iframe src='" + (this.imgURL || "") + "blank.html' frameBorder='0' style='position:absolute; top:0px; left:0px; width:252px;  height:" + (this._cc ? 300 : 244) + "px; z-index:-1;'></iframe>"), a += "<table cellpadding='0' cellspacing='0'>", a += "<tr><td style='width:2px;height:2px;background:url(" + (this.imgURL || "") + "left_top.gif);'></td><td style='height:2px;background:url(" + (this.imgURL || "") + "top.gif);'></td><td style='width:2px;height:2px;background:url(" + (this.imgURL || "") + "right_top.gif);'></td></tr>", a += "<tr><td style='width:2px;background:url(" + (this.imgURL || "") + "left.gif);'></td><td style='width:" + (document.all ? 247 : 243) + "px;height:" + (this._cc ? 281 : 240) + "px;'>", a += "<table class='cs_ContentTable' csid='cs_ContentTable' cellpadding='0px' cellspacing='0px'>", a += "<tr>", a += "<td><div class='cs_SelectorDiv_Mini' csid='cs_SelectorDiv'><div class='cs_SelectorVer' csid='cs_SelectorVer' style='left:100px;top:0px;'></div><div class='cs_SelectorHor' csid='cs_SelectorHor' style='left:0px;top:100px;'></div></div></td>", a += "<td><div class='cs_LumSelect_Mini' csid='cs_LumSelect'><div csid='cs_LumSelectArrow'></div><div class='cs_LumSelectLine' csid='cs_LumSelectLine' style='left:0px;top:0px;'></div></div></td>", a += "</tr>", a += "<tr><td style='padding-top:10px;' colspan='2'>", a += "<table class='cs_ColorArea_Mini' cellpadding='0px' cellspacing='0px'>", a += "<tr><td rowspan='2' valign='top' style='text-align:left;'><div class='cs_EndColor_Mini' csid='cs_EndColor' ></div></td><td>" + this.language.labelHue + ":</td><td><input tabindex='1' class='cs_Input_Mini" + X + "' csid='cs_InputHue' value='' /></td><td>" + this.language.labelRed + ":</td><td><input tabindex='4' class='cs_Input_Mini" + X + "' csid='cs_InputRed' value='' /></td></tr>", a += "<tr><td>" + this.language.labelSat + ":</td><td><input tabindex='2' class='cs_Input_Mini" + X + "' csid='cs_InputSat' value='' /></td><td>" + this.language.labelGreen + ":</td><td><input tabindex='4' class='cs_Input_Mini" + X + "' csid='cs_InputGreen' value='' /></td></tr>", a += "<tr><td style='vertical-align:top;width:80px;text-align:left;'># <input csid='cs_Hex' class='cs_Hex_Mini" + X + "'></td><td>" + this.language.labelLum + ":</td><td><input tabindex='2' class='cs_Input_Mini" + X + "' csid='cs_InputLum' value='' /></td><td>" + this.language.labelBlue + ":</td><td><input tabindex='4' class='cs_Input_Mini" + X + "' csid='cs_InputBlue' value='' /></td></tr>", this._cc && (a += "<tr><td colspan='6'><input tabindex='7' class='cs_CustomColorAdd_Mini' csid='cs_CustomColorAdd' type='button' value='" + this.language.btnAddColor + "'></td></tr>", a += "<tr><td colspan='6'><div class='cs_CustomColors_Mini' csid='cs_CustomColors'></div></td></tr>"), a += "</table>", a += "</td></tr>", a += "</table>", a += "<table class='cs_ButtonsPanel' cellpadding='0' cellspacing='0' style='width:100%;'><tr><td style='width:100%;'><input tabindex='9' class='cs_ButtonCancel' csid='cs_ButtonCancel' type='button' value='" + this.language.btnCancel + "' /><input tabindex='8' class='cs_ButtonOk' csid='cs_ButtonOk' type='button' value='" + this.language.btnSelect + "' /></td></tr></table>"
        }
        a += "</td><td style='width:2px;background:url(" + (this.imgURL || "") + "right.gif);'></td></tr>", a += "<tr><td style='width:2px;height:2px;background:url(" + (this.imgURL || "") + "left_bottom.gif);'></td><td style='height:2px;background:url(" + (this.imgURL || "") + "bottom.gif);'></td><td style='width:2px;height:2px;background:url(" + (this.imgURL || "") + "right_bottom.gif);'></td></tr>", a += "</table>", a += "</div>", this.container.style.width = this.fullview ? "320px" : "252px", this.container.innerHTML = a, this._initCsIdElement(), this.elements.cs_SelectorDiv.style.backgroundImage = this.fullview ? "url(" + (this.imgURL || "") + "color.png)" : "url(" + (this.imgURL || "") + "colormini.png)", this.elements.cs_SelectorDiv.z = this, this.elements.cs_LumSelect.z = this, this.elements.cs_LumSelectArrow.z = this, this.z = this, this._drawLum(), this._colorizeLum(this.old_hue, this.old_sat), this._initEvents(), this._cc && this._initCustomColors(), this.ColorNum = 0, this.restoreFromHSV(), this._drawValues()
    }, dhtmlXColorPicker.prototype._initCsIdElement = function(a) {
        null == a && (a = this.container);
        for (var b = a.childNodes, c = b.length, d = 0; d < c; d++)
            if (1 == b[d].nodeType) {
                var e = b[d].getAttribute("csid");
                null !== e && (this.elements[e] = b[d]), b[d].childNodes.length > 0 && this._initCsIdElement(b[d])
            }
    }, dhtmlXColorPicker.prototype._initEvents = function() {
        this.elements.cs_SelectorDiv.onmousedown = this._startMoveColor, this.elements.cs_SelectorDiv.ondblclick = this.clickOk, this.elements.cs_LumSelect.onmousedown = this._startMoveLum, this.elements.cs_LumSelect.ondblclick = this.clickOk, this.elements.cs_LumSelectArrow.onmousedown = this._startMoveLum, this._cc && (this.elements.cs_CustomColorAdd.z = this, this.elements.cs_CustomColorAdd.onclick = this.addCustomColor, this.elements.cs_CustomColorAdd.onmouseover = this.hoverButton, this.elements.cs_CustomColorAdd.onmouseout = this.normalButton);
        for (var a = "cs_InputHue,cs_InputRed,cs_InputSat,cs_InputGreen,cs_InputLum,cs_InputBlue".split(","), b = 0; b < a.length; b++) this.elements[a[b]].z = this, this.elements[a[b]].onchange = b % 2 ? this._changeValueRGB : this._changeValueHSV;
        this.elements.cs_Hex.z = this, this.elements.cs_Hex.onchange = this._changeValueHEX, this.elements.cs_ButtonOk.z = this, this.elements.cs_ButtonOk.onclick = this.clickOk, this.elements.cs_ButtonOk.onmouseover = this.hoverButton, this.elements.cs_ButtonOk.onmouseout = this.normalButton, this.elements.cs_ButtonCancel.z = this, this.elements.cs_ButtonCancel.onclick = this.clickCancel, this.elements.cs_ButtonCancel.onmouseover = this.hoverButton, this.elements.cs_ButtonCancel.onmouseout = this.normalButton
    }, dhtmlXColorPicker.prototype.resetHandlers = function() {}, dhtmlXColorPicker.prototype.clickOk = function() {
        var a = this.z,
            b = a.getSelectedColor();
        a.callEvent("onSelect", [b[0]]), a.hideSelfOnSelect && a.hide()
    }, dhtmlXColorPicker.prototype.clickCancel = function() {
        var a = this.z;
        a.callEvent("onCancel", []), this.z.hideSelfOnSelect && this.z.hide()
    }, dhtmlXColorPicker.prototype._setCrossPos = function(a) {
        var b = this.z,
            c = b._getOffset(this.elements.cs_SelectorDiv),
            d = a.clientY - c[0];
        d < 0 ? d = 0 : d > this.colorSelectH && (d = this.colorSelectH);
        var e = a.clientX - c[1];
        e < 0 ? e = 0 : e > this.colorSelectW && (e = this.colorSelectW), b.elements.cs_SelectorVer.style.left = e + "px", b.elements.cs_SelectorHor.style.top = d + "px";
        var f = e == this.colorSelectW ? 0 : 360 * e / this.colorSelectW,
            g = 1 - d / this.colorSelectH;
        return [f, g]
    }, dhtmlXColorPicker.prototype._getScrollers = function() {
        return [document.body.scrollLeft || document.documentElement.scrollLeft, document.body.scrollTop || document.documentElement.scrollTop]
    }, dhtmlXColorPicker.prototype._setLumPos = function(a) {
        var b = this.z,
            c = b._getOffset(b.elements.cs_LumSelect),
            d = a.clientY - c[0] - 4;
        d < -3 && (d = -3), d > this.colorSelectH - 4 && (d = this.colorSelectH - 4), b.elements.cs_LumSelectArrow.style.top = d + "px", b.elements.cs_LumSelectLine.style.top = d + 4 + "px";
        var e = (d + 3) / this.colorSelectH;
        return e
    }, dhtmlXColorPicker.prototype._startMoveColor = function(a) {
        var b = this.z;
        null == a && (a = event), b.elements.cs_SelectorDiv.onmousedown = null, b.b_move = document.body.onmousemove, b.b_up = document.body.onmouseup;
        var c = b;
        document.body.onmousemove = function(a) {
            null == a && (a = event), c._mouseMoveColor(a)
        }, document.body.onmouseup = function(a) {
            null == a && (a = event), c._stopMoveColor(a), c = null
        }, b.elements.cs_SelectorDiv.onmousemove = b._mouseMoveColor, b.elements.cs_SelectorDiv.onmouseup = b._stopMoveColor;
        var d = b._setCrossPos(a);
        b.h = d[0], b.s = d[1];
        var e = b._calculateColor();
        b._colorizeLum(e[0], e[1])
    }, dhtmlXColorPicker.prototype._mouseMoveColor = function(a) {
        var b = this.z;
        null == a && (a = event);
        var c = b._setCrossPos(a);
        if (!b.isClickOnly) {
            b.h = c[0], b.s = c[1];
            var d = b._calculateColor();
            b._colorizeLum(d[0], d[1])
        }
    }, dhtmlXColorPicker.prototype._stopMoveColor = function(a) {
        var b = this.z;
        null == a && (a = event), b.elements.cs_SelectorDiv.onmousedown = b._startMoveColor, b.elements.cs_SelectorDiv.onmousemove = null, b.elements.cs_SelectorDiv.onmouseup = null, document.body.onmousemove = b.b_move, document.body.onmouseup = b.b_up;
        var c = b._setCrossPos(a);
        b.h = c[0], b.s = c[1];
        var d = b._calculateColor();
        b._colorizeLum(d[0], d[1])
    }, dhtmlXColorPicker.prototype._startMoveLum = function(a) {
        var b = this.z;
        null == a && (a = event), b.elements.cs_LumSelect.onmousedown = null, b.elements.cs_LumSelectArrow.onmousedown = null, b.elements.cs_LumSelect.onmousemove = b._mouseMoveLum, b.elements.cs_LumSelect.onmouseup = b._stopMoveLum, b.b_move = document.body.onmousemove, b.b_up = document.body.onmouseup, b.b_selstart = document.body.onselectstart;
        var c = b;
        document.body.onmousemove = function(a) {
            null == a && (a = event), c._mouseMoveLum(a)
        }, document.body.onmouseup = function(a) {
            null == a && (a = event), c._stopMoveLum(a), c = null
        }, document.body.onselectstart = function() {
            return !1
        }, b.v = b._setLumPos(a), b._calculateColor()
    }, dhtmlXColorPicker.prototype._mouseMoveLum = function(a) {
        var b = this.z;
        null == a && (a = event), b.v = b._setLumPos(a), b.isClickOnly || b._calculateColor()
    }, dhtmlXColorPicker.prototype._stopMoveLum = function(a) {
        var b = this.z;
        null == a && (a = event), b.elements.cs_LumSelect.onmousedown = b._startMoveLum, b.elements.cs_LumSelectArrow.onmousedown = b._startMoveLum, b.elements.cs_LumSelect.onmousemove = null, b.elements.cs_LumSelect.onmouseup = null, b.v = b._setLumPos(a), b._calculateColor(), document.body.onmousemove = b.b_move, document.body.onmouseup = b.b_up, document.body.onselectstart = b.b_selstart
    }, dhtmlXColorPicker.prototype._getOffset = function(a) {
        var b = this._getOffsetTop(a),
            c = this._getOffsetLeft(a),
            d = this._getScrollers();
        return [b - d[1], c - d[0]]
    }, dhtmlXColorPicker.prototype._getOffsetTop = function(a) {
        var b = 0;
        return a.offsetParent && (b += a.offsetTop + this._getOffsetTop(a.offsetParent)), b
    }, dhtmlXColorPicker.prototype._getOffsetLeft = function(a) {
        var b = 0;
        return a.offsetParent && (b += a.offsetLeft + this._getOffsetLeft(a.offsetParent)), b
    }, dhtmlXColorPicker.prototype._calculateColor = function() {
        if ("RGB" == this.restoreFrom) var a = [this.r, this.g, this.b];
        else a = this._hsv2rgb(this.h, this.s, 1 - this.v), this.r = a[0], this.g = a[1], this.b = a[2];
        return this.hex = this._getColorHEX(a), this.elements.cs_EndColor.style.backgroundColor = "#" + this.hex, this._drawValues(), this.restoreFrom = null, [this.h, this.s, 1 - this.v]
    }, dhtmlXColorPicker.prototype._drawValues = function() {
        this.elements.cs_Hex.value = this.hex, this.elements.cs_InputHue.value = Math.floor(this.h), this.elements.cs_InputSat.value = Math.floor(100 * this.s), this.elements.cs_InputLum.value = Math.floor(100 * (1 - this.v)), this.elements.cs_InputRed.value = Math.floor(this.r), this.elements.cs_InputGreen.value = Math.floor(this.g), this.elements.cs_InputBlue.value = Math.floor(this.b)
    }, dhtmlXColorPicker.prototype.saveColor = function(a, b) {
        var c = new Date,
            d = c.valueOf() + 26784e5,
            c = new Date(d),
            e = "color_" + b + "=" + a + "; expires=" + c.toGMTString();
        document.cookie = e
    }, dhtmlXColorPicker.prototype.restoreColor = function(a) {
        var b = !1,
            c = "color_" + a;
        if (document.cookie.length > 0) {
            var d = document.cookie.indexOf(c + "=");
            if (d != -1) {
                var e = document.cookie.indexOf(";", d);
                e == -1 && (e = document.cookie.length);
                var f = document.cookie.indexOf("=", d) + 1,
                    b = document.cookie.substr(f, e - f)
            }
        }
        return b
    }, dhtmlXColorPicker.prototype._hsv2rgb = function(a, b, c) {
        Hi = Math.floor(a / 60) % 6, f = a / 60 - Hi, p = c * (1 - b), q = c * (1 - f * b), t = c * (1 - (1 - f) * b);
        var d = 0,
            e = 0,
            f = 0;
        switch (Hi) {
            case 0:
                d = c, e = t, f = p;
                break;
            case 1:
                d = q, e = c, f = p;
                break;
            case 2:
                d = p, e = c, f = t;
                break;
            case 3:
                d = p, e = q, f = c;
                break;
            case 4:
                d = t, e = p, f = c;
                break;
            case 5:
                d = c, e = p, f = q
        }
        return d = Math.floor(255 * d), e = Math.floor(255 * e), f = Math.floor(255 * f), [d, e, f]
    }, dhtmlXColorPicker.prototype._rgb2hsv = function(a, b, c) {
        R = a / 255, G = b / 255, B = c / 255;
        var d = Math.max(R, G, B),
            e = Math.min(R, G, B),
            f = d,
            g = 0 == d ? 0 : 1 - e / d,
            h = 0;
        return d == e ? h = 0 : d == R && G >= B ? h = 60 * (G - B) / (d - e) + 0 : d == R && G < B ? h = 60 * (G - B) / (d - e) + 360 : d == G ? h = 60 * (B - R) / (d - e) + 120 : d == B && (h = 60 * (R - G) / (d - e) + 240), [h, g, f]
    }, dhtmlXColorPicker.prototype._drawLum = function() {
        for (var a = this.colorSelectH, b = this.fullview ? 64 : 30, c = this.fullview ? 4 : 8, d = 0; d < b; d++) {
            var e = document.createElement("div"),
                f = this._dec2hex(a);
            e.style.backgroundColor = "#" + f + f + f, e.className = "cs_LumElement", a -= c, this.elements.cs_LumSelect.appendChild(e)
        }
    }, dhtmlXColorPicker.prototype._colorizeLum = function(a, b) {
        this.old_hue = a, this.old_sat = b;
        for (var c = 255, d = this.fullview ? 4 : 8, e = this.elements.cs_LumSelect.childNodes.length, f = 2; f < e; f++) {
            var g = c > 255 ? 1 : c / 255,
                h = this._hsv2rgb(a, b, g),
                h = "#" + this._getColorHEX(h);
            this.elements.cs_LumSelect.childNodes[f].style.backgroundColor = h, c -= d
        }
        this.callEvent("onChange", [this.getSelectedColor()])
    }, dhtmlXColorPicker.prototype._dec2hex = function(a) {
        return window.cs_dechex[a] || "00"
    }, dhtmlXColorPicker.prototype._hex2dec = function(a) {
        return parseInt(a, 16)
    }, dhtmlXColorPicker.prototype._initCustomColors = function() {
        for (var a = this.elements.cs_CustomColors, b = 0; b < this.customColorsCount; b++) {
            var c = document.createElement("div");
            c.className = this.fullview ? "cs_CustomColor" : "cs_CustomColor_Mini", c.color_num = b, document.all && ("Opera" == navigator.appName ? this.fullview ? (c.style.width = "14px", c.style.height = "14px") : (c.style.width = "18px", c.style.height = "18px") : this.fullview ? (c.style.width = "16px", c.style.height = "16px") : (c.style.width = "BackCompat" != document.compatMode ? "18px" : "20px", c.style.height = "20px")), c.z = this, c.onclick = this._selectCustomColor, c.ondblclick = this.clickOk;
            var d = this.restoreColor(b) || "0,0,0";
            c.color = d;
            var e = d.split(",");
            c.style.backgroundColor = "#" + this._getColorHEX(e), this.customColors.push(c), a.appendChild(c)
        }
    }, dhtmlXColorPicker.prototype._reinitCustomColors = function() {
        for (var a = (this.elements.cs_CustomColors, 0); a < this.customColorsCount; a++) {
            var b = this.customColors[a],
                c = this.restoreColor(a) || "0,0,0";
            b.color = c;
            var d = c.split(",");
            b.style.backgroundColor = "#" + this._getColorHEX(d), this.customColors[a] = b
        }
    }, dhtmlXColorPicker.prototype._getColorHEX = function(a) {
        var b = this._dec2hex(a[0]),
            c = this._dec2hex(a[1]),
            d = this._dec2hex(a[2]);
        return b + c + d
    }, dhtmlXColorPicker.prototype._selectCustomColor = function(a) {
        null == a && (a = event);
        var b = this.z;
        if (!this.selected) {
            for (var c = 0; c < b.customColors.length; c++) b.customColors[c].style.border = "1px solid gray";
            this.style.border = "1px dashed black", this.selected = !0, null != b.selectedColor && (b.customColors[b.selectedColor].style.border = "1px solid gray", b.customColors[b.selectedColor].selected = !1)
        }
        b.selectedColor = this.color_num, b.ColorNum = this.color_num;
        var d = this.color.split(",");
        b.r = d[0], b.g = d[1], b.b = d[2], b.restoreFromRGB()
    }, dhtmlXColorPicker.prototype.addCustomColor = function() {
        var a = this.z;
        if (null != a.selectedColor) {
            var b = a.customColors[a.selectedColor],
                c = a.selectedColor;
            b.style.border = "1px solid gray", a.selectedColor = null
        } else b = a.customColors[a.ColorNum], c = a.ColorNum, b.style.border = "1px solid gray";
        var d = a.r + "," + a.g + "," + a.b;
        a.saveColor(d, c), b.color = d, a.ColorNum = 9 == a.ColorNum ? 0 : a.ColorNum + 1, a.customColors[a.ColorNum].style.border = "1px dashed red", b.style.backgroundColor = a.elements.cs_EndColor.style.backgroundColor
    }, dhtmlXColorPicker.prototype.restoreFromRGB = function() {
        this.restoreFrom = "RGB";
        var a = this._rgb2hsv(this.r, this.g, this.b);
        this.h = a[0], this.s = a[1], this.v = 1 - a[2], this.ready && this.redraw()
    }, dhtmlXColorPicker.prototype.restoreFromHSV = function() {
        this.restoreFrom = "HSV";
        var a = this._hsv2rgb(this.h, this.s, this.v);
        this.r = a[0], this.g = a[1], this.b = a[2], this.redraw()
    }, dhtmlXColorPicker.prototype.restoreFromHEX = function() {
        this.r = this._hex2dec(this.hex.substr(0, 2)), this.g = this._hex2dec(this.hex.substr(2, 2)), this.b = this._hex2dec(this.hex.substr(4, 2)), this.restoreFromRGB()
    }, dhtmlXColorPicker.prototype.redraw = function() {
        var a = this.colorSelectW * this.h / 360,
            b = (1 - this.s) * this.colorSelectH,
            c = this.v * this.colorSelectH;
        this.elements.cs_SelectorHor.style.top = b + "px", this.elements.cs_SelectorVer.style.left = a + "px", this.elements.cs_LumSelectArrow.style.top = c - 3 + "px", this.elements.cs_LumSelectLine.style.top = c + 1 + "px";
        var d = this._calculateColor();
        this._colorizeLum(d[0], d[1])
    }, dhtmlXColorPicker.prototype._changeValueHSV = function() {
        var a = this.z,
            b = parseInt(a.elements.cs_InputHue.value) || 0,
            c = parseInt(a.elements.cs_InputSat.value) || 0,
            d = parseInt(a.elements.cs_InputLum.value) || 0;
        (b < 0 || b > 359) && (b = 0), (c < 0 || c > 100) && (c = 0), (d < 0 || d > 100) && (d = 0), a.elements.cs_InputHue.value = b, a.elements.cs_InputSat.value = c, a.elements.cs_InputLum.value = d, a.h = b, a.s = c / 100, a.v = 1 - d / 100, a.restoreFromHSV()
    }, dhtmlXColorPicker.prototype._changeValueRGB = function() {
        var a = this.z,
            b = parseInt(a.elements.cs_InputRed.value) || 0,
            c = parseInt(a.elements.cs_InputGreen.value) || 0,
            d = parseInt(a.elements.cs_InputBlue.value) || 0;
        (b < 0 || b > 255) && (b = 0), (c < 0 || c > 255) && (c = 0), (d < 0 || d > 255) && (d = 0), a.elements.cs_InputRed.value = b, a.elements.cs_InputGreen.value = c, a.elements.cs_InputBlue.value = d, a.r = b, a.g = c, a.b = d, a.restoreFromRGB()
    }, dhtmlXColorPicker.prototype._changeValueHEX = function() {
        var a = this.z,
            b = a.elements.cs_Hex.value || 0,
            b = b.replace(/[^a-fA-F0-9]/gi, "0");
        if (b.length > 6) b = b.substr(0, 6);
        else
            for (; b.length < 6;) b += "0";
        a.elements.cs_Hex.value = b, a.hex = b, a.restoreFromHEX()
    }, dhtmlXColorPicker.prototype.setCustomColors = function(a) {
        for (var a = a.split(","), b = 0; b < a.length; b++) {
            var c = a[b];
            "#" == c.substr(0, 1) && (c = c.substr(1));
            var d = this._hex2dec(c.substr(0, 2)),
                e = this._hex2dec(c.substr(2, 2)),
                f = this._hex2dec(c.substr(4, 2)),
                c = d + "," + e + "," + f;
            this.saveColor(c, b)
        }
    }, dhtmlXColorPicker.prototype.setColor = function(a) {
        if ("string" != typeof a) var b = a[0],
            c = a[1],
            d = a[2];
        else if (a.indexOf("rgb") != -1) var e = a.substr(a.indexOf("(") + 1, a.lastIndexOf(")") - a.indexOf("(") - 1).split(","),
            b = e[0],
            c = e[1],
            d = e[2];
        else "#" == a.substr(0, 1) && (a = a.substr(1)), b = this._hex2dec(a.substr(0, 2)), c = this._hex2dec(a.substr(2, 2)), d = this._hex2dec(a.substr(4, 2));
        b = parseInt(b) || 0, c = parseInt(c) || 0, d = parseInt(d) || 0, (b < 0 || b > 255) && (b = 0), (c < 0 || c > 255) && (c = 0), (d < 0 || d > 255) && (d = 0), this.r = b, this.g = c, this.b = d, this.restoreFromRGB()
    }, dhtmlXColorPicker.prototype.close = function() {
        this.elements.cs_SelectorDiv.z = null, this.elements.cs_LumSelect.z = null, this.elements.cs_LumSelectArrow.z = null, this.elements.cs_ButtonOk.z = null, this.elements.cs_ButtonCancel.z = null, this.cc && (this.elements.cs_CustomColorAdd.z = null), this.container.innerHTML = "", this.container._dhx_remove && this.container.parentNode.removeChild(this.container)
    }, dhtmlXColorPicker.prototype.show = function() {
        this.callEvent("onShow", []), "" != this.container.innerHTML && (this.elements.cs_Content.style.display = "", this.elements.cs_InputHue.focus())
    }, dhtmlXColorPicker.prototype.setPosition = function(a, b) {
        this.container.style.position = "absolute", this.container.style.top = (b > 0 ? b : 10) + "px", this.container.style.left = a + "px"
    }, dhtmlXColorPicker.prototype.hide = function() {
        this.resetHandlers(), this.elements.cs_Content && (this.elements.cs_Content.style.display = "none")
    }, dhtmlXColorPicker.prototype.setOnSelectHandler = function(a) {
        this.attachEvent("onSelect", a)
    }, dhtmlXColorPicker.prototype.setOnCancelHandler = function(a) {
        this.attachEvent("onCancel", a)
    }, dhtmlXColorPicker.prototype.getSelectedColor = function() {
        var a = [this.r, this.g, this.b],
            b = this._dec2hex(this.r) + this._dec2hex(this.g) + this._dec2hex(this.b),
            c = [this.h, this.s, this.v];
        return ["#" + b, a, c]
    }, dhtmlXColorPicker.prototype.linkTo = function(a, b, c) {
        "object" != typeof a && (a = document.getElementById(a)), "object" != typeof b && (b = document.getElementById(b)), "object" != typeof c && (c = document.getElementById(c)), this.linkToObjects = arguments;
        var d = this;
        b.onclick = function() {
            var b = d._getOffset(a),
                c = d._getScrollers(),
                e = b[1] + c[0],
                f = b[0] + c[1];
            d.setPosition(e + a.offsetWidth, f), d.isVisible() ? d.hide() : d.show()
        }, this.setOnSelectHandler(function(b) {
            a.style.backgroundColor = b, c && (c.value = b)
        }), this.close = this.hide, this.hide()
    }, dhtmlXColorPicker.prototype.hideOnSelect = function(a) {
        this.hideSelfOnSelect = a
    }, dhtmlXColorPicker.prototype.setImagePath = function(a) {
        this.imgURL = a
    }, dhtmlXColorPicker.prototype.init = function() {
        this.language || this.loadUserLanguage("en-us"), this.generate(), this.ready = !0, this._cc && this._reinitCustomColors(), this.linkToObjects.length > 0 && this.linkTo(this.linkToObjects[0], this.linkToObjects[1], this.linkToObjects[2]), this.hideOnInit || this.show()
    }, dhtmlXColorPicker.prototype.loadUserLanguage = function(a) {
        window.dhtmlxColorPickerLangModules[a] && (this.language = window.dhtmlxColorPickerLangModules[a], this.ready && (this.generate(), this.show()))
    }, dhtmlXColorPicker.prototype.setSkin = function(a) {
        this.skinName = a, this.elements.cs_Content && (this.elements.cs_Content.className = "dhtmlxcolorpicker" + (a ? "_" + a : a))
    }, dhtmlXColorPicker.prototype.isVisible = function() {
        return "none" != this.elements.cs_Content.style.display
    }, dhtmlXColorPicker.prototype.hoverButton = function() {
        this.className += "_Hover"
    }, dhtmlXColorPicker.prototype.normalButton = function() {
        this.className = this.className.substr(0, this.className.length - 6)
    },
    function() {
        dhtmlx.extend_api("dhtmlXColorPicker", {
            _init: function(a) {
                return [a.parent, a.click, a.colors, a.hide, a.full]
            },
            show: "showA",
            link: "linkTo",
            image_path: "setImagePath",
            color: "setColor"
        }, {
            showA: function() {
                this.init(), this.show()
            }
        })
    }();
var dhtmlXCombo_optionTypes = [];
dhtmlXCombo.prototype.setSize = function(a) {
        this.DOMlist.style.width = a + "px", this.DOMlistF && (this.DOMlistF.style.width = a + "px"), this.DOMelem.style.width = a + "px", this.DOMelem_input.style.width = Math.max(0, a - 19) + "px"
    }, dhtmlXCombo.prototype.enableFilteringMode = function(a, b, c, d) {
        "between" == a ? this._autoDisabled = this._anyPosition = this._filter = !0 : this._filter = convertStringToBoolean(a), b && (this._xml = b, this._autoxml = convertStringToBoolean(d)), convertStringToBoolean(c) && (this._xmlCache = [])
    }, dhtmlXCombo.prototype.setFilteringParam = function(a, b) {
        this._prs || (this._prs = []), this._prs.push([a, b])
    }, dhtmlXCombo.prototype.disable = function(a) {
        var b = convertStringToBoolean(a);
        this._disabled != b && (this._disabled = this.DOMelem_input.disabled = b)
    }, dhtmlXCombo.prototype.readonly = function(a, b) {
        if (this.DOMelem_input.readOnly = !!a, b === !1 || a === !1) this.DOMelem.onkeyup = function() {};
        else {
            var c = this;
            this.DOMelem.onkeyup = function(a) {
                if (a = a || window.event, c._searchTimeout && window.clearTimeout(c._searchTimeout), 9 != a.keyCode && (a.cancelBubble = !0), a.keyCode >= 48 && a.keyCode <= 57 || a.keyCode >= 65 && a.keyCode <= 90) {
                    c._searchText || (c._searchText = ""), c._searchText += String.fromCharCode(a.keyCode);
                    for (var b = 0; b < c.optionsArr.length; b++) {
                        var d = c.optionsArr[b].text;
                        if (0 == d.toString().toUpperCase().indexOf(c._searchText)) {
                            c.selectOption(b);
                            break
                        }
                    }
                    c._searchTimeout = window.setTimeout(function() {
                        c._searchText = ""
                    }, c.readonlyDelay), a.cancelBubble = !0
                }
            }
        }
    }, dhtmlXCombo.prototype.getOption = function(a) {
        for (var b = 0; b < this.optionsArr.length; b++)
            if (this.optionsArr[b].value == a) return this.optionsArr[b];
        return null
    }, dhtmlXCombo.prototype.getOptionByLabel = function(a) {
        for (var b = 0; b < this.optionsArr.length; b++)
            if (this.optionsArr[b].text == a || this.optionsArr[b]._ctext == a) return this.optionsArr[b];
        return null
    }, dhtmlXCombo.prototype.getOptionByIndex = function(a) {
        return this.optionsArr[a]
    }, dhtmlXCombo.prototype.clearAll = function(a) {
        a && this.setComboText(""), this.optionsArr = [], this.redrawOptions(), a && (this._selOption && this._selOption.RedrawHeader(this, !0), this._confirmSelection())
    }, dhtmlXCombo.prototype.deleteOption = function(a) {
        var b = this.getIndexByValue(a);
        b < 0 || (this.optionsArr[b] == this._selOption && (this._selOption = null), this.optionsArr.splice(b, 1), this.redrawOptions())
    }, dhtmlXCombo.prototype.render = function(a) {
        this._skiprender = !convertStringToBoolean(a), this.redrawOptions()
    }, dhtmlXCombo.prototype.updateOption = function(a, b, c, d) {
        var e = this.getOption(a);
        "object" != typeof b && (b = {
            text: c,
            value: b,
            css: d
        }), e.setValue(b), this.redrawOptions()
    }, dhtmlXCombo.prototype.addOption = function(a) {
        args = arguments[0].length && "object" == typeof arguments[0] ? a : [arguments], this.render(!1);
        for (var b = 0; b < args.length; b++) {
            var c = args[b];
            c.length && (c.value = c[0] || "", c.text = c[1] || "", c.css = c[2] || ""), this._addOption(c)
        }
        this.render(!0)
    }, dhtmlXCombo.prototype._addOption = function(a) {
        dOpt = new this._optionObject, this.optionsArr.push(dOpt), dOpt.setValue.apply(dOpt, [a]), this.redrawOptions()
    }, dhtmlXCombo.prototype.getIndexByValue = function(a) {
        for (var b = 0; b < this.optionsArr.length; b++)
            if (this.optionsArr[b].value == a) return b;
        return -1
    }, dhtmlXCombo.prototype.getSelectedValue = function() {
        return this._selOption ? this._selOption.value : null
    }, dhtmlXCombo.prototype.getComboText = function() {
        return this.DOMelem_input.value
    }, dhtmlXCombo.prototype.setComboText = function(a) {
        this.DOMelem_input.value = a
    }, dhtmlXCombo.prototype.setComboValue = function(a) {
        this.setComboText(a);
        for (var b = 0; b < this.optionsArr.length; b++)
            if (this.optionsArr[b].data()[0] == a) return this._skipFocus = !0, this.selectOption(b, null, !0);
        this.DOMelem_hidden_input.value = a
    }, dhtmlXCombo.prototype.getActualValue = function() {
        return this.DOMelem_hidden_input.value
    }, dhtmlXCombo.prototype.getSelectedText = function() {
        return this._selOption ? this._selOption.text : ""
    }, dhtmlXCombo.prototype.getSelectedIndex = function() {
        for (var a = 0; a < this.optionsArr.length; a++)
            if (this.optionsArr[a] == this._selOption) return a;
        return -1
    }, dhtmlXCombo.prototype.setName = function(a) {
        this.DOMelem_hidden_input.name = a, this.DOMelem_hidden_input2 = a.replace(/(\]?)$/, "_new_value$1"), this.name = a
    }, dhtmlXCombo.prototype.show = function(a) {
        this.DOMelem.style.display = convertStringToBoolean(a) ? "" : "none"
    }, dhtmlXCombo.prototype.destructor = function() {
        this.DOMParent.removeChild(this.DOMelem), this.DOMlist.parentNode.removeChild(this.DOMlist), this.DOMlistF && this.DOMlistF.parentNode.removeChild(this.DOMlistF);
        var a = dhx_glbSelectAr;
        this.DOMParent = this.DOMlist = this.DOMlistF = this.DOMelem = 0;
        for (var b = this.DOMlist.combo = this.DOMelem.combo = 0; b < a.length; b++)
            if (a[b] == this) {
                a[b] = null, a.splice(b, 1);
                break
            }
    }, dhtmlXCombo.prototype._createSelf = function(a, b, c, d) {
        if (c.toString().indexOf("%") != -1) {
            var e = this,
                f = parseInt(c) / 100;
            window.setInterval(function() {
                if (a.parentNode) {
                    var b = a.parentNode.offsetWidth * f - 2;
                    b < 0 || b == e._lastTs || e.setSize(e._lastTs = b)
                }
            }, 500), c = parseInt(a.offsetWidth)
        }
        c = parseInt(c || 100), this.ListPosition = "Bottom", this.DOMParent = a, this._inID = null, this.name = b, this._selOption = null, this.optionsArr = [];
        var g = new this._optionObject;
        g.DrawHeader(this, b, c, d), this.DOMlist = document.createElement("DIV"), this.DOMlist.className = "dhx_combo_list " + (dhtmlx.skin ? dhtmlx.skin + "_list" : ""), this.DOMlist.style.width = c - (_isIE, 0) + "px", (_isOpera || _isKHTML) && (this.DOMlist.style.overflow = "auto"), this.DOMlist.style.display = "none", document.body.insertBefore(this.DOMlist, document.body.firstChild), _isIE && (this.DOMlistF = document.createElement("IFRAME"), this.DOMlistF.style.border = "0px", this.DOMlistF.className = "dhx_combo_list", this.DOMlistF.style.width = c - (_isIE, 0) + "px", this.DOMlistF.style.display = "none", this.DOMlistF.src = "javascript:false;", document.body.insertBefore(this.DOMlistF, document.body.firstChild)), this.DOMlist.combo = this.DOMelem.combo = this, this.DOMelem_input.onkeydown = this._onKey, this.DOMelem_input.onkeypress = this._onKeyF, this.DOMelem_input.onblur = this._onBlur, this.DOMelem.onclick = this._toggleSelect, this.DOMlist.onclick = this._selectOption, this.DOMlist.onmousedown = function() {
            this._skipBlur = !0
        }, this.DOMlist.onkeydown = function(a) {
            (a || event).cancelBubble = !0, this.combo.DOMelem_input.onkeydown(a)
        }, this.DOMlist.onmouseover = this._listOver
    }, dhtmlXCombo.prototype._listOver = function(a) {
        a = a || event, a.cancelBubble = !0;
        var b = _isIE ? event.srcElement : a.target,
            c = this.combo;
        if (b.parentNode == c.DOMlist) {
            c._selOption && c._selOption.deselect(), c._tempSel && c._tempSel.deselect();
            for (var d = 0; d < c.DOMlist.childNodes.length && c.DOMlist.childNodes[d] != b; d++);
            var e = c.optionsArr[d];
            c._tempSel = e, c._tempSel.select(), c._autoxml && d + 1 == c._lastLength && c._fetchOptions(d + 1, c._lasttext || "")
        }
    }, dhtmlXCombo.prototype._positList = function() {
        var a = this.getPosition(this.DOMelem);
        "Bottom" == this.ListPosition ? (this.DOMlist.style.top = a[1] + this.DOMelem.offsetHeight - 1 + "px", this.DOMlist.style.left = a[0] + "px") : "Top" == this.ListPosition ? (this.DOMlist.style.top = a[1] - this.DOMlist.offsetHeight + "px", this.DOMlist.style.left = a[0] + "px") : (this.DOMlist.style.top = a[1] + "px", this.DOMlist.style.left = a[0] + this.DOMelem.offsetWidth + "px")
    }, dhtmlXCombo.prototype.getPosition = function(a, b) {
        if (_isIE && _isIE < 8) {
            b || (b = document.body);
            for (var c = a, d = 0, e = 0; c && c != b;) d += c.offsetLeft - c.scrollLeft + c.clientLeft, e += c.offsetTop - c.scrollTop + c.clientTop, c = c.offsetParent;
            return document.documentElement.scrollTop && (e += document.documentElement.scrollTop), document.documentElement.scrollLeft && (d += document.documentElement.scrollLeft), [d, e]
        }
        var f = getOffset(a);
        return [f.left, f.top]
    }, dhtmlXCombo.prototype._correctSelection = function() {
        if ("" != this.getComboText())
            for (var a = 0; a < this.optionsArr.length; a++)
                if (!this.optionsArr[a].isHidden()) return this.selectOption(a, !0, !1);
        this.unSelectOption()
    }, dhtmlXCombo.prototype.selectNext = function(a) {
        for (var b = this.getSelectedIndex() + a; this.optionsArr[b];) {
            if (!this.optionsArr[b].isHidden()) return this.selectOption(b, !1, !1);
            b += a
        }
    }, dhtmlXCombo.prototype._onKeyF = function(a) {
        var b = this.parentNode.combo,
            c = a || event;
        return c.cancelBubble = !0, "13" == c.keyCode || "9" == c.keyCode ? (b._confirmSelection(), b.closeAll()) : "27" == c.keyCode ? (b._resetSelection(), b.closeAll()) : b._activeMode = !0, "13" != c.keyCode && "27" != c.keyCode || (b.callEvent("onKeyPressed", [c.keyCode]), !1)
    }, dhtmlXCombo.prototype._onKey = function(a) {
        var b = this.parentNode.combo;
        (a || event).cancelBubble = !0;
        var c = (a || event).keyCode;
        if (c > 15 && c < 19) return !0;
        if (27 == c) return !0;
        if ("block" == b.DOMlist.style.display || "13" == c || "9" == c || b._filter && !b._filterAny || b.DOMelem.onclick(a || event), "13" != c && "9" != c) {
            if (window.setTimeout(function() {
                    b._onKeyB(c)
                }, 1), "40" == c || "38" == c) return !1
        } else 9 == c && (b._confirmSelection(), b.closeAll(), (a || event).cancelBubble = !1)
    }, dhtmlXCombo.prototype._onKeyB = function(a) {
        if ("40" == a) this.selectNext(1);
        else if ("38" == a) this.selectNext(-1);
        else {
            if (this.callEvent("onKeyPressed", [a]), this._filter) return this.filterSelf(8 == a || 46 == a);
            for (var b = 0; b < this.optionsArr.length; b++)
                if (this.optionsArr[b].data()[1] == this.DOMelem_input.value) return this.selectOption(b, !1, !1), !1;
            this.unSelectOption()
        }
        return !0
    }, dhtmlXCombo.prototype._onBlur = function() {
        var a = this.parentNode._self;
        window.setTimeout(function() {
            return a.DOMlist._skipBlur ? !(a.DOMlist._skipBlur = !1) : (a._skipFocus = !0, a._confirmSelection(), void a.callEvent("onBlur", []))
        }, 100)
    }, dhtmlXCombo.prototype.redrawOptions = function() {
        if (!this._skiprender) {
            for (var a = this.DOMlist.childNodes.length - 1; a >= 0; a--) this.DOMlist.removeChild(this.DOMlist.childNodes[a]);
            for (a = 0; a < this.optionsArr.length; a++) this.DOMlist.appendChild(this.optionsArr[a].render())
        }
    }, dhtmlXCombo.prototype.loadXML = function(a, b) {
        if (this._load = !0, this.callEvent("onXLS", []), this._prs)
            for (var c = 0; c < this._prs.length; c++) a += [getUrlSymbol(a), escape(this._prs[c][0]), "=", escape(this._prs[c][1])].join("");
        if (this._xmlCache && this._xmlCache[a]) this._fillFromXML(this, null, null, null, this._xmlCache[a]), b && b();
        else {
            var d = new dtmlXMLLoaderObject(this._fillFromXML, this, !0, !0);
            b && (d.waitCall = b), d._cPath = a, d.loadXML(a)
        }
    }, dhtmlXCombo.prototype.loadXMLString = function(a) {
        var b = new dtmlXMLLoaderObject(this._fillFromXML, this, !0, !0);
        b.loadXMLString(a)
    }, dhtmlXCombo.prototype._fillFromXML = function(a, b, c, d, e) {
        a._xmlCache && (a._xmlCache[e._cPath] = e);
        var f = e.getXMLTopNode("complete");
        if ("complete" != f.tagName) a._load = !1;
        else {
            var g = e.doXPath("//complete"),
                h = e.doXPath("//option"),
                i = !1;
            a.render(!1), g[0] && g[0].getAttribute("add") ? (a._lastLength += h.length || 1 / 0, i = !0) : (a.clearAll(), a._lastLength = h.length, a._xml && (h && h.length ? a._activeMode && (a._positList(), a.DOMlist.style.display = "block", _isIE && a._IEFix(!0)) : a.closeAll()));
            for (var j = 0; j < h.length; j++) {
                var k = {};
                k.text = h[j].firstChild ? h[j].firstChild.nodeValue : "";
                for (var l = 0; l < h[j].attributes.length; l++) {
                    var m = h[j].attributes[l];
                    m && (k[m.nodeName] = m.nodeValue)
                }
                a._addOption(k)
            }
            a.render(1 != i || !!h.length), a._load && a._load !== !0 ? a.loadXML(a._load) : (a._load = !1, !a._lkmode && a._filter && !a._autoDisabled && a._correctSelection());
            var n = e.doXPath("//option[@selected]");
            n.length && (a._skipFocus = !0, a.selectOption(a.getIndexByValue(n[0].getAttribute("value")), !1, !0)), a.callEvent("onXLE", [])
        }
    }, dhtmlXCombo.prototype.unSelectOption = function() {
        this._selOption && this._selOption.deselect(), this._tempSel && this._tempSel.deselect(), this._tempSel = this._selOption = null
    }, dhtmlXCombo.prototype.confirmValue = function() {
        this._confirmSelection()
    }, dhtmlXCombo.prototype._confirmSelection = function(a, b) {
        var c = this.getComboText();
        if (this.setComboText(""), this.setComboText(c), 0 == arguments.length) {
            var d = this.getOptionByLabel(this.DOMelem_input.value),
                a = d ? d.value : this.DOMelem_input.value,
                b = null == d;
            if (a == this.getActualValue()) return this._skipFocus = !1
        }
        if (!this._skipFocus && !this._disabled) try {
            this.DOMelem_input.focus()
        } catch (a) {}
        this._skipFocus = !1, this.DOMelem_hidden_input.value = a, this.DOMelem_hidden_input2.value = b ? "true" : "false", this.callEvent("onChange", []), this._activeMode = !1
    }, dhtmlXCombo.prototype._resetSelection = function() {
        var a = this.getOption(this.DOMelem_hidden_input.value);
        this.setComboValue(a ? a.data()[0] : this.DOMelem_hidden_input.value), this.setComboText(a ? a.data()[1] : this.DOMelem_hidden_input.value)
    }, dhtmlXCombo.prototype.selectOption = function(a, b, c) {
        arguments.length < 3 && (c = !0), this.unSelectOption();
        var d = this.optionsArr[a];
        if (d) {
            this._selOption = d, this._selOption.select();
            var e = this._selOption.content.offsetTop + this._selOption.content.offsetHeight - this.DOMlist.scrollTop - this.DOMlist.offsetHeight;
            e > 0 && (this.DOMlist.scrollTop += e), e = this.DOMlist.scrollTop - this._selOption.content.offsetTop, e > 0 && (this.DOMlist.scrollTop -= e);
            var f = this._selOption.data();
            if (c && (this.setComboText(f[1]), this._confirmSelection(f[0], !1)), this._autoxml && a + 1 == this._lastLength && this._fetchOptions(a + 1, this._lasttext || ""), b) {
                var g = this.getComboText();
                g != f[1] && (this.setComboText(f[1]), dhtmlXRange(this.DOMelem_input, g.length + 1, f[1].length))
            } else this.setComboText(f[1]);
            this._selOption.RedrawHeader(this), this.callEvent("onSelectionChange", [])
        }
    }, dhtmlXCombo.prototype._selectOption = function(a) {
        (a || event).cancelBubble = !0;
        for (var b = _isIE ? event.srcElement : a.target, c = this.combo; !b._self;)
            if (b = b.parentNode, !b) return;
        for (var d = 0; d < c.DOMlist.childNodes.length && c.DOMlist.childNodes[d] != b; d++);
        c.selectOption(d, !1, !0), c.closeAll(), c.callEvent("onBlur", []), c._activeMode = !1
    }, dhtmlXCombo.prototype.openSelect = function() {
        if (!this._disabled) {
            if (this.closeAll(), this.DOMlist.style.display = "block", this._positList(), this.callEvent("onOpen", []), this._tempSel && this._tempSel.deselect(), this._selOption && this._selOption.select(), this._selOption) {
                var a = this._selOption.content.offsetTop + this._selOption.content.offsetHeight - this.DOMlist.scrollTop - this.DOMlist.offsetHeight;
                a > 0 && (this.DOMlist.scrollTop += a), a = this.DOMlist.scrollTop - this._selOption.content.offsetTop, a > 0 && (this.DOMlist.scrollTop -= a)
            }
            _isIE && this._IEFix(!0), this.DOMelem_input.focus(), this._filter && this.filterSelf()
        }
    }, dhtmlXCombo.prototype._toggleSelect = function(a) {
        var b = this.combo;
        "block" == b.DOMlist.style.display ? b.closeAll() : b.openSelect(), (a || event).cancelBubble = !0
    }, dhtmlXCombo.prototype._fetchOptions = function(a, b) {
        if ("undefined" !== this._currentItensOpt && "undefined" !== this._currentItensOpt.minchar) {
            if (b.length >= this._currentItensOpt.minchar) {
                if ("" == b) return this.closeAll(), this.clearAll();
                var c = this._xml + (this._xml.indexOf("?") != -1 ? "&" : "?") + "pos=" + a + "&mask=" + encodeURIComponent(b);
                this._lasttext = b, this._load ? this._load = c : this.callEvent("onDynXLS", [b, a]) && this.loadXML(c)
            }
        } else {
            if ("" == b) return this.closeAll(), this.clearAll();
            var c = this._xml + (this._xml.indexOf("?") != -1 ? "&" : "?") + "pos=" + a + "&mask=" + encodeURIComponent(b);
            this._lasttext = b, this._load ? this._load = c : this.callEvent("onDynXLS", [b, a]) && this.loadXML(c)
        }
    }, dhtmlXCombo.prototype.disableAutocomplete = function() {
        this._autoDisabled = !0
    }, dhtmlXCombo.prototype.filterSelf = function(a) {
        var b = this.getComboText();
        this._xml && (this._lkmode = a, this._fetchOptions(0, b));
        var c = RegExp("([" + this.filterEntities.join("\\") + "])", "g"),
            b = b.replace(c, "\\$1"),
            d = (this._anyPosition ? "" : "^") + b,
            e = RegExp(d, "i");
        this.filterAny = !1;
        for (var f = 0; f < this.optionsArr.length; f++) {
            var g = e.test(this.optionsArr[f].content ? this.optionsArr[f].data()[1] : this.optionsArr[f].text);
            this.filterAny |= g, this.optionsArr[f].hide(!g)
        }
        this.filterAny ? ("block" != this.DOMlist.style.display && this.openSelect(), _isIE && this._IEFix(!0)) : (this.closeAll(), this._activeMode = !0), a || this._autoDisabled ? this.unSelectOption() : this._correctSelection()
    }, dhtmlXCombo.prototype._IEFix = function(a) {
        this.DOMlistF.style.display = a ? "block" : "none", this.DOMlistF.style.top = this.DOMlist.style.top, this.DOMlistF.style.left = this.DOMlist.style.left, this.DOMlistF.style.width = this.DOMlist.offsetWidth + "px", this.DOMlistF.style.height = this.DOMlist.offsetHeight + "px"
    }, dhtmlXCombo.prototype.closeAll = function() {
        if (window.dhx_glbSelectAr)
            for (var a = 0; a < dhx_glbSelectAr.length; a++) "block" == dhx_glbSelectAr[a].DOMlist.style.display && (dhx_glbSelectAr[a].DOMlist.style.display = "none", _isIE && dhx_glbSelectAr[a]._IEFix(!1)), dhx_glbSelectAr[a]._activeMode = !1
    }, dhtmlXCombo.prototype.changeOptionId = function(a, b) {
        (this.getOption(a) || {}).value = b
    }, dhtmlXCombo_defaultOption = function() {
        this.init()
    }, dhtmlXCombo_defaultOption.prototype.init = function() {
        this.value = null, this.text = "", this.selected = !1, this.css = ""
    }, dhtmlXCombo_defaultOption.prototype.select = function() {
        this.content && (this.content.className = "dhx_selected_option" + (dhtmlx.skin ? " combo_" + dhtmlx.skin + "_sel" : ""))
    }, dhtmlXCombo_defaultOption.prototype.hide = function(a) {
        this.render().style.display = a ? "none" : ""
    }, dhtmlXCombo_defaultOption.prototype.isHidden = function() {
        return "none" == this.render().style.display
    }, dhtmlXCombo_defaultOption.prototype.deselect = function() {
        this.content && this.render(), this.content.className = ""
    }, dhtmlXCombo_defaultOption.prototype.setValue = function(a) {
        this.value = a.value || "", this.text = a.text || "", this.css = a.css || "", this.content = null
    }, dhtmlXCombo_defaultOption.prototype.render = function() {
        return this.content || (this.content = document.createElement("DIV"), this.content._self = this, this.content.style.cssText = "width:100%; overflow:hidden;" + this.css, (_isOpera || _isKHTML) && (this.content.style.padding = "2px 0px 2px 0px"), this.content.innerHTML = this.text, this._ctext = "undefined" != typeof this.content.textContent ? this.content.textContent : this.content.innerText), this.content
    }, dhtmlXCombo_defaultOption.prototype.data = function() {
        if (this.content) return [this.value, this._ctext ? this._ctext : this.text]
    }, dhtmlXCombo_defaultOption.prototype.DrawHeader = function(a, b, c, d) {
        var e = document.createElement("DIV");
        e.style.width = c + "px", e.className = "dhx_combo_box " + (dhtmlx.skin || ""), e._self = a, a.DOMelem = e, this._DrawHeaderInput(a, b, c, d), this._DrawHeaderButton(a, b, c), a.DOMParent.appendChild(a.DOMelem)
    }, dhtmlXCombo_defaultOption.prototype._DrawHeaderInput = function(a, b, c, d) {
        var e = document.createElement("input");
        e.setAttribute("autocomplete", "off"), e.type = "text", e.className = "dhx_combo_input", d && (e.tabIndex = d), e.style.width = c - 19 - ("BackCompat" == document.compatMode ? 0 : 3) + "px", a.DOMelem.appendChild(e), a.DOMelem_input = e, e = document.createElement("input"), e.type = "hidden", e.name = b, a.DOMelem.appendChild(e), a.DOMelem_hidden_input = e, e = document.createElement("input"), e.type = "hidden", e.name = (b || "").replace(/(\]?)$/, "_new_value$1"), e.value = "true", a.DOMelem.appendChild(e), a.DOMelem_hidden_input2 = e
    }, dhtmlXCombo_defaultOption.prototype._DrawHeaderButton = function(a) {
        var b = document.createElement("img");
        b.className = "dhx_combo_img", dhtmlx.image_path && (dhx_globalImgPath = dhtmlx.image_path), b.src = (window.dhx_globalImgPath ? dhx_globalImgPath : "") + "combo_select" + (dhtmlx.skin ? "_" + dhtmlx.skin : "") + ".gif", a.DOMelem.appendChild(b), a.DOMelem_button = b
    }, dhtmlXCombo_defaultOption.prototype.RedrawHeader = function() {}, dhtmlXCombo_optionTypes.default = dhtmlXCombo_defaultOption, dhtmlXCombo.prototype.dhx_Event = function() {
        this.dhx_SeverCatcherPath = "", this.attachEvent = function(a, b, c) {
            if (c = c || this, a = "ev_" + a, !this[a] || !this[a].addEvent) {
                var d = new this.eventCatcher(c);
                d.addEvent(this[a]), this[a] = d
            }
            return a + ":" + this[a].addEvent(b)
        }, this.callEvent = function(a, b) {
            return !this["ev_" + a] || this["ev_" + a].apply(this, b)
        }, this.checkEvent = function(a) {
            return !!this["ev_" + a]
        }, this.eventCatcher = function(a) {
            var b = [],
                c = a,
                d = function(a, b) {
                    var a = a.split(":"),
                        c = "",
                        d = "",
                        e = a[1];
                    "rpc" == a[1] && (c = '<?xml version="1.0"?><methodCall><methodName>' + a[2] + "</methodName><params>", d = "</params></methodCall>", e = b);
                    var f = function() {};
                    return f
                },
                e = function() {
                    if (b) var a = !0;
                    for (var d = 0; d < b.length; d++)
                        if (null != b[d]) var e = b[d].apply(c, arguments),
                            a = a && e;
                    return a
                };
            return e.addEvent = function(a) {
                return "function" != typeof a && (a = a && a.indexOf && 0 == a.indexOf("server:") ? new d(a, c.rpcServer) : eval(a)), !!a && b.push(a) - 1
            }, e.removeEvent = function(a) {
                b[a] = null
            }, e
        }, this.detachEvent = function(a) {
            if (0 != a) {
                var b = a.split(":");
                this[b[0]].removeEvent(b[1])
            }
        }
    },
    function() {
        dhtmlx.extend_api("dhtmlXCombo", {
            _init: function(a) {
                return a.image_path && (dhx_globalImgPath = a.image_path), [a.parent, a.name, a.width || "100%", a.type, a.index]
            },
            filter: "filter_command",
            auto_height: "enableOptionAutoHeight",
            auto_position: "enableOptionAutoPositioning",
            auto_width: "enableOptionAutoWidth",
            xml: "loadXML",
            readonly: "readonly",
            items: "addOption"
        }, {
            filter_command: function(a) {
                "string" == typeof a ? this.enableFilteringMode(!0, a) : this.enableFilteringMode(a)
            }
        })
    }(), dhtmlXCombo_imageOption = function() {
        this.init()
    }, dhtmlXCombo_imageOption.prototype = new dhtmlXCombo_defaultOption, dhtmlXCombo_imageOption.prototype.setValue = function(a) {
        this.value = a.value || "", this.text = a.text || "", this.css = a.css || "", this.img_src = a.img_src || this.getDefImage()
    }, dhtmlXCombo_imageOption.prototype.render = function() {
        if (!this.content) {
            this.content = document.createElement("DIV"), this.content._self = this, this.content.style.cssText = "width:100%; overflow:hidden;white-space:nowrap; " + this.css;
            var a = "";
            "" != this.img_src && (a += '<img src="' + this.img_src + '" style="display:inline-block;vertical-align:middle;"/>'), a += '<div style="display:inline;vertical-align:middle;">' + this.text + "</div>", this.content.innerHTML = a, this._ctext = "undefined" != typeof this.content.textContent ? this.content.textContent : this.content.innerText
        }
        return this.content
    }, dhtmlXCombo_imageOption.prototype.data = function() {
        return [this.value, this._ctext ? this._ctext : this.text, this.img_src]
    }, dhtmlXCombo_imageOption.prototype.DrawHeader = function(a, b, c) {
        var d = document.createElement("DIV");
        d.style.width = c + "px", d.className = "dhx_combo_box", d._self = a, a.DOMelem = d, this._DrawHeaderImage(a, b, c), this._DrawHeaderInput(a, b, c - 19), this._DrawHeaderButton(a, b, c), a.DOMParent.appendChild(a.DOMelem)
    }, dhtmlXCombo_imageOption.prototype._DrawHeaderImage = function(a) {
        var b = document.createElement("img");
        b.className = "dhx_combo_option_img", b.style.visibility = "hidden", a.DOMelem.appendChild(b), a.DOMelem_image = b
    }, dhtmlXCombo_imageOption.prototype.RedrawHeader = function(a, b) {
        a.DOMelem_image.style.visibility = b ? "hidden" : "visible", a.DOMelem_image.src = b ? "" : this.img_src
    }, dhtmlXCombo_imageOption.prototype.getDefImage = function() {
        return ""
    }, dhtmlXCombo.prototype.setDefaultImage = function(a) {
        dhtmlXCombo_imageOption.prototype.getDefImage = function() {
            return a
        }
    }, dhtmlXCombo_optionTypes.image = dhtmlXCombo_imageOption, dhtmlXCombo_checkboxOption = function() {
        this.init()
    }, dhtmlXCombo_checkboxOption.prototype = new dhtmlXCombo_defaultOption, dhtmlXCombo_checkboxOption.prototype.setValue = function(a) {
        this.value = a.value || "", this.text = a.text || "", this.css = a.css || "", this.checked = a.checked || 0
    }, dhtmlXCombo_checkboxOption.prototype.render = function() {
        if (!this.content) {
            this.content = document.createElement("DIV"), this.content._self = this, this.content.style.cssText = "width:100%; overflow:hidden;white-space:nowrap; " + this.css;
            var a = "";
            a += this.checked ? '<input type="checkbox" checked  style="display:inline-block;vertical-align:middle;" />' : '<input type="checkbox" style="display:inline-block;vertical-align:middle;"/>', a += '<div style="display:inline;vertical-align:middle;">' + this.text + "</div>", this.content.innerHTML = a, this._ctext = "undefined" != typeof this.content.textContent ? this.content.textContent : this.content.innerText, this.content.firstChild.onclick = function(a) {
                if (this.parentNode.parentNode.combo.DOMelem_input.focus(), (a || event).cancelBubble = !0, !this.parentNode.parentNode.combo.callEvent("onCheck", [this.parentNode._self.value, this.checked])) return this.checked = !this.checked, !1
            }
        }
        return this.content
    }, dhtmlXCombo_checkboxOption.prototype.data = function() {
        return [this.value, this._ctext ? this._ctext : this.text, this.render().firstChild.checked]
    }, dhtmlXCombo_checkboxOption.prototype.DrawHeader = function(a, b, c) {
        a.DOMelem = document.createElement("DIV"), a.DOMelem.style.width = c + "px", a.DOMelem.className = "dhx_combo_box", a.DOMelem._self = a, this._DrawHeaderCheckbox(a, b, c), this._DrawHeaderInput(a, b, c - 19), this._DrawHeaderButton(a, b, c), a.DOMParent.appendChild(a.DOMelem)
    }, dhtmlXCombo_checkboxOption.prototype._DrawHeaderCheckbox = function(a) {
        var b = document.createElement("input");
        b.type = "checkbox", b.className = "dhx_combo_option_img", b.style.visibility = "hidden", b.onclick = function(c) {
            var d = a.getIndexByValue(a.getActualValue());
            d != -1 && (a.setChecked(d, b.checked), a.callEvent("onCheck", [a.getActualValue(), a.optionsArr[d].content.firstChild.checked])), (c || event).cancelBubble = !0
        }, a.DOMelem.appendChild(b), a.DOMelem_checkbox = b
    }, dhtmlXCombo_checkboxOption.prototype.RedrawHeader = function(a, b) {
        a.DOMelem_checkbox.style.visibility = b ? "hidden" : "", a.DOMelem_checkbox.checked = !b && this.content.firstChild.checked
    }, dhtmlXCombo_optionTypes.checkbox = dhtmlXCombo_checkboxOption, dhtmlXCombo.prototype.getChecked = function() {
        for (var a = [], b = 0; b < this.optionsArr.length; b++) this.optionsArr[b].data()[2] && a.push(this.optionsArr[b].value);
        return a
    }, dhtmlXCombo.prototype.setChecked = function(a, b) {
        this.optionsArr[a].content.firstChild.checked = b !== !1, this._selOption == this.optionsArr[a] && this._selOption.RedrawHeader(this)
    }, dhtmlXCombo.prototype.setCheckedByValue = function(a, b) {
        return this.setChecked(this.getIndexByValue(a), b)
    }, dhtmlXCombo.prototype.enableOptionAutoPositioning = function(a) {
        this.ListAutoPosit || (this.ListAutoPosit = 1), this.attachEvent("onOpen", function() {
            this._setOptionAutoPositioning(a)
        }), this.attachEvent("onXLE", function() {
            this._setOptionAutoPositioning(a)
        })
    }, dhtmlXCombo.prototype._setOptionAutoPositioning = function(a) {
        if ("undefined" != typeof a && !convertStringToBoolean(a)) return this.ListPosition = "Bottom", this.ListAutoPosit = 0, !0;
        var b = this.getPosition(this.DOMelem),
            c = this._getClientHeight() - b[1] - this.DOMelem.offsetHeight,
            d = this.autoHeight ? this.DOMlist.scrollHeight : parseInt(this.DOMlist.offsetHeight);
        this.ListPosition = c < d && b[1] > d ? "Top" : "Bottom", this._positList(), _isIE && this._IEFix(!0)
    }, dhtmlXCombo.prototype._getClientHeight = function() {
        return "CSS1Compat" != document.compatMode || window.opera ? document.body.clientHeight : document.documentElement.clientHeight
    }, dhtmlXCombo.prototype.setOptionWidth = function(a) {
        arguments.length > 0 && (this.DOMlist.style.width = a + "px", this.DOMlistF) && (this.DOMlistF.style.width = a + "px")
    }, dhtmlXCombo.prototype.setOptionHeight = function(a) {
        arguments.length > 0 && (this.DOMlist.style.height = _isIE ? this.DOMlistF.style.height = a + "px" : a + "px", this.DOMlistF && (this.DOMlistF.style.height = this.DOMlist.style.height), this._positList(), _isIE && this._IEFix(!0))
    }, dhtmlXCombo.prototype.enableOptionAutoWidth = function(a) {
        this._listWidthConf || (this._listWidthConf = this.DOMlist.offsetWidth), 0 == arguments.length && (a = 1), convertStringToBoolean(a) ? (this.autoOptionWidth = 1, this.awOnOpen = this.attachEvent("onOpen", function() {
            this._setOptionAutoWidth()
        }), this.awOnXLE = this.attachEvent("onXLE", function() {
            this._setOptionAutoWidth()
        })) : "undefined" != typeof this.awOnOpen && (this.autoOptionWidth = 0, this.detachEvent(this.awOnOpen), this.detachEvent(this.awOnXLE), this.setOptionWidth(this._listWidthConf))
    }, dhtmlXCombo.prototype._setOptionAutoWidth = function() {
        var a = !this.ahOnOpen && this.DOMlist.scrollHeight > this.DOMlist.offsetHeight;
        this.setOptionWidth(1);
        for (var b = this.DOMlist.offsetWidth, c = 0; c < this.optionsArr.length; c++) {
            var d = _isFF ? this.DOMlist.childNodes[c].scrollWidth - 2 : this.DOMlist.childNodes[c].scrollWidth;
            d > b && (b = this.DOMlist.childNodes[c].scrollWidth)
        }
        b += a ? 18 : 0, this.setOptionWidth(this.DOMelem.offsetWidth > b ? this.DOMelem.offsetWidth : b + 2)
    }, dhtmlXCombo.prototype.enableOptionAutoHeight = function(a, b) {
        this._listHeightConf || (this._listHeightConf = "" == this.DOMlist.style.height ? 100 : parseInt(this.DOMlist.style.height)), 0 == arguments.length && (a = 1), this.autoHeight = convertStringToBoolean(a);
        var c = this;
        if (this.autoHeight) {
            var d = function() {
                window.setTimeout(function() {
                    c._setOptionAutoHeight(a, b)
                }, 1)
            };
            this.ahOnOpen = this.attachEvent("onOpen", d), this.awOnOpen || (this.ahOnXLE = this.attachEvent("onXLE", d));
            var e;
            this.ahOnKey = this.attachEvent("onKeyPressed", function() {
                this._filter && (e && window.clearTimeout(e), window.setTimeout(function() {
                    "block" == c.DOMlist.style.display && c._setOptionAutoHeight(a, b)
                }, 50))
            })
        } else "undefined" != typeof this.ahOnOpen && (this.detachEvent(this.ahOnOpen), this.ahOnXLE && this.detachEvent(this.ahOnXLE), this.ahOnKey && this.detachEvent(this.ahOnKey), this.setOptionHeight(this._listHeightConf))
    }, dhtmlXCombo.prototype._setOptionAutoHeight = function(a, b) {
        if (convertStringToBoolean(a)) {
            this.setOptionHeight(1);
            var c = 0;
            this.optionsArr.length > 0 ? (c = this.DOMlist.scrollHeight > this.DOMlist.offsetHeight ? this.DOMlist.scrollHeight + 2 : this.DOMlist.offsetHeight, arguments.length > 1 && b && (b = parseInt(b), c = c > b ? b : c), this.setOptionHeight(c)) : this.DOMlist.style.display = "none"
        }
    }, dhtmlXCombo.prototype.attachChildCombo = function(a, b) {
        this._child_combos || (this._child_combos = []), this._has_childen = 1, this._child_combos[this._child_combos.length] = a, a.show(0);
        var c = this,
            d = arguments.length;
        this.attachEvent("onChange", function() {
            for (var e = 0; e < c._child_combos.length; e++) c._child_combos[e] == a && (a.show(1), a.callEvent("onMasterChange", [c.getActualValue(), c]));
            "" == c.getActualValue() ? c.showSubCombo(c, 0) : a._xml ? (1 == d && (b = a._xml), a._xml = c.deleteParentVariable(b), a._xml += (a._xml.indexOf("?") != -1 ? "&" : "?") + "parent=" + encodeURIComponent(c.getActualValue())) : b && (a.clearAll(!0), a.loadXML(b + (b.indexOf("?") != -1 ? "&" : "?") + "parent=" + encodeURIComponent(c.getActualValue())))
        })
    }, dhtmlXCombo.prototype.setAutoSubCombo = function(a, b) {
        if (1 == arguments.length && (b = "subcombo"), this._parentCombo) c = new dhtmlXCombo(this._parentCombo.DOMParent, b, this._parentCombo.DOMelem.style.width), c._parentCombo = this._parentCombo;
        else {
            var c = new dhtmlXCombo(this.DOMParent, b, this.DOMelem.style.width);
            c._parentCombo = this
        }
        return this._filter && (c._filter = 1), this._xml && (c._xml = arguments.length > 0 ? a : this._xml, a = c._xml, c._autoxml = this._autoxml, this._xmlCache) && (c._xmlCache = []), this.attachChildCombo(c, a), c
    }, dhtmlXCombo.prototype.detachChildCombo = function(a) {
        for (var b = 0; b < this._child_combos.length; b++) this._child_combos.splice(b, 1);
        a.show(1)
    }, dhtmlXCombo.prototype.showSubCombo = function(a, b) {
        if (a._child_combos)
            for (var c = 0; c < a._child_combos.length; c++) a._child_combos[c].show(b), a.showSubCombo(a._child_combos[c], 0)
    }, dhtmlXCombo.prototype.deleteParentVariable = function(a) {
        return a = a.replace(/parent\=[^&]*/g, "").replace(/\?\&/, "?")
    }, dataProcessor.prototype = {
        setTransactionMode: function(a, b) {
            this._tMode = a, this._tSend = b
        },
        escape: function(a) {
            return this._utf ? encodeURIComponent(a) : escape(a)
        },
        enableUTFencoding: function(a) {
            this._utf = convertStringToBoolean(a)
        },
        setDataColumns: function(a) {
            this._columns = "string" == typeof a ? a.split(",") : a
        },
        getSyncState: function() {
            return !this.updatedRows.length
        },
        enableDataNames: function(a) {
            this._endnm = convertStringToBoolean(a)
        },
        enablePartialDataSend: function(a) {
            this._changed = convertStringToBoolean(a)
        },
        setUpdateMode: function(a, b) {
            this.autoUpdate = "cell" == a, this.updateMode = a, this.dnd = b
        },
        ignore: function(a, b) {
            this._silent_mode = !0, a.call(b || window), this._silent_mode = !1
        },
        setUpdated: function(a, b, c) {
            if (!this._silent_mode) {
                var d = this.findRow(a),
                    c = c || "updated",
                    e = this.obj.getUserData(a, this.action_param);
                e && "updated" == c && (c = e), b ? (this.set_invalid(a, !1), this.updatedRows[d] = a, this.obj.setUserData(a, this.action_param, c), this._in_progress[a] && (this._in_progress[a] = "wait")) : this.is_invalid(a) || (this.updatedRows.splice(d, 1), this.obj.setUserData(a, this.action_param, "")), b || this._clearUpdateFlag(a), this.markRow(a, b, c), b && this.autoUpdate && this.sendData(a)
            }
        },
        _clearUpdateFlag: function() {},
        markRow: function(a, b, c) {
            var d = "",
                e = this.is_invalid(a);
            if (e && (d = this.styles[e], b = !0), this.callEvent("onRowMark", [a, b, c, e]) && (d = this.styles[b ? c : "clear"] + d, this.obj[this._methods[0]](a, d), e && e.details)) {
                d += this.styles[e + "_cell"];
                for (var f = 0; f < e.details.length; f++) e.details[f] && this.obj[this._methods[1]](a, f, d)
            }
        },
        getState: function(a) {
            return this.obj.getUserData(a, this.action_param)
        },
        is_invalid: function(a) {
            return this._invalid[a]
        },
        set_invalid: function(a, b, c) {
            c && (b = {
                value: b,
                details: c,
                toString: function() {
                    return this.value.toString()
                }
            }), this._invalid[a] = b
        },
        checkBeforeUpdate: function() {
            return !0
        },
        sendData: function(a) {
            if (!this._waitMode || "tree" != this.obj.mytype && !this.obj._h2) {
                if (this.obj.editStop && this.obj.editStop(), "undefined" == typeof a || this._tSend) return this.sendAllData();
                if (this._in_progress[a]) return !1;
                if (this.messages = [], !this.checkBeforeUpdate(a) && this.callEvent("onValidationError", [a, this.messages])) return !1;
                this._beforeSendData(this._getRowData(a), a)
            }
        },
        _beforeSendData: function(a, b) {
            return !!this.callEvent("onBeforeUpdate", [b, this.getState(b), a]) && void this._sendData(a, b)
        },
        serialize: function(a, b) {
            if ("string" == typeof a) return a;
            if ("undefined" != typeof b) return this.serialize_one(a, "");
            var c, d = [],
                e = [];
            for (c in a) a.hasOwnProperty(c) && (d.push(this.serialize_one(a[c], c + this.post_delim)), e.push(c));
            return d.push("ids=" + this.escape(e.join(","))), dhtmlx.security_key && d.push("dhx_security=" + dhtmlx.security_key), d.join("&")
        },
        serialize_one: function(a, b) {
            if ("string" == typeof a) return a;
            var c, d = [];
            for (c in a) a.hasOwnProperty(c) && d.push(this.escape((b || "") + c) + "=" + this.escape(a[c]));
            return d.join("&")
        },
        _sendData: function(a, b) {
            if (a) {
                if (!this.callEvent("onBeforeDataSending", b ? [b, this.getState(b), a] : [null, null, a])) return !1;
                b && (this._in_progress[b] = (new Date).valueOf());
                var c = new dtmlXMLLoaderObject(this.afterUpdate, this, !0),
                    d = this.serverProcessor + (this._user ? getUrlSymbol(this.serverProcessor) + ["dhx_user=" + this._user, "dhx_version=" + this.obj.getUserData(0, "version")].join("&") : "");
                "POST" != this._tMode ? c.loadXML(d + (d.indexOf("?") != -1 ? "&" : "?") + this.serialize(a, b)) : c.loadXML(d, !0, this.serialize(a, b)), this._waitMode++
            }
        },
        sendAllData: function() {
            if (this.updatedRows.length) {
                this.messages = [];
                for (var a = !0, b = 0; b < this.updatedRows.length; b++) a &= this.checkBeforeUpdate(this.updatedRows[b]);
                if (!a && !this.callEvent("onValidationError", ["", this.messages])) return !1;
                if (this._tSend) this._sendData(this._getAllData());
                else
                    for (b = 0; b < this.updatedRows.length && (this._in_progress[this.updatedRows[b]] || this.is_invalid(this.updatedRows[b]) || (this._beforeSendData(this._getRowData(this.updatedRows[b]), this.updatedRows[b]), !this._waitMode || "tree" != this.obj.mytype && !this.obj._h2)); b++);
            }
        },
        _getAllData: function() {
            for (var a = {}, b = !1, c = 0; c < this.updatedRows.length; c++) {
                var d = this.updatedRows[c];
                !this._in_progress[d] && !this.is_invalid(d) && this.callEvent("onBeforeUpdate", [d, this.getState(d)]) && (a[d] = this._getRowData(d, d + this.post_delim), b = !0, this._in_progress[d] = (new Date).valueOf())
            }
            return b ? a : null
        },
        setVerificator: function(a, b) {
            this.mandatoryFields[a] = b || function(a) {
                return "" != a
            }
        },
        clearVerificator: function(a) {
            this.mandatoryFields[a] = !1
        },
        findRow: function(a) {
            for (var b = 0, b = 0; b < this.updatedRows.length && a != this.updatedRows[b]; b++);
            return b
        },
        defineAction: function(a, b) {
            this._uActions || (this._uActions = []), this._uActions[a] = b
        },
        afterUpdateCallback: function(a, b, c, d) {
            var e = a,
                f = "error" != c && "invalid" != c;
            if (f || this.set_invalid(a, c), this._uActions && this._uActions[c] && !this._uActions[c](d)) return delete this._in_progress[e];
            "wait" != this._in_progress[e] && this.setUpdated(a, !1);
            var g = a;
            switch (c) {
                case "inserted":
                case "insert":
                    b != a && (this.obj[this._methods[2]](a, b), a = b);
                    break;
                case "delete":
                case "deleted":
                    return this.obj.setUserData(a, this.action_param, "true_deleted"), this.obj[this._methods[3]](a), delete this._in_progress[e], this.callEvent("onAfterUpdate", [a, c, b, d])
            }
            "wait" != this._in_progress[e] ? (f && this.obj.setUserData(a, this.action_param, ""), delete this._in_progress[e]) : (delete this._in_progress[e], this.setUpdated(b, !0, this.obj.getUserData(a, this.action_param))), this.callEvent("onAfterUpdate", [g, c, b, d])
        },
        afterUpdate: function(a, b, c, d, e) {
            if (e.getXMLTopNode("data"), e.xmlDoc.responseXML) {
                for (var f = e.doXPath("//data/action"), g = 0; g < f.length; g++) {
                    var h = f[g],
                        i = h.getAttribute("type"),
                        j = h.getAttribute("sid"),
                        k = h.getAttribute("tid");
                    a.afterUpdateCallback(j, k, i, h)
                }
                a.finalizeUpdate()
            }
        },
        finalizeUpdate: function() {
            this._waitMode && this._waitMode--, ("tree" == this.obj.mytype || this.obj._h2) && this.updatedRows.length && this.sendData(), this.callEvent("onAfterUpdateFinish", []), this.updatedRows.length || this.callEvent("onFullSync", [])
        },
        init: function(a) {
            this.obj = a, this.obj._dp_init && this.obj._dp_init(this)
        },
        setOnAfterUpdate: function(a) {
            this.attachEvent("onAfterUpdate", a)
        },
        enableDebug: function() {},
        setOnBeforeUpdateHandler: function(a) {
            this.attachEvent("onBeforeDataSending", a)
        },
        setAutoUpdate: function(a, b) {
            a = a || 2e3, this._user = b || (new Date).valueOf(), this._need_update = !1, this._loader = null, this._update_busy = !1, this.attachEvent("onAfterUpdate", function(a, b, c, d) {
                this.afterAutoUpdate(a, b, c, d)
            }), this.attachEvent("onFullSync", function() {
                this.fullSync()
            });
            var c = this;
            window.setInterval(function() {
                c.loadUpdate()
            }, a)
        },
        afterAutoUpdate: function(a, b) {
            return "collision" != b || (this._need_update = !0, !1)
        },
        fullSync: function() {
            return 1 == this._need_update && (this._need_update = !1, this.loadUpdate()), !0
        },
        getUpdates: function(a, b) {
            return !this._update_busy && (this._update_busy = !0, this._loader = this._loader || new dtmlXMLLoaderObject(!0), this._loader.async = !0, this._loader.waitCall = b, void this._loader.loadXML(a))
        },
        _v: function(a) {
            return a.firstChild ? a.firstChild.nodeValue : ""
        },
        _a: function(a) {
            for (var b = [], c = 0; c < a.length; c++) b[c] = this._v(a[c]);
            return b
        },
        loadUpdate: function() {
            var a = this,
                b = this.obj.getUserData(0, "version"),
                c = this.serverProcessor + getUrlSymbol(this.serverProcessor) + ["dhx_user=" + this._user, "dhx_version=" + b].join("&"),
                c = c.replace("editing=true&", "");
            this.getUpdates(c, function() {
                var b = a._loader.doXPath("//userdata");
                a.obj.setUserData(0, "version", a._v(b[0]));
                var c = a._loader.doXPath("//update");
                if (c.length) {
                    a._silent_mode = !0;
                    for (var d = 0; d < c.length; d++) {
                        var e = c[d].getAttribute("status"),
                            f = c[d].getAttribute("id"),
                            g = c[d].getAttribute("parent");
                        switch (e) {
                            case "inserted":
                                a.callEvent("insertCallback", [c[d], f, g]);
                                break;
                            case "updated":
                                a.callEvent("updateCallback", [c[d], f, g]);
                                break;
                            case "deleted":
                                a.callEvent("deleteCallback", [c[d], f, g])
                        }
                    }
                    a._silent_mode = !1
                }
                a._update_busy = !1, a = null
            })
        }
    },
    function() {
        dhtmlx.extend_api("dhtmlXEditor", {
            _init: function(a) {
                return [a.parent, a.skin]
            },
            content: "setContent"
        }, {})
    }(), dhtmlXEditor.prototype.unload = function() {
        if (this._isToolbar) this._unloadExtModule();
        else
            for (; this.base.childNodes[0].childNodes.length > 0;) this.base.childNodes[0].childNodes[0].tagName && "a" == String(this.base.childNodes[0].childNodes[0].tagName).toLowerCase() && (this.base.childNodes[0].childNodes[0].childNodes[0].onclick = null, this.base.childNodes[0].childNodes[0].childNodes[0].onmousedown = null, this.base.childNodes[0].childNodes[0].removeChild(this.base.childNodes[0].childNodes[0].childNodes[0])), this.base.childNodes[0].removeChild(this.base.childNodes[0].childNodes[0]);
        for (this.tbData = this.base.childNodes[0].onselectstart = null, this.detachAllEvents(), _isIE ? this.editor.onreadystatechange = null : this.editor.onload = null, this.editor.parentNode.removeChild(this.editor), this.edWin = this.edDoc = this.editor = this.editor.onunload = null, this.base._dhxContDestruct(), this.base._idd = null, this.base.name = null; this.base.childNodes.length > 0;) this.base.removeChild(this.base.childNodes[0]);
        this.unload = this.isReadonly = this.setReadonly = this.setContentHTML = this.setContent = this.getContent = this.getSelectionBounds = this.showInfo = this.detachAllEvents = this.detachEvent = this.eventCatcher = this.checkEvent = this.callEvent = this.attachEvent = this.clearFormatting = this.applyUnderscore = this.applyItalic = this.applyBold = this.runCommand = this.setSizes = this.init = this.setIconsPath = this._doOnUnload = this._doOnResize = this._prepareContent = this._focus = this._ev = this._ajaxOnLoad = this.iconsPath = this.skin = this._resizeTMTime = this._resizeTM = this._isToolbar = this.cBlock = this.base = null
    }, dhtmlXEditor.prototype.setReadonly = function(a) {
        this._roMode = a === !0, this._prepareContent(!0, this._roMode), this.cBlock.style.display = this._roMode ? "" : "none"
    }, dhtmlXEditor.prototype.isReadonly = function() {
        return this._roMode || !1
    }, dhtmlXEditor.prototype.initDhtmlxToolbar = function() {
        this.tb = this.base.attachToolbar(), this.tb.setSkin(this.skin), "dhx_skyblue" == this.skin && (this.tb.base.style.borderLeft = "none", this.tb.base.style.borderRight = "none", this.tb.base.style.top = "-1px"), this.setSizes(), this.tb.setIconsPath(this.iconsPath + "dhxeditor_" + this.skin + "/"), this._availFonts = "Arial,Arial Narrow,Comic Sans MS,Courier,Georgia,Impact,Tahoma,Times New Roman,Verdana".split(","), this._initFont = this._availFonts[0], this._xmlFonts = "";
        for (var a = 0; a < this._availFonts.length; a++) {
            var b = String(this._availFonts[a]).replace(/\s/g, "_");
            this._xmlFonts += '<item type="button" id="applyFontFamily:' + b + '"><itemText><![CDATA[<img src="' + this.tb.imagePath + "font_" + String(b).toLowerCase() + '.gif" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]></itemText></item>'
        }
        this._availSizes = {
            1: "8pt",
            2: "10pt",
            3: "12pt",
            4: "14pt",
            5: "18pt",
            6: "24pt",
            7: "36pt"
        }, this._xmlSizes = "";
        for (var c in this._availSizes) this._xmlSizes += '<item type="button" id="applyFontSize:' + c + ":" + this._availSizes[c] + '" text="' + this._availSizes[c] + '"/>';
        this.tbXML = '<toolbar><item id="applyH1" type="buttonTwoState" img="h1.gif" imgdis="h4_dis.gif" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.gif" imgdis="h4_dis.gif" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.gif" imgdis="h4_dis.gif" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.gif" imgdis="h4_dis.gif" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.gif" imgdis="bold_dis.gif" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.gif" imgdis="italic_dis.gif" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.gif" imgdis="underline_dis.gif" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.gif" imgdis="strike_dis.gif" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.gif" imgdis="align_left_dis.gif" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.gif" imgdis="align_center_dis.gif" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.gif" imgdis="align_right_dis.gif" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.gif" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.gif" imgdis="script_sub.gif" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.gif" imgdis="script_super_dis.gif" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.gif" imgdis="list_number_dis.gif" title="Number List"/><item id="createBulList" type="button" img="list_bullet.gif" imgdis="list_bullet_dis.gif" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.gif" imgdis="indent_inc_dis.gif" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.gif" imgdis="indent_dec_dis.gif" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.gif" title="Clear Formatting"/></toolbar>', this.tb.loadXMLString(this.tbXML), this._checkAlign = function(a) {
            this.tb.setItemState("alignCenter", !1), this.tb.setItemState("alignRight", !1), this.tb.setItemState("alignJustify", !1), this.tb.setItemState("alignLeft", !1), a && this.tb.setItemState(a, !0)
        }, this._checkH = function(a) {
            this.tb.setItemState("applyH1", !1), this.tb.setItemState("applyH2", !1), this.tb.setItemState("applyH3", !1), this.tb.setItemState("applyH4", !1), a && this.tb.setItemState(a, !0)
        }, this._doOnFocusChanged = function(a) {
            if (a.h1 || a.h2 || a.h3 || a.h4) this.tb.setItemState("applyBold", !1);
            else {
                var b = String(a.fontWeight).search(/bold/i) != -1 || Number(a.fontWeight) >= 700;
                this.tb.setItemState("applyBold", b)
            }
            var c = "alignLeft";
            String(a.textAlign).search(/center/) != -1 && (c = "alignCenter"), String(a.textAlign).search(/right/) != -1 && (c = "alignRight"), String(a.textAlign).search(/justify/) != -1 && (c = "alignJustify"), this.tb.setItemState(c, !0), this._checkAlign(c), this.tb.setItemState("applyH1", a.h1), this.tb.setItemState("applyH2", a.h2), this.tb.setItemState("applyH3", a.h3), this.tb.setItemState("applyH4", a.h4), window._KHTMLrv && (a.sub = "sub" == a.vAlign, a.sup = "super" == a.vAlign), this.tb.setItemState("applyItalic", "italic" == a.fontStyle), this.tb.setItemState("applyStrikethrough", a.del), this.tb.setItemState("applySub", a.sub), this.tb.setItemState("applySuper", a.sup), this.tb.setItemState("applyUnderscore", a.u)
        }, this._doOnToolbarClick = function(a) {
            var b = String(a).split(":");
            null != this[b[0]] && "function" == typeof this[b[0]] && (this[b[0]](b[1]), this.callEvent("onToolbarClick", [a]))
        }, this._doOnStateChange = function(a) {
            switch (this[a](), a) {
                case "alignLeft":
                case "alignCenter":
                case "alignRight":
                case "alignJustify":
                    this._checkAlign(a);
                    break;
                case "applyH1":
                case "applyH2":
                case "applyH3":
                case "applyH4":
                    this._checkH(a)
            }
            this.callEvent("onToolbarClick", [a])
        }, this._doOnBeforeStateChange = function(a, b) {
            return "alignLeft" != a && "alignCenter" != a && "alignRight" != a && "alignJustify" != a || 1 != b
        };
        var d = this;
        this.tb.attachEvent("onClick", function(a) {
            d._doOnToolbarClick(a)
        }), this.tb.attachEvent("onStateChange", function(a, b) {
            d._doOnStateChange(a, b)
        }), this.tb.attachEvent("onBeforeStateChange", function(a, b) {
            return d._doOnBeforeStateChange(a, b)
        }), this.applyBold = function() {
            this.runCommand("Bold")
        }, this.applyItalic = function() {
            this.runCommand("Italic")
        }, this.applyUnderscore = function() {
            this.runCommand("Underline")
        }, this.applyStrikethrough = function() {
            this.runCommand("StrikeThrough")
        }, this.alignLeft = function() {
            this.runCommand("JustifyLeft")
        }, this.alignRight = function() {
            this.runCommand("JustifyRight")
        }, this.alignCenter = function() {
            this.runCommand("JustifyCenter")
        }, this.alignJustify = function() {
            this.runCommand("JustifyFull")
        }, this.applySub = function() {
            this.runCommand("Subscript")
        }, this.applySuper = function() {
            this.runCommand("Superscript")
        }, this.applyH1 = function() {
            this.runCommand("FormatBlock", "<H1>")
        }, this.applyH2 = function() {
            this.runCommand("FormatBlock", "<H2>")
        }, this.applyH3 = function() {
            this.runCommand("FormatBlock", "<H3>")
        }, this.applyH4 = function() {
            this.runCommand("FormatBlock", "<H4>")
        }, this.createNumList = function() {
            this.runCommand("InsertOrderedList")
        }, this.createBulList = function() {
            this.runCommand("InsertUnorderedList")
        }, this.increaseIndent = function() {
            this.runCommand("Indent")
        }, this.decreaseIndent = function() {
            this.runCommand("Outdent")
        }, this.clearFormatting = function() {
            this.runCommand("RemoveFormat"), this.tb.setItemState("applyBold", !1), this.tb.setItemState("applyItalic", !1), this.tb.setItemState("applyStrikethrough", !1), this.tb.setItemState("applySub", !1), this.tb.setItemState("applySuper", !1), this.tb.setItemState("applyUnderscore", !1)
        }, this.getParentByTag = function(a, b) {
            var b = b.toLowerCase(),
                c = a;
            do
                if ("" == b || c.nodeName.toLowerCase() == b) return c;
            while (c = c.parentNode);
            return a
        }, this.isStyleProperty = function(a, b, c, d) {
            var b = b.toLowerCase(),
                e = a;
            do
                if (e.nodeName.toLowerCase() == b && e.style[c] == d) return !0;
            while (e = e.parentNode);
            return !1
        }, this.setStyleProperty = function(a, b) {
            this.style[b] = !1;
            var c = this.getParentByTag(a, b);
            c && c.tagName.toLowerCase() == b && (this.style[b] = !0), "del" == b && this.getParentByTag(a, "strike") && "strike" == this.getParentByTag(a, "strike").tagName.toLowerCase() && (this.style.del = !0)
        }, this._unloadExtModule = function() {
            this.tb.unload(), this.setStyleProperty = this.isStyleProperty = this.getParentByTag = this.clearFormatting = this.decreaseIndent = this.increaseIndent = this.createBulList = this.createNumList = this.applyH4 = this.applyH3 = this.applyH2 = this.applyH1 = this.applySuper = this.applySub = this.alignJustify = this.alignCenter = this.alignRight = this.alignLeft = this.applyStrikethrough = this.applyUnderscore = this.applyItalic = this.applyBold = this._doOnBeforeStateChange = this._doOnStateChange = this._doOnToolbarClick = this._doOnFocusChanged = this._checkH = this._checkAlign = this.tbXML = this._xmlSizes = this._availSizes = this._xmlFonts = this._initFont = this._availFonts = this.tb = null
        }
    }, dhtmlXForm.prototype.getInput = function(a) {
        return this.doWithItem(a, "getInput")
    }, dhtmlXForm.prototype.getSelect = function(a) {
        return this.doWithItem(a, "getSelect")
    }, dhtmlXForm.prototype.items = {}, dhtmlXForm.prototype.items.checkbox = {
        render: function(a, b) {
            a._type = "ch", a._enabled = !0, a._checked = !1, a._value = "undefined" == typeof b.value ? null : String(b.value), a._ro = 1 == b.readonly, b._autoInputWidth !== !1 && (b.inputWidth = 14), this.doAddLabel(a, b), this.doAddInput(a, b, "INPUT", "TEXT", !0, !0, "dhxform_textarea"), a.childNodes[a._ll ? 1 : 0].className += " dhxform_img_node";
            var c = document.createElement("DIV");
            return c.className = "dhxform_img chbx0", a.appendChild(c), isNaN(b.inputLeft) || (a.childNodes[a._ll ? 1 : 0].style.left = parseInt(b.inputLeft) + "px"), isNaN(b.inputTop) || (a.childNodes[a._ll ? 1 : 0].style.top = parseInt(b.inputTop) + "px"), a.childNodes[a._ll ? 1 : 0].appendChild(c), a.childNodes[a._ll ? 1 : 0].firstChild.value = String(b.value), a._updateImgNode = function(a, b) {
                var c = a.childNodes[a._ll ? 1 : 0].lastChild;
                c.className = b ? c.className.replace(/dhxform_img/gi, "dhxform_actv_c") : c.className.replace(/dhxform_actv_c/gi, "dhxform_img"), a = c = null
            }, a._doOnFocus = function(a) {
                a.getForm().callEvent("onFocus", [a._idd])
            }, a._doOnBlur = function(a) {
                a.getForm().callEvent("onBlur", [a._idd])
            }, a._doOnKeyUpDown = function(a, b) {
                this.callEvent(a, [this.childNodes[this._ll ? 0 : 1].childNodes[0], b, this._idd])
            }, 1 == b.checked && this.check(a), 1 == b.hidden && this.hide(a), 1 == b.disabled && this.userDisable(a), this.doAttachEvents(a), this
        },
        destruct: function(a) {
            a._doOnFocus = a._doOnBlur = a._updateImgNode = null, this.doUnloadNestedLists(a), this.doDestruct(a)
        },
        doAddLabel: function(a, b) {
            var c = document.createElement("DIV");
            c.className = "dhxform_label " + b.labelAlign, 1 == b.wrap && (c.style.whiteSpace = "normal"), a._ll ? a.insertBefore(c, a.firstChild) : a.appendChild(c), "undefined" != typeof b.tooltip && (c.title = b.tooltip), c.innerHTML = "<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' " + (_dhxForm_isIPad ? "ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' " : "") + "role='link' tabindex='0'>" + b.label + (b.info ? "<span class='dhxform_info'>[?]</span>" : "") + (a._required ? "<span class='dhxform_item_required'>*</span>" : "") + "</div>",
                isNaN(b.labelWidth) || (c.firstChild.style.width = parseInt(b.labelWidth) + "px"), isNaN(b.labelHeight) || (c.firstChild.style.height = parseInt(b.labelHeight) + "px"), isNaN(b.labelLeft) || (c.style.left = parseInt(b.labelLeft) + "px"), isNaN(b.labelTop) || (c.style.top = parseInt(b.labelTop) + "px")
        },
        doAddInput: function(a, b, c, d, e, f, g) {
            var h = document.createElement("DIV");
            h.className = "dhxform_control", a._ll ? a.appendChild(h) : a.insertBefore(h, a.firstChild);
            var i = document.createElement(c);
            i.className = g, i.name = a._idd, i._idd = a._idd, i.id = b.uid, "string" == typeof d && (i.type = d), "INPUT" != c && "TEXTAREA" != c || (i.onkeyup = function(b) {
                b = b || event, a.callEvent("onKeyUp", [this, b, this._idd])
            }, i.onkeydown = function(b) {
                b = b || event, a.callEvent("onKeyDown", [this, b, this._idd])
            }), h.appendChild(i), b.readonly && this.setReadonly(a, !0), 1 == b.hidden && this.hide(a), 1 == b.disabled && this.userDisable(a), e && (isNaN(b.inputLeft) || (h.style.left = parseInt(b.inputLeft) + "px"), isNaN(b.inputTop) || (h.style.top = parseInt(b.inputTop) + "px"));
            var j = "",
                k = !1;
            if (f && (isNaN(b.inputWidth) || (j += "width:" + parseInt(b.inputWidth) + "px;", k = !0), isNaN(b.inputHeight) || (j += "height:" + parseInt(b.inputHeight) + "px;")), "string" == typeof b.style && (j += b.style), i.style.cssText = j, b.maxLength && i.setAttribute("maxLength", b.maxLength), b.connector && i.setAttribute("connector", b.connector), k) {
                var l = parseInt(i.style.width),
                    m = _isFF || _isChrome || _isIE ? i.clientWidth : i.offsetWidth;
                m > l && (i.style.width = l + (l - m) + "px")
            }
            if ("object" == typeof b.note) {
                var n = document.createElement("DIV");
                n.className = "dhxform_note", n.style.width = (isNaN(b.note.width) ? i.offsetWidth : parseInt(b.note.width)) + "px", n._w = b.note.width, n.innerHTML = b.note.text, h.appendChild(n), n = null
            }
        },
        doUnloadNestedLists: function(a) {
            if (a._list) {
                for (var b = 0; b < a._list.length; b++) a._list[b].unload(), a._list[b] = null, a._listObj[b] = null, a._listBase[b].parentNode.removeChild(a._listBase[b]), a._listBase[b] = null;
                a._list = null, a._listObj = null, a._listBase = null
            }
        },
        doDestruct: function(a) {
            for (a.callEvent = null, a.checkEvent = null, a.getForm = null, a._autoCheck = null, a._checked = null, a._enabled = null, a._idd = null, a._type = null, a._value = null, a._group = null, a.onselectstart = null, a.childNodes[a._ll ? 1 : 0].onmousedown = null, a.childNodes[a._ll ? 1 : 0].ontouchstart = null, a.childNodes[a._ll ? 0 : 1].onmousedown = null, a.childNodes[a._ll ? 0 : 1].ontouchstart = null, a.childNodes[a._ll ? 0 : 1].childNodes[0].onfocus = null, a.childNodes[a._ll ? 0 : 1].childNodes[0].onblur = null, a.childNodes[a._ll ? 0 : 1].childNodes[0].onkeypress = null, a.childNodes[a._ll ? 0 : 1].childNodes[0].onkeyup = null, a.childNodes[a._ll ? 0 : 1].childNodes[0].onkeydown = null, a.childNodes[a._ll ? 0 : 1].childNodes[0].onmousedown = null, a.childNodes[a._ll ? 0 : 1].childNodes[0].ontouchstart = null, a.childNodes[a._ll ? 0 : 1].removeChild(a.childNodes[a._ll ? 0 : 1].childNodes[0]); a.childNodes.length > 0;) a.removeChild(a.childNodes[0]);
            a.parentNode.removeChild(a), a = null
        },
        doAttachEvents: function(a) {
            var b = this;
            a.childNodes[a._ll ? 1 : 0][_dhxForm_isIPad ? "ontouchstart" : "onmousedown"] = function(a) {
                a = a || event, a.preventDefault && a.preventDefault();
                var c = a.target || a.srcElement;
                return !this.parentNode._enabled || this.parentNode._ro || "undefined" != typeof c.className && "dhxform_note" == c.className ? (a.cancelBubble = !0, a.returnValue = !1) : void b.doClick(this.parentNode)
            }, a.childNodes[a._ll ? 0 : 1].childNodes[0][_dhxForm_isIPad ? "ontouchstart" : "onmousedown"] = function(a) {
                if (a = a || event, a.preventDefault && a.preventDefault(), !this.parentNode.parentNode._enabled) return a.cancelBubble = !0, a.returnValue = !1;
                var c = a.target || a.srcElement;
                return "undefined" != typeof c.className && "dhxform_info" == c.className ? (this.parentNode.parentNode.callEvent("onInfo", [this.parentNode.parentNode._idd]), a.cancelBubble = !0, a.returnValue = !1) : void b.doClick(this.parentNode.parentNode)
            }
        },
        doClick: function(a) {
            a.childNodes[a._ll ? 0 : 1].childNodes[0].focus(), a._enabled && !a._ro && !(a.checkEvent("onBeforeChange") && a.callEvent("onBeforeChange", [a._idd, a._value, a._checked]) !== !0) && (this.setChecked(a, !a._checked), a._autoCheck(), a.callEvent("onChange", [a._idd, a._value, a._checked]))
        },
        doCheckValue: function(a) {
            a._checked && a._enabled ? a.childNodes[a._ll ? 1 : 0].firstChild.setAttribute("name", String(a._idd)) : a.childNodes[a._ll ? 1 : 0].firstChild.removeAttribute("name")
        },
        setChecked: function(a, b) {
            a._checked = b === !0, a.childNodes[a._ll ? 1 : 0].lastChild.className = a.childNodes[a._ll ? 1 : 0].lastChild.className.replace(/chbx[0-1]{1}/gi, "") + (a._checked ? " chbx1" : " chbx0"), this.doCheckValue(a)
        },
        check: function(a) {
            this.setChecked(a, !0)
        },
        unCheck: function(a) {
            this.setChecked(a, !1)
        },
        isChecked: function(a) {
            return a._checked
        },
        enable: function(a) {
            String(a.className).search("disabled") >= 0 && (a.className = String(a.className).replace(/disabled/gi, "")), a._enabled = !0, a.childNodes[a._ll ? 0 : 1].childNodes[0].tabIndex = 0, a.childNodes[a._ll ? 0 : 1].childNodes[0].removeAttribute("disabled"), this.doCheckValue(a)
        },
        disable: function(a) {
            String(a.className).search("disabled") < 0 && (a.className += " disabled"), a._enabled = !1, a.childNodes[a._ll ? 0 : 1].childNodes[0].tabIndex = -1, a.childNodes[a._ll ? 0 : 1].childNodes[0].setAttribute("disabled", "true"), this.doCheckValue(a)
        },
        isEnabled: function(a) {
            return a._enabled
        },
        setText: function(a, b) {
            a.childNodes[a._ll ? 0 : 1].childNodes[0].innerHTML = b
        },
        getText: function(a) {
            return a.childNodes[a._ll ? 0 : 1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g, "")
        },
        setValue: function(a, b) {
            this.setChecked(a, b === !0 || 1 == parseInt(b) || "true" == b || a._value === b)
        },
        getValue: function(a, b) {
            return "realvalue" == b ? a._value : "undefined" == typeof a._value || null == a._value ? a._checked ? 1 : 0 : a._value
        },
        setReadonly: function(a, b) {
            a._ro = b === !0
        },
        isReadonly: function(a) {
            return a._ro
        },
        setFocus: function(a) {
            a.childNodes[a._ll ? 0 : 1].childNodes[0].focus()
        }
    }, dhtmlXForm.prototype.items.radio = {
        input: {},
        r: {},
        firstValue: {},
        render: function(a, b, c) {
            a._type = "ra", a._enabled = !0, a._checked = !1, a._group = b.name, a._value = b.value, a._uid = c, a._ro = 1 == b.readonly, a._rName = a._rId + a._group, this.r[a._idd] = a, b.inputWidth = 14, this.doAddLabel(a, b), this.doAddInput(a, b, "INPUT", "TEXT", !0, !0, "dhxform_textarea"), a.childNodes[a._ll ? 1 : 0].className += " dhxform_img_node";
            var d = document.createElement("DIV");
            if (d.className = "dhxform_img rdbt0", a.appendChild(d), isNaN(b.inputLeft) || (a.childNodes[a._ll ? 1 : 0].style.left = parseInt(b.inputLeft) + "px"), isNaN(b.inputTop) || (a.childNodes[a._ll ? 1 : 0].style.top = parseInt(b.inputTop) + "px"), a.childNodes[a._ll ? 1 : 0].appendChild(d), a.childNodes[a._ll ? 1 : 0].firstChild.value = String(b.value), a._updateImgNode = function(a, b) {
                    var c = a.childNodes[a._ll ? 1 : 0].lastChild;
                    c.className = b ? c.className.replace(/dhxform_img/gi, "dhxform_actv_r") : c.className.replace(/dhxform_actv_r/gi, "dhxform_img"), a = c = null
                }, a._doOnFocus = function(a) {
                    a.getForm().callEvent("onFocus", [a._group, a._value])
                }, a._doOnBlur = function(a) {
                    a.getForm().callEvent("onBlur", [a._group, a._value])
                }, a._doOnKeyUpDown = function(a, b) {
                    this.callEvent(a, [this.childNodes[this._ll ? 0 : 1].childNodes[0], b, this._group, this._value])
                }, null == this.input[a._rName]) {
                var e = document.createElement("INPUT");
                e.type = "HIDDEN", e.name = b.name, e.firstValue = a._value, a.appendChild(e), this.input[a._rName] = e
            }
            return this.firstValue[a._rName] || (this.firstValue[a._rName] = b.value), 1 == b.checked && this.check(a), 1 == b.hidden && this.hide(a), 1 == b.disabled && this.userDisable(a), this.doAttachEvents(a), this
        },
        destruct: function(a) {
            if (a.lastChild == this.input[a._rName]) {
                var b, c = !1;
                for (b in this.r) !c && this.r[b]._group == a._group && this.r[b]._idd != a._idd && (this.r[b].appendChild(this.input[a._rName]), c = !0);
                c || (this.input[a._rName].parentNode.removeChild(this.input[a._rName]), this.input[a._rName] = null, this.firstValue[a._rName] = null)
            }
            var d = a._idd;
            return a._doOnFocus = a._doOnBlur = a._updateImgNode = null, this.doUnloadNestedLists(a), this.doDestruct(a), d
        },
        doClick: function(a) {
            if (a.childNodes[a._ll ? 0 : 1].childNodes[0].focus(), a._enabled && !a._checked && !a._ro) {
                var b = [a._group, a._value, !0];
                a.checkEvent("onBeforeChange") && a.callEvent("onBeforeChange", b) !== !0 || (this.setChecked(a, !0), a.getForm()._autoCheck(), a.callEvent("onChange", b))
            }
        },
        doCheckValue: function(a) {
            var b, c = null;
            for (b in this.r) this.r[b]._checked && this.r[b]._enabled && this.r[b]._group == a._group && this.r[b]._rId == a._rId && (c = this.r[b]._value);
            null != c ? (this.input[a._rName].setAttribute("name", String(a._group)), this.input[a._rName].setAttribute("value", c), this.input[a._rName]._value = c) : (this.input[a._rName].removeAttribute("name"), this.input[a._rName].removeAttribute("value"), this.input[a._rName]._value = null)
        },
        setChecked: function(a, b) {
            var c, b = b === !0;
            for (c in this.r)
                if (this.r[c]._group == a._group && this.r[c]._rId == a._rId) {
                    var d = !1;
                    if (this.r[c]._idd == a._idd ? this.r[c]._checked != b && (this.r[c]._checked = b, d = !0) : this.r[c]._checked && (this.r[c]._checked = !1, d = !0), d) {
                        var e = this.r[c].childNodes[this.r[c]._ll ? 1 : 0].childNodes[1];
                        e.className = e.className.replace(/rdbt[0-1]{1}/gi, "") + (this.r[c]._checked ? " rdbt1" : " rdbt0"), e = null
                    }
                }
            this.doCheckValue(a)
        },
        getChecked: function(a) {
            return this.input[a._rName]._value
        },
        _getFirstValue: function(a) {
            return this.firstValue[a._rName]
        },
        _getId: function(a) {
            return a._idd
        },
        setValue: function() {}
    },
    function() {
        for (var a in {
                doAddLabel: 1,
                doAddInput: 1,
                doDestruct: 1,
                doUnloadNestedLists: 1,
                doAttachEvents: 1,
                check: 1,
                unCheck: 1,
                isChecked: 1,
                enable: 1,
                disable: 1,
                isEnabled: 1,
                setText: 1,
                getText: 1,
                getValue: 1,
                setReadonly: 1,
                isReadonly: 1,
                setFocus: 1
            }) dhtmlXForm.prototype.items.radio[a] = dhtmlXForm.prototype.items.checkbox[a]
    }(), dhtmlXForm.prototype.items.select = {
        render: function(a, b) {
            return a._type = "se", a._enabled = !0, a._value = null, a._newValue = null, (_isFF || _isIE) && "number" == typeof b.inputWidth && (b.inputWidth += a._inpWidthFix || 2), this.doAddLabel(a, b), this.doAddInput(a, b, "SELECT", null, !0, !0, "dhxform_select"), this.doAttachEvents(a), this.doLoadOpts(a, b), b.connector ? this.doLoadOptsConnector(a, b.connector) : "undefined" != b.value && this.setValue(a, b.value), this
        },
        destruct: function(a) {
            for (this.doUnloadNestedLists(a), a.callEvent = null, a.checkEvent = null, a.getForm = null, a._autoCheck = null, a._enabled = null, a._idd = null, a._type = null, a._value = null, a._newValue = null, a.onselectstart = null, a.childNodes[a._ll ? 1 : 0].childNodes[0].onclick = null, a.childNodes[a._ll ? 1 : 0].childNodes[0].onkeydown = null, a.childNodes[a._ll ? 1 : 0].childNodes[0].onchange = null, a.childNodes[a._ll ? 1 : 0].childNodes[0].onfocus = null, a.childNodes[a._ll ? 1 : 0].childNodes[0].onblur = null, a.childNodes[a._ll ? 1 : 0].childNodes[0].onkeyup = null, a.childNodes[a._ll ? 1 : 0].removeChild(a.childNodes[a._ll ? 1 : 0].childNodes[0]); a.childNodes.length > 0;) a.removeChild(a.childNodes[0]);
            a.parentNode.removeChild(a), a = null
        },
        doAddLabel: function(a, b) {
            var c = document.createElement("DIV");
            c.className = "dhxform_label " + b.labelAlign, c.innerHTML = "<label for='" + b.uid + "'>" + b.label + (b.info ? "<span class='dhxform_info'>[?]</span>" : "") + (a._required ? "<span class='dhxform_item_required'>*</span>" : "") + "</label>", 1 == b.wrap && (c.style.whiteSpace = "normal"), "undefined" != typeof b.tooltip && (c.title = b.tooltip), a.appendChild(c), "undefined" != typeof b.label && null != b.label && 0 != b.label.length || (c.style.display = "none"), isNaN(b.labelWidth) || (c.style.width = parseInt(b.labelWidth) + "px"), isNaN(b.labelHeight) || (c.style.height = parseInt(b.labelHeight) + "px"), isNaN(b.labelLeft) || (c.style.left = parseInt(b.labelLeft) + "px"), isNaN(b.labelTop) || (c.style.top = parseInt(b.labelTop) + "px"), b.info && (c.onclick = function(a) {
                var a = a || event,
                    b = a.target || a.srcElement;
                if ("undefined" != typeof b.className && "dhxform_info" == b.className) return this.parentNode.callEvent("onInfo", [this.parentNode._idd]), a.cancelBubble = !0, a.returnValue = !1
            })
        },
        doAttachEvents: function(a) {
            var b = a.childNodes[a._ll ? 1 : 0].childNodes[0],
                c = this;
            b.onclick = function() {
                c.doOnChange(this), c.doValidate(this.parentNode.parentNode)
            }, b.onkeydown = function(a) {
                a = a || event, c.doOnChange(this), c.doValidate(this.parentNode.parentNode), this.parentNode.parentNode.callEvent("onKeyDown", [this, a, this.parentNode.parentNode._idd])
            }, b.onchange = function() {
                c.doOnChange(this), c.doValidate(this.parentNode.parentNode)
            }, b.onkeyup = function(a) {
                a = a || event, this.parentNode.parentNode.callEvent("onKeyUp", [this, a, this.parentNode.parentNode._idd])
            }, b = null, this.doAttachChangeLS(a)
        },
        doAttachChangeLS: function(a) {
            var b = a.childNodes[a._ll ? 1 : 0].childNodes[0];
            b.onfocus = function() {
                var a = this.parentNode.parentNode;
                a.getForm()._ccActivate(a._idd, this, a.getForm().getItemValue(a._idd, !0)), a.getForm().callEvent("onFocus", [a._idd]), a = null
            }, b.onblur = function() {
                var a = this.parentNode.parentNode;
                a.getForm()._ccDeactivate(a._idd), a.getForm().callEvent("onBlur", [a._idd]), a = null
            }, b = null
        },
        doValidate: function(a) {
            a.getForm().live_validate && this._validate(a)
        },
        doLoadOpts: function(a, b, c) {
            for (var d = a.childNodes[a._ll ? 1 : 0].childNodes[0], e = b.options, f = !1, g = 0; g < e.length; g++) {
                var h = e[g].text || e[g].label;
                h && "undefined" != typeof h || (h = "");
                var i = new Option(h, e[g].value);
                "string" == typeof e[g].img_src && i.setAttribute("img_src", e[g].img_src), d.options.add(i), 1 != e[g].selected && "true" != e[g].selected || (i.selected = !0, a._value = e[g].value, f = !0)
            }!f && d.selectedIndex >= 0 && (a._value = d.options[d.selectedIndex].value), c === !0 && a.callEvent("onOptionsLoaded", [a._idd]), this._checkNoteWidth(a)
        },
        doLoadOptsConnector: function(a, b) {
            var c = this;
            a._connector_working = !0, dhtmlxAjax.get(b, function(b) {
                for (var d = b.doXPath("//item"), e = [], f = 0; f < d.length; f++) e[f] = {
                    label: d[f].getAttribute("label"),
                    value: d[f].getAttribute("value"),
                    selected: null != d[f].getAttribute("selected")
                };
                c.doLoadOpts(a, {
                    options: e
                }, !0), a._connector_working = !1, null != a._connector_value && (c.setValue(a, a._connector_value), a._connector_value = null), thet = a = null
            })
        },
        doOnChange: function(a) {
            var b = a.parentNode.parentNode;
            if (b._newValue = a.selectedIndex >= 0 ? a.options[a.selectedIndex].value : null, b._newValue != b._value) {
                if (b.checkEvent("onBeforeChange") && b.callEvent("onBeforeChange", [b._idd, b._value, b._newValue]) !== !0) {
                    for (var c = 0; c < a.options.length; c++) a.options[c].value == b._value && (a.options[c].selected = !0);
                    return
                }
                b._value = b._newValue, b.callEvent("onChange", [b._idd, b._value])
            }
            b._autoCheck()
        },
        setText: function(a, b) {
            b || (b = ""), a.childNodes[a._ll ? 0 : 1].childNodes[0].innerHTML = b, a.childNodes[a._ll ? 0 : 1].style.display = 0 == b.length || null == b ? "none" : ""
        },
        getText: function(a) {
            return a.childNodes[a._ll ? 0 : 1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g, "")
        },
        enable: function(a) {
            String(a.className).search("disabled") >= 0 && (a.className = String(a.className).replace(/disabled/gi, "")), a._enabled = !0, a.childNodes[a._ll ? 1 : 0].childNodes[0].removeAttribute("disabled")
        },
        disable: function(a) {
            String(a.className).search("disabled") < 0 && (a.className += " disabled"), a._enabled = !1, a.childNodes[a._ll ? 1 : 0].childNodes[0].setAttribute("disabled", !0)
        },
        getOptions: function(a) {
            return a.childNodes[a._ll ? 1 : 0].childNodes[0].options
        },
        setValue: function(a, b) {
            if (a._connector_working) a._connector_value = b;
            else {
                for (var c = this.getOptions(a), d = 0; d < c.length; d++) c[d].value == b && (c[d].selected = !0, a._value = c[d].value);
                null != a._list && a._list.length > 0 && a.getForm()._autoCheck(), a.getForm()._ccReload(a._idd, a._value)
            }
        },
        getValue: function(a) {
            for (var b = -1, c = this.getOptions(a), d = 0; d < c.length; d++) c[d].selected && (b = c[d].value);
            return b
        },
        setWidth: function(a, b) {
            a.childNodes[a._ll ? 1 : 0].childNodes[0].style.width = b + "px"
        },
        getSelect: function(a) {
            return a.childNodes[a._ll ? 1 : 0].childNodes[0]
        },
        setFocus: function(a) {
            a.childNodes[a._ll ? 1 : 0].childNodes[0].focus()
        },
        _checkNoteWidth: function(a) {
            var b;
            null != a.childNodes[a._ll ? 1 : 0].childNodes[1] && (b = a.childNodes[a._ll ? 1 : 0].childNodes[1], null != b.className && b.className.search(/dhxform_note/gi) >= 0 && "auto" == b._w && (b.style.width = a.childNodes[a._ll ? 1 : 0].childNodes[0].offsetWidth + "px")), b = null
        }
    },
    function() {
        for (var a in {
                doAddInput: 1,
                doUnloadNestedLists: 1,
                isEnabled: 1
            }) dhtmlXForm.prototype.items.select[a] = dhtmlXForm.prototype.items.checkbox[a]
    }(), dhtmlXForm.prototype.items.multiselect = {
        doLoadOpts: function(a, b, c) {
            var d = a.childNodes[a._ll ? 1 : 0].childNodes[0];
            d.multiple = !0, isNaN(b.size) || (d.size = Number(b.size)), a._value = [], a._newValue = [];
            for (var e = b.options, f = 0; f < e.length; f++) {
                var g = new Option(e[f].text || e[f].label, e[f].value);
                d.options.add(g), 1 != e[f].selected && "true" != e[f].selected || (g.selected = !0, a._value.push(e[f].value))
            }
            c === !0 && a.callEvent("onOptionsLoaded", [a._idd]), this._checkNoteWidth(a)
        },
        doAttachEvents: function(a) {
            var b = a.childNodes[a._ll ? 1 : 0].childNodes[0],
                c = this;
            b.onfocus = function() {
                c.doOnChange(this);
                var a = this.parentNode.parentNode;
                a.getForm().callEvent("onFocus", [a._idd]), a = null
            }, b.onblur = function() {
                c.doOnChange(this);
                var a = this.parentNode.parentNode;
                a.getForm().callEvent("onBlur", [a._idd]), a = null
            }, b.onclick = function() {
                c.doOnChange(this);
                var a = this.parentNode.parentNode;
                a._autoCheck(), a = null
            }
        },
        doOnChange: function(a) {
            var b = a.parentNode.parentNode;
            b._newValue = [];
            for (var c = 0; c < a.options.length; c++) a.options[c].selected && b._newValue.push(a.options[c].value);
            if (b._value.sort().toString() != b._newValue.sort().toString()) {
                if (b.checkEvent("onBeforeChange") && b.callEvent("onBeforeChange", [b._idd, b._value, b._newValue]) !== !0) {
                    for (var d = {}, c = 0; c < b._value.length; c++) d[b._value[c]] = !0;
                    for (c = 0; c < a.options.length; c++) a.options[c].selected = 1 == d[a.options[c].value];
                    return void(d = null)
                }
                for (b._value = [], c = 0; c < b._newValue.length; c++) b._value.push(b._newValue[c]);
                b.callEvent("onChange", [b._idd, b._value])
            }
            b._autoCheck()
        },
        setValue: function(a, b) {
            var c = {};
            "string" == typeof b && (b = b.split(",")), "object" != typeof b && (b = [b]);
            for (var d = 0; d < b.length; d++) c[b[d]] = !0;
            for (var e = this.getOptions(a), d = 0; d < e.length; d++) e[d].selected = 1 == c[e[d].value];
            a._autoCheck()
        },
        getValue: function(a) {
            for (var b = [], c = this.getOptions(a), d = 0; d < c.length; d++) c[d].selected && b.push(c[d].value);
            return b
        }
    },
    function() {
        for (var a in dhtmlXForm.prototype.items.select) dhtmlXForm.prototype.items.multiselect[a] || (dhtmlXForm.prototype.items.multiselect[a] = dhtmlXForm.prototype.items.select[a])
    }(), dhtmlXForm.prototype.items.input = {
        render: function(a, b) {
            var c = !isNaN(b.rows);
            if (a._type = "ta", a._enabled = !0, this.doAddLabel(a, b), this.doAddInput(a, b, c ? "TEXTAREA" : "INPUT", c ? null : "TEXT", !0, !0, "dhxform_textarea"), this.doAttachEvents(a), c && (a.childNodes[a._ll ? 1 : 0].childNodes[0].rows = b.rows), "undefined" != typeof b.numberFormat) {
                var d, e = null,
                    f = null;
                "string" != typeof b.numberFormat ? (d = b.numberFormat[0], e = b.numberFormat[1] || null, f = b.numberFormat[2] || null) : (d = b.numberFormat, "string" == typeof b.groupSep && (e = b.groupSep), "string" == typeof b.decSep && (f = b.decSep)), this.setNumberFormat(a, d, e, f, !1)
            }
            return this.setValue(a, b.value), this
        },
        doAttachEvents: function(a) {
            var b = this;
            "ta" != a._type && "se" != a._type && "pw" != a._type || (a.childNodes[a._ll ? 1 : 0].childNodes[0].onfocus = function() {
                var a = this.parentNode.parentNode;
                null != a._df && (this.value = a._value || ""), a.getForm()._ccActivate(a._idd, this, this.value), a.getForm().callEvent("onFocus", [a._idd]), a = null
            }), a.childNodes[a._ll ? 1 : 0].childNodes[0].onblur = function() {
                var a = this.parentNode.parentNode;
                a.getForm()._ccDeactivate(a._idd), b.updateValue(a, !0), a.getForm().live_validate && b._validate(a), a.getForm().callEvent("onBlur", [a._idd]), a = null
            }
        },
        updateValue: function(a, b) {
            var c = a.childNodes[a._ll ? 1 : 0].childNodes[0].value;
            if (b || null == a._df || c != this._getFmtValue(a, c)) {
                var d = this;
                a._value != c ? a.checkEvent("onBeforeChange") && a.callEvent("onBeforeChange", [a._idd, a._value, c]) !== !0 ? null != a._df ? d.setValue(a, a._value) : a.childNodes[a._ll ? 1 : 0].childNodes[0].value = a._value : (null != a._df ? d.setValue(a, c) : a._value = c, a.callEvent("onChange", [a._idd, c])) : null != a._df && this.setValue(a, a._value)
            }
        },
        setValue: function(a, b) {
            a._value = "undefined" != typeof b && null != b ? b : "";
            var c = String(a._value) || "",
                d = a.childNodes[a._ll ? 1 : 0].childNodes[0];
            null != a._df && "function" == typeof this._getFmtValue && (c = this._getFmtValue(a, c)), d.value != c && (d.value = c, a.getForm()._ccReload(a._idd, c)), d = null
        },
        getValue: function(a) {
            var b = a.getForm();
            return b._formLS && null != b._formLS[a._idd] && this.updateValue(a), b = null, "undefined" != typeof a._value && null != a._value ? a._value : ""
        },
        setReadonly: function(a, b) {
            a._ro = b === !0, a._ro ? a.childNodes[a._ll ? 1 : 0].childNodes[0].setAttribute("readOnly", "true") : a.childNodes[a._ll ? 1 : 0].childNodes[0].removeAttribute("readOnly")
        },
        isReadonly: function(a) {
            return a._ro || (a._ro = !1), a._ro
        },
        getInput: function(a) {
            return a.childNodes[a._ll ? 1 : 0].childNodes[0]
        },
        setNumberFormat: function(a, b, c, d, e) {
            if ("boolean" != typeof e && (e = !0), "" == b) return a._df = null, e && this.setValue(a, a._value), !0;
            if ("string" == typeof b) {
                var f = b.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);
                if (null == f || 4 != f.length) return !1;
                a._df = {
                    i_len: !1,
                    i_sep: "string" == typeof c ? c : ",",
                    d_len: !1,
                    d_sep: "string" == typeof d ? d : ".",
                    s_bef: "string" == typeof f[1] ? f[1] : "",
                    s_aft: "string" == typeof f[3] ? f[3] : ""
                };
                var g = f[2].split(".");
                null != g[1] && (a._df.d_len = g[1].length);
                var h = g[0].split(",");
                return h.length > 1 && (a._df.i_len = h[h.length - 1].length), e && this.setValue(a, a._value), !0
            }
        },
        _getFmtValue: function(a, b) {
            var c = b.match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);
            if (null != c && 5 == c.length) {
                var d = "";
                if (null != c[1] && (d += c[1]), d += a._df.s_bef, a._df.i_len !== !1) {
                    for (var e = 0, f = "", g = c[2].length - 1; g >= 0; g--) f = "" + c[2].charAt(g) + f, ++e == a._df.i_len && g > 0 && (f = a._df.i_sep + f, e = 0);
                    d += f
                } else d += c[2];
                if (a._df.d_len !== !1) {
                    for (null == c[4] && (c[4] = ""); c[4].length < a._df.d_len;) c[4] += "0";
                    eval("var t0 = new RegExp(/\\d{" + a._df.d_len + "}/);");
                    var h = c[4].match(t0);
                    null != h && (d += a._df.d_sep + h), t0 = h = null
                }
                return d += a._df.s_aft
            }
            return b
        }
    },
    function() {
        for (var a in {
                doAddLabel: 1,
                doAddInput: 1,
                destruct: 1,
                doUnloadNestedLists: 1,
                setText: 1,
                getText: 1,
                enable: 1,
                disable: 1,
                isEnabled: 1,
                setWidth: 1,
                setFocus: 1
            }) dhtmlXForm.prototype.items.input[a] = dhtmlXForm.prototype.items.select[a]
    }(), dhtmlXForm.prototype.items.password = {
        render: function(a, b) {
            return a._type = "pw", a._enabled = !0, this.doAddLabel(a, b), this.doAddInput(a, b, "INPUT", "PASSWORD", !0, !0, "dhxform_textarea"), this.doAttachEvents(a), this.setValue(a, b.value), this
        }
    },
    function() {
        for (var a in {
                doAddLabel: 1,
                doAddInput: 1,
                doAttachEvents: 1,
                destruct: 1,
                doUnloadNestedLists: 1,
                setText: 1,
                getText: 1,
                setValue: 1,
                getValue: 1,
                updateValue: 1,
                enable: 1,
                disable: 1,
                isEnabled: 1,
                setWidth: 1,
                setReadonly: 1,
                isReadonly: 1,
                setFocus: 1,
                getInput: 1
            }) dhtmlXForm.prototype.items.password[a] = dhtmlXForm.prototype.items.input[a]
    }(), dhtmlXForm.prototype.items.file = {
        render: function(a, b) {
            return a._type = "fl", a._enabled = !0, this.doAddLabel(a, b), this.doAddInput(a, b, "INPUT", "FILE", !0, !1, "dhxform_textarea"), a.childNodes[a._ll ? 1 : 0].childNodes[0].onchange = function() {
                a.callEvent("onChange", [a._idd, this.value])
            }, this
        },
        setValue: function() {},
        getValue: function(a) {
            return a.childNodes[a._ll ? 1 : 0].childNodes[0].value
        }
    },
    function() {
        for (var a in {
                doAddLabel: 1,
                doAddInput: 1,
                destruct: 1,
                doUnloadNestedLists: 1,
                setText: 1,
                getText: 1,
                enable: 1,
                disable: 1,
                isEnabled: 1,
                setWidth: 1
            }) dhtmlXForm.prototype.items.file[a] = dhtmlXForm.prototype.items.input[a]
    }(), dhtmlXForm.prototype.items.label = {
        _index: !1,
        render: function(a, b) {
            a._type = "lb", a._enabled = !0, a._checked = !0;
            var c = document.createElement("DIV");
            return c.className = "dhxform_txt_label2" + (b._isTopmost ? " topmost" : ""), c.innerHTML = b.label, a.appendChild(c), 1 == b.hidden && this.hide(a), 1 == b.disabled && this.userDisable(a), isNaN(b.labelWidth) || (c.style.width = parseInt(b.labelWidth) + "px"), isNaN(b.labelHeight) || (c.style.height = parseInt(b.labelHeight) + "px"), isNaN(b.labelLeft) || (c.style.left = parseInt(b.labelLeft) + "px"), isNaN(b.labelTop) || (c.style.top = parseInt(b.labelTop) + "px"), this
        },
        destruct: function(a) {
            this.doUnloadNestedLists(a), a._autoCheck = null, a._enabled = null, a._type = null, a.callEvent = null, a.checkEvent = null, a.getForm = null, a.onselectstart = null, a.parentNode.removeChild(a), a = null
        },
        enable: function(a) {
            String(a.className).search("disabled") >= 0 && (a.className = String(a.className).replace(/disabled/gi, "")), a._enabled = !0
        },
        disable: function(a) {
            String(a.className).search("disabled") < 0 && (a.className += " disabled"), a._enabled = !1
        },
        setText: function(a, b) {
            a.firstChild.innerHTML = b
        },
        getText: function(a) {
            return a.firstChild.innerHTML
        }
    },
    function() {
        for (var a in {
                doUnloadNestedLists: 1,
                isEnabled: 1
            }) dhtmlXForm.prototype.items.label[a] = dhtmlXForm.prototype.items.checkbox[a]
    }(), dhtmlXForm.prototype.items.button = {
        render: function(a, b) {
            if (a._type = "bt", a._enabled = !0, a._name = b.name, a.className = String(a.className).replace("item_label_top", "item_label_left").replace("item_label_right", "item_label_left"), !isNaN(b.width)) var c = Math.max(b.width, 10);
            var d = "undefined" != typeof c;
            return a._doOnKeyUpDown = function(a, b) {
                this.callEvent(a, [this.childNodes[this._ll ? 0 : 1].childNodes[0], b, this._idd])
            }, a.innerHTML = '<div class="dhxform_btn" role="link" tabindex="0" dir="ltr" ' + (d ? ' style="width:' + c + 'px;"' : "") + 'onkeypress="var e=event||window.arguments[0];if((e.keyCode==32||e.charCode==32||e.keyCode==13||e.charCode==13)&&!this.parentNode._busy){this.parentNode._busy=true;e.cancelBubble=true;e.returnValue=false;_dhxForm_doClick(this.childNodes[0],[\'mousedown\',\'mouseup\']);return false;}" ontouchstart="var e=event;e.preventDefault();if(!this.parentNode._busy){this.parentNode._busy=true;_dhxForm_doClick(this.childNodes[0],[\'mousedown\',\'mouseup\']);}" onfocus="this.parentNode._doOnFocus(this.parentNode);" onblur="_dhxForm_doClick(this.childNodes[0],\'mouseout\');this.parentNode._doOnBlur(this.parentNode);" onkeyup=\'var e=event||window.arguments[0];this.parentNode._doOnKeyUpDown("onKeyUp",e);\' onkeydown=\'var e=event||window.arguments[0];this.parentNode._doOnKeyUpDown("onKeyDown",e);\' ><table cellspacing="0" cellpadding="0" border="0" align="left" style="font-size:inherit; ' + (d ? "width:" + c + "px;table-layout:fixed;" : "") + '"><tr><td class="btn_l"><div class="btn_l">&nbsp;</div></td><td class="btn_m" ' + (d ? 'style="width:' + (c - 10) + 'px;"' : "") + '><div class="btn_txt' + (d ? " btn_txt_fixed_size" : "") + '">' + b.value + '</div></td><td class="btn_r"><div class="btn_r">&nbsp;</div></td></tr></table></div>', isNaN(b.inputLeft) || (a.childNodes[0].style.left = parseInt(b.inputLeft) + "px"), isNaN(b.inputTop) || (a.childNodes[0].style.top = parseInt(b.inputTop) + "px"), 1 == b.hidden && this.hide(a), 1 == b.disabled && this.userDisable(a), "undefined" != typeof b.tooltip && (a.firstChild.title = b.tooltip), a.onselectstart = function(a) {
                return a = a || event, a.cancelBubble = !0, a.returnValue = !1
            }, a.childNodes[0].onselectstart = function(a) {
                return a = a || event, a.cancelBubble = !0, a.returnValue = !1
            }, a.childNodes[0].childNodes[0].onmouseover = function() {
                var a = this.parentNode.parentNode;
                a._enabled && (this._isOver = !0, this.className = "dhxform_btn_over", a = null)
            }, a.childNodes[0].childNodes[0].onmouseout = function() {
                var a = this.parentNode.parentNode;
                a._enabled && (this.className = "", this._isOver = this._pressed = this._allowClick = !1, a = null)
            }, a.childNodes[0].childNodes[0].onmousedown = function() {
                if (!this._pressed) {
                    var a = this.parentNode.parentNode;
                    a._enabled && (this.className = "dhxform_btn_pressed", this._pressed = this._allowClick = !0, a = null)
                }
            }, a.childNodes[0].childNodes[0].onmouseup = function() {
                if (this._pressed) {
                    var a = this.parentNode.parentNode;
                    a._enabled && (a._busy = !1, this.className = this._isOver ? "dhxform_btn_over" : "", this._pressed && this._allowClick && a.callEvent("_onButtonClick", [a._name, a._cmd]), this._pressed = this._allowClick = !1, a = null)
                }
            }, a._doOnFocus = function(a) {
                a.getForm().callEvent("onFocus", [a._idd])
            }, a._doOnBlur = function(a) {
                a.getForm().callEvent("onBlur", [a._idd])
            }, this
        },
        destruct: function(a) {
            for (this.doUnloadNestedLists(a), a.callEvent = null, a.checkEvent = null, a.getForm = null, a._autoCheck = null, a._type = null, a._enabled = null, a._cmd = null, a._name = null, a.onselectstart = null, a.childNodes[0].onselectstart = null, a.childNodes[0].onkeypress = null, a.childNodes[0].ontouchstart = null, a.childNodes[0].onblur = null, a.childNodes[0].childNodes[0].onmouseover = null, a.childNodes[0].childNodes[0].onmouseout = null, a.childNodes[0].childNodes[0].onmousedown = null, a.childNodes[0].childNodes[0].onmouseup = null; a.childNodes.length > 0;) a.removeChild(a.childNodes[0]);
            a.parentNode.removeChild(a), a = null
        },
        enable: function(a) {
            String(a.className).search("disabled") >= 0 && (a.className = String(a.className).replace(/disabled/gi, "")), a._enabled = !0, a.childNodes[0].removeAttribute("disabled"), a.childNodes[0].setAttribute("role", "link"), a.childNodes[0].setAttribute("tabIndex", "0")
        },
        disable: function(a) {
            String(a.className).search("disabled") < 0 && (a.className += " disabled"), a._enabled = !1, a.childNodes[0].setAttribute("disabled", "true"), a.childNodes[0].removeAttribute("role"), a.childNodes[0].removeAttribute("tabIndex")
        },
        setText: function(a, b) {
            a.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].childNodes[0].innerHTML = b
        },
        getText: function(a) {
            return a.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].childNodes[0].innerHTML
        },
        setFocus: function(a) {
            a.childNodes[0].focus()
        }
    },
    function() {
        for (var a in {
                doUnloadNestedLists: 1,
                isEnabled: 1
            }) dhtmlXForm.prototype.items.button[a] = dhtmlXForm.prototype.items.checkbox[a]
    }(), dhtmlXForm.prototype.items.hidden = {
        _index: !1,
        render: function(a, b) {
            a.style.display = "none", a._name = b.name, a._type = "hd", a._enabled = !0;
            var c = document.createElement("INPUT");
            return c.type = "HIDDEN", c.name = b.name, c.value = b.value || "", a.appendChild(c), this
        },
        destruct: function(a) {
            for (this.doUnloadNestedLists(a); a.childNodes.length > 0;) a.removeChild(a.childNodes[0]);
            a._autoCheck = null, a._name = null, a._type = null, a._enabled = null, a.onselectstart = null, a.callEvent = null, a.checkEvent = null, a.getForm = null, a.parentNode.removeChild(a), a = null
        },
        enable: function(a) {
            a._enabled = !0, a.childNodes[0].setAttribute("name", a._name)
        },
        disable: function(a) {
            a._enabled = !1, a.childNodes[0].removeAttribute("name")
        },
        show: function() {},
        hide: function() {},
        isHidden: function() {
            return !0
        },
        setValue: function(a, b) {
            a.childNodes[0].value = b
        },
        getValue: function(a) {
            return a.childNodes[0].value
        },
        getInput: function(a) {
            return a.childNodes[0]
        }
    },
    function() {
        for (var a in {
                doUnloadNestedLists: 1,
                isEnabled: 1
            }) dhtmlXForm.prototype.items.hidden[a] = dhtmlXForm.prototype.items.checkbox[a]
    }(), dhtmlXForm.prototype.items.list = {
        _index: !1,
        render: function(a) {
            return a._type = "list", a._enabled = !0, a._isNestedForm = !0, a.style.paddingLeft = a._ofsNested + "px", a.className = "dhxform_base_nested" + (a._custom_css || ""), [this, new dhtmlXForm(a)]
        },
        destruct: function() {}
    }, dhtmlXForm.prototype.items.fieldset = {
        _index: !1,
        render: function(a, b) {
            a._type = "fs", parseInt(b.inputWidth), a._width = b.width, a._enabled = !0, a._checked = !0, a.className = "fs_" + b.position + ("string" == typeof b.className ? " " + b.className : "");
            var c = document.createElement("FIELDSET");
            c.className = "dhxform_fs";
            var d = String(b.labelAlign).replace("align_", "");
            if (c.innerHTML = "<legend class='fs_legend' align='" + d + "' style='text-align:" + d + "'>" + b.label + "</legend>", a.appendChild(c), isNaN(b.inputLeft) || (c.style.left = parseInt(b.inputLeft) + "px"), isNaN(b.inputTop) || (c.style.top = parseInt(b.inputTop) + "px"), "auto" != b.inputWidth && !isNaN(b.inputWidth)) {
                c.style.width = parseInt(b.inputWidth) + "px";
                var e = parseInt(c.style.width);
                c.offsetWidth > e && (c.style.width = e + (e - c.offsetWidth) + "px")
            }
            return a._addSubListNode = function() {
                var a = document.createElement("DIV");
                return a._custom_css = " dhxform_fs_nested", this.childNodes[0].appendChild(a), a
            }, 1 == b.hidden && this.hide(a), 1 == b.disabled && this.userDisable(a), this
        },
        destruct: function(a) {
            for (this.doUnloadNestedLists(a), a._checked = null, a._enabled = null, a._idd = null, a._type = null, a._width = null, a.onselectstart = null, a._addSubListNode = null, a._autoCheck = null, a.callEvent = null, a.checkEvent = null, a.getForm = null; a.childNodes.length > 0;) a.removeChild(a.childNodes[0]);
            a.parentNode.removeChild(a), a = null
        },
        setText: function(a, b) {
            a.childNodes[0].childNodes[0].innerHTML = b
        },
        getText: function(a) {
            return a.childNodes[0].childNodes[0].innerHTML
        },
        enable: function(a) {
            a._enabled = !0, String(a.className).search("disabled") >= 0 && (a.className = String(a.className).replace(/disabled/gi, ""))
        },
        disable: function(a) {
            a._enabled = !1, String(a.className).search("disabled") < 0 && (a.className += " disabled")
        },
        setWidth: function(a, b) {
            a.childNodes[0].style.width = b + "px", a._width = b
        },
        getWidth: function(a) {
            return a._width
        }
    },
    function() {
        for (var a in {
                doUnloadNestedLists: 1,
                isEnabled: 1
            }) dhtmlXForm.prototype.items.fieldset[a] = dhtmlXForm.prototype.items.checkbox[a]
    }(), dhtmlXForm.prototype.items.block = {
        _index: !1,
        render: function(a, b) {
            a._type = "bl", a._width = b.width, a._enabled = !0, a._checked = !0, a.className = "block_" + b.position + ("string" == typeof b.className ? " " + b.className : "");
            var c = document.createElement("DIV");
            return c.className = "dhxform_obj_" + a.getForm().skin + " dhxform_block", c.style.fontSize = a.getForm().cont.style.fontSize, b.style && (c.style.cssText = b.style), "undefined" != typeof b.id && (c.id = b.id), a.appendChild(c), isNaN(b.inputLeft) || (c.style.left = parseInt(b.inputLeft) + "px"),
                isNaN(b.inputTop) || (c.style.top = parseInt(b.inputTop) + "px"), "auto" == b.inputWidth || isNaN(b.inputWidth) || (c.style.width = parseInt(b.inputWidth) + "px"), isNaN(b.blockOffset) || (a._ofsNested = b.blockOffset), a._addSubListNode = function() {
                    var a = document.createElement("DIV");
                    return a._inBlcok = !0, "undefined" != typeof this._ofsNested && (a._ofsNested = this._ofsNested), this.childNodes[0].appendChild(a), a
                }, 1 == b.hidden && this.hide(a), 1 == b.disabled && this.userDisable(a), this
        },
        _setCss: function(a, b, c) {
            a.firstChild.className = "dhxform_obj_" + b + " dhxform_block", a.firstChild.style.fontSize = c
        }
    },
    function() {
        for (var a in {
                enable: 1,
                disable: 1,
                isEnabled: 1,
                setWidth: 1,
                getWidth: 1,
                doUnloadNestedLists: 1,
                destruct: 1
            }) dhtmlXForm.prototype.items.block[a] = dhtmlXForm.prototype.items.fieldset[a]
    }(), dhtmlXForm.prototype.items.newcolumn = {
        _index: !1
    }, dhtmlXForm.prototype.items.template = {
        render: function(a, b) {
            return !isNaN(b.rows), a._type = "tp", a._enabled = !0, b.format && ("function" == typeof b.format && (a.format = b.format), "function" == typeof window[b.format] && (a.format = window[b.format])), a.format || (a.format = function(a, b) {
                return b
            }), this.doAddLabel(a, b), this.doAddInput(a, b, "DIV", null, !0, !0, "dhxform_item_template"), a._value = b.value || "", a.childNodes[1].childNodes[0].innerHTML = a.format(a._idd, a._value), this
        },
        setValue: function(a, b) {
            a._value = b, a.childNodes[1].childNodes[0].innerHTML = a.format(a._idd, a._value)
        },
        getValue: function(a) {
            return a._value
        },
        enable: function(a) {
            String(a.className).search("disabled") >= 0 && (a.className = String(a.className).replace(/disabled/gi, "")), a._enabled = !0
        },
        disable: function(a) {
            String(a.className).search("disabled") < 0 && (a.className += " disabled"), a._enabled = !1
        }
    },
    function() {
        for (var a in {
                doAddLabel: 1,
                doAddInput: 1,
                destruct: 1,
                doUnloadNestedLists: 1,
                setText: 1,
                getText: 1,
                isEnabled: 1,
                setWidth: 1
            }) dhtmlXForm.prototype.items.template[a] = dhtmlXForm.prototype.items.select[a]
    }(), dhtmlXForm.prototype._ulToObject = function(a, b) {
        for (var c = [], d = 0; d < a.childNodes.length; d++) {
            if ("li" == String(a.childNodes[d].tagName || "").toLowerCase()) {
                for (var e = {}, f = a.childNodes[d], g = 0; g < b.length; g++) null != f.getAttribute(b[g]) && (e[String(b[g]).replace("ftype", "type")] = f.getAttribute(b[g]));
                if (!e.label) try {
                    e.label = f.firstChild.nodeValue
                } catch (a) {}
                var h = f.getElementsByTagName("UL");
                for (null != h[0] && (e["select" == e.type ? "options" : "list"] = dhtmlXForm.prototype._ulToObject(h[0], b)), g = 0; g < f.childNodes.length; g++) "userdata" == String(f.childNodes[g].tagName || "").toLowerCase() && (e.userdata || (e.userdata = {}), e.userdata[f.childNodes[g].getAttribute("name")] = f.childNodes[g].firstChild.nodeValue);
                c[c.length] = e
            }
            if ("div" == String(a.childNodes[d].tagName || "").toLowerCase()) {
                e = {
                    type: "label"
                };
                try {
                    e.label = a.childNodes[d].firstChild.nodeValue
                } catch (a) {}
                c[c.length] = e
            }
        }
        return c
    }, dhtmlxEvent(window, "load", function() {
        for (var a = "ftype,name,value,label,check,checked,disabled,text,rows,select,selected,width,style,className,labelWidth,labelHeight,labelLeft,labelTop,inputWidth,inputHeight,inputLeft,inputTop,position,size".split(","), b = document.getElementsByTagName("UL"), c = [], d = 0; d < b.length; d++)
            if ("dhtmlxForm" == b[d].className) {
                var e = document.createElement("DIV");
                c[c.length] = {
                    nodeUL: b[d],
                    nodeForm: e,
                    data: dhtmlXForm.prototype._ulToObject(b[d], a),
                    name: b[d].getAttribute("name") || null
                }
            }
        for (d = 0; d < c.length; d++) {
            c[d].nodeUL.parentNode.insertBefore(c[d].nodeForm, c[d].nodeUL);
            var f = new dhtmlXForm(c[d].nodeForm, c[d].data);
            null !== c[d].name && (window[c[d].name] = f);
            var g = c[d].nodeUL.getAttribute("oninit") || null;
            c[d].nodeUL.parentNode.removeChild(c[d].nodeUL), c[d].nodeUL = null, c[d].nodeForm = null, c[d].data = null, c[d] = null, g && ("function" == typeof g ? g() : "function" == typeof window[g] && window[g]())
        }
    }), window.dhtmlXContainer && (dhtmlx.attaches || (dhtmlx.attaches = {}), dhtmlx.attaches.attachForm || (dhtmlx.attaches.attachForm = function(a) {
        var b = document.createElement("DIV");
        return b.id = "dhxFormObj_" + this._genStr(12), b.style.position = "relative", b.style.width = "100%", b.style.height = "100%", dhtmlx.$customScroll ? dhtmlx.CustomScroll.enable(b) : b.style.overflow = "auto", b.cmp = "form", this.attachObject(b, !1, !0, !1), this.vs[this.av].form = new dhtmlXForm(b, a), this.vs[this.av].form.setSkin(this.skin), this.vs[this.av].form.setSizes(), this.vs[this.av].formObj = b, "dhx_terrace" == this.skin && (this.adjust(), this.updateNestedObjects()), this.vs[this._viewRestore()].form
    }), dhtmlx.detaches || (dhtmlx.detaches = {}), dhtmlx.detaches.detachForm || (dhtmlx.detaches.detachForm = function(a) {
        a.form && (a.form.unload(), a.form = null, a.formObj = null, a.attachForm = null)
    })), dhtmlXForm.prototype.setUserData = function(a, b, c, d) {
        if ("undefined" != typeof d) {
            var e = this.doWithItem([a, b], "_getId");
            null != e && (a = e, b = c, c = d)
        }
        this._userdata || (this._userdata = {}), this._userdata[a] = this._userdata[a] || {}, this._userdata[a][b] = c
    }, dhtmlXForm.prototype.getUserData = function(a, b, c) {
        if ("undefined" != typeof c) {
            var d = this.doWithItem([a, b], "_getId");
            null != d && (a = d, b = c)
        }
        return null != this._userdata && "undefined" != typeof this._userdata[a] && "undefined" != typeof this._userdata[a][b] ? this._userdata[a][b] : ""
    }, dhtmlXForm.prototype.setRTL = function(a) {
        (this._rtl = a === !0) ? String(this.cont).search(/dhxform_rtl/gi) < 0 && (this.cont.className += " dhxform_rtl"): String(this.cont).search(/dhxform_rtl/gi) >= 0 && (this.cont.className = String(this.cont.className).replace(/dhxform_rtl/gi, ""))
    }, _dhxForm_doClick = function(a, b) {
        if ("object" == typeof b) var c = b[1],
            b = b[0];
        if (document.createEvent) {
            var d = document.createEvent("MouseEvents");
            d.initEvent(b, !0, !1), a.dispatchEvent(d)
        } else document.createEventObject && (d = document.createEventObject(), d.button = 1, a.fireEvent("on" + b, d));
        c && window.setTimeout(function() {
            _dhxForm_doClick(a, c)
        }, 100)
    }, dhtmlXForm.prototype.setFormData = function(a) {
        for (var b in a) {
            var c = this.getItemType(b);
            switch (c) {
                case "checkbox":
                    this[1 == a[b] || 1 == parseInt(a[b]) || "true" == a[b] || a[b] == this.getItemValue(b, "realvalue") ? "checkItem" : "uncheckItem"](b);
                    break;
                case "radio":
                    this.checkItem(b, a[b]);
                    break;
                case "input":
                case "textarea":
                case "password":
                case "select":
                case "multiselect":
                case "hidden":
                case "template":
                case "combo":
                case "calendar":
                case "colorpicker":
                case "editor":
                    this.setItemValue(b, a[b]);
                    break;
                default:
                    this["setFormData_" + c] ? this["setFormData_" + c](b, a[b]) : (this.hId || (this.hId = this._genStr(12)), this.setUserData(this.hId, b, a[b]))
            }
        }
    }, dhtmlXForm.prototype.getFormData = function(a, b) {
        var c, d = {};
        for (c in this.itemPull) {
            var e = this.itemPull[c]._idd,
                f = this.itemPull[c]._type;
            if ("ch" == f && (d[e] = this.isItemChecked(e) ? this.getItemValue(e) : 0), "ra" == f && !d[this.itemPull[c]._group] && (d[this.itemPull[c]._group] = this.getCheckedValue(this.itemPull[c]._group)), f in {
                    se: 1,
                    ta: 1,
                    pw: 1,
                    hd: 1,
                    tp: 1,
                    fl: 1,
                    calendar: 1,
                    combo: 1,
                    editor: 1,
                    colorpicker: 1
                } && (d[e] = this.getItemValue(e, a)), this["getFormData_" + f] && (d[e] = this["getFormData_" + f](e)), "up" == f) {
                var g, h = this.getItemValue(e);
                for (g in h) d[g] = h[g]
            }
            if (this.itemPull[c]._list)
                for (var i = 0; i < this.itemPull[c]._list.length; i++) {
                    var j, k = this.itemPull[c]._list[i].getFormData(a, b);
                    for (j in k) d[j] = k[j]
                }
        }
        if (!b && this.hId && this._userdata[this.hId])
            for (c in this._userdata[this.hId]) d[c] || (d[c] = this._userdata[this.hId][c]);
        return d
    }, dhtmlXForm.prototype.adjustParentSize = function() {
        for (var a = 0, b = -1, c = 0; c < this.base.length; c++) a += this.base[c].firstChild.offsetWidth, this.base[c].offsetHeight > b && (b = this.base[c].offsetHeight);
        var d = !1;
        try {
            if (d = 1 == this.cont.parentNode.parentNode.parentNode.parentNode._isCell) var e = this.cont.parentNode.parentNode.parentNode.parentNode
        } catch (a) {}
        if (d && "undefined" != typeof e) a > 0 && e.setWidth(a + 10), b > 0 && e.setHeight(b + e.firstChild.firstChild.offsetHeight + 5), d = e = null;
        else {
            var f = !1;
            try {
                if (f = 1 == this.cont.parentNode.parentNode.parentNode.parentNode._isWindow) var g = this.cont.parentNode.parentNode.parentNode.parentNode
            } catch (a) {}
            f && "undefined" != typeof g && (this.cont.style.display = "none", (a > 0 || b > 0) && g._adjustToContent(a + 10, b + 10), this.cont.style.display = "", f = g = null)
        }
    }, window._dhxForm_isIPad = navigator.userAgent.search(/iPad/gi) >= 0, dhtmlXForm.prototype.load = function(a, b, c) {
        var d = this;
        d.callEvent("onXLS", []), "function" == typeof b && (c = b, b = "xml"), dhtmlxAjax.get(a, function(e) {
            var f = {};
            if ("json" == b) eval("data=" + e.xmlDoc.responseText);
            else {
                var g = e.doXPath("//data")[0];
                g && g.getAttribute("dhx_security") && (dhtmlx.security_key = g.getAttribute("dhx_security"));
                for (var h = e.doXPath("//data/*"), i = 0; i < h.length; i++) f[h[i].tagName] = h[i].firstChild ? h[i].firstChild.nodeValue : ""
            }
            var j = a.match(/(\?|\&)id\=([a-z0-9_]*)/i);
            j && j[0] && (j = j[0].split("=")[1]), d.callEvent("onBeforeDataLoad", [j, f]) && (d.formId = j, d._last_load_data = f, d.setFormData(f), d.resetDataProcessor("updated")), d.callEvent("onXLE", []), c && c.call(this)
        })
    }, dhtmlXForm.prototype.reset = function() {
        this.callEvent("onBeforeReset", [this.formId, this.getFormData()]) && (this._last_load_data && this.setFormData(this._last_load_data), this.callEvent("onAfterReset", [this.formId]))
    }, dhtmlXForm.prototype.send = function(a, b, c, d) {
        if ("function" == typeof b && (c = b, b = "post"), d === !0 || this.validate()) {
            var e, f = this.getFormData(!0),
                g = [];
            for (e in f) g.push(e + "=" + encodeURIComponent(f[e]));
            var h = function(a) {
                c && c.call(this, a, a.xmlDoc.responseText)
            };
            "get" == b ? dhtmlxAjax.get(a + (a.indexOf("?") == -1 ? "?" : "&") + g.join("&"), h) : dhtmlxAjax.post(a, g.join("&"), h)
        }
    }, dhtmlXForm.prototype.save = function() {}, dhtmlXForm.prototype.dummy = function() {}, dhtmlXForm.prototype._changeFormId = function(a, b) {
        this.formId = b
    }, dhtmlXForm.prototype._dp_init = function(a) {
        a._methods = ["dummy", "dummy", "_changeFormId", "dummy"], a._getRowData = function(a) {
            var b = this.obj.getFormData(!0);
            return b[this.action_param] = this.obj.getUserData(a, this.action_param), b
        }, a._clearUpdateFlag = function() {}, a.attachEvent("onAfterUpdate", function(a, b, c, d) {
            return "inserted" != b && "updated" != b || (this.obj.resetDataProcessor("updated"), this.obj._last_load_data = this.obj.getFormData(!0)), this.obj.callEvent("onAfterSave", [this.obj.formId, d]), !0
        }), a.autoUpdate = !1, a.setTransactionMode("POST", !0), this.dp = a, this.formId = (new Date).valueOf(), this.resetDataProcessor("inserted"), this.save = function() {
            this.callEvent("onBeforeSave", [this.formId, this.getFormData()]) && this.validate() && a.sendData()
        }
    }, dhtmlXForm.prototype.resetDataProcessor = function(a) {
        this.dp && (this.dp.updatedRows = [], this.dp._in_progress = [], this.dp.setUpdated(this.formId, !0, a))
    }, dhtmlXForm.prototype._ccActivate = function(a, b, c) {
        this._formLS || (this._formLS = {}), this._formLS[a] || (this._formLS[a] = {
            input: b,
            value: c
        }), this._ccActive || (this._ccActive = !0, this._ccDo()), b = null
    }, dhtmlXForm.prototype._ccDeactivate = function(a) {
        this._ccTm && window.clearTimeout(this._ccTm), this._ccActive = !1, null != this._formLS && null != this._formLS[a] && (this._formLS[a].input = null, this._formLS[a] = null, delete this._formLS[a])
    }, dhtmlXForm.prototype._ccDo = function() {
        this._ccTm && window.clearTimeout(this._ccTm);
        for (var a in this._formLS) {
            var b = this._formLS[a].input;
            if ("select" == String(b.tagName).toLowerCase()) {
                var c = "";
                b.selectedIndex >= 0 && b.selectedIndex < b.options.length && (c = b.options[b.selectedIndex].value)
            } else c = b.value;
            c != this._formLS[a].value && (this._formLS[a].value = c, this.callEvent("onInputChange", [b._idd, c, this])), b = null
        }
        if (this._ccActive) {
            var d = this;
            this._ccTm = window.setTimeout(function() {
                d._ccDo(), d = null
            }, 100)
        }
    }, dhtmlXForm.prototype._ccReload = function(a, b) {
        this._formLS && this._formLS[a] && (this._formLS[a].value = b)
    }, window.dhtmlxValidation || (dhtmlxValidation = function() {}, dhtmlxValidation.prototype = {
        isEmpty: function(a) {
            return "" == a
        },
        isNotEmpty: function(a) {
            return a instanceof Array ? a.length > 0 : "" == !a
        },
        isValidBoolean: function(a) {
            return !!a.match(/^(0|1|true|false)$/)
        },
        isValidEmail: function(a) {
            return !!a.match(/(^[a-z]([a-z0-9_\.]*)@([a-z_\.]*)([.][a-z]{3})$)|(^[a-z]([a-z_\.]*)@([a-z_\-\.]*)(\.[a-z]{2,3})$)/i)
        },
        isValidInteger: function(a) {
            return !!a.match(/(^-?\d+$)/)
        },
        isValidNumeric: function(a) {
            return !!a.match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)
        },
        isValidAplhaNumeric: function(a) {
            return !!a.match(/^[_\-a-z0-9]+$/gi)
        },
        isValidDatetime: function(a) {
            var b = a.match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);
            return b && !!(b[1] <= 9999 && b[2] <= 12 && b[3] <= 31 && b[4] <= 59 && b[5] <= 59 && b[6] <= 59) || !1
        },
        isValidDate: function(a) {
            var b = a.match(/^(\d{4})-(\d{2})-(\d{2})$/);
            return b && !!(b[1] <= 9999 && b[2] <= 12 && b[3] <= 31) || !1
        },
        isValidTime: function(a) {
            var b = a.match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);
            return b && !!(b[1] <= 24 && b[2] <= 59 && b[3] <= 59) || !1
        },
        isValidIPv4: function(a) {
            var b = a.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);
            return b && !!(b[1] <= 255 && b[2] <= 255 && b[3] <= 255 && b[4] <= 255) || !1
        },
        isValidCurrency: function(a) {
            return a.match(/^\$?\s?\d+?[\.,\,]?\d+?\s?\$?$/) && !0 || !1
        },
        isValidSSN: function(a) {
            return a.match(/^\d{3}\-?\d{2}\-?\d{4}$/) && !0 || !1
        },
        isValidSIN: function(a) {
            return a.match(/^\d{9}$/) && !0 || !1
        }
    }, dhtmlxValidation = new dhtmlxValidation), dhtmlXForm.prototype.items.calendar = {
        render: function(a, b) {
            var c = this;
            a._type = "calendar", a._enabled = !0, this.doAddLabel(a, b), this.doAddInput(a, b, "INPUT", "TEXT", !0, !0, "dhxform_textarea calendar"), this.doAttachChangeLS(a), a.childNodes[a._ll ? 1 : 0].childNodes[0]._idd = a._idd, a.childNodes[a._ll ? 1 : 0].childNodes[0].onblur = function() {
                var a = this.parentNode.parentNode;
                a.getForm()._ccDeactivate(a._idd), c.checkEnteredValue(this.parentNode.parentNode), a.getForm().callEvent("onBlur", [a._idd]), a = null
            }, a._f = b.dateFormat || null, a._f0 = b.serverDateFormat || a._f;
            var d = a.getForm();
            return a._c = new dhtmlXCalendarObject(a.childNodes[a._ll ? 1 : 0].childNodes[0], b.skin || d.skin || "dhx_skyblue"), a._c._nullInInput = !0, a._c.enableListener(a.childNodes[a._ll ? 1 : 0].childNodes[0]), null != a._f && a._c.setDateFormat(a._f), d._s2b(b.enableTime) || a._c.hideTime(), d._s2b(b.showWeekNumbers) && a._c.showWeekNumbers(), isNaN(b.weekStart) || a._c.setWeekStartDay(b.weekStart), "undefined" != typeof b.calendarPosition && a._c.setPosition(b.calendarPosition), null != b.minutesInterval && a._c.setMinutesInterval(b.minutesInterval), a._c._itemIdd = a._idd, a._c.attachEvent("onBeforeChange", function(b) {
                if (a._value != b) {
                    if (a.checkEvent("onBeforeChange") && a.callEvent("onBeforeChange", [a._idd, a._value, b]) !== !0) return !1;
                    a._value = b, c.setValue(a, b), a.callEvent("onChange", [this._itemIdd, a._value])
                }
                return !0
            }), this.setValue(a, b.value), d = null, this
        },
        getCalendar: function(a) {
            return a._c
        },
        setSkin: function(a, b) {
            a._c.setSkin(b)
        },
        setValue: function(a, b) {
            b && null != b && "undefined" != typeof b && "" != b ? (a._value = b instanceof Date ? b : a._c._strToDate(b, a._f0 || a._c._dateFormat), a.childNodes[a._ll ? 1 : 0].childNodes[0].value = a._c._dateToStr(a._value, a._f || a._c._dateFormat)) : (a._value = null, a.childNodes[a._ll ? 1 : 0].childNodes[0].value = ""), a._c.setDate(a._value)
        },
        getValue: function(a, b) {
            var c = a._c.getDate();
            return b === !0 && null == c ? "" : b === !0 ? a._c._dateToStr(c, a._f0 || a._c._dateFormat) : c
        },
        setDateFormat: function(a, b, c) {
            a._f = b, a._f0 = c || a._f, a._c.setDateFormat(a._f), this.setValue(a, this.getValue(a))
        },
        destruct: function(a) {
            a._c.disableListener(a.childNodes[a._ll ? 1 : 0].childNodes[0]), a._c.unload(), a._c = null;
            try {
                delete a._c
            } catch (a) {}
            a._f = null;
            try {
                delete a._f
            } catch (a) {}
            a._f0 = null;
            try {
                delete a._f0
            } catch (a) {}
            a.childNodes[a._ll ? 1 : 0].childNodes[0]._idd = null, a.childNodes[a._ll ? 1 : 0].childNodes[0].onblur = null, this.d2(a), a = null
        },
        checkEnteredValue: function(a) {
            this.setValue(a, a._c.getDate())
        }
    },
    function() {
        for (var a in {
                doAddLabel: 1,
                doAddInput: 1,
                doUnloadNestedLists: 1,
                setText: 1,
                getText: 1,
                enable: 1,
                disable: 1,
                isEnabled: 1,
                setWidth: 1,
                setReadonly: 1,
                isReadonly: 1,
                setFocus: 1,
                getInput: 1
            }) dhtmlXForm.prototype.items.calendar[a] = dhtmlXForm.prototype.items.input[a]
    }(), dhtmlXForm.prototype.items.calendar.doAttachChangeLS = dhtmlXForm.prototype.items.select.doAttachChangeLS, dhtmlXForm.prototype.items.calendar.d2 = dhtmlXForm.prototype.items.input.destruct, dhtmlXForm.prototype.getCalendar = function(a) {
        return this.doWithItem(a, "getCalendar")
    }, dhtmlXForm.prototype.setCalendarDateFormat = function(a, b, c) {
        this.doWithItem(a, "setDateFormat", b, c)
    }, dhtmlXForm.prototype.items.upload = {
        render: function(a, b) {
            a._type = "up", a._enabled = !0, a._checked = !0, a.className = b.position + ("string" == typeof b.className ? " " + b.className : "");
            var c = document.createElement("DIV");
            return a.appendChild(c), isNaN(b.inputLeft) || (a.style.left = parseInt(b.inputLeft) + "px"), isNaN(b.inputTop) || (a.style.top = parseInt(b.inputTop) + "px"), "auto" == b.inputWidth || isNaN(b.inputWidth) || (c.style.width = parseInt(b.inputWidth) + "px"), a._uploader = new dhtmlXFileUploader(c, b.swfPath || "", b.swfUrl || "", b.mode || null, b.swfLogs, b.slXap || "", b.slUrl || "", b.slLogs || ""), a._uploader.setURL(b.url || ""), a._uploader.callEvent = a.callEvent, "undefined" != typeof b.autoStart && a._uploader.setAutoStart(b.autoStart), "undefined" != typeof b.autoRemove && a._uploader.setAutoRemove(b.autoRemove), "undefined" != typeof b.titleScreen && a._uploader.enableTitleScreen(b.titleScreen), "undefined" != typeof b.titleText && a._uploader.setTitleText(b.titleText), 1 == b.hidden && this.hide(a), 1 == b.disabled && this.userDisable(a), "auto" != b.inputHeight && NaN != parseInt(b.inputHeight) && (a._uploader.p_files.style.height = parseInt(b.inputHeight) + "px"), this
        },
        destruct: function(a) {
            for (this.doUnloadNestedLists(a), a._uploader.unload(), a._uploader = null, a._checked = null, a._enabled = null, a._idd = null, a._type = null, a.onselectstart = null, a._autoCheck = null, a.callEvent = null, a.checkEvent = null, a.getForm = null; a.childNodes.length > 0;) a.removeChild(a.childNodes[0]);
            a.parentNode.removeChild(a), a = null
        },
        setText: function() {},
        getText: function() {},
        enable: function(a) {
            a._enabled = !0, String(a.className).search("disabled") >= 0 && (a.className = String(a.className).replace(/disabled/gi, "")), a._uploader.enable()
        },
        disable: function(a) {
            a._enabled = !1, String(a.className).search("disabled") < 0 && (a.className += " disabled"), a._uploader.disable()
        },
        setWidth: function(a, b) {
            a.childNodes[0].style.width = b + "px", a._width = b
        },
        getWidth: function(a) {
            return a._width || parseInt(a.childNodes[0].style.width)
        },
        setValue: function(a) {
            a._uploader.clear()
        },
        getValue: function(a) {
            var b, c = a._uploader.getData(),
                d = {},
                e = 0;
            for (b in c) d[a._idd + "_r_" + e] = c[b].realName, d[a._idd + "_s_" + e] = c[b].serverName, e++;
            return d[a._idd + "_count"] = e, d
        },
        getUploader: function(a) {
            return a._uploader
        },
        getStatus: function(a) {
            return a._uploader.getStatus()
        }
    },
    function() {
        for (var a in {
                doUnloadNestedLists: 1,
                isEnabled: 1
            }) dhtmlXForm.prototype.items.upload[a] = dhtmlXForm.prototype.items.checkbox[a]
    }(), dhtmlXForm.prototype.setFormData_upload = function(a) {
        this.doWithItem(a, "setValue")
    }, dhtmlXForm.prototype.getUploader = function(a) {
        return this.doWithItem(a, "getUploader")
    }, dhtmlXForm.prototype.getUploaderStatus = function(a) {
        return this.doWithItem(a, "getStatus")
    }, dhtmlXFileUploader.prototype.html5 = function() {}, dhtmlXFileUploader.prototype.html5.prototype = {
        _initEngine: function() {
            var a = this;
            this.buttons.browse.onclick = function() {
                a._enabled && a.f.click()
            }, this._progress_type = "percentage", this._upload_dnd = this._upload_mp = !0;
            var b = window.navigator.userAgent;
            null != b.match(/Windows/gi) && null != b.match(/AppleWebKit/gi) && null != b.match(/Safari/gi) && (b.match(/Version\/5\.1\.5/gi) && (this._upload_mp = !1), b.match(/Version\/5\.1[^\.\d{1,}]/gi) && (this._upload_dnd = !1), b.match(/Version\/5\.1\.1/gi) && (this._upload_dnd = this._upload_mp = !1), b.match(/Version\/5\.1\.2/gi) && (this._upload_dnd = !1)), this._addFileInput(), this._upload_dnd ? (this.p.ondragenter = function(a) {
                a.dataTransfer && (a.stopPropagation(), a.preventDefault())
            }, this.p.ondragover = function(a) {
                a.dataTransfer && (a.stopPropagation(), a.preventDefault())
            }, this.p.ondrop = function(b) {
                b.dataTransfer && (b.stopPropagation(), b.preventDefault(), a._enabled && a._parseFilesInInput(b.dataTransfer.files))
            }, this._titleText = "Drag-n-Drop files here or<br>click to select files for upload.") : this._titleText = "Click to select files for upload."
        },
        _addFileInput: function() {
            null != this.f && (this.f.onchange = null, this.f.parentNode.removeChild(this.f), this.f = null);
            var a = this;
            this.f = document.createElement("INPUT"), this.f.type = "file", this._upload_mp && (this.f.multiple = "1"), this.f.className = "dhx_uploader_input", this.p_controls.appendChild(this.f), this.f.onchange = function() {
                a._parseFilesInInput(this.files), _isOpera && a._addFileInput()
            }
        },
        _doUploadFile: function(a) {
            var b = this;
            this._loader || (this._loader = new XMLHttpRequest, this._loader.upload.onprogress = function(a) {
                "uploading" == b._files[this._idd].state && b._updateFileInList(this._idd, "uploading", Math.round(100 * a.loaded / a.total))
            }, this._loader.onload = function() {
                try {
                    eval("var r=" + this.responseText)
                } catch (a) {}
                "object" == typeof r && "undefined" != typeof r.state && 1 == r.state ? (b._onUploadSuccess(this.upload._idd, r.name), r = null) : b._onUploadFail(this.upload._idd)
            }, this._loader.onerror = function() {
                b._onUploadFail(this.upload._idd)
            }, this._loader.onabort = function() {
                b._onUploadAbort(this.upload._idd)
            }), this._loader.upload._idd = a;
            var c = new FormData;
            c.append("file", this._files[a].file), this._loader.open("POST", this._url + (String(this._url).indexOf("?") < 0 ? "?" : "&") + "mode=html5&" + (new Date).getTime(), !0), this._loader.setRequestHeader("X-Requested-With", "XMLHttpRequest"), this._loader.send(c)
        },
        _uploadStop: function() {
            this._uploading && this._loader && this._loader.abort()
        },
        _parseFilesInInput: function(a) {
            for (var b = 0; b < a.length; b++) this._addFileToQueue(a[b])
        },
        _addFileToQueue: function(a) {
            if (this._beforeAddFileToList(a.name, a.size)) {
                var b = a._idd || this._uid();
                this._files[b] = {
                    file: a,
                    name: a.name,
                    size: a.size,
                    state: "added"
                }, this._addFileToList(b, a.name, a.size, "added", 0), this._autoStart && !this._uploading && this._uploadStart(!0)
            }
        },
        _removeFileFromQueue: function(a) {
            if (this._files[a]) {
                var b = this._files[a].name,
                    c = null != this._data && null != this._data[a] ? this._data[a].serverName : null;
                if (this.callEvent("onBeforeFileRemove", [b, c]) === !0) {
                    var d = !1;
                    this._uploading && a == this._loader.upload._idd && "uploading" == this._files[a].state && (this._uploadStop(), d = !0), this._files[a].file = null, this._files[a].name = null, this._files[a].size = null, this._files[a].state = null, this._files[a] = null, delete this._files[a], this._removeFileFromList(a), this.callEvent("onFileRemove", [b, c]), d && this._uploadStart()
                }
            }
        },
        _unloadEngine: function() {
            this.buttons.browse.onclick = null, this.f.onchange = null, this.f.parentNode.removeChild(this.f), this.f = null, this.p.ondragenter = null, this.p.ondragover = null, this.p.ondrop = null, this._loader && (this._loader.upload.onprogress = null, this._loader.onload = null, this._loader.onerror = null, this._loader.onabort = null, this._loader = this._loader.upload._idd = null), this._unloadEngine = this._removeFileFromQueue = this._addFileToQueue = this._parseFilesInInput = this._uploadStop = this._doUploadFile = this._initEngine = null
        }
    }, dhtmlXFileUploader.prototype.html4 = function() {}, dhtmlXFileUploader.prototype.html4.prototype = {
        _initEngine: function() {
            this._addForm(), this._progress_type = "loader", this._titleText = "Click button<br>to select files for upload."
        },
        _addForm: function() {
            var a = this,
                b = this._uid();
            this.k || (this.k = document.createElement("DIV"), this.k.className = "dhx_file_form_cont", this.buttons.browse.appendChild(this.k), this.fr_name = "dhx_file_" + (new Date).getTime(), this.k.innerHTML = '<iframe name="' + this.fr_name + '" style="height:0px;width:0px;" frameBorder="0"></iframe>', this.fr = this.k.firstChild, window.navigator.userAgent.indexOf("MSIE") >= 0 ? this.fr.onreadystatechange = function() {
                "complete" == this.readyState && a._onLoad()
            } : this.fr.onload = function() {
                a._onLoad()
            });
            var c = document.createElement("DIV");
            c.innerHTML = "<form method='POST' enctype='multipart/form-data' target='" + this.fr_name + "' class='dhx_file_form' name='dhx_file_form_" + (new Date).getTime() + "'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='" + b + "'><input type='file' name='file' class='dhx_file_input'></form>", this.k.appendChild(c), c.firstChild.lastChild._idd = b, c.firstChild.lastChild.onchange = function() {
                a._beforeAddFileToList(this.value, null) && (a._addFileToQueue(this), this.onchange = null, this.parentNode.parentNode.style.display = "none", a._addForm())
            }, c = null
        },
        _onLoad: function() {
            if (this._uploading) {
                try {
                    eval("var r=" + this.fr.contentWindow.document.body.innerHTML)
                } catch (a) {}
                if ("object" == typeof r && "undefined" != typeof r.state) {
                    if ("cancelled" == r.state) return this._onUploadAbort(this.fr._idd), void(r = null);
                    if (1 == r.state) return "undefined" == typeof r.size || isNaN(r.size) || (this._files[this.fr._idd].size = r.size), this._onUploadSuccess(this.fr._idd, r.name), void(r = null)
                }
                this._onUploadFail(this.fr._idd)
            }
        },
        _addFileToQueue: function(a) {
            var b = a.value.match(/[^\\\/]*$/g),
                b = null != b[0] ? b[0] : a.value;
            this._files[a._idd] = {
                name: b,
                form: a.parentNode,
                node: a.parentNode.parentNode,
                input: a,
                state: "added"
            }, this._addFileToList(a._idd, a.value, !1, "added", 0), this._autoStart && !this._uploading && this._uploadStart(!0)
        },
        _removeFileFromQueue: function(a) {
            var b = this._files[a].name,
                c = null != this._data && null != this._data[a] ? this._data[a].serverName : null;
            this.callEvent("onBeforeFileRemove", [b, c]) === !0 && (this._files[a].input.onchange = null, this._files[a].form.removeChild(this._files[a].input), this._files[a].node.removeChild(this._files[a].form), this._files[a].node.parentNode.removeChild(this._files[a].node), this._files[a].input = null, this._files[a].name = null, this._files[a].form = null, this._files[a].node = null, this._files[a].size = null, this._files[a].state = null, this._files[a] = null, delete this._files[a], this._removeFileFromList(a), this.callEvent("onFileRemove", [b, c]))
        },
        _doUploadFile: function(a) {
            this.fr._idd = a, this._files[a].form.action = this._url, this._files[a].form.submit()
        },
        _uploadStop: function() {
            this._uploading && (this.fr.contentWindow.location.href = this._url + (this._url.indexOf("?") < 0 ? "?" : "&") + "mode=html4&action=cancel&etc=" + (new Date).getTime())
        },
        _unloadEngine: function() {
            this.k && (this.fr_name = null, this.fr.onreadystatechange = null, this.fr.onload = null, this.fr.parentNode.removeChild(this.fr), this.fr = null, this.k.firstChild.firstChild.lastChild.onchange = null, this.k.parentNode.removeChild(this.k), this.k = null), this._unloadEngine = this._uploadStop = this._doUploadFile = this._removeFileFromQueue = this._addFileToQueue = this._onLoad = this._addForm = this._initEngine = null
        }
    }, dhtmlXFileUploader.prototype.flash = function() {}, dhtmlXFileUploader.prototype.flash.prototype = {
        _initEngine: function() {
            window.dhtmlXFileUploaderSWFObjects || (window.dhtmlXFileUploaderSWFObjects = {
                items: {},
                uid: function() {
                    return this.id ? this.id++ : this.id = (new Date).getTime(), this.id
                },
                callEvent: function(a, b, c) {
                    return window.dhtmlXFileUploaderSWFObjects.items[a].uploader[b].apply(window.dhtmlXFileUploaderSWFObjects.items[a].uploader, c)
                }
            }), this._swf_obj_id = "dhtmlXFileUploaderSWFObject_" + window.dhtmlXFileUploaderSWFObjects.uid(), this._swf_file_url = this._swf_file_url + (this._swf_file_url.indexOf("?") >= 0 ? "&" : "?") + "etc=" + (new Date).getTime(), this.buttons.browse.innerHTML = "<div id='" + this._swf_obj_id + "' style='width:100%;height:100%;'></div>", swfobject.embedSWF(this._swf_file_url, this._swf_obj_id, "100%", "100%", "9", null, {
                ID: this._swf_obj_id,
                enableLogs: this._swf_logs
            }, {
                wmode: "transparent"
            });
            var a = swfobject.getFlashPlayerVersion();
            this._titleText = "Engine successfuly inited<br>Flash Player: " + a.major + "." + a.minor + "." + a.release, this._progress_type = "percentage", window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id] = {
                id: this._swf_obj_id,
                uploader: this
            }
        },
        _beforeAddFileToQueue: function(a, b) {
            return this.callEvent("onBeforeFileAdd", [a, b]) === !0
        },
        _addFileToQueue: function(a, b, c) {
            if (_isIE) {
                var d = document.createElement("INPUT");
                d.type = "TEXT", d.style.position = "absolute", d.style.left = "0px", d.style.top = getAbsoluteTop(this.buttons.browse) + "px", d.style.width = "10px", document.body.appendChild(d), d.focus(), document.body.removeChild(d), d = null
            }
            this._files[a] = {
                name: b,
                size: c,
                state: "added"
            }, this._addFileToList(a, b, c, "added", 0), this._autoStart && !this._uploading && this._uploadStart(!0)
        },
        _removeFileFromQueue: function(a) {
            if (this._files[a]) {
                var b = this._files[a].name,
                    c = null != this._data && null != this._data[a] ? this._data[a].serverName : null;
                if (this.callEvent("onBeforeFileRemove", [b, c]) === !0) {
                    var d = !1;
                    this._uploading && "uploading" == this._files[a].state && (this._uploadStop(), d = !0), swfobject.getObjectById(this._swf_obj_id).removeFileById(a), this._files[a].name = null, this._files[a].size = null, this._files[a].state = null, this._files[a] = null, delete this._files[a], this._removeFileFromList(a), this.callEvent("onFileRemove", [b, c]), d && this._uploadStart()
                }
            }
        },
        _doUploadFile: function(a) {
            swfobject.getObjectById(this._swf_obj_id).upload(a, this._swf_upolad_url)
        },
        _uploadStop: function() {
            for (var a in this._files) "uploading" == this._files[a].state && swfobject.getObjectById(this._swf_obj_id).uploadStop(a)
        },
        _unloadEngine: function() {
            window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id] && (window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].id = null, window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].uploader = null, window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id] = null, delete window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]), this._unloadEngine = this._uploadStop = this._doUploadFile = this._removeFileFromQueue = this._addFileToQueue = this._initEngine = this._swf_obj_id = null
        }
    }, dhtmlXFileUploader.prototype.sl = function() {}, dhtmlXFileUploader.prototype.sl.prototype = {
        _initEngine: function() {
            "undefined" == typeof this._sl_v && (this._sl_v = this.getSLVersion()), window.dhtmlXFileUploaderSLObjects || (window.dhtmlXFileUploaderSLObjects = {
                items: {},
                uid: function() {
                    return this.id ? this.id++ : this.id = (new Date).getTime(), this.id
                },
                callEvent: function(a, b, c) {
                    window.dhtmlXFileUploaderSLObjects.items[a].uploader[b].apply(window.dhtmlXFileUploaderSLObjects.items[a].uploader, c)
                }
            }), this._sl_obj_id = "dhtmlXFileUploaderSLObject_" + window.dhtmlXFileUploaderSLObjects.uid(), 0 != this._sl_v ? (this._titleText = "Engine successfuly inited<br>Silverlight version: " + this._sl_v[0] + "." + this._sl_v[1], this.buttons.browse.innerHTML = '<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="' + this._sl_obj_id + '"><param name="source" value="' + this._sl_xap + '"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID=' + this._sl_obj_id + ",LOGS=" + this._sl_logs + '"/><param name="minRuntimeVersion" value="5.0"/></object></div>') : (this._titleText = "Silverlight plugin not found<br>or version less than 4.0", this.buttons.browse.style.cursor = "wait", this.buttons.browse.title = ""), this._progress_type = "percentage", window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id] = {
                id: this._sl_obj_id,
                uploader: this
            }
        },
        _addFileToQueue: function(a, b, c) {
            this._files[a] = {
                name: b,
                size: c,
                state: "added"
            }, this._addFileToList(a, b, c, "added", 0), this._autoStart && !this._uploading && this._uploadStart(!0)
        },
        _removeFileFromQueue: function(a) {
            if (this._files[a]) {
                var b = !1;
                this._uploading && "uploading" == this._files[a].state && (this._uploadStop(), b = !0), document.getElementById([this._sl_obj_id]).Content.a.removeFileById(a), this._files[a].name = null, this._files[a].size = null, this._files[a].state = null, this._files[a] = null, delete this._files[a], this._removeFileFromList(a), b && this._uploadStart()
            }
        },
        _doUploadFile: function(a) {
            document.getElementById(this._sl_obj_id).Content.a.upload(a, this._sl_upload_url, "&mode=sl&etc=" + (new Date).getTime())
        },
        _uploadStop: function() {
            this._uploading = !1;
            for (var a in this._files) "uploading" == this._files[a].state && document.getElementById(this._sl_obj_id).Content.a.uploadStop(a)
        },
        _unloadEngine: function() {
            window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id] && (window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id = null, window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader = null, window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id] = null, delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]), this._unloadEngine = this._uploadStop = this._doUploadFile = this._removeFileFromQueue = this._addFileToQueue = this._initEngine = this._sl_obj_id = null
        }
    }, dhtmlXFileUploader.prototype.setSLURL = function(a) {
        this._sl_upload_url = a
    }, dhtmlXFileUploader.prototype.getSLVersion = function() {
        var a = !1;
        if (_isIE) try {
            var b = new ActiveXObject("AgControl.AgControl");
            if (null != b)
                for (var c = 4, d = 0; b.isVersionSupported([c, d].join("."));) a = [c, d], ++d > 9 && (c++, d = 0);
            b = null
        } catch (a) {} else null != navigator.plugins["Silverlight Plug-In"] && (a = navigator.plugins["Silverlight Plug-In"].description.split("."));
        return a
    }, dhtmlXForm.prototype.items.colorpicker = {
        ev: !1,
        inp: null,
        colorpicker: {},
        cz: {},
        render: function(a, b) {
            var c = this;
            return a._type = "colorpicker", a._enabled = !0, this.doAddLabel(a, b), this.doAddInput(a, b, "INPUT", "TEXT", !0, !0, "dhxform_textarea"), this.doAttachChangeLS(a), a._value = b.value || "", a.childNodes[a._ll ? 1 : 0].childNodes[0].value = a._value, this.cz[a._idd] = document.createElement("DIV"),
                this.cz[a._idd].style.position = "absolute", this.cz[a._idd].style.top = "0px", this.cz[a._idd].style.zIndex = 249, document.body.insertBefore(this.cz[a._idd], document.body.firstChild), this.colorpicker[a._idd] = new dhtmlXColorPicker(this.cz[a._idd], null, a.getForm()._s2b(b.enableCustomColors), !0), this.colorpicker[a._idd].setImagePath(b.imagePath || ""), this.colorpicker[a._idd].setSkin(""), this.colorpicker[a._idd].init(), "undefined" != typeof b.customColors && this.colorpicker[a._idd].setCustomColors(b.customColors), this.colorpicker[a._idd].elements.cs_Content.onclick = function(a) {
                    (a || event).cancelBubble = !0
                }, this.colorpicker[a._idd].setOnSelectHandler(function(b) {
                    a._value == b || a.checkEvent("onBeforeChange") && a.callEvent("onBeforeChange", [a._idd, a._value, b]) !== !0 || (a._value = b, c.setValue(a, b), a.callEvent("onChange", [a._idd, a._value]))
                }), a.childNodes[a._ll ? 1 : 0].childNodes[0]._idd = a._idd, a.childNodes[a._ll ? 1 : 0].childNodes[0].onclick = function() {
                    c.colorpicker[this._idd].isVisible() ? (c.colorpicker[this._idd].hide(), c.inp = null) : (c.checkEnteredValue(this.parentNode.parentNode), c.colorpicker[this._idd].setPosition(getAbsoluteLeft(this), getAbsoluteTop(this) + this.offsetHeight - 1), c.colorpicker[this._idd].setColor(a._value), c.colorpicker[this._idd].show(), c.inp = this._idd)
                }, a.childNodes[a._ll ? 1 : 0].childNodes[0].onblur = function() {
                    var a = this.parentNode.parentNode;
                    a.getForm()._ccDeactivate(a._idd), c.checkEnteredValue(this.parentNode.parentNode), a.getForm().callEvent("onBlur", [a._idd]), a = null
                }, this.ev || ("undefined" != typeof window.addEventListener ? window.addEventListener("click", this.clickEvent, !1) : document.body.attachEvent("onclick", this.clickEvent), this.ev = !0), this
        },
        clickEvent: function() {
            dhtmlXForm.prototype.items.colorpicker.hideAllColorPickers()
        },
        hideAllColorPickers: function() {
            for (var a in this.colorpicker) a != this.inp && this.colorpicker[a].hide();
            this.inp = null
        },
        getColorPicker: function(a) {
            return this.colorpicker[a._idd]
        },
        destruct: function(a) {
            this.colorpicker[a._idd].elements.cs_Content.onclick = null, this.colorpicker[a._idd].unload && this.colorpicker[a._idd].unload(), this.colorpicker[a._idd] = null;
            try {
                delete this.colorpicker[a._idd]
            } catch (a) {}
            this.cz[a._idd].parentNode.removeChild(this.cz[a._idd]), this.cz[a._idd] = null;
            try {
                delete this.cz[a._idd]
            } catch (a) {}
            var b, c = 0;
            for (b in this.colorpicker) c++;
            0 == c && ("function" == typeof window.addEventListener ? window.removeEventListener("click", this.clickEvent, !1) : document.body.detachEvent("onclick", this.clickEvent), this.ev = !1), a.childNodes[a._ll ? 1 : 0].childNodes[0]._idd = null, a.childNodes[a._ll ? 1 : 0].childNodes[0].onclick = null, a.childNodes[a._ll ? 1 : 0].childNodes[0].onblur = null, this.d2(a), a = null
        },
        checkEnteredValue: function(a) {
            this.setValue(a, a.childNodes[a._ll ? 1 : 0].childNodes[0].value)
        }
    },
    function() {
        for (var a in {
                doAddLabel: 1,
                doAddInput: 1,
                doUnloadNestedLists: 1,
                setText: 1,
                getText: 1,
                enable: 1,
                disable: 1,
                isEnabled: 1,
                setWidth: 1,
                setReadonly: 1,
                isReadonly: 1,
                setValue: 1,
                getValue: 1,
                updateValue: 1,
                setFocus: 1,
                getInput: 1
            }) dhtmlXForm.prototype.items.colorpicker[a] = dhtmlXForm.prototype.items.input[a]
    }(), dhtmlXForm.prototype.items.colorpicker.doAttachChangeLS = dhtmlXForm.prototype.items.select.doAttachChangeLS, dhtmlXForm.prototype.items.colorpicker.d2 = dhtmlXForm.prototype.items.input.destruct, dhtmlXForm.prototype.getColorPicker = function(a) {
        return this.doWithItem(a, "getColorPicker")
    }, "undefined" != typeof dhtmlXColorPicker && (dhtmlXColorPicker.prototype.unload = function() {
        for (this.elements.cs_SelectorVer.parentNode.removeChild(this.elements.cs_SelectorVer), this.elements.cs_SelectorHor.parentNode.removeChild(this.elements.cs_SelectorHor), this.elements.cs_SelectorVer = null, this.elements.cs_SelectorHor = null, this.elements.cs_SelectorDiv.ondblclick = null, this.elements.cs_SelectorDiv.onmousedown = null, this.elements.cs_SelectorDiv.z = null, this.elements.cs_SelectorDiv.parentNode.removeChild(this.elements.cs_SelectorDiv), this.elements.cs_SelectorDiv = null, this.elements.cs_LumSelectArrow.onmousedown = null, this.elements.cs_LumSelectArrow.z = null, this.elements.cs_LumSelectArrow.parentNode.removeChild(this.elements.cs_LumSelectArrow), this.elements.cs_LumSelectArrow = null, this.elements.cs_LumSelectLine.parentNode.removeChild(this.elements.cs_LumSelectLine), this.elements.cs_LumSelectLine = null; this.elements.cs_LumSelect.childNodes.length > 0;) this.elements.cs_LumSelect.removeChild(this.elements.cs_LumSelect.childNodes[0]);
        this.elements.cs_LumSelect.ondblclick = null, this.elements.cs_LumSelect.onmousedown = null, this.elements.cs_LumSelect.z = null, this.elements.cs_LumSelect.parentNode.removeChild(this.elements.cs_LumSelect), this.elements.cs_LumSelect = null, this.elements.cs_EndColor.parentNode.removeChild(this.elements.cs_EndColor), this.elements.cs_EndColor = null, this.elements.cs_InputHue.onchange = null, this.elements.cs_InputHue.z = null, this.elements.cs_InputHue.parentNode.removeChild(this.elements.cs_InputHue), this.elements.cs_InputHue = null, this.elements.cs_InputRed.onchange = null, this.elements.cs_InputRed.z = null, this.elements.cs_InputRed.parentNode.removeChild(this.elements.cs_InputRed), this.elements.cs_InputRed = null, this.elements.cs_InputSat.onchange = null, this.elements.cs_InputSat.z = null, this.elements.cs_InputSat.parentNode.removeChild(this.elements.cs_InputSat), this.elements.cs_InputSat = null, this.elements.cs_InputGreen.onchange = null, this.elements.cs_InputGreen.z = null, this.elements.cs_InputGreen.parentNode.removeChild(this.elements.cs_InputGreen), this.elements.cs_InputGreen = null, this.elements.cs_Hex.onchange = null, this.elements.cs_Hex.z = null, this.elements.cs_Hex.parentNode.removeChild(this.elements.cs_Hex), this.elements.cs_Hex = null, this.elements.cs_InputLum.onchange = null, this.elements.cs_InputLum.z = null, this.elements.cs_InputLum.parentNode.removeChild(this.elements.cs_InputLum), this.elements.cs_InputLum = null, this.elements.cs_InputBlue.onchange = null, this.elements.cs_InputBlue.z = null, this.elements.cs_InputBlue.parentNode.removeChild(this.elements.cs_InputBlue), this.elements.cs_InputBlue = null, this.elements.cs_ButtonOk.onclick = null, this.elements.cs_ButtonOk.onmouseout = null, this.elements.cs_ButtonOk.onmouseover = null, this.elements.cs_ButtonOk.z = null, this.elements.cs_ButtonOk.parentNode.removeChild(this.elements.cs_ButtonOk), this.elements.cs_ButtonOk = null, this.elements.cs_ButtonCancel.onclick = null, this.elements.cs_ButtonCancel.onmouseout = null, this.elements.cs_ButtonCancel.onmouseover = null, this.elements.cs_ButtonCancel.z = null, this.elements.cs_ButtonCancel.parentNode.removeChild(this.elements.cs_ButtonCancel), this.elements.cs_ButtonCancel = null, this.elements.cs_ContentTable.parentNode.removeChild(this.elements.cs_ContentTable), this.elements.cs_ContentTable = null, this.elements.cs_Content.parentNode.removeChild(this.elements.cs_Content), this.z = this.elements.cs_Content = null, this.detachAllEvents(), this.customColors = this.linkToObjects = this.language = this.elements = this.container = this._changeValueHEX = this._changeValueRGB = this._changeValueHSV = this._selectCustomColor = this._getColorHEX = this._reinitCustomColors = this._initCustomColors = this._hex2dec = this._dec2hex = this._colorizeLum = this._drawLum = this._rgb2hsv = this._hsv2rgb = this._drawValues = this._calculateColor = this._getOffsetLeft = this._getOffsetTop = this._getOffset = this._stopMoveLum = this._mouseMoveLum = this._startMoveLum = this._stopMoveColor = this._mouseMoveColor = this._startMoveColor = this._setLumPos = this._getScrollers = this._setCrossPos = this._initEvents = this._initCsIdElement = this.unload = this.showA = this.show = this.normalButton = this.hoverButton = this.isVisible = this.setSkin = this.loadUserLanguage = this.init = this.setImagePath = this.hideOnSelect = this.linkTo = this.getSelectedColor = this.setOnCancelHandler = this.setOnSelectHandler = this.hide = this.setPosition = this.close = this.setColor = this.setCustomColors = this.redraw = this.restoreFromHEX = this.restoreFromHSV = this.restoreFromRGB = this.addCustomColor = this.restoreColor = this.saveColor = this.clickCancel = this.clickOk = this.resetHandlers = this.generate = this.detachAllEvents = this.detachEvent = this.eventCatcher = this.checkEvent = this.callEvent = this.attachEvent = null
    }), dhtmlXForm.prototype.items.container = {
        render: function(a, b) {
            return a._type = "container", a._enabled = !0, this.doAddLabel(a, b), this.doAddInput(a, b, "DIV", null, !0, !0, "dhxform_container"), this
        },
        getContainer: function(a) {
            return a.childNodes[a._ll ? 1 : 0].childNodes[0]
        },
        enable: function(a) {
            a._enabled = !0, String(a.className).search("disabled") >= 0 && (a.className = String(a.className).replace(/disabled/gi, "")), a.callEvent("onEnable", [a._idd])
        },
        disable: function(a) {
            a._enabled = !1, String(a.className).search("disabled") < 0 && (a.className += " disabled"), a.callEvent("onDisable", [a._idd])
        },
        doAttachEvents: function() {},
        setValue: function() {},
        getValue: function() {
            return null
        }
    }, dhtmlXForm.prototype.getContainer = function(a) {
        return this.doWithItem(a, "getContainer")
    },
    function() {
        for (var a in dhtmlXForm.prototype.items.input) dhtmlXForm.prototype.items.container[a] || (dhtmlXForm.prototype.items.container[a] = dhtmlXForm.prototype.items.input[a])
    }(), dhtmlXForm.prototype.items.autocomplete = {
        render: function(a, b) {
            return a._type = "autocomplete", a._enabled = !0, a._value = null, a._newValue = null, this.optionsCurrentCo, this.doAddLabel(a, b), this.doAddInput(a, b, "SELECT", null, !0, !0, "dhxform_select"), this.doAttachEvents(a), this.doLoadOpts(a, b), a.onselectstart = function(a) {
                return a = a || event, a.returnValue = !0
            }, a.childNodes[a._ll ? 1 : 0].childNodes[0].setAttribute("opt_type", b.comboType || ""), a._combo = new dhtmlXComboFromSelect(a.childNodes[a._ll ? 1 : 0].childNodes[0]), a._combo._currentComboValue = a._combo.getSelectedValue(), a._combo.DOMelem_input.id = b.uid, a._combo.DOMelem_button.onmousedown = function() {
                return !1
            }, a._combo._currentItensOpt = b, "undefined" == typeof a._combo._currentItensOpt.minchar && (a._combo._currentItensOpt.minchar = 1), a._combo.getComboText().length, b.filtering && a._combo.enableFilteringMode(!0, b.connector, !0), 1 == b.readonly && this.setReadonly(a, !0), b.style && (a._combo.DOMelem_input.style.cssText += b.style), "function" == typeof window.addEventListener ? (a._combo.DOMelem_input.addEventListener("focus", this._comboFocus, !1), a._combo.DOMelem_input.addEventListener("blur", this._comboBlur, !1)) : (a._combo.DOMelem_input.attachEvent("onfocus", this._comboFocus), a._combo.DOMelem_input.attachEvent("onblur", this._comboBlur)), this
        },
        destruct: function(a) {
            a.childNodes[a._ll ? 1 : 0].childNodes[0].onchange = null, "function" == typeof window.addEventListener ? (a._combo.DOMelem_input.removeEventListener("focus", this._comboFocus, !1), a._combo.DOMelem_input.removeEventListener("blur", this._comboBlur, !1)) : (a._combo.DOMelem_input.detachEvent("onfocus", this._comboFocus), a._combo.DOMelem_input.detachEvent("onblur", this._comboBlur)), a._combo._currentComboValue = null, a._combo.destructor(), a._combo = null, a._apiChange = null, this.d2(a), a = null
        },
        doAttachEvents: function(a) {
            var b = this;
            a.childNodes[a._ll ? 1 : 0].childNodes[0].onchange = function() {
                b.doOnChange(this), b.doValidate(this.DOMParent.parentNode.parentNode)
            }
        },
        doValidate: function(a) {
            a.getForm().hot_validate && this._validate(a)
        },
        doOnChange: function(a) {
            var b = a.DOMParent.parentNode.parentNode;
            if (!b._apiChange) {
                if (a._newComboValue = a.getSelectedValue(), a._newComboValue != a._currentComboValue) {
                    if (b.checkEvent("onBeforeChange") && b.callEvent("onBeforeChange", [b._idd, a._currentComboValue, a._newComboValue]) !== !0) return window.setTimeout(function() {
                        a.setComboValue(a._currentComboValue)
                    }, 1), !1;
                    a._currentComboValue = a._newComboValue, b.callEvent("onChange", [b._idd, a._currentComboValue])
                }
                b._autoCheck(b._enabled)
            }
        },
        doLoadOptsConnector: function(a, b) {
            var c = this,
                d = a;
            a._connector_working = !0, a._apiChange = !0, a._combo.loadXML(b, function() {
                d.callEvent("onOptionsLoaded", [d._idd]), d._connector_working = !1, null != d._connector_value && (c.setValue(d, d._connector_value), d._connector_value = null), d._apiChange = !1, c = d = null
            })
        },
        enable: function(a) {
            String(a.className).search("disabled") >= 0 && (a.className = String(a.className).replace(/disabled/gi, "")), a._enabled = !0, a._combo.disable(!1), a._combo.DOMelem_button.src = (window.dhx_globalImgPath ? dhx_globalImgPath : "") + "combo_select" + (dhtmlx.skin ? "_" + dhtmlx.skin : "") + ".gif"
        },
        disable: function(a) {
            String(a.className).search("disabled") < 0 && (a.className += " disabled"), a._enabled = !1, a._combo.disable(!0), a._combo.DOMelem_button.src = (window.dhx_globalImgPath ? dhx_globalImgPath : "") + "combo_select_dis" + (dhtmlx.skin ? "_" + dhtmlx.skin : "") + ".gif"
        },
        getCombo: function(a) {
            return a._combo
        },
        setValue: function(a, b) {
            a._connector_working ? a._connector_value = b : (a._apiChange = !0, a._combo.setComboValue(b), a._combo._currentComboValue = a._combo.getActualValue(), a._apiChange = !1)
        },
        getValue: function(a) {
            return a._combo.getActualValue()
        },
        setWidth: function(a, b) {
            a.childNodes[a._ll ? 1 : 0].childNodes[0].style.width = b + "px"
        },
        setReadonly: function(a, b) {
            a._combo && (a._combo_ro = b, a._combo.readonly(a._combo_ro))
        },
        isReadonly: function(a) {
            return a._combo_ro || !1
        },
        setFocus: function(a) {
            a._enabled && a._combo.DOMelem_input.focus()
        },
        _setCss: function(a, b, c) {
            a._combo.DOMlist.style.fontSize = c
        },
        _comboFocus: function(a) {
            var a = a || event,
                b = (a.target || a.srcElement).parentNode.parentNode,
                c = b.parentNode.parentNode;
            "dhx_terrace" == c.getForm().skin && b.className.search(/combo_in_focus/) < 0 && (b.className += " combo_in_focus");
            for (var d = 0; d < c._combo.DOMlist.childNodes.length; d++) c._combo.DOMlist.childNodes[d].onmousedown = function() {
                return !1
            };
            c.callEvent("onFocus", [c._idd]), c = b = null
        },
        _comboBlur: function(a) {
            var a = a || event,
                b = (a.target || a.srcElement).parentNode.parentNode,
                c = b.parentNode.parentNode;
            "dhx_terrace" == c.getForm().skin && b.className.search(/combo_in_focus/) >= 0 && (b.className = b.className.replace(/combo_in_focus/gi, ""));
            for (var d = 0; d < c._combo.DOMlist.childNodes.length; d++) c._combo.DOMlist.childNodes[d].onmousedown = null;
            c.callEvent("onBlur", [c._idd]), c = b = null
        }
    },
    function() {
        for (var a in {
                doAddLabel: 1,
                doAddInput: 1,
                doLoadOpts: 1,
                doUnloadNestedLists: 1,
                setText: 1,
                getText: 1,
                isEnabled: 1,
                _checkNoteWidth: 1
            }) dhtmlXForm.prototype.items.autocomplete[a] = dhtmlXForm.prototype.items.select[a]
    }(), dhtmlXForm.prototype.items.autocomplete.d2 = dhtmlXForm.prototype.items.select.destruct, dhtmlXForm.prototype.items.combo = {
        render: function(a, b) {
            return a._type = "combo", a._enabled = !0, a._value = null, a._newValue = null, this.doAddLabel(a, b), this.doAddInput(a, b, "SELECT", null, !0, !0, "dhxform_select"), this.doAttachEvents(a), this.doLoadOpts(a, b), a.onselectstart = function(a) {
                return a = a || event, a.returnValue = !0
            }, a.childNodes[a._ll ? 1 : 0].childNodes[0].setAttribute("opt_type", b.comboType || ""), a._combo = new dhtmlXComboFromSelect(a.childNodes[a._ll ? 1 : 0].childNodes[0]), a._combo._currentComboValue = a._combo.getSelectedValue(), a._combo.DOMelem_input.id = b.uid, a._combo.DOMelem_button.onmousedown = function() {
                return !1
            }, b.connector && this.doLoadOptsConnector(a, b.connector), b.filtering && a._combo.enableFilteringMode(!0), 1 == b.readonly && this.setReadonly(a, !0), b.style && (a._combo.DOMelem_input.style.cssText += b.style), "function" == typeof window.addEventListener ? (a._combo.DOMelem_input.addEventListener("focus", this._comboFocus, !1), a._combo.DOMelem_input.addEventListener("blur", this._comboBlur, !1)) : (a._combo.DOMelem_input.attachEvent("onfocus", this._comboFocus), a._combo.DOMelem_input.attachEvent("onblur", this._comboBlur)), this
        },
        destruct: function(a) {
            a.childNodes[a._ll ? 1 : 0].childNodes[0].onchange = null, "function" == typeof window.addEventListener ? (a._combo.DOMelem_input.removeEventListener("focus", this._comboFocus, !1), a._combo.DOMelem_input.removeEventListener("blur", this._comboBlur, !1)) : (a._combo.DOMelem_input.detachEvent("onfocus", this._comboFocus), a._combo.DOMelem_input.detachEvent("onblur", this._comboBlur)), a._combo._currentComboValue = null, a._combo.destructor(), a._combo = null, a._apiChange = null, this.d2(a), a = null
        },
        doAttachEvents: function(a) {
            var b = this;
            a.childNodes[a._ll ? 1 : 0].childNodes[0].onchange = function() {
                b.doOnChange(this), b.doValidate(this.DOMParent.parentNode.parentNode)
            }
        },
        doValidate: function(a) {
            a.getForm().hot_validate && this._validate(a)
        },
        doOnChange: function(a) {
            var b = a.DOMParent.parentNode.parentNode;
            if (!b._apiChange) {
                if (a._newComboValue = a.getSelectedValue(), a._newComboValue != a._currentComboValue) {
                    if (b.checkEvent("onBeforeChange") && b.callEvent("onBeforeChange", [b._idd, a._currentComboValue, a._newComboValue]) !== !0) return window.setTimeout(function() {
                        a.setComboValue(a._currentComboValue)
                    }, 1), !1;
                    a._currentComboValue = a._newComboValue, b.callEvent("onChange", [b._idd, a._currentComboValue])
                }
                b._autoCheck(b._enabled)
            }
        },
        doLoadOptsConnector: function(a, b) {
            var c = this,
                d = a;
            a._connector_working = !0, a._apiChange = !0, a._combo.loadXML(b, function() {
                d.callEvent("onOptionsLoaded", [d._idd]), d._connector_working = !1, null != d._connector_value && (c.setValue(d, d._connector_value), d._connector_value = null), d._apiChange = !1, c = d = null
            })
        },
        enable: function(a) {
            String(a.className).search("disabled") >= 0 && (a.className = String(a.className).replace(/disabled/gi, "")), a._enabled = !0, a._combo.disable(!1), a._combo.DOMelem_button.src = (window.dhx_globalImgPath ? dhx_globalImgPath : "") + "combo_select" + (dhtmlx.skin ? "_" + dhtmlx.skin : "") + ".gif"
        },
        disable: function(a) {
            String(a.className).search("disabled") < 0 && (a.className += " disabled"), a._enabled = !1, a._combo.disable(!0), a._combo.DOMelem_button.src = (window.dhx_globalImgPath ? dhx_globalImgPath : "") + "combo_select_dis" + (dhtmlx.skin ? "_" + dhtmlx.skin : "") + ".gif"
        },
        getCombo: function(a) {
            return a._combo
        },
        setValue: function(a, b) {
            a._connector_working ? a._connector_value = b : (a._apiChange = !0, a._combo.setComboValue(b), a._combo._currentComboValue = a._combo.getActualValue(), a._apiChange = !1)
        },
        getValue: function(a) {
            return a._combo.getActualValue()
        },
        setWidth: function(a, b) {
            a.childNodes[a._ll ? 1 : 0].childNodes[0].style.width = b + "px"
        },
        setReadonly: function(a, b) {
            a._combo && (a._combo_ro = b, a._combo.readonly(a._combo_ro))
        },
        isReadonly: function(a) {
            return a._combo_ro || !1
        },
        setFocus: function(a) {
            a._enabled && a._combo.DOMelem_input.focus()
        },
        _setCss: function(a, b, c) {
            a._combo.DOMlist.style.fontSize = c
        },
        _comboFocus: function(a) {
            var a = a || event,
                b = (a.target || a.srcElement).parentNode.parentNode,
                c = b.parentNode.parentNode;
            "dhx_terrace" == c.getForm().skin && b.className.search(/combo_in_focus/) < 0 && (b.className += " combo_in_focus");
            for (var d = 0; d < c._combo.DOMlist.childNodes.length; d++) c._combo.DOMlist.childNodes[d].onmousedown = function() {
                return !1
            };
            c.callEvent("onFocus", [c._idd]), c = b = null
        },
        _comboBlur: function(a) {
            var a = a || event,
                b = (a.target || a.srcElement).parentNode.parentNode,
                c = b.parentNode.parentNode;
            "dhx_terrace" == c.getForm().skin && b.className.search(/combo_in_focus/) >= 0 && (b.className = b.className.replace(/combo_in_focus/gi, ""));
            for (var d = 0; d < c._combo.DOMlist.childNodes.length; d++) c._combo.DOMlist.childNodes[d].onmousedown = null;
            c.callEvent("onBlur", [c._idd]), c = b = null
        }
    };
! function() {
    for (var a in {
            doAddLabel: 1,
            doAddInput: 1,
            doLoadOpts: 1,
            doUnloadNestedLists: 1,
            setText: 1,
            getText: 1,
            isEnabled: 1,
            _checkNoteWidth: 1
        }) dhtmlXForm.prototype.items.combo[a] = dhtmlXForm.prototype.items.select[a]
}();
dhtmlXForm.prototype.getFormData_autocomplete = function(a) {
        return this.doWithItem(a, "getValue")
    }, dhtmlXForm.prototype.setFormData_autocomplete = function(a, b) {
        return this.doWithItem(a, "setValue", b)
    }, dhtmlXForm.prototype.items.combo.d2 = dhtmlXForm.prototype.items.select.destruct, dhtmlXForm.prototype.getCombo = function(a) {
        return this.doWithItem(a, "getCombo")
    }, dhtmlXForm.prototype.items.editor = {
        editor: {},
        render: function(a, b) {
            !isNaN(b.rows), a._type = "editor", a._enabled = !0, this.doAddLabel(a, b), this.doAddInput(a, b, "DIV", null, !0, !0, "dhxform_item_template dhxeditor_inside"), a._value = b.value || "";
            var c = this;
            return this.editor[a._idd] = new dhtmlXEditor(a.childNodes[a._ll ? 1 : 0].childNodes[0]), this.editor[a._idd].setContent(a._value), this.editor[a._idd].attachEvent("onAccess", function(b, d) {
                _dhxForm_doClick(document.body, "click"), "blur" == b ? (c.doOnBlur(a, this), a.callEvent("onBlur", [a._idd]), "dhx_terrace" == a.getForm().skin && (a.childNodes[a._ll ? 1 : 0].childNodes[0].className = "dhxform_item_template dhxeditor_inside")) : (a.callEvent("onEditorAccess", [a._idd, b, d, this, a.getForm()]), a.callEvent("onFocus", [a._idd]), "dhx_terrace" == a.getForm().skin && (a.childNodes[a._ll ? 1 : 0].childNodes[0].className = "dhxform_item_template dhxeditor_inside_focus"))
            }), this.editor[a._idd].attachEvent("onToolbarClick", function(b) {
                a.callEvent("onEditorToolbarClick", [a._idd, b, this, a.getForm()])
            }), b.readonly && this.setReadonly(a, !0), a.childNodes[a._ll ? 0 : 1].childNodes[0].removeAttribute("for"), a.childNodes[a._ll ? 0 : 1].childNodes[0].onclick = function() {
                c.editor[a._idd]._focus()
            }, this.editor[a._idd]._isToolbar || (this.editor[a._idd].base.firstChild.onmousedown = function() {
                return !1
            }), this
        },
        doOnBlur: function(a, b) {
            var c = b.getContent();
            a._value != c && (a.checkEvent("onBeforeChange") && a.callEvent("onBeforeChange", [a._idd, a._value, c]) !== !0 ? b.setContent(a._value) : (a._value = c, a.callEvent("onChange", [a._idd, c])))
        },
        setValue: function(a, b) {
            a._value != b && (a._value = b, this.editor[a._idd].setContent(a._value))
        },
        getValue: function(a) {
            return a._value = this.editor[a._idd].getContent(), a._value
        },
        enable: function(a) {
            this.editor[a._idd].setReadonly(!1), this.doEn(a)
        },
        disable: function(a) {
            this.editor[a._idd].setReadonly(!0), this.doDis(a)
        },
        setReadonly: function(a, b) {
            this.editor[a._idd].setReadonly(b)
        },
        getEditor: function(a) {
            return this.editor[a._idd] || null
        },
        destruct: function(a) {
            a.childNodes[a._ll ? 0 : 1].childNodes[0].onclick = null, this.editor[a._idd].unload(), this.editor[a._idd] = null, this.d2(a), a = null
        },
        setFocus: function(a) {
            this.editor[a._idd]._focus()
        }
    },
    function() {
        for (var a in {
                doAddLabel: 1,
                doAddInput: 1,
                doUnloadNestedLists: 1,
                setText: 1,
                getText: 1,
                setWidth: 1,
                isEnabled: 1
            }) dhtmlXForm.prototype.items.editor[a] = dhtmlXForm.prototype.items.template[a]
    }(), dhtmlXForm.prototype.items.editor.d2 = dhtmlXForm.prototype.items.select.destruct, dhtmlXForm.prototype.items.editor.doEn = dhtmlXForm.prototype.items.select.enable, dhtmlXForm.prototype.items.editor.doDis = dhtmlXForm.prototype.items.select.disable, dhtmlXForm.prototype.getEditor = function(a) {
        return this.doWithItem(a, "getEditor")
    };
var globalActiveDHTMLGridObject;
String.prototype._dhx_trim = function() {
        return this.replace(/&nbsp;/g, " ").replace(/(^[ \t]*)|([ \t]*$)/g, "")
    }, dhtmlxArray._master = {
        _dhx_find: function(a) {
            for (var b = 0; b < this.length; b++)
                if (a == this[b]) return b;
            return -1
        },
        _dhx_insertAt: function(a, b) {
            this[this.length] = null;
            for (var c = this.length - 1; c >= a; c--) this[c] = this[c - 1];
            this[a] = b
        },
        _dhx_removeAt: function(a) {
            this.splice(a, 1)
        },
        _dhx_swapItems: function(a, b) {
            var c = this[a];
            this[a] = this[b], this[b] = c
        }
    }, dhtmlXGridObject.prototype = {
        getRowAttribute: function(a, b) {
            return this.getRowById(a)._attrs[b]
        },
        setRowAttribute: function(a, b, c) {
            this.getRowById(a)._attrs[b] = c
        },
        isTreeGrid: function() {
            return this.cellType._dhx_find("tree") != -1
        },
        setRowHidden: function(a, b) {
            var c = (convertStringToBoolean(b), this.getRowById(a));
            if (c) {
                if ("" === c.expand && this.collapseKids(c), b && "none" != c.style.display) {
                    c.style.display = "none";
                    var d = this.selectedRows._dhx_find(c);
                    if (d != -1) {
                        c.className = c.className.replace("rowselected", "");
                        for (var e = 0; e < c.childNodes.length; e++) c.childNodes[e].className = c.childNodes[e].className.replace(/cellselected/g, "");
                        this.selectedRows._dhx_removeAt(d)
                    }
                    this.callEvent("onGridReconstructed", [])
                }
                b || "none" != c.style.display || (c.style.display = "", this.callEvent("onGridReconstructed", [])), this.callEvent("onRowHide", [a, b]), this.setSizes()
            }
        },
        setColumnHidden: function(a, b) {
            if (!this.hdr.rows.length) return this._ivizcol || (this._ivizcol = []), this._ivizcol[a] = b;
            this.fldSorted && this.fldSorted.cellIndex == a && b && (this.sortImg.style.display = "none");
            var c = convertStringToBoolean(b);
            if (c) {
                if (this._hrrar) {
                    if (this._hrrar[a]) return
                } else this._hrrar = [];
                this._hrrar[a] = "display:none;", this._hideShowColumn(a, "none")
            } else {
                if (!this._hrrar || !this._hrrar[a]) return;
                this._hrrar[a] = "", this._hideShowColumn(a, "")
            }
            this.fldSorted && this.fldSorted.cellIndex == a && !b && (this.sortImg.style.display = "inline"), this.setSortImgPos(), this.callEvent("onColumnHidden", [a, b])
        },
        isColumnHidden: function(a) {
            return !(!this._hrrar || !this._hrrar[a])
        },
        setColumnsVisibility: function(a) {
            if (a && (this._ivizcol = a.split(this.delim)), this.hdr.rows.length && this._ivizcol)
                for (var b = 0; b < this._ivizcol.length; b++) this.setColumnHidden(b, this._ivizcol[b])
        },
        _fixHiddenRowsAll: function(a, b, c, d, e) {
            for (var e = e || "_cellIndex", f = a.rows.length, g = 0; g < f; g++) {
                var h = a.rows[g].childNodes;
                if (h.length != this._cCount) {
                    for (var i = 0; i < h.length; i++)
                        if (h[i][e] == b) {
                            h[i].style[c] = d;
                            break
                        }
                } else h[b].style[c] = d
            }
        },
        _hideShowColumn: function(a, b) {
            var c = a;
            if (this.hdr.rows[1] && this.hdr.rows[1]._childIndexes && this.hdr.rows[1]._childIndexes[a] != a && (c = this.hdr.rows[1]._childIndexes[a]), "none" == b) {
                this.hdr.rows[0].cells[a]._oldWidth = this.hdr.rows[0].cells[a].style.width || this.initCellWidth[a] + "px", this.hdr.rows[0].cells[a]._oldWidthP = this.cellWidthPC[a], this.obj.rows[0].cells[a].style.width = "0px";
                var d = {
                    rows: [this.obj.rows[0]]
                };
                this.forEachRow(function(a) {
                    "TR" == this.rowsAr[a].tagName && d.rows.push(this.rowsAr[a])
                }), this._fixHiddenRowsAll(d, a, "display", "none"), this.isTreeGrid() && this._fixHiddenRowsAllTG(a, "none"), (_isOpera && _OperaRv < 9 || _isKHTML || _isFF) && this._fixHiddenRowsAll(this.hdr, a, "display", "none", "_cellIndexS"), this.ftr && this._fixHiddenRowsAll(this.ftr.childNodes[0], a, "display", "none"), this._fixHiddenRowsAll(this.hdr, a, "whiteSpace", "nowrap", "_cellIndexS"), this.cellWidthPX.length || this.cellWidthPC.length || (this.cellWidthPX = [].concat(this.initCellWidth)), this.cellWidthPX[a] && (this.cellWidthPX[a] = 0), this.cellWidthPC[a] && (this.cellWidthPC[a] = 0)
            } else if (this.hdr.rows[0].cells[a]._oldWidth) {
                var e = this.hdr.rows[0].cells[a];
                (_isOpera || _isKHTML || _isFF) && this._fixHiddenRowsAll(this.hdr, a, "display", "", "_cellIndexS"), this.ftr && this._fixHiddenRowsAll(this.ftr.childNodes[0], a, "display", ""), d = {
                    rows: [this.obj.rows[0]]
                }, this.forEachRow(function(a) {
                    "TR" == this.rowsAr[a].tagName && d.rows.push(this.rowsAr[a])
                }), this._fixHiddenRowsAll(d, a, "display", ""), this.isTreeGrid() && this._fixHiddenRowsAllTG(a, ""), this._fixHiddenRowsAll(this.hdr, a, "whiteSpace", "normal", "_cellIndexS"), e._oldWidthP && (this.cellWidthPC[a] = e._oldWidthP), e._oldWidth && (this.cellWidthPX[a] = parseInt(e._oldWidth))
            }
            this.setSizes(), _isIE || _isFF || (this.obj.border = 1, this.obj.border = 0)
        },
        enableColSpan: function(a) {
            this._ecspn = convertStringToBoolean(a)
        },
        enableRowsHover: function(a, b) {
            this._unsetRowHover(!1, !0), this._hvrCss = b, convertStringToBoolean(a) ? this._elmnh || (this.obj._honmousemove = this.obj.onmousemove, this.obj.onmousemove = this._setRowHover, _isIE ? this.obj.onmouseleave = this._unsetRowHover : this.obj.onmouseout = this._unsetRowHover, this._elmnh = !0) : this._elmnh && (this.obj.onmousemove = this.obj._honmousemove, _isIE ? this.obj.onmouseleave = null : this.obj.onmouseout = null, this._elmnh = !1)
        },
        enableEditEvents: function(a, b, c) {
            this._sclE = convertStringToBoolean(a), this._dclE = convertStringToBoolean(b), this._f2kE = convertStringToBoolean(c)
        },
        enableLightMouseNavigation: function(a) {
            convertStringToBoolean(a) ? this._elmn || (this.entBox._onclick = this.entBox.onclick, this.entBox.onclick = function() {
                return !0
            }, this.obj._onclick = this.obj.onclick, this.obj.onclick = function(a) {
                var b = this.grid.getFirstParentOfType(a ? a.target : event.srcElement, "TD");
                b && (this.grid.editStop(), this.grid.doClick(b), this.grid.editCell(), (a || event).cancelBubble = !0)
            }, this.obj._onmousemove = this.obj.onmousemove, this.obj.onmousemove = this._autoMoveSelect, this._elmn = !0) : this._elmn && (this.entBox.onclick = this.entBox._onclick, this.obj.onclick = this.obj._onclick, this.obj.onmousemove = this.obj._onmousemove, this._elmn = !1)
        },
        _unsetRowHover: function(a, b) {
            if (that = b ? this : this.grid, that._lahRw && that._lahRw != b) {
                for (var c = 0; c < that._lahRw.childNodes.length; c++) that._lahRw.childNodes[c].className = that._lahRw.childNodes[c].className.replace(that._hvrCss, "");
                that._lahRw = null
            }
        },
        _setRowHover: function(a) {
            var b = this.grid.getFirstParentOfType(a ? a.target : event.srcElement, "TD");
            if (b && b.parentNode != this.grid._lahRw) {
                if (this.grid._unsetRowHover(0, b), b = b.parentNode, !b.idd || "__filler__" == b.idd) return;
                for (var c = 0; c < b.childNodes.length; c++) b.childNodes[c].className += " " + this.grid._hvrCss;
                this.grid._lahRw = b
            }
            this._honmousemove(a)
        },
        _autoMoveSelect: function(a) {
            if (!this.grid.editor) {
                var b = this.grid.getFirstParentOfType(a ? a.target : event.srcElement, "TD");
                b.parentNode.idd && this.grid.doClick(b, !0, 0)
            }
            this._onmousemove(a)
        },
        enableDistributedParsing: function(a, b, c) {
            convertStringToBoolean(a) ? (this._ads_count = b || 10, this._ads_time = c || 250) : this._ads_count = 0
        },
        destructor: function() {
            if (this.editStop(!0), this._sizeTime && (this._sizeTime = window.clearTimeout(this._sizeTime)), this.entBox.className = (this.entBox.className || "").replace(/gridbox.*/, ""), this.formInputs)
                for (var a = 0; a < this.formInputs.length; a++) this.parentForm.removeChild(this.formInputs[a]);
            var b;
            for (this.xmlLoader = this.xmlLoader.destructor(), a = 0; a < this.rowsCol.length; a++) this.rowsCol[a] && (this.rowsCol[a].grid = null);
            for (a in this.rowsAr) this.rowsAr[a] && (this.rowsAr[a] = null);
            this.rowsCol = new dhtmlxArray, this.rowsAr = {}, this.entBox.innerHTML = "";
            var c = function() {};
            this.setSizes = this._update_srnd_view = this.callEvent = this.entBox.onclick = this.entBox.onmousedown = this.entBox.onbeforeactivate = this.entBox.onbeforedeactivate = this.entBox.onbeforedeactivate = this.entBox.onselectstart = c, this.entBox.grid = this.objBox.grid = this.hdrBox.grid = this.obj.grid = this.hdr.grid = null, this._fake && (this.globalBox.innerHTML = "", this._fake.setSizes = this._fake._update_srnd_view = this._fake.callEvent = c, this.globalBox.onclick = this.globalBox.onmousedown = this.globalBox.onbeforeactivate = this.globalBox.onbeforedeactivate = this.globalBox.onbeforedeactivate = this.globalBox.onselectstart = c);
            for (b in this) this[b] && this[b].m_obj && (this[b].m_obj = null), this[b] = null;
            return this == globalActiveDHTMLGridObject && (globalActiveDHTMLGridObject = null), null
        },
        getSortingState: function() {
            var a = [];
            return this.fldSorted && (a[0] = this.fldSorted._cellIndex, a[1] = this.sortImg.src.indexOf("sort_desc.gif") != -1 ? "des" : "asc"), a
        },
        enableAutoHeight: function(a, b, c) {
            this._ahgr = convertStringToBoolean(a), this._ahgrF = convertStringToBoolean(c), this._ahgrM = b || null, 1 == arguments.length && (this.objBox.style.overflowY = a ? "hidden" : "auto"), "auto" == b && (this._ahgrM = null, this._ahgrMA = !0, this._setAutoResize())
        },
        enableStableSorting: function(a) {
            this._sst = convertStringToBoolean(a), this.rowsCol.stablesort = function(a) {
                for (var b = this.length - 1, c = 0; c < this.length - 1; c++) {
                    for (var d = 0; d < b; d++)
                        if (a(this[d], this[d + 1]) > 0) {
                            var e = this[d];
                            this[d] = this[d + 1], this[d + 1] = e
                        }
                    b--
                }
            }
        },
        enableKeyboardSupport: function(a) {
            this._htkebl = !convertStringToBoolean(a)
        },
        enableContextMenu: function(a) {
            this._ctmndx = a
        },
        setScrollbarWidthCorrection: function() {},
        enableTooltips: function(a) {
            this._enbTts = a.split(",");
            for (var b = 0; b < this._enbTts.length; b++) this._enbTts[b] = convertStringToBoolean(this._enbTts[b])
        },
        enableResizing: function(a) {
            this._drsclmn = a.split(",");
            for (var b = 0; b < this._drsclmn.length; b++) this._drsclmn[b] = convertStringToBoolean(this._drsclmn[b])
        },
        setColumnMinWidth: function(a, b) {
            2 == arguments.length ? (this._drsclmW || (this._drsclmW = []), this._drsclmW[b] = a) : this._drsclmW = a.split(",")
        },
        enableCellIds: function(a) {
            this._enbCid = convertStringToBoolean(a)
        },
        lockRow: function(a, b) {
            var c = this.getRowById(a);
            c && (c._locked = convertStringToBoolean(b), this.cell && this.cell.parentNode.idd == a && this.editStop())
        },
        _getRowArray: function(a) {
            for (var b = [], c = 0; c < a.childNodes.length; c++) {
                var d = this.cells3(a, c);
                b[c] = d.getValue()
            }
            return b
        },
        setDateFormat: function(a, b) {
            this._dtmask = a, this._dtmask_inc = b
        },
        setNumberFormat: function(a, b, c, d) {
            var e = a.replace(/[^0\,\.]*/g, ""),
                f = e.indexOf(".");
            f > -1 && (f = e.length - f - 1);
            var g = e.indexOf(",");
            g > -1 && (g = e.length - f - 2 - g), "string" != typeof c && (c = this.i18n.decimal_separator), "string" != typeof d && (d = this.i18n.group_separator);
            var h = a.split(e)[0],
                i = a.split(e)[1];
            this._maskArr[b] = [f, g, h, i, c, d]
        },
        _aplNFb: function(a, b) {
            var c = this._maskArr[b];
            if (!c) return a;
            var d = parseFloat(a.toString().replace(/[^0-9]*/g, ""));
            return "-" == a.toString().substr(0, 1) && (d *= -1), c[0] > 0 && (d /= Math.pow(10, c[0])), d
        },
        _aplNF: function(a, b) {
            var c = this._maskArr[b];
            if (!c) return a;
            var d = (parseFloat(a) < 0 ? "-" : "") + c[2],
                a = Math.abs(Math.round(parseFloat(a) * Math.pow(10, c[0] > 0 ? c[0] : 0))).toString(),
                a = (a.length < c[0] ? Math.pow(10, c[0] + 1 - a.length).toString().substr(1, c[0] + 1) + a.toString() : a).split("").reverse();
            if (a[c[0]] = (a[c[0]] || "0") + c[4], c[1] > 0)
                for (var e = (c[0] > 0 ? 0 : 1) + c[0] + c[1]; e < a.length; e += c[1]) a[e] += c[5];
            return d + a.reverse().join("") + c[3]
        },
        _launchCommands: function(a) {
            for (var b = 0; b < a.length; b++) {
                for (var c = [], d = 0; d < a[b].childNodes.length; d++) 1 == a[b].childNodes[d].nodeType && (c[c.length] = a[b].childNodes[d].firstChild.data);
                this[a[b].getAttribute("command")].apply(this, c)
            }
        },
        _parseHead: function(a) {
            var b = this.xmlLoader.doXPath("./head", a);
            if (b.length) {
                var c = this.xmlLoader.doXPath("./column", b[0]),
                    d = this.xmlLoader.doXPath("./settings", b[0]),
                    e = "setInitWidths",
                    f = !1;
                if (d[0])
                    for (var g = 0; g < d[0].childNodes.length; g++) switch (d[0].childNodes[g].tagName) {
                        case "colwidth":
                            d[0].childNodes[g].firstChild && "%" == d[0].childNodes[g].firstChild.data && (e = "setInitWidthsP");
                            break;
                        case "splitat":
                            f = !!d[0].childNodes[g].firstChild && d[0].childNodes[g].firstChild.data
                    }
                if (this._launchCommands(this.xmlLoader.doXPath("./beforeInit/call", b[0])), c.length > 0) {
                    this.hdr.rows.length > 0 && this.clearAll(!0);
                    for (var h = [
                            [],
                            [],
                            [],
                            [],
                            [],
                            [],
                            [],
                            [],
                            []
                        ], i = ",width,type,align,sort,color,format,hidden,id".split(","), j = ["", e, "setColTypes", "setColAlign", "setColSorting", "setColumnColor", "", "", "setColumnIds"], k = 0; k < c.length; k++) {
                        for (var l = 1; l < i.length; l++) h[l].push(c[k].getAttribute(i[l]));
                        h[0].push((c[k].firstChild ? c[k].firstChild.data : "").replace(/^\s*((\s\S)*.+)\s*$/gi, "$1"))
                    }
                    for (this.setHeader(h[0]), k = 0; k < j.length; k++) j[k] && this[j[k]](h[k].join(this.delim));
                    for (k = 0; k < c.length; k++)
                        if (0 == this.cellType[k].indexOf("co") || "clist" == this.cellType[k]) {
                            var m = this.xmlLoader.doXPath("./option", c[k]);
                            if (m.length) {
                                var n = [];
                                if ("clist" == this.cellType[k]) {
                                    for (l = 0; l < m.length; l++) n[n.length] = m[l].firstChild ? m[l].firstChild.data : "";
                                    this.registerCList(k, n)
                                } else
                                    for (var o = this.getCombo(k), l = 0; l < m.length; l++) o.put(m[l].getAttribute("value"), m[l].firstChild ? m[l].firstChild.data : "")
                            }
                        } else h[6][k] && (this.cellType[k].toLowerCase().indexOf("calendar") != -1 || "date" == this.fldSort[k] ? this.setDateFormat(h[6][k]) : this.setNumberFormat(h[6][k], k));
                    this.init();
                    var p = h[7].join(this.delim);
                    this.setColHidden && "" != p.replace(/,/g, "") && this.setColHidden(p), f && this.splitAt && this.splitAt(f)
                }
                this._launchCommands(this.xmlLoader.doXPath("./afterInit/call", b[0]))
            }
            var q = this.xmlLoader.doXPath("//rows/userdata", a);
            if (q.length > 0)
                for (this.UserData.gridglobaluserdata || (this.UserData.gridglobaluserdata = new Hashtable), l = 0; l < q.length; l++) {
                    for (var r = "", s = 0; s < q[l].childNodes.length; s++) r += q[l].childNodes[s].nodeValue;
                    this.UserData.gridglobaluserdata.put(q[l].getAttribute("name"), r)
                }
        },
        getCheckedRows: function(a) {
            var b = [];
            return this.forEachRowA(function(c) {
                0 != this.cells(c, a).getValue() && b.push(c)
            }, !0), b.join(",")
        },
        checkAll: function() {
            for (var a = arguments.length ? arguments[0] : 1, b = 0; b < this.getColumnsNum(); b++) "ch" == this.getColType(b) && this.setCheckedRows(b, a)
        },
        uncheckAll: function() {
            this.checkAll(0)
        },
        setCheckedRows: function(a, b) {
            this.forEachRowA(function(c) {
                this.cells(c, a).isCheckbox() && this.cells(c, a).setValue(b)
            })
        },
        _drawTooltip: function(a) {
            var b = this.grid.getFirstParentOfType(a ? a.target : event.srcElement, "TD");
            if (!b || this.grid.editor && this.grid.editor.cell == b) return !0;
            var c = b.parentNode;
            if (c.idd && "__filler__" != c.idd) {
                var d = a ? a.target : event.srcElement;
                if (c.idd == window.unknown) return !0;
                if (!this.grid.callEvent("onMouseOver", [c.idd, b._cellIndex, a || window.event])) return !0;
                if (this.grid._enbTts && !this.grid._enbTts[b._cellIndex]) return d.title && (d.title = ""), !0;
                if (!(b._cellIndex >= this.grid._cCount)) {
                    var e = this.grid.cells3(c, b._cellIndex);
                    if (e && e.cell && e.cell._attrs) return d._title && (e.cell.title = ""), e.cell._attrs.title || (d._title = !0), e && (d.title = e.cell._attrs.title || (e.getTitle ? e.getTitle() : (e.getValue() || "").toString().replace(/<[^>]*>/gi, ""))), !0
                }
            }
        },
        enableCellWidthCorrection: function(a) {
            _isFF && (this._wcorr = parseInt(a))
        },
        getAllRowIds: function(a) {
            for (var b = [], c = 0; c < this.rowsBuffer.length; c++) this.rowsBuffer[c] && b.push(this.rowsBuffer[c].idd);
            return b.join(a || this.delim)
        },
        getAllItemIds: function() {
            return this.getAllRowIds()
        },
        setColspan: function(a, b, c) {
            if (this._ecspn) {
                var d = this.getRowById(a);
                if (d._childIndexes && d.childNodes[d._childIndexes[b]]) {
                    var e = d._childIndexes[b],
                        f = d.childNodes[e],
                        g = f.colSpan;
                    if (f.colSpan = 1, g && 1 != g)
                        for (var h = 1; h < g; h++) {
                            var i = document.createElement("TD");
                            f.nextSibling ? d.insertBefore(i, f.nextSibling) : d.appendChild(i), d._childIndexes[b + h] = e + h, i._cellIndex = b + h, i.style.textAlign = this.cellAlign[h], i.style.verticalAlign = this.cellVAlign[h], f = i, this.cells3(d, b + h).setValue("")
                        }
                    for (var j = 1 * b + 1 * g; j < d._childIndexes.length; j++) d._childIndexes[j] += 1 * (g - 1)
                }
                if (c && c > 1) {
                    if (d._childIndexes) e = d._childIndexes[b];
                    else
                        for (e = b, d._childIndexes = [], j = 0; j < d.childNodes.length; j++) d._childIndexes[j] = j;
                    for (d.childNodes[e].colSpan = c, j = 1; j < c; j++) d._childIndexes[d.childNodes[e + 1]._cellIndex] = e, d.removeChild(d.childNodes[e + 1]);
                    for (var k = d.childNodes[d._childIndexes[b]]._cellIndex, j = 1 * k + 1 * c; j < d._childIndexes.length; j++) d._childIndexes[j] -= c - 1
                }
            }
        },
        preventIECaching: function(a) {
            this.no_cashe = convertStringToBoolean(a), this.xmlLoader.rSeed = this.no_cashe
        },
        enableColumnAutoSize: function(a) {
            this._eCAS = convertStringToBoolean(a)
        },
        _onHeaderDblClick: function(a) {
            var b = this.grid,
                c = b.getFirstParentOfType(_isIE ? event.srcElement : a.target, "TD");
            return !!b._eCAS && void b.adjustColumnSize(c._cellIndexS)
        },
        adjustColumnSize: function(a, b) {
            if (!this._hrrar || !this._hrrar[a]) {
                this._notresize = !0;
                var c = 0;
                this._setColumnSizeR(a, 20);
                for (var d = 1; d < this.hdr.rows.length; d++) {
                    var e = this.hdr.rows[d];
                    (e = e.childNodes[e._childIndexes ? e._childIndexes[a] : a]) && (!e.colSpan || e.colSpan < 2) && e._cellIndex == a && (e.childNodes[0] && "hdrcell" == e.childNodes[0].className && (e = e.childNodes[0]), c = Math.max(c, e.scrollWidth))
                }
                for (var f = this.obj.rows.length, g = 1; g < f; g++) {
                    var h = this.obj.rows[g];
                    this.rowsAr[h.idd] && !(h._childIndexes && h._childIndexes[a] != a) && h.childNodes[a] && (h = _isFF || _isOpera || b ? h.childNodes[a].textContent.length * this.fontWidth : h.childNodes[a].scrollWidth, h > c && (c = h))
                }
                c += 20 + (b || 0), this._setColumnSizeR(a, c), this._notresize = !1, this.setSizes()
            }
        },
        detachHeader: function(a, b) {
            var b = b || this.hdr,
                c = b.rows[a + 1];
            c && c.parentNode.removeChild(c), this.setSizes()
        },
        detachFooter: function(a) {
            this.detachHeader(a, this.ftr)
        },
        attachHeader: function(a, b, c) {
            if ("string" == typeof a && (a = this._eSplit(a)), "string" == typeof b && (b = b.split(this.delim)), c = c || "_aHead", this.hdr.rows.length) {
                if (a) this._createHRow([a, b], this["_aHead" == c ? "hdr" : "ftr"]);
                else if (this[c])
                    for (var d = 0; d < this[c].length; d++) this.attachHeader.apply(this, this[c][d])
            } else this[c] || (this[c] = []), this[c][this[c].length] = [a, b, c]
        },
        _createHRow: function(a, b) {
            if (!b) {
                "absolute" != this.entBox.style.position && (this.entBox.style.position = "relative");
                var c = document.createElement("DIV");
                c.className = "ftr", this.entBox.appendChild(c);
                var d = document.createElement("TABLE");
                d.cellPadding = d.cellSpacing = 0, _isIE && 8 != _isIE || (d.width = "100%", d.style.paddingRight = "20px"), d.style.marginRight = "20px", d.style.tableLayout = "fixed", c.appendChild(d), d.appendChild(document.createElement("TBODY")), this.ftr = b = d;
                for (var e = d.insertRow(0), f = this.hdrLabels.length <= 1 ? a[0].length : this.hdrLabels.length, g = 0; g < f; g++) e.appendChild(document.createElement("TH")), e.childNodes[g]._cellIndex = g;
                _isIE && _isIE < 8 ? e.style.position = "absolute" : e.style.height = "auto"
            }
            var h = a[1],
                c = document.createElement("TR");
            for (b.rows[0].parentNode.appendChild(c), g = 0; g < a[0].length; g++)
                if ("#cspan" == a[0][g]) {
                    var i = c.cells[c.cells.length - 1];
                    i.colSpan = (i.colSpan || 1) + 1
                } else if ("#rspan" == a[0][g] && b.rows.length > 1) {
                for (var j = b.rows.length - 2, k = !1, i = null; !k;) {
                    for (var i = b.rows[j], l = 0; l < i.cells.length; l++)
                        if (i.cells[l]._cellIndex == g) {
                            k = l + 1;
                            break
                        }
                    j--
                }
                i = i.cells[k - 1], i.rowSpan = (i.rowSpan || 1) + 1
            } else {
                var m = document.createElement("TD");
                if (m._cellIndex = m._cellIndexS = g, this._hrrar && this._hrrar[g] && !_isIE && (m.style.display = "none"), "object" == typeof a[0][g]) m.appendChild(a[0][g]);
                else if (m.innerHTML = this.forceDivInHeader ? "<div class='hdrcell'>" + (a[0][g] || "&nbsp;") + "</div>" : a[0][g] || "&nbsp;", (a[0][g] || "").indexOf("#") != -1 && (d = a[0][g].match(/(^|{)#([^}]+)(}|$)/))) {
                    var n = "_in_header_" + d[2];
                    this[n] && this[n](this.forceDivInHeader ? m.firstChild : m, g, a[0][g].split(d[0]))
                }
                h && (m.style.cssText = h[g]), c.appendChild(m)
            }
            _isKHTML && (b._kTimer && window.clearTimeout(b._kTimer), b._kTimer = window.setTimeout(function() {
                b.rows[1].style.display = "none", window.setTimeout(function() {
                    b.rows[1].style.display = ""
                }, 1)
            }, 500))
        },
        attachFooter: function(a, b) {
            this.attachHeader(a, b, "_aFoot")
        },
        setCellExcellType: function(a, b, c) {
            this.changeCellType(this.getRowById(a), b, c)
        },
        changeCellType: function(a, b, c) {
            var c = c || this.cellType[b],
                d = this.cells3(a, b),
                e = d.getValue();
            d.cell._cellType = c, d = this.cells3(a, b), d.setValue(e)
        },
        setRowExcellType: function(a, b) {
            for (var c = this.rowsAr[a], d = 0; d < c.childNodes.length; d++) this.changeCellType(c, d, b)
        },
        setColumnExcellType: function(a, b) {
            for (var c = 0; c < this.rowsBuffer.length; c++) this.rowsBuffer[c] && "TR" == this.rowsBuffer[c].tagName && this.changeCellType(this.rowsBuffer[c], a, b);
            "math" == this.cellType[a] ? this._strangeParams[c] = b : this.cellType[a] = b
        },
        forEachRow: function(a) {
            for (var b in this.rowsAr) this.rowsAr[b] && this.rowsAr[b].idd && a.apply(this, [this.rowsAr[b].idd])
        },
        forEachRowA: function(a) {
            for (var b = 0; b < this.rowsBuffer.length; b++) this.rowsBuffer[b] && a.call(this, this.render_row(b).idd)
        },
        forEachCell: function(a, b) {
            var c = this.getRowById(a);
            if (c)
                for (var d = 0; d < this._cCount; d++) b(this.cells3(c, d), d)
        },
        enableAutoWidth: function(a, b, c) {
            this._awdth = [convertStringToBoolean(a), parseInt(b || 99999), parseInt(c || 0)], 1 == arguments.length && (this.objBox.style.overflowX = a ? "hidden" : "auto")
        },
        updateFromXML: function(a, b, c, d) {
            "undefined" == typeof b && (b = !0), this._refresh_mode = [!0, b, c], this.load(a, d)
        },
        _refreshFromXML: function(a) {
            this._f_rowsBuffer && this.filterBy(0, ""), reset = !1, window.eXcell_tree && (eXcell_tree.prototype.setValueX = eXcell_tree.prototype.setValue, eXcell_tree.prototype.setValue = function(a) {
                var b = this.grid._h2.get[this.cell.parentNode.idd];
                b && this.cell.parentNode.valTag ? this.setLabel(a) : this.setValueX(a)
            });
            var b = this.cellType._dhx_find("tree");
            a.getXMLTopNode("rows");
            var c = a.doXPath("//rows")[0].getAttribute("parent") || 0,
                d = {};
            this._refresh_mode[2] && (b != -1 ? this._h2.forEachChild(c, function(a) {
                d[a.id] = !0
            }, this) : this.forEachRow(function(a) {
                d[a] = !0
            }));
            for (var e = a.doXPath("//row"), f = 0; f < e.length; f++) {
                var g = e[f],
                    h = g.getAttribute("id");
                if (d[h] = !1, c = g.parentNode.getAttribute("id") || c, this.rowsAr[h] && "TR" != this.rowsAr[h].tagName) this._h2 ? this._h2.get[h].buff.data = g : this.rowsBuffer[this.getRowIndex(h)].data = g, this.rowsAr[h] = g;
                else if (this.rowsAr[h]) this._process_xml_row(this.rowsAr[h], g, -1), this._postRowProcessing(this.rowsAr[h], !0);
                else if (this._refresh_mode[1]) {
                    var i = {
                            idd: h,
                            data: g,
                            _parser: this._process_xml_row,
                            _locator: this._get_xml_data
                        },
                        j = this.rowsBuffer.length;
                    "top" == this._refresh_mode[1] ? (this.rowsBuffer.unshift(i), j = 0) : this.rowsBuffer.push(i), this._h2 && (reset = !0, this._h2.add(h, g.parentNode.getAttribute("id") || g.parentNode.getAttribute("parent")).buff = this.rowsBuffer[this.rowsBuffer.length - 1]), this.rowsAr[h] = g, g = this.render_row(j), this._insertRowAt(g, j ? -1 : 0)
                }
            }
            if (this._refresh_mode[2])
                for (h in d) d[h] && this.rowsAr[h] && this.deleteRow(h);
            this._refresh_mode = null, window.eXcell_tree && (eXcell_tree.prototype.setValue = eXcell_tree.prototype.setValueX), reset && this._renderSort(), this._f_rowsBuffer && (this._f_rowsBuffer = null, this.filterByAll())
        },
        getCustomCombo: function(a, b) {
            var c = this.cells(a, b).cell;
            return c._combo || (c._combo = new dhtmlXGridComboObject), c._combo
        },
        setTabOrder: function(a) {
            var b = a.split(this.delim);
            this._tabOrder = [];
            for (var c = this._cCount || a.length, d = 0; d < c; d++) b[d] = {
                c: parseInt(b[d]),
                ind: d
            };
            for (b.sort(function(a, b) {
                    return a.c > b.c ? 1 : -1
                }), d = 0; d < c; d++) this._tabOrder[b[d].ind] = b[d + 1] && "undefined" != typeof b[d].c ? b[d + 1].ind : (b[0].ind + 1) * -1
        },
        i18n: {
            loading: "Loading",
            decimal_separator: ".",
            group_separator: ","
        },
        _key_events: {
            k13_1_0: function() {
                var a = this.rowsCol._dhx_find(this.row);
                this.selectCell(this.rowsCol[a + 1], this.cell._cellIndex, !0)
            },
            k13_0_1: function() {
                var a = this.rowsCol._dhx_find(this.row);
                this.selectCell(this.rowsCol[a - 1], this.cell._cellIndex, !0)
            },
            k13_0_0: function() {
                this.editStop(), this.callEvent("onEnter", [this.row ? this.row.idd : null, this.cell ? this.cell._cellIndex : null]), this._still_active = !0
            },
            k9_0_0: function() {
                if (this.editStop(), !this.callEvent("onTab", [!0])) return !0;
                var a = this._getNextCell(null, 1);
                a && (this.selectCell(a.parentNode, a._cellIndex, this.row != a.parentNode, !1, !0), this._still_active = !0)
            },
            k9_0_1: function() {
                if (this.editStop(), !this.callEvent("onTab", [!1])) return !1;
                var a = this._getNextCell(null, -1);
                a && (this.selectCell(a.parentNode, a._cellIndex, this.row != a.parentNode, !1, !0), this._still_active = !0)
            },
            k113_0_0: function() {
                this._f2kE && this.editCell()
            },
            k32_0_0: function() {
                var a = this.cells4(this.cell);
                if (!a.changeState || a.changeState() === !1) return !1
            },
            k27_0_0: function() {
                this.editStop(!0)
            },
            k33_0_0: function() {
                this.pagingOn ? this.changePage(this.currentPage - 1) : this.scrollPage(-1)
            },
            k34_0_0: function() {
                this.pagingOn ? this.changePage(this.currentPage + 1) : this.scrollPage(1)
            },
            k37_0_0: function() {
                return !(this.editor || !this.isTreeGrid()) && void this.collapseKids(this.row)
            },
            k39_0_0: function() {
                return !(this.editor || !this.isTreeGrid()) && void this.expandKids(this.row)
            },
            k40_0_0: function() {
                var a = this._realfake ? this._fake : this;
                if (this.editor && this.editor.combo) this.editor.shiftNext();
                else {
                    if (!this.row.idd) return;
                    var b = Math.max(a._r_select || 0, this.getRowIndex(this.row.idd)),
                        c = this._nextRow(b, 1);
                    if (c) a._r_select = null, this.selectCell(c, this.cell._cellIndex, !0), a.pagingOn && a.showRow(c.idd);
                    else {
                        if (!this.callEvent("onLastRow", [])) return !1;
                        this._key_events.k34_0_0.apply(this, []), this.pagingOn && this.rowsCol[b + 1] && this.selectCell(b + 1, 0, !0)
                    }
                }
                this._still_active = !0
            },
            k38_0_0: function() {
                var a = this._realfake ? this._fake : this;
                if (this.editor && this.editor.combo) this.editor.shiftPrev();
                else {
                    if (!this.row.idd) return;
                    var b = this.getRowIndex(this.row.idd) + 1;
                    if (b == -1 || this.pagingOn && 1 == b) this._key_events.k33_0_0.apply(this, []);
                    else {
                        var c = this._nextRow(b - 1, -1);
                        this.selectCell(c, this.cell._cellIndex, !0), a.pagingOn && c && a.showRow(c.idd)
                    }
                }
                this._still_active = !0
            }
        },
        _build_master_row: function() {
            for (var a = document.createElement("DIV"), b = ["<table><tr>"], c = 0; c < this._cCount; c++) b.push("<td></td>");
            b.push("</tr></table>"), a.innerHTML = b.join(""), this._master_row = a.firstChild.rows[0]
        },
        _prepareRow: function(a) {
            this._master_row || this._build_master_row();
            for (var b = this._master_row.cloneNode(!0), c = 0; c < b.childNodes.length; c++) b.childNodes[c]._cellIndex = c, this._enbCid && (b.childNodes[c].id = "c_" + a + "_" + c), this.dragAndDropOff && this.dragger.addDraggableItem(b.childNodes[c], this);
            return b.idd = a, b.grid = this, b
        },
        _process_jsarray_row: function(a, b) {
            a._attrs = {};
            for (var c = 0; c < a.childNodes.length; c++) a.childNodes[c]._attrs = {};
            return this._fillRow(a, this._c_order ? this._swapColumns(b) : b), a
        },
        _get_jsarray_data: function(a, b) {
            return a[b]
        },
        _process_json_row: function(a, b) {
            return b = this._c_order ? this._swapColumns(b.data) : b.data, this._process_some_row(a, b)
        },
        _process_some_row: function(a, b) {
            a._attrs = {};
            for (var c = 0; c < a.childNodes.length; c++) a.childNodes[c]._attrs = {};
            return this._fillRow(a, b), a
        },
        _get_json_data: function(a, b) {
            return a.data[b]
        },
        _process_js_row: function(a, b) {
            for (var c = [], d = 0; d < this.columnIds.length; d++) c[d] = b[this.columnIds[d]], !c[d] && 0 !== c[d] && (c[d] = "");
            return this._process_some_row(a, c), a._attrs = b, a
        },
        _get_js_data: function(a, b) {
            return a[this.columnIds[b]]
        },
        _process_csv_row: function(a, b) {
            a._attrs = {};
            for (var c = 0; c < a.childNodes.length; c++) a.childNodes[c]._attrs = {};
            return this._fillRow(a, this._c_order ? this._swapColumns(b.split(this.csv.cell)) : b.split(this.csv.cell)), a
        },
        _get_csv_data: function(a, b) {
            return a.split(this.csv.cell)[b]
        },
        _process_store_row: function(a, b) {
            for (var c = [], d = 0; d < this.columnIds.length; d++) c[d] = b[this.columnIds[d]];
            for (var e = 0; e < a.childNodes.length; e++) a.childNodes[e]._attrs = {};
            a._attrs = b, this._fillRow(a, c)
        },
        _process_xml_row: function(a, b) {
            var c = this.xmlLoader.doXPath(this.xml.cell, b),
                d = [];
            if (a._attrs = this._xml_attrs(b), this._ud_enabled)
                for (var e = this.xmlLoader.doXPath("./userdata", b), f = e.length - 1; f >= 0; f--) {
                    for (var g = "", h = 0; h < e[f].childNodes.length; h++) g += e[f].childNodes[h].nodeValue;
                    this.setUserData(a.idd, e[f].getAttribute("name"), g)
                }
            for (h = 0; h < c.length; h++) {
                var i = c[this._c_order ? this._c_order[h] : h];
                if (i) {
                    var j = a._childIndexes ? a._childIndexes[h] : h,
                        k = i.getAttribute("type");
                    a.childNodes[j] && (k && (a.childNodes[j]._cellType = k), a.childNodes[j]._attrs = this._xml_attrs(i)), i.getAttribute("xmlcontent") || (i = i.firstChild ? i.firstChild.data : ""), d.push(i)
                }
            }
            for (; h < a.childNodes.length; h++) a.childNodes[h]._attrs = {};
            return a.parentNode && "row" == a.parentNode.tagName && (a._attrs.parent = a.parentNode.getAttribute("idd")), this._fillRow(a, d), a
        },
        _get_xml_data: function(a, b) {
            for (a = a.firstChild;;) {
                if (!a) return "";
                if ("cell" == a.tagName && b--, b < 0) break;
                a = a.nextSibling
            }
            return a.firstChild ? a.firstChild.data : ""
        },
        _fillRow: function(a, b) {
            this.editor && this.editStop();
            for (var c = 0; c < a.childNodes.length; c++)
                if (c < b.length || this.defVal[c]) {
                    var d = a.childNodes[c]._cellIndex,
                        e = b[d],
                        f = this.cells4(a.childNodes[c]);
                    !this.defVal[d] || "" != e && "undefined" != typeof e || (e = this.defVal[d]), f && f.setValue(e)
                } else a.childNodes[c].innerHTML = "&nbsp;", a.childNodes[c]._clearCell = !0;
            return a
        },
        _postRowProcessing: function(a, b) {
            a._attrs.class && (a._css = a.className = a._attrs.class), a._attrs.locked && (a._locked = !0), a._attrs.bgColor && (a.bgColor = a._attrs.bgColor);
            for (var c = 0, d = 0; d < a.childNodes.length; d++) {
                var e = a.childNodes[d],
                    f = e._cellIndex,
                    g = e._attrs.style || a._attrs.style;
                g && (e.style.cssText += ";" + g), e._attrs.class && (e.className = e._attrs.class), (g = e._attrs.align || this.cellAlign[f]) && (e.align = g), e.vAlign = e._attrs.valign || this.cellVAlign[f];
                var h = e._attrs.bgColor || this.columnColor[f];
                h && (e.bgColor = h), e._attrs.colspan && !b && (this.setColspan(a.idd, d + c, e._attrs.colspan), c += e._attrs.colspan - 1), this._hrrar && this._hrrar[f] && !b && (e.style.display = "none")
            }
            this.callEvent("onRowCreated", [a.idd, a, null])
        },
        load: function(a, b, c) {
            this.callEvent("onXLS", [this]), 2 == arguments.length && "function" != typeof b && (c = b, b = null), c = c || "xml", this.xmlFileUrl || (this.xmlFileUrl = a), this._data_type = c, this.xmlLoader.onloadAction = function(a, d, e, f, g) {
                a.callEvent && (g = a["_process_" + c](g), a._contextCallTimer || a.callEvent("onXLE", [a, 0, 0, g]), b && (b(), b = null))
            }, this.xmlLoader.loadXML(a)
        },
        loadXMLString: function(a, b) {
            var c = new dtmlXMLLoaderObject(function() {});
            c.loadXMLString(a), this.parse(c, b, "xml")
        },
        loadXML: function(a, b) {
            this.load(a, b, "xml")
        },
        parse: function(a, b, c) {
            2 == arguments.length && "function" != typeof b && (c = b, b = null), this._data_type = c = c || "xml", a = this["_process_" + c](a), this._contextCallTimer || this.callEvent("onXLE", [this, 0, 0, a]), b && b()
        },
        xml: {
            top: "rows",
            row: "./row",
            cell: "./cell",
            s_row: "row",
            s_cell: "cell",
            row_attrs: [],
            cell_attrs: []
        },
        csv: {
            row: "\n",
            cell: ","
        },
        _xml_attrs: function(a) {
            var b = {};
            if (a.attributes.length)
                for (var c = 0; c < a.attributes.length; c++) b[a.attributes[c].name] = a.attributes[c].value;
            return b
        },
        _process_xml: function(a) {
            if (!a.doXPath) {
                var b = new dtmlXMLLoaderObject(function() {});
                "string" == typeof a ? b.loadXMLString(a) : (b.xmlDoc = a.responseXML ? a : {}, b.xmlDoc.responseXML = a), a = b
            }
            if (this._refresh_mode) return this._refreshFromXML(a);
            this._parsing = !0;
            var c = a.getXMLTopNode(this.xml.top);
            if (c.tagName == this.xml.top) {
                var d = c.getAttribute("dhx_security");
                d && (dhtmlx.security_key = d), this._parseHead(c);
                var e = a.doXPath(this.xml.row, c),
                    f = parseInt(a.doXPath("//" + this.xml.top)[0].getAttribute("pos") || 0),
                    g = parseInt(a.doXPath("//" + this.xml.top)[0].getAttribute("total_count") || 0),
                    g = Math.min(g, 32e6 / this._srdh),
                    h = !1;
                if (g && g != this.rowsBuffer.length && (this.rowsBuffer[g - 1] || (this.rowsBuffer.length && (h = !0), this.rowsBuffer[g - 1] = null), g < this.rowsBuffer.length && (this.rowsBuffer.splice(g, this.rowsBuffer.length - g), h = !0)), this.isTreeGrid()) return this._process_tree_xml(a);
                for (var i = 0; i < e.length; i++)
                    if (!this.rowsBuffer[i + f]) {
                        var j = e[i].getAttribute("id") || i + f + 1;
                        this.rowsBuffer[i + f] = {
                            idd: j,
                            data: e[i],
                            _parser: this._process_xml_row,
                            _locator: this._get_xml_data
                        }, this.rowsAr[j] = e[i]
                    }
                if (this.callEvent("onDataReady", []), h && this._srnd) {
                    var k = this.objBox.scrollTop;
                    this._reset_view(), this.objBox.scrollTop = k
                } else this.render_dataset();
                return this._parsing = !1, a.xmlDoc.responseXML ? a.xmlDoc.responseXML : a.xmlDoc
            }
        },
        _process_jsarray: function(a) {
            this._parsing = !0, a && a.xmlDoc && (eval("dhtmlx.temp=" + a.xmlDoc.responseText + ";"), a = dhtmlx.temp);
            for (var b = 0; b < a.length; b++) {
                var c = b + 1;
                this.rowsBuffer.push({
                    idd: c,
                    data: a[b],
                    _parser: this._process_jsarray_row,
                    _locator: this._get_jsarray_data
                }), this.rowsAr[c] = a[b]
            }
            this.render_dataset(), this._parsing = !1
        },
        _process_csv: function(a) {
            if (this._parsing = !0, a.xmlDoc && (a = a.xmlDoc.responseText), a = a.replace(/\r/g, ""), a = a.split(this.csv.row), this._csvHdr) {
                this.clearAll();
                var b = a.splice(0, 1)[0].split(this.csv.cell);
                this._csvAID || b.splice(0, 1), this.setHeader(b.join(this.delim)), this.init()
            }
            for (var c = 0; c < a.length; c++)
                if (a[c] || c != a.length - 1) {
                    if (this._csvAID) {
                        var d = c + 1;
                        this.rowsBuffer.push({
                            idd: d,
                            data: a[c],
                            _parser: this._process_csv_row,
                            _locator: this._get_csv_data
                        })
                    } else {
                        var e = a[c].split(this.csv.cell),
                            d = e.splice(0, 1)[0];
                        this.rowsBuffer.push({
                            idd: d,
                            data: e,
                            _parser: this._process_jsarray_row,
                            _locator: this._get_jsarray_data
                        })
                    }
                    this.rowsAr[d] = a[c]
                }
            this.render_dataset(), this._parsing = !1
        },
        _process_js: function(a) {
            return this._process_json(a, "js")
        },
        _process_json: function(a, b) {
            if (this._parsing = !0, a && a.xmlDoc && (eval("dhtmlx.temp=" + a.xmlDoc.responseText + ";"), a = dhtmlx.temp), "js" == b) {
                a.data && (a = a.data);
                for (var c = 0; c < a.length; c++) {
                    var d = a[c],
                        e = d.id || c + 1;
                    this.rowsBuffer.push({
                        idd: e,
                        data: d,
                        _parser: this._process_js_row,
                        _locator: this._get_js_data
                    }), this.rowsAr[e] = a[c]
                }
            } else
                for (c = 0; c < a.rows.length; c++) e = a.rows[c].id, this.rowsBuffer.push({
                    idd: e,
                    data: a.rows[c],
                    _parser: this._process_json_row,
                    _locator: this._get_json_data
                }), this.rowsAr[e] = a.rows[c];
            a.dhx_security && (dhtmlx.security_key = a.dhx_security), this.render_dataset(), this._parsing = !1
        },
        render_dataset: function(a, b) {
            if (this._srnd) {
                if (this._fillers) return this._update_srnd_view();
                b = Math.min(this._get_view_size() + (this._srnd_pr || 0), this.rowsBuffer.length)
            }
            this.pagingOn ? (a = Math.max(a || 0, (this.currentPage - 1) * this.rowsBufferOutSize), b = Math.min(this.currentPage * this.rowsBufferOutSize, this.rowsBuffer.length)) : (a = a || 0, b = b || this.rowsBuffer.length);
            for (var c = a; c < b; c++) {
                var d = this.render_row(c);
                if (d == -1) {
                    this.xmlFileUrl && this.callEvent("onDynXLS", [c, this._dpref ? this._dpref : b - c]) && this.load(this.xmlFileUrl + getUrlSymbol(this.xmlFileUrl) + "posStart=" + c + "&count=" + (this._dpref ? this._dpref : b - c), this._data_type), b = c;
                    break
                }
                if (d.parentNode && d.parentNode.tagName || (this._insertRowAt(d, c), (d._attrs.selected || d._attrs.select) && (this.selectRow(d, !!d._attrs.call, !0), d._attrs.selected = d._attrs.select = null)), this._ads_count && c - a == this._ads_count) {
                    var e = this;
                    return this._context_parsing = this._context_parsing || this._parsing, this._contextCallTimer = window.setTimeout(function() {
                        e._contextCallTimer = null, e.render_dataset(c, b), e._contextCallTimer || (e._context_parsing ? e.callEvent("onXLE", []) : e._fixAlterCss(), e.callEvent("onDistributedEnd", []), e._context_parsing = !1)
                    }, this._ads_time)
                }
            }
            if (this._srnd && !this._fillers) {
                var f = this.rowsBuffer.length - b;
                for (this._fillers = []; f > 0;) {
                    var g = _isIE || window._FFrv ? Math.min(f, 5e4) : f,
                        h = this._add_filler(b, g);
                    h && this._fillers.push(h), f -= g, b += g
                }
            }
            this.setSizes()
        },
        render_row: function(a) {
            if (!this.rowsBuffer[a]) return -1;
            if (this.rowsBuffer[a]._parser) {
                var b = this.rowsBuffer[a];
                if (this.rowsAr[b.idd] && "TR" == this.rowsAr[b.idd].tagName) return this.rowsBuffer[a] = this.rowsAr[b.idd];
                var c = this._prepareRow(b.idd);
                return this.rowsBuffer[a] = c, this.rowsAr[b.idd] = c, b._parser.call(this, c, b.data), this._postRowProcessing(c), c
            }
            return this.rowsBuffer[a]
        },
        _get_cell_value: function(a, b, c) {
            return a._locator ? (this._c_order && (b = this._c_order[b]), a._locator.call(this, a.data, b)) : this.cells3(a, b)[c ? c : "getValue"]()
        },
        sortRows: function(a, b, c) {
            if (c = (c || "asc").toLowerCase(), b = b || this.fldSort[a], a = a || 0, this.isTreeGrid()) this.sortTreeRows(a, b, c);
            else {
                var d = {},
                    e = this.cellType[a],
                    f = "getValue";
                "link" == e && (f = "getContent"), "dhxCalendar" != e && "dhxCalendarA" != e || (f = "getDate");
                for (var g = 0; g < this.rowsBuffer.length; g++) d[this.rowsBuffer[g].idd] = this._get_cell_value(this.rowsBuffer[g], a, f);
                this._sortRows(a, b, c, d)
            }
            this.callEvent("onAfterSorting", [a, b, c])
        },
        _sortCore: function(a, b, c, d, e) {
            var f = "sort";
            if (this._sst && (e.stablesort = this.rowsCol.stablesort, f = "stablesort"), b.length > 4 && (b = window[b]), "cus" == b) {
                var g = this._customSorts[a];
                e[f](function(a, b) {
                    return g(d[a.idd], d[b.idd], c, a.idd, b.idd)
                })
            } else "function" == typeof b ? e[f](function(a, e) {
                return b(d[a.idd], d[e.idd], c, a.idd, e.idd)
            }) : "str" == b ? e[f](function(a, b) {
                return "asc" == c ? d[a.idd] > d[b.idd] ? 1 : d[a.idd] < d[b.idd] ? -1 : 0 : d[a.idd] < d[b.idd] ? 1 : d[a.idd] > d[b.idd] ? -1 : 0
            }) : "int" == b ? e[f](function(a, b) {
                var e = parseFloat(d[a.idd]),
                    e = isNaN(e) ? -99999999999999 : e,
                    f = parseFloat(d[b.idd]),
                    f = isNaN(f) ? -99999999999999 : f;
                return "asc" == c ? e - f : f - e
            }) : "date" == b && e[f](function(a, b) {
                var e = Date.parse(d[a.idd]) || Date.parse("01/01/1900"),
                    f = Date.parse(d[b.idd]) || Date.parse("01/01/1900");
                return "asc" == c ? e - f : f - e
            })
        },
        _sortRows: function(a, b, c, d) {
            this._sortCore(a, b, c, d, this.rowsBuffer), this._reset_view(), this.callEvent("onGridReconstructed", [])
        },
        _reset_view: function(a) {
            if (this.obj.rows[0]) {
                this._lahRw && this._unsetRowHover(0, !0), this.callEvent("onResetView", []);
                var b = this.obj.rows[0].parentNode,
                    c = b.removeChild(b.childNodes[0], !0);
                if (_isKHTML)
                    for (var d = b.parentNode.childNodes.length - 1; d >= 0; d--) "TR" == b.parentNode.childNodes[d].tagName && b.parentNode.removeChild(b.parentNode.childNodes[d], !0);
                else if (_isIE)
                    for (d = b.childNodes.length - 1; d >= 0; d--) b.childNodes[d].removeNode(!0);
                else b.innerHTML = "";
                b.appendChild(c), this.rowsCol = dhtmlxArray(), this._sst && this.enableStableSorting(!0), this._fillers = this.undefined, a || this.render_dataset()
            }
        },
        deleteRow: function(a, b) {
            if (b || (b = this.getRowById(a)), b) {
                if (this.editStop(), !this._realfake && 0 == this.callEvent("onBeforeRowDeleted", [a])) return !1;
                var c = 0;
                if (this.cellType._dhx_find("tree") == -1 || this._realfake) {
                    b.parentNode && b.parentNode.removeChild(b);
                    var d = this.rowsCol._dhx_find(b);
                    d != -1 && this.rowsCol._dhx_removeAt(d);
                    for (var e = 0; e < this.rowsBuffer.length; e++)
                        if (this.rowsBuffer[e] && this.rowsBuffer[e].idd == a) {
                            this.rowsBuffer._dhx_removeAt(e), d = e;
                            break
                        }
                } else c = this._h2.get[a].parent.id, this._removeTrGrRow(b);
                for (this.rowsAr[a] = null, e = 0; e < this.selectedRows.length; e++) this.selectedRows[e].idd == a && this.selectedRows._dhx_removeAt(e);
                if (this._srnd) {
                    for (e = 0; e < this._fillers.length; e++) {
                        var f = this._fillers[e];
                        f && this._update_fillers(e, f[1] >= d ? -1 : 0, f[0] >= d ? -1 : 0)
                    }
                    this._update_srnd_view()
                }
                return this.pagingOn && this.changePage(), this._realfake || this.callEvent("onAfterRowDeleted", [a, c]), this.callEvent("onGridReconstructed", []), this._ahgr && this.setSizes(), !0
            }
        },
        _addRow: function(a, b, c) {
            c != -1 && "undefined" != typeof c || (c = this.rowsBuffer.length), "string" == typeof b && (b = b.split(this.delim));
            var d = this._prepareRow(a);
            d._attrs = {};
            for (var e = 0; e < d.childNodes.length; e++) d.childNodes[e]._attrs = {};
            if (this.rowsAr[d.idd] = d, this._h2 && (this._h2.get[d.idd].buff = d), this._fillRow(d, b), this._postRowProcessing(d), this._skipInsert) return this._skipInsert = !1, this.rowsAr[d.idd] = d;
            if (this.pagingOn) return this.rowsBuffer._dhx_insertAt(c, d), this.rowsAr[d.idd] = d;
            if (this._fillers) {
                this.rowsCol._dhx_insertAt(c, null), this.rowsBuffer._dhx_insertAt(c, d), this._fake && this._fake.rowsCol._dhx_insertAt(c, null), this.rowsAr[d.idd] = d;
                for (var f = !1, g = 0; g < this._fillers.length; g++) {
                    var h = this._fillers[g];
                    if (h && h[0] <= c && h[0] + h[1] >= c) {
                        h[1] += 1;
                        var i = h[2].firstChild.style.height = parseInt(h[2].firstChild.style.height) + this._srdh + "px",
                            f = !0;
                        this._fake && (this._fake._fillers[g][1]++, this._fake._fillers[g][2].firstChild.style.height = i)
                    }
                    h && h[0] > c && (h[0] += 1, this._fake && this._fake._fillers[g][0]++)
                }
                return f || this._fillers.push(this._add_filler(c, 1, 0 == c ? {
                    parentNode: this.obj.rows[0].parentNode,
                    nextSibling: this.rowsCol[1]
                } : this.rowsCol[c - 1])), d
            }
            return this.rowsBuffer._dhx_insertAt(c, d), this._insertRowAt(d, c)
        },
        addRow: function(a, b, c) {
            var d = this._addRow(a, b, c);
            return this.dragContext || this.callEvent("onRowAdded", [a]), this.pagingOn && this.changePage(this.currentPage), this._srnd && this._update_srnd_view(), d._added = !0, this._ahgr && this.setSizes(), this.callEvent("onGridReconstructed", []), d
        },
        _insertRowAt: function(a, b, c) {
            if (this.rowsAr[a.idd] = a, this._skipInsert) return this._skipInsert = !1, a;
            if (b < 0 || !b && 0 !== parseInt(b) ? b = this.rowsCol.length : b > this.rowsCol.length && (b = this.rowsCol.length), this._cssEven) {
                var d = a.className.replace(this._cssUnEven, "");
                a.className += (this._cssSP ? this.getLevel(a.idd) : b) % 2 == 1 ? d + " " + this._cssUnEven + (this._cssSU ? " " + this._cssUnEven + "_" + this.getLevel(a.idd) : "") : d + " " + this._cssEven + (this._cssSU ? " " + this._cssEven + "_" + this.getLevel(a.idd) : "")
            }
            return c || (b != this.obj.rows.length - 1 && this.rowsCol[b] ? this.rowsCol[b].parentNode.insertBefore(a, this.rowsCol[b]) : _isKHTML ? this.obj.appendChild(a) : this.obj.firstChild.appendChild(a)), this.rowsCol._dhx_insertAt(b, a), this.callEvent("onRowInserted", [a, b]), a
        },
        getRowById: function(a) {
            var b = this.rowsAr[a];
            if (b) {
                if ("TR" != b.tagName) {
                    for (var c = 0; c < this.rowsBuffer.length; c++)
                        if (this.rowsBuffer[c] && this.rowsBuffer[c].idd == a) return this.render_row(c);
                    if (this._h2) return this.render_row(null, b.idd)
                }
                return b
            }
            return null
        },
        cellById: function(a, b) {
            return this.cells(a, b)
        },
        cells: function(a, b) {
            if (0 == arguments.length) return this.cells4(this.cell);
            var c = this.getRowById(a),
                d = c._childIndexes ? c.childNodes[c._childIndexes[b]] : c.childNodes[b];
            return !d && c._childIndexes && (d = c.firstChild || {}), this.cells4(d)
        },
        cellByIndex: function(a, b) {
            return this.cells2(a, b)
        },
        cells2: function(a, b) {
            var c = this.render_row(a),
                d = c._childIndexes ? c.childNodes[c._childIndexes[b]] : c.childNodes[b];
            return !d && c._childIndexes && (d = c.firstChild || {}), this.cells4(d)
        },
        cells3: function(a, b) {
            var c = a._childIndexes ? a.childNodes[a._childIndexes[b]] : a.childNodes[b];
            return this.cells4(c)
        },
        cells4: function(a) {
            var b = window["eXcell_" + (a._cellType || this.cellType[a._cellIndex])];
            if (b) return new b(a)
        },
        cells5: function(a, b) {
            if (b = b || a._cellType || this.cellType[a._cellIndex], !this._ecache[b]) {
                var c = window["eXcell_" + b] ? window["eXcell_" + b] : eXcell_ro;
                this._ecache[b] = new c(a)
            }
            return this._ecache[b].cell = a, this._ecache[b]
        },
        dma: function(a) {
            this._ecache || (this._ecache = {}), a && !this._dma ? (this._dma = this.cells4, this.cells4 = this.cells5) : !a && this._dma && (this.cells4 = this._dma, this._dma = null)
        },
        getRowsNum: function() {
            return this.rowsBuffer.length
        },
        enableEditTabOnly: function(a) {
            this.smartTabOrder = !(arguments.length > 0) || convertStringToBoolean(a)
        },
        setExternalTabOrder: function(a, b) {
            var c = this;
            this.tabStart = "object" == typeof a ? a : document.getElementById(a);
            var d = this.tabStart.onkeydown;
            this.tabStart.onkeydown = function(a) {
                d && d.call(this, a);
                var b = a || window.event;
                if (9 == b.keyCode && !b.shiftKey) return b.cancelBubble = !0, c.selectCell(0, 0, 0, 0, 1), c.smartTabOrder && c.cells2(0, 0).isDisabled() && c._key_events.k9_0_0.call(c), this.blur(), !1
            }, _isOpera && (this.tabStart.onkeypress = this.tabStart.onkeydown), this.tabEnd = "object" == typeof b ? b : document.getElementById(b);
            var e = this.tabEnd.onkeydown;
            this.tabEnd.onkeydown = this.tabEnd.onkeypress = function(a) {
                e && e.call(this, a);
                var b = a || window.event;
                if (9 == b.keyCode && b.shiftKey) return b.cancelBubble = !0, c.selectCell(c.getRowsNum() - 1, c.getColumnCount() - 1, 0, 0, 1), c.smartTabOrder && c.cells2(c.getRowsNum() - 1, c.getColumnCount() - 1).isDisabled() && c._key_events.k9_0_1.call(c), this.blur(), !1
            }, _isOpera && (this.tabEnd.onkeypress = this.tabEnd.onkeydown)
        },
        uid: function() {
            return this._ui_seed || (this._ui_seed = (new Date).valueOf()), this._ui_seed++
        },
        clearAndLoad: function() {
            var a = this._pgn_skin;
            this._pgn_skin = null, this.clearAll(), this._pgn_skin = a, this.load.apply(this, arguments)
        },
        getStateOfView: function() {
            if (this.pagingOn) {
                var a = (this.currentPage - 1) * this.rowsBufferOutSize;
                return [this.currentPage, a, Math.min(a + this.rowsBufferOutSize, this.rowsBuffer.length), this.rowsBuffer.length]
            }
            return [Math.floor(this.objBox.scrollTop / this._srdh), Math.ceil(parseInt(this.objBox.offsetHeight) / this._srdh), this.rowsBuffer.length]
        }
    },
    function() {
        function a(a, b) {
            this[a] = b
        }

        function b(a, b) {
            this[a].call(this, b)
        }

        function c(a, b) {
            this[a].call(this, b.join(this.delim))
        }

        function d(a, b) {
            for (var c = 0; c < b.length; c++)
                if ("object" == typeof b[c]) {
                    var d, e = this.getCombo(c);
                    for (d in b[c]) e.put(d, b[c][d])
                }
        }

        function e(a, b) {
            function c(a, b, c) {
                d[b] || (d[b] = []), "object" == typeof c && (c.toString = function() {
                    return this.text
                }), d[b][a] = c
            }
            for (var d = [], e = 0; e < b.length; e++)
                if ("object" == typeof b[e] && b[e].length)
                    for (var f = 0; f < b[e].length; f++) c(e, f, b[e][f]);
                else c(e, 0, b[e]);
            for (e = 0; e < d.length; e++)
                for (f = 0; f < d[0].length; f++) {
                    var g = d[e][f];
                    if (d[e][f] = (g || "").toString() || "&nbsp;", g && g.colspan)
                        for (var h = 1; h < g.colspan; h++) c(f + h, e, "#cspan");
                    if (g && g.rowspan)
                        for (h = 1; h < g.rowspan; h++) c(f, e + h, "#rspan")
                }
            for (this.setHeader(d[0]), e = 1; e < d.length; e++) this.attachHeader(d[e])
        }
        var f = [{
            name: "label",
            def: "&nbsp;",
            operation: "setHeader",
            type: e
        }, {
            name: "id",
            def: "",
            operation: "columnIds",
            type: a
        }, {
            name: "width",
            def: "*",
            operation: "setInitWidths",
            type: c
        }, {
            name: "align",
            def: "left",
            operation: "cellAlign",
            type: a
        }, {
            name: "valign",
            def: "middle",
            operation: "cellVAlign",
            type: a
        }, {
            name: "sort",
            def: "na",
            operation: "fldSort",
            type: a
        }, {
            name: "type",
            def: "ro",
            operation: "setColTypes",
            type: c
        }, {
            name: "options",
            def: "",
            operation: "",
            type: d
        }];
        dhtmlx.extend_api("dhtmlXGridObject", {
            _init: function(a) {
                return [a.parent]
            },
            image_path: "setImagePath",
            columns: "columns",
            rows: "rows",
            headers: "headers",
            skin: "setSkin",
            smart_rendering: "enableSmartRendering",
            css: "enableAlterCss",
            auto_height: "enableAutoHeight",
            save_hidden: "enableAutoHiddenColumnsSaving",
            save_cookie: "enableAutoSaving",
            save_size: "enableAutoSizeSaving",
            auto_width: "enableAutoWidth",
            block_selection: "enableBlockSelection",
            csv_id: "enableCSVAutoID",
            csv_header: "enableCSVHeader",
            cell_ids: "enableCellIds",
            colspan: "enableColSpan",
            column_move: "enableColumnMove",
            context_menu: "enableContextMenu",
            distributed: "enableDistributedParsing",
            drag: "enableDragAndDrop",
            drag_order: "enableDragOrder",
            tabulation: "enableEditTabOnly",
            header_images: "enableHeaderImages",
            header_menu: "enableHeaderMenu",
            keymap: "enableKeyboardSupport",
            mouse_navigation: "enableLightMouseNavigation",
            markers: "enableMarkedCells",
            math_editing: "enableMathEditing",
            math_serialization: "enableMathSerialization",
            drag_copy: "enableMercyDrag",
            multiline: "enableMultiline",
            multiselect: "enableMultiselect",
            save_column_order: "enableOrderSaving",
            hover: "enableRowsHover",
            rowspan: "enableRowspan",
            smart: "enableSmartRendering",
            save_sorting: "enableSortingSaving",
            stable_sorting: "enableStableSorting",
            undo: "enableUndoRedo",
            csv_cell: "setCSVDelimiter",
            date_format: "setDateFormat",
            drag_behavior: "setDragBehavior",
            editable: "setEditable",
            without_header: "setNoHeader",
            submit_changed: "submitOnlyChanged",
            submit_serialization: "submitSerialization",
            submit_selected: "submitOnlySelected",
            submit_id: "submitOnlyRowID",
            xml: "load"
        }, {
            columns: function(a) {
                for (var c = 0; c < f.length; c++) {
                    for (var d = [], e = 0; e < a.length; e++) d[e] = a[e][f[c].name] || f[c].def;
                    var g = f[c].type || b;
                    g.call(this, f[c].operation, d, a)
                }
                this.init()
            },
            rows: function() {},
            headers: function(a) {
                for (var b = 0; b < a.length; b++) this.attachHeader(a[b])
            }
        })
    }(), dhtmlXGridObject.prototype._dp_init = function(a) {
        a.attachEvent("insertCallback", function(a, b) {
            this.obj._h2 ? this.obj.addRow(b, c, null, parent) : this.obj.addRow(b, [], 0);
            var c = this.obj.getRowById(b);
            c && (this.obj._process_xml_row(c, a.firstChild), this.obj._postRowProcessing(c))
        }), a.attachEvent("updateCallback", function(a, b) {
            var c = this.obj.getRowById(b);
            c && (this.obj._process_xml_row(c, a.firstChild), this.obj._postRowProcessing(c))
        }), a.attachEvent("deleteCallback", function(a, b) {
            this.obj.setUserData(b, this.action_param, "true_deleted"), this.obj.deleteRow(b)
        }), a._methods = ["setRowTextStyle", "setCellTextStyle", "changeRowId", "deleteRow"], this.attachEvent("onEditCell", function(b, c, d) {
            if (a._columns && !a._columns[d]) return !0;
            var e = this.cells(c, d);
            return 1 == b ? e.isCheckbox() && a.setUpdated(c, !0) : 2 == b && e.wasChanged() && a.setUpdated(c, !0), !0
        }), this.attachEvent("onRowPaste", function(b) {
            a.setUpdated(b, !0)
        }), this.attachEvent("onUndo", function(b) {
            a.setUpdated(b, !0)
        }), this.attachEvent("onRowIdChange", function(b, c) {
            var d = a.findRow(b);
            d < a.updatedRows.length && (a.updatedRows[d] = c)
        }), this.attachEvent("onSelectStateChanged", function() {
            return "row" == a.updateMode && a.sendData(), !0
        }), this.attachEvent("onEnter", function() {
            return "row" == a.updateMode && a.sendData(), !0
        }), this.attachEvent("onBeforeRowDeleted", function(b) {
            if (!this.rowsAr[b]) return !0;
            if (this.dragContext && a.dnd) return window.setTimeout(function() {
                a.setUpdated(b, !0)
            }, 1), !0;
            var c = a.getState(b);
            return this._h2 && this._h2.forEachChild(b, function(b) {
                a.setUpdated(b.id, !1), a.markRow(b.id, !0, "deleted")
            }, this), "inserted" == c ? (a.set_invalid(b, !1), a.setUpdated(b, !1), !0) : "deleted" != c && ("true_deleted" == c ? (a.setUpdated(b, !1), !0) : (a.setUpdated(b, !0, "deleted"), !1))
        }), this.attachEvent("onBindUpdate", function(b) {
            "object" == typeof b && (b = b.id), a.setUpdated(b, !0)
        }), this.attachEvent("onRowAdded", function(b) {
            return !(!this.dragContext || !a.dnd) || (a.setUpdated(b, !0, "inserted"), !0)
        }), a._getRowData = function(a) {
            var b = [];
            b.gr_id = a, this.obj.isTreeGrid() && (b.gr_pid = this.obj.getParentId(a));
            for (var c = this.obj.getRowById(a), d = 0; d < this.obj._cCount; d++) {
                var e = this.obj._c_order ? this.obj._c_order[d] : d,
                    f = this.obj.cells(c.idd, d);
                this._changed && !f.wasChanged() || (this._endnm ? b[this.obj.getColumnId(d)] = f.getValue() : b["c" + e] = f.getValue())
            }
            var g = this.obj.UserData[a];
            if (g)
                for (var h = 0; h < g.keys.length; h++) g.keys[h] && 0 != g.keys[h].indexOf("__") && (b[g.keys[h]] = g.values[h]);
            if (g = this.obj.UserData.gridglobaluserdata)
                for (h = 0; h < g.keys.length; h++) b[g.keys[h]] = g.values[h];
            return b
        }, a._clearUpdateFlag = function(a) {
            var b = this.obj.getRowById(a);
            if (b)
                for (var c = 0; c < this.obj._cCount; c++) this.obj.cells(a, c).cell.wasChanged = !1
        }, a.checkBeforeUpdate = function(a) {
            for (var b = !0, c = [], d = 0; d < this.obj._cCount; d++)
                if (this.mandatoryFields[d]) {
                    var e = this.mandatoryFields[d].call(this.obj, this.obj.cells(a, d).getValue(), a, d);
                    "string" == typeof e ? (this.messages.push(e), b = !1) : (b &= e, c[d] = !e)
                }
            return b || (this.set_invalid(a, "invalid", c), this.setUpdated(a, !1)), b
        }
    }, dhtmlXGridCellObject.prototype = {
        getAttribute: function(a) {
            return this.cell._attrs[a]
        },
        setAttribute: function(a, b) {
            this.cell._attrs[a] = b
        },
        getInput: function() {
            if (this.obj && ("INPUT" == this.obj.tagName || "TEXTAREA" == this.obj.tagName)) return this.obj;
            var a = (this.obj || this.cell).getElementsByTagName("TEXTAREA");
            return a.length || (a = (this.obj || this.cell).getElementsByTagName("INPUT")), a[0]
        }
    }, dhtmlXGridCellObject.prototype.setValue = function(a) {
        "number" == typeof a || a && "" != a.toString()._dhx_trim() ? this.cell._clearCell = !1 : (a = "&nbsp;", this.cell._clearCell = !0), this.setCValue(a)
    }, dhtmlXGridCellObject.prototype.getTitle = function() {
        return _isIE ? this.cell.innerText : this.cell.textContent
    }, dhtmlXGridCellObject.prototype.setCValue = function(a, b) {
        this.cell.innerHTML = a, this.grid.callEvent("onCellChanged", [this.cell.parentNode.idd, this.cell._cellIndex, arguments.length > 1 ? b : a])
    }, dhtmlXGridCellObject.prototype.setCTxtValue = function(a) {
        this.cell.innerHTML = "", this.cell.appendChild(document.createTextNode(a)), this.grid.callEvent("onCellChanged", [this.cell.parentNode.idd, this.cell._cellIndex, a])
    }, dhtmlXGridCellObject.prototype.setLabel = function(a) {
        this.cell.innerHTML = a
    }, dhtmlXGridCellObject.prototype.getMath = function() {
        return this._val ? this.val : this.getValue()
    }, eXcell.prototype = new dhtmlXGridCellObject, eXcell_ed.prototype = new eXcell, eXcell_edtxt.prototype = new eXcell_ed, eXcell_edn.prototype = new eXcell_ed, eXcell_edn.prototype.setValue = function(a) {
        return a && "" != a.toString()._dhx_trim() ? (this.cell._clearCell = !1, this.cell._orig_value = a, void this.setCValue(this.grid._aplNF(a, this.cell._cellIndex), a)) : (this.cell._clearCell = !0, this.setCValue("&nbsp;", 0))
    }, eXcell_ch.prototype = new eXcell, eXcell_ch.prototype.setValue = function(a) {
        this.cell.style.verticalAlign = "middle", a && (a = a.toString()._dhx_trim(), "false" == a || "0" == a) && (a = ""), a ? (a = "1", this.cell.chstate = "1") : (a = "0", this.cell.chstate = "0"), this.setCValue("<img src='" + this.grid.imgURL + "item_chk" + a + ".gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>", this.cell.chstate)
    }, eXcell_ra.prototype = new eXcell_ch, eXcell_ra.prototype.setValue = function(a) {
        if (this.cell.style.verticalAlign = "middle", a && (a = a.toString()._dhx_trim(), "false" == a || "0" == a) && (a = ""), a) {
            if (this.grid._RaSeCol || (this.grid._RaSeCol = []), this.grid._RaSeCol[this.cell._cellIndex]) {
                var b = this.grid.cells4(this.grid._RaSeCol[this.cell._cellIndex]);
                b.setValue("0"), this.grid.rowsAr[b.cell.parentNode.idd] && this.grid.callEvent("onEditCell", [1, b.cell.parentNode.idd, b.cell._cellIndex])
            }
            this.grid._RaSeCol[this.cell._cellIndex] = this.cell, a = "1", this.cell.chstate = "1"
        } else a = "0", this.cell.chstate = "0";
        this.setCValue("<img src='" + this.grid.imgURL + "radio_chk" + a + ".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>", this.cell.chstate)
    }, eXcell_txt.prototype = new eXcell, eXcell_txttxt.prototype = new eXcell_txt, eXcell_txt.prototype.setValue = function(a) {
        this.cell._brval = a, a && "" != a.toString()._dhx_trim() ? this.cell._clearCell = !1 : (a = "&nbsp;", this.cell._clearCell = !0), !this.grid.multiLine || this.cell._clearCell ? this.setCValue(a, this.cell._brval) : this.setCValue(a.replace(/\n/g, "<br/>"), a)
    }, eXcell_co.prototype = new eXcell, eXcell_co.prototype.getText = function() {
        return this.cell.innerHTML
    }, eXcell_co.prototype.setValue = function(a) {
        if ("object" == typeof a) {
            var b = this.grid.xmlLoader.doXPath("./option", a);
            b.length && (this.cell._combo = new dhtmlXGridComboObject);
            for (var c = 0; c < b.length; c++) this.cell._combo.put(b[c].getAttribute("value"), b[c].firstChild ? b[c].firstChild.data : "");
            a = a.firstChild.data
        }
        if ("" == (a || "").toString()._dhx_trim() && (a = null), this.cell.combo_value = a, null !== a) {
            var d = (this.cell._combo || this.grid.getCombo(this.cell._cellIndex)).get(a);
            this.setCValue(null === d ? a : d, a)
        } else this.setCValue("&nbsp;", a)
    }, eXcell_coro.prototype = new eXcell_co, eXcell_cotxt.prototype = new eXcell_co, eXcell_cotxt.prototype.getText = function() {
        return _isIE ? this.cell.innerText : this.cell.textContent
    }, eXcell_cotxt.prototype.setValue = function(a) {
        if ("object" == typeof a) {
            var b = this.grid.xmlLoader.doXPath("./option", a);
            b.length && (this.cell._combo = new dhtmlXGridComboObject);
            for (var c = 0; c < b.length; c++) this.cell._combo.put(b[c].getAttribute("value"), b[c].firstChild ? b[c].firstChild.data : "");
            a = a.firstChild.data
        }
        "" == (a || "").toString()._dhx_trim() && (a = null), null !== a ? this.setCTxtValue((this.cell._combo || this.grid.getCombo(this.cell._cellIndex)).get(a) || a, a) : this.setCTxtValue(" ", a), this.cell.combo_value = a
    }, eXcell_corotxt.prototype = new eXcell_cotxt, eXcell_cp.prototype = new eXcell, eXcell_cp.prototype.setValue = function(a) {
        this.setCValue("<div style='width:100%;height:" + (this.grid.multiLine ? this.cell.offsetHeight - 2 : 16) + ";background-color:" + (a || "") + ";border:0px;'>&nbsp;</div>", a), this.cell.firstChild._bg = a
    }, eXcell_img.prototype = new eXcell, eXcell_img.prototype.getTitle = function() {
        return this.cell._brval
    }, eXcell_img.prototype.setValue = function(a) {
        var b = a;
        if (a.indexOf("^") != -1) {
            var c = a.split("^"),
                a = c[0],
                b = this.cell._attrs.title || c[1];
            c.length > 2 && (this.cell.lnk = c[2], c[3]) && (this.cell.trg = c[3]), this.cell.titFl = "1"
        }
        this.setCValue("<img src='" + this.grid.iconURL + (a || "")._dhx_trim() + "' border='0'>", a), this.cell.lnk && (this.cell.innerHTML = "<a href='" + this.cell.lnk + "' target='" + this.cell.trg + "'>" + this.cell.innerHTML + "</a>"), this.cell._brval = b
    }, eXcell_price.prototype = new eXcell_ed, eXcell_price.prototype.setValue = function(a) {
        isNaN(parseFloat(a)) && (a = this.val || 0);
        var b = "green";
        a < 0 && (b = "red"), this.setCValue("<span>$</span><span style='padding-right:2px;color:" + b + ";'>" + a + "</span>", a)
    }, eXcell_dyn.prototype = new eXcell_ed, eXcell_dyn.prototype.setValue = function(a) {
        if (a && !isNaN(Number(a)) || "" !== a && (a = 0), a > 0) var b = "green",
            c = "dyn_up.gif";
        else 0 == a ? (b = "black", c = "dyn_.gif") : (b = "red", c = "dyn_down.gif");
        this.setCValue("<div style='position:relative;padding-right:2px; width:100%;overflow:hidden; white-space:nowrap;'><img src='" + this.grid.imgURL + c + "' height='15' style='position:absolute;top:0px;left:0px;'><span style=' padding-left:20px; width:100%;color:" + b + ";'>" + a + "</span></div>", a)
    }, eXcell_ro.prototype = new eXcell, eXcell_ron.prototype = new eXcell, eXcell_ron.prototype.setValue = function(a) {
        return 0 === a || a && "" != a.toString()._dhx_trim() ? (this.cell._clearCell = !1, void this.setCValue(a ? this.grid._aplNF(a, this.cell._cellIndex) : "0")) : (this.setCValue("&nbsp;"), this.cell._clearCell = !0)
    }, eXcell_rotxt.prototype = new eXcell, Hashtable.prototype = new dhtmlXGridComboObject, dhtmlXGridObject.prototype._process_json_row = function(a, b) {
        a._attrs = b;
        for (var c = 0; c < a.childNodes.length; c++) a.childNodes[c]._attrs = {};
        if (b.userdata)
            for (var d in b.userdata) this.setUserData(a.idd, d, b.userdata[d]);
        for (var b = this._c_order ? this._swapColumns(b.data) : b.data, e = 0; e < b.length; e++) "object" == typeof b[e] && null != b[e] && (a.childNodes[e]._attrs = b[e], b[e].type && (a.childNodes[e]._cellType = b[e].type), b[e] = b[e].value);
        return this._fillRow(a, b), a
    }, dhtmlXGridObject.prototype._process_js_row = function(a, b) {
        a._attrs = b;
        for (var c = 0; c < a.childNodes.length; c++) a.childNodes[c]._attrs = {};
        if (b.userdata)
            for (var d in b.userdata) this.setUserData(a.idd, d, b.userdata[d]);
        for (var e = [], f = 0; f < this.columnIds.length; f++) e[f] = b[this.columnIds[f]], "object" == typeof e[f] && null != e[f] && (a.childNodes[f]._attrs = e[f], e[f].type && (a.childNodes[f]._cellType = e[f].type), e[f] = e[f].value), !e[f] && 0 !== e[f] && (e[f] = "");
        return this._fillRow(a, e), a
    }, dhtmlXGridObject.prototype.updateFromJSON = function(a, b, c, d) {
        "undefined" == typeof b && (b = !0), this._refresh_mode = [!0, b, c], this.load(a, d, "json")
    }, dhtmlXGridObject.prototype._refreshFromJSON = function(a) {
        this._f_rowsBuffer && this.filterBy(0, ""), reset = !1, window.eXcell_tree && (eXcell_tree.prototype.setValueX = eXcell_tree.prototype.setValue, eXcell_tree.prototype.setValue = function(a) {
            var b = this.grid._h2.get[this.cell.parentNode.idd];
            b && this.cell.parentNode.valTag ? this.setLabel(a) : this.setValueX(a)
        });
        var b = this.cellType._dhx_find("tree"),
            c = a.parent || 0,
            d = {};
        this._refresh_mode[2] && (b != -1 ? this._h2.forEachChild(c, function(a) {
            d[a.id] = !0
        }, this) : this.forEachRow(function(a) {
            d[a] = !0
        }));
        for (var e = a.rows, f = 0; f < e.length; f++) {
            var g = e[f],
                h = g.id;
            if (d[h] = !1, this.rowsAr[h] && "TR" != this.rowsAr[h].tagName) this._h2 ? this._h2.get[h].buff.data = g : this.rowsBuffer[this.getRowIndex(h)].data = g, this.rowsAr[h] = g;
            else if (this.rowsAr[h]) this._process_json_row(this.rowsAr[h], g, -1), this._postRowProcessing(this.rowsAr[h], !0);
            else if (this._refresh_mode[1]) {
                var i = {
                        idd: h,
                        data: g,
                        _parser: this._process_json_row,
                        _locator: this._get_json_data
                    },
                    j = this.rowsBuffer.length;
                "top" == this._refresh_mode[1] ? (this.rowsBuffer.unshift(i), j = 0) : this.rowsBuffer.push(i), this._h2 && (reset = !0, this._h2.add(h, c).buff = this.rowsBuffer[this.rowsBuffer.length - 1]), this.rowsAr[h] = g, g = this.render_row(j), this._insertRowAt(g, j ? -1 : 0)
            }
        }
        if (this._refresh_mode[2])
            for (h in d) d[h] && this.rowsAr[h] && this.deleteRow(h);
        this._refresh_mode = null, window.eXcell_tree && (eXcell_tree.prototype.setValue = eXcell_tree.prototype.setValueX), reset && this._renderSort(), this._f_rowsBuffer && (this._f_rowsBuffer = null, this.filterByAll())
    }, dhtmlXGridObject.prototype._process_js = function(a) {
        return this._process_json(a, "js")
    }, dhtmlXGridObject.prototype._process_json = function(a, b) {
        this._parsing = !0;
        try {
            a && a.xmlDoc ? (eval("dhtmlx.temp=" + a.xmlDoc.responseText + ";"), a = dhtmlx.temp) : "string" == typeof a && (eval("dhtmlx.temp=" + a + ";"), a = dhtmlx.temp)
        } catch (b) {
            dhtmlxError.throwError("LoadXML", "Incorrect JSON", [a.xmlDoc || a, this]), a = {
                rows: []
            }
        }
        if (this._refresh_mode) return this._refreshFromJSON(a);
        var d = parseInt(a.pos || 0),
            e = parseInt(a.total_count || 0),
            f = !1;
        e && (this.rowsBuffer[e - 1] || (this.rowsBuffer.length && (f = !0), this.rowsBuffer[e - 1] = null), e < this.rowsBuffer.length && (this.rowsBuffer.splice(e, this.rowsBuffer.length - e), f = !0));
        for (var g in a) "rows" != g && this.setUserData("", g, a[g]);
        if ("js" == b && a.collections)
            for (var h in a.collections) {
                var i = this.getColIndexById(h),
                    j = a.collections[h];
                if (i !== window.undefined)
                    if ("clist" == this.cellType[i]) {
                        colplaindata = [];
                        for (var k = 0; k < j.length; k++) colplaindata.push(j[k].label);
                        this.registerCList(i, colplaindata)
                    } else
                        for (var l = this.getCombo(i), k = 0; k < j.length; k++) l.put(j[k].value, j[k].label)
            }
        if (this.isTreeGrid()) return this._process_tree_json(a, null, null, b);
        if ("js" == b) {
            a.data && (a = a.data);
            for (var m = 0; m < a.length; m++)
                if (!this.rowsBuffer[m + d]) {
                    var n = a[m],
                        o = n.id || m + 1;
                    this.rowsBuffer[m + d] = {
                        idd: o,
                        data: n,
                        _parser: this._process_js_row,
                        _locator: this._get_js_data
                    }, this.rowsAr[o] = a[m]
                }
        } else
            for (m = 0; m < a.rows.length; m++) this.rowsBuffer[m + d] || (o = a.rows[m].id, this.rowsBuffer[m + d] = {
                idd: o,
                data: a.rows[m],
                _parser: this._process_json_row,
                _locator: this._get_json_data
            }, this.rowsAr[o] = a.rows[m]);
        if (f && this._srnd) {
            var p = this.objBox.scrollTop;
            this._reset_view(), this.objBox.scrollTop = p
        } else this.render_dataset();
        this._parsing = !1
    }, dhtmlXGridObject.prototype._get_json_data = function(a, b) {
        return "object" == typeof a.data[b] ? a.data[b].value : a.data[b]
    }, dhtmlXGridObject.prototype._process_tree_json = function(a, b, c, d) {
        this._parsing = !0;
        var e = !1;
        if (b || (this.render_row = this.render_row_tree, e = !0, b = a, c = b.parent || 0, "0" == c && (c = 0), this._h2 || (this._h2 = new dhtmlxHierarchy), this._fake && (this._fake._h2 = this._h2)), "js" == d) {
            b.data && !c && (a = b.data), b.rows && (b = b.rows);
            for (var f = 0; f < b.length; f++) {
                var g = b[f].id,
                    h = this._h2.add(g, c);
                h.buff = {
                    idd: g,
                    data: b[f],
                    _parser: this._process_js_row,
                    _locator: this._get_js_data
                }, b[f].open && (h.state = "minus"), this.rowsAr[g] = h.buff, this._process_tree_json(b[f], b[f], g, d)
            }
        } else if (b.rows)
            for (f = 0; f < b.rows.length; f++) g = b.rows[f].id, h = this._h2.add(g, c), h.buff = {
                idd: g,
                data: b.rows[f],
                _parser: this._process_json_row,
                _locator: this._get_json_data
            }, b.rows[f].open && (h.state = "minus"), this.rowsAr[g] = h.buff, this._process_tree_json(b.rows[f], b.rows[f], g, d);
        e && (0 != c && this._h2.change(c, "state", "minus"), this._updateTGRState(this._h2.get[c]), this._h2_to_buff(), 0 != c && (this._srnd || this.pagingOn) ? this._renderSort() : this.render_dataset(), this._slowParse === !1 && this.forEachRow(function(a) {
            this.render_row_tree(0, a)
        }), this._parsing = !1)
    }, dhtmlXGridObject.prototype.filterBy = function(a, b, c) {
        if (this.isTreeGrid()) return this.filterTreeBy(a, b, c);
        if (this._f_rowsBuffer ? !c && (this.rowsBuffer = dhtmlxArray([].concat(this._f_rowsBuffer)), this._fake) && (this._fake.rowsBuffer = this.rowsBuffer) : this._f_rowsBuffer = [].concat(this.rowsBuffer), this.rowsBuffer.length) {
            if (this.dma(!0), "object" == typeof a)
                for (var d = 0; d < b.length; d++) this._filterA(a[d], b[d]);
            else this._filterA(a, b);
            this.dma(!1), this.pagingOn && this.rowsBuffer.length / this.rowsBufferOutSize < this.currentPage - 1 && this.changePage(0), this._reset_view(), this.callEvent("onGridReconstructed", [])
        }
    }, dhtmlXGridObject.prototype._filterA = function(a, b) {
        if ("" != b) {
            var c = !0;
            if ("function" == typeof b ? c = !1 : b = (b || "").toString().toLowerCase(), this.rowsBuffer.length)
                for (var d = this.rowsBuffer.length - 1; d >= 0; d--)(c ? this._get_cell_value(this.rowsBuffer[d], a).toString().toLowerCase().indexOf(b) == -1 : !b.call(this, this._get_cell_value(this.rowsBuffer[d], a), this.rowsBuffer[d].idd)) && this.rowsBuffer.splice(d, 1)
        }
    }, dhtmlXGridObject.prototype.getFilterElement = function(a) {
        if (this.filters) {
            for (var b = 0; b < this.filters.length; b++)
                if (this.filters[b][1] == a) return this.filters[b][0].combo || this.filters[b][0];
            return null
        }
    }, dhtmlXGridObject.prototype.collectValues = function(a) {
        var b = this.callEvent("onCollectValues", [a]);
        if (b !== !0) return b;
        if (this.isTreeGrid()) return this.collectTreeValues(a);
        this.dma(!0), this._build_m_order();
        for (var a = this._m_order ? this._m_order[a] : a, c = {}, d = [], e = this._f_rowsBuffer || this.rowsBuffer, f = 0; f < e.length; f++) {
            var g = this._get_cell_value(e[f], a);
            !g || e[f]._childIndexes && e[f]._childIndexes[a] == e[f]._childIndexes[a - 1] || (c[g] = !0)
        }
        this.dma(!1);
        var h, i = this.combos[a] || !!this._col_combos && this._col_combos[a];
        for (h in c) c[h] === !0 && (i && (i.get && i.get(h) ? h = i.get(h) : i.getOption && i.getOption(h) && (h = i.getOption(h).text)), d.push(h));
        return d.sort()
    }, dhtmlXGridObject.prototype._build_m_order = function() {
        if (this._c_order) {
            this._m_order = [];
            for (var a = 0; a < this._c_order.length; a++) this._m_order[this._c_order[a]] = a
        }
    }, dhtmlXGridObject.prototype.filterByAll = function() {
        var a = [],
            b = [];
        this._build_m_order();
        for (var c = 0; c < this.filters.length; c++)
            if (!(c >= this._cCount)) {
                var d = this._m_order ? this._m_order[this.filters[c][1]] : this.filters[c][1];
                b.push(d);
                var e = this.filters[c][0].old_value = this.filters[c][0].value;
                this.filters[c][0]._filter && (e = this.filters[c][0]._filter());
                var f;
                "function" != typeof e && (f = this.combos[d] || !!this._col_combos && this._col_combos[d]) && (f.values ? (d = f.values._dhx_find(e), e = d == -1 ? e : f.keys[d]) : f.getOptionByLabel && (e = f.getOptionByLabel(e) ? f.getOptionByLabel(e).value : e)), a.push(e)
            }
        this.callEvent("onFilterStart", [b, a]) && (this.filterBy(b, a), this._cssEven && this._fixAlterCss(), this.callEvent("onFilterEnd", [this.filters]), this._f_rowsBuffer && this.rowsBuffer.length == this._f_rowsBuffer.length) && (this._f_rowsBuffer = null)
    }, dhtmlXGridObject.prototype.makeFilter = function(a, b) {
        if (this.filters || (this.filters = []), "object" != typeof a && (a = document.getElementById(a)), a) {
            var c = this;
            if (a.style.width || (a.style.width = "90%"), "SELECT" == a.tagName) this.filters.push([a, b]), this._loadSelectOptins(a, b), a.onchange = function() {
                c.filterByAll()
            }, _isIE && (a.style.marginTop = "1px"), this.attachEvent("onEditCell", function(c, d, e) {
                return this._build_m_order(), 2 == c && this.filters && (this._m_order ? e == this._m_order[b] : e == b) && this._loadSelectOptins(a, b), !0
            });
            else if ("INPUT" == a.tagName) this.filters.push([a, b]), a.old_value = a.value = "", a.onkeydown = function() {
                this._timer && window.clearTimeout(this._timer), this._timer = window.setTimeout(function() {
                    a.value != a.old_value && (c.filterByAll(), a.old_value = a.value)
                }, 500)
            };
            else if ("DIV" == a.tagName && "combo" == a.className) {
                this.filters.push([a, b]), a.style.padding = "0px", a.style.margin = "0px", window.dhx_globalImgPath || (window.dhx_globalImgPath = this.imgURL);
                var d = new dhtmlXCombo(a, "_filter", "90%");
                d.filterSelfA = d.filterSelf, d.filterSelf = function() {
                    0 == this.getSelectedIndex() && this.setComboText(""), this.filterSelfA.apply(this, arguments), this.optionsArr[0].hide(!1)
                }, d.enableFilteringMode(!0), a.combo = d, a.value = "", this._loadComboOptins(a, b), d.attachEvent("onChange", function() {
                    a.value = d.getSelectedValue(), null === a.value && (a.value = ""), c.filterByAll()
                })
            }
            a.parentNode && (a.parentNode.className += " filter"), this._filters_ready()
        }
    }, dhtmlXGridObject.prototype.findCell = function(a, b, c, d) {
        d = d || function(a, b) {
            return b.toString().toLowerCase().indexOf(a) != -1
        }, d === !0 && (d = function(a, b) {
            return b.toString().toLowerCase() == a
        });
        var e = [],
            a = a.toString().toLowerCase();
        if ("number" != typeof c && (c = c ? 1 : 0), !this.rowsBuffer.length) return e;
        for (var f = b || 0; f < this._cCount; f++) {
            if (this._h2) this._h2.forEachChild(0, function(b) {
                return c && e.length == c ? e : void(d(a, this._get_cell_value(b.buff, f)) && e.push([b.id, f]))
            }, this);
            else
                for (var g = 0; g < this.rowsBuffer.length; g++)
                    if (d(a, this._get_cell_value(this.rowsBuffer[g], f)) && (e.push([this.rowsBuffer[g].idd, f]), c && e.length == c)) return e; if ("undefined" != typeof b) break
        }
        return e
    }, dhtmlXGridObject.prototype.makeSearch = function(a, b, c) {
        if ("object" != typeof a && (a = document.getElementById(a)), a) {
            var d = this;
            "INPUT" == a.tagName && (a.onkeypress = function() {
                this._timer && window.clearTimeout(this._timer), this._timer = window.setTimeout(function() {
                    if ("" != a.value) {
                        var e = d.findCell(a.value, b, !0, c);
                        e.length && (d._h2 && d.openItem(e[0][0]), d.selectCell(d.getRowIndex(e[0][0]), b || 0))
                    }
                }, 500)
            }), a.parentNode && (a.parentNode.className += " filter")
        }
    }, dhtmlXGridObject.prototype._loadSelectOptins = function(a, b) {
        var c = this.collectValues(b),
            d = a.value;
        a.innerHTML = "", a.options[0] = new Option("", "");
        for (var e = this._filter_tr ? this._filter_tr[b] : null, f = 0; f < c.length; f++) a.options[a.options.length] = new Option(e ? e(c[f]) : c[f], c[f]);
        a.value = d
    }, dhtmlXGridObject.prototype.setSelectFilterLabel = function(a, b) {
        this._filter_tr || (this._filter_tr = []), this._filter_tr[a] = b
    }, dhtmlXGridObject.prototype._loadComboOptins = function(a, b) {
        if (a.combo) {
            var c = this.collectValues(b);
            a.combo.clearAll(), a.combo.render(!1);
            for (var d = [
                    ["", "&nbsp;"]
                ], e = 0; e < c.length; e++) d.push([c[e], c[e]]);
            a.combo.addOption(d), a.combo.render(!0)
        }
    }, dhtmlXGridObject.prototype.refreshFilters = function() {
        if (this.filters)
            for (var a = 0; a < this.filters.length; a++) switch (this.filters[a][0].tagName.toLowerCase()) {
                case "select":
                    this._loadSelectOptins.apply(this, this.filters[a]);
                    break;
                case "div":
                    this._loadComboOptins.apply(this, this.filters[a])
            }
    }, dhtmlXGridObject.prototype._filters_ready = function() {
        this.attachEvent("onXLE", this.refreshFilters), this.attachEvent("onRowCreated", function(a, b) {
            if (this._f_rowsBuffer)
                for (var c = 0; c < this._f_rowsBuffer.length; c++)
                    if (this._f_rowsBuffer[c].idd == a) return this._f_rowsBuffer[c] = b
        }), this.attachEvent("onClearAll", function() {
            this._f_rowsBuffer = null, this.hdr.rows.length || (this.filters = [])
        }), window.dhtmlXCombo && this.attachEvent("onScroll", dhtmlXCombo.prototype.closeAll), this._filters_ready = function() {}
    }, dhtmlXGridObject.prototype._in_header_text_filter = function(a, b) {
        a.innerHTML = "<input type='text'>", a.onclick = a.onmousedown = function(a) {
            return (a || event).cancelBubble = !0
        }, a.onselectstart = function() {
            return event.cancelBubble = !0
        }, this.makeFilter(a.firstChild, b)
    }, dhtmlXGridObject.prototype._in_header_text_filter_inc = function(a, b) {
        a.innerHTML = "<input type='text'>", a.onclick = a.onmousedown = function(a) {
            return (a || event).cancelBubble = !0
        }, a.onselectstart = function() {
            return event.cancelBubble = !0
        }, this.makeFilter(a.firstChild, b), a.firstChild._filter = function() {
            return "" == a.firstChild.value ? "" : function(b) {
                return 0 == b.toString().toLowerCase().indexOf(a.firstChild.value.toLowerCase())
            }
        }, this._filters_ready()
    }, dhtmlXGridObject.prototype._in_header_select_filter = function(a, b) {
        a.innerHTML = "<select></select>", a.onclick = function(a) {
            return (a || event).cancelBubble = !0, !1
        }, this.makeFilter(a.firstChild, b)
    }, dhtmlXGridObject.prototype._in_header_select_filter_strict = function(a, b) {
        a.innerHTML = "<select style='width:90%; font-size:8pt; font-family:Tahoma;'></select>", a.onclick = function(a) {
            return (a || event).cancelBubble = !0, !1
        }, this.makeFilter(a.firstChild, b);
        var c = this.combos;
        a.firstChild._filter = function() {
            var d = a.firstChild.value;
            return d ? (c[b] && (d = c[b].keys[c[b].values._dhx_find(d)]), d = d.toLowerCase(), function(a) {
                return a.toString().toLowerCase() == d
            }) : ""
        }, this._filters_ready()
    }, dhtmlXGridObject.prototype._in_header_combo_filter = function(a, b) {
        a.innerHTML = "<div style='width:100%; padding-left:2px; overflow:hidden; ' class='combo'></div>", a.onselectstart = function() {
            return event.cancelBubble = !0
        }, a.onclick = a.onmousedown = function(a) {
            return (a || event).cancelBubble = !0
        }, this.makeFilter(a.firstChild, b)
    }, dhtmlXGridObject.prototype._search_common = function(a) {
        a.innerHTML = "<input type='text' style='width:90%; '>", a.onclick = a.onmousedown = function(a) {
            return (a || event).cancelBubble = !0
        }, a.onselectstart = function() {
            return event.cancelBubble = !0
        }
    }, dhtmlXGridObject.prototype._in_header_text_search = function(a, b) {
        this._search_common(a, b), this.makeSearch(a.firstChild, b)
    }, dhtmlXGridObject.prototype._in_header_text_search_strict = function(a, b) {
        this._search_common(a, b), this.makeSearch(a.firstChild, b, !0)
    }, dhtmlXGridObject.prototype._in_header_numeric_filter = function(a, b) {
        this._in_header_text_filter.call(this, a, b), a.firstChild._filter = function() {
            var a, b = this.value,
                c = "==",
                d = parseFloat(b.replace("=", "")),
                e = null;
            return b ? b.indexOf("..") != -1 ? (b = b.split(".."), d = parseFloat(b[0]), e = parseFloat(b[1]), function(a) {
                return a >= d && a <= e
            }) : ((a = b.match(/>=|<=|>|</)) && (c = a[0], d = parseFloat(b.replace(c, ""))), Function("v", " if (v " + c + " " + d + " ) return true; return false;")) : ""
        }
    }, dhtmlXGridObject.prototype._in_header_master_checkbox = function(a, b, c) {
        a.innerHTML = c[0] + "<input type='checkbox' />" + c[1];
        var d = this;
        a.getElementsByTagName("input")[0].onclick = function(a) {
            d._build_m_order();
            var c = d._m_order ? d._m_order[b] : b,
                e = this.checked ? 1 : 0;
            d.forEachRowA(function(a) {
                var b = this.cells(a, c);
                b.isCheckbox() && (b.setValue(e), b.cell.wasChanged = !0), this.callEvent("onEditCell", [1, a, c, e]), this.callEvent("onCheckbox", [a, c, e])
            }), (a || event).cancelBubble = !0
        }
    }, dhtmlXGridObject.prototype._in_header_stat_total = function(a, b, c) {
        var d = function() {
            var a = 0;
            this._build_m_order();
            for (var c = this._m_order ? this._m_order[b] : b, d = 0; d < this.rowsBuffer.length; d++) {
                var e = parseFloat(this._get_cell_value(this.rowsBuffer[d], c));
                a += isNaN(e) ? 0 : e
            }
            return this._maskArr[c] ? this._aplNF(a, c) : Math.round(100 * a) / 100
        };
        this._stat_in_header(a, d, b, c, c)
    }, dhtmlXGridObject.prototype._in_header_stat_multi_total = function(a, b, c) {
        var d = c[1].split(":");
        c[1] = "";
        for (var e = 0; e < d.length; e++) d[e] = parseInt(d[e]);
        for (var f = function() {
                for (var a = 0, c = 0; c < this.rowsBuffer.length; c++) {
                    for (var e = 1, f = 0; f < d.length; f++) e *= parseFloat(this._get_cell_value(this.rowsBuffer[c], d[f]));
                    a += isNaN(e) ? 0 : e
                }
                return this._maskArr[b] ? this._aplNF(a, b) : Math.round(100 * a) / 100
            }, g = [], h = 0; h < d.length; h++) g[d[h]] = !0;
        this._stat_in_header(a, f, g, c, c)
    }, dhtmlXGridObject.prototype._in_header_stat_max = function(a, b, c) {
        var d = function() {
            this._build_m_order();
            var a = this._m_order ? this._m_order[b] : b,
                c = -999999999;
            if (0 == this.getRowsNum()) return "&nbsp;";
            for (var d = 0; d < this.rowsBuffer.length; d++) c = Math.max(c, parseFloat(this._get_cell_value(this.rowsBuffer[d], a)));
            return this._maskArr[b] ? this._aplNF(c, b) : c
        };
        this._stat_in_header(a, d, b, c)
    }, dhtmlXGridObject.prototype._in_header_stat_min = function(a, b, c) {
        var d = function() {
            this._build_m_order();
            var a = this._m_order ? this._m_order[b] : b,
                c = 999999999;
            if (0 == this.getRowsNum()) return "&nbsp;";
            for (var d = 0; d < this.rowsBuffer.length; d++) c = Math.min(c, parseFloat(this._get_cell_value(this.rowsBuffer[d], a)));
            return this._maskArr[b] ? this._aplNF(c, b) : c
        };
        this._stat_in_header(a, d, b, c)
    }, dhtmlXGridObject.prototype._in_header_stat_average = function(a, b, c) {
        var d = function() {
            this._build_m_order();
            var a = this._m_order ? this._m_order[b] : b,
                c = 0,
                d = 0;
            if (0 == this.getRowsNum()) return "&nbsp;";
            for (var e = 0; e < this.rowsBuffer.length; e++) {
                var f = parseFloat(this._get_cell_value(this.rowsBuffer[e], a));
                c += isNaN(f) ? 0 : f, d++
            }
            return this._maskArr[b] ? this._aplNF(c / d, b) : Math.round(c / d * 100) / 100
        };
        this._stat_in_header(a, d, b, c)
    }, dhtmlXGridObject.prototype._in_header_stat_count = function(a, b, c) {
        var d = function() {
            return this.getRowsNum()
        };
        this._stat_in_header(a, d, b, c)
    }, dhtmlXGridObject.prototype._stat_in_header = function(a, b, c, d) {
        var e = function() {
            this.dma(!0), a.innerHTML = (d[0] ? d[0] : "") + b.call(this) + (d[1] ? d[1] : ""), this.dma(!1), this.callEvent("onStatReady", [])
        };
        this._stat_events || (this._stat_events = [], this.attachEvent("onClearAll", function() {
            if (!this.hdr.rows[1]) {
                for (var a = 0; a < this._stat_events.length; a++)
                    for (var b = 0; b < 4; b++) this.detachEvent(this._stat_events[a][b]);
                this._stat_events = []
            }
        })), this._stat_events.push([this.attachEvent("onGridReconstructed", e), this.attachEvent("onXLE", e), this.attachEvent("onFilterEnd", e), this.attachEvent("onEditCell", function(a, b, d) {
            return 2 == a && (d == c || c && c[d]) && e.call(this), !0
        })]), a.innerHTML = ""
    }, dhtmlXGridObject.prototype.unGroup = function() {
        this._groups && (this._dndProblematic = !1, delete this._groups, delete this._gIndex, this._fake && this._mirror_rowsCol(), this.forEachRow(function(a) {
            this.rowsAr[a].style.display = ""
        }), this._reset_view(), this.callEvent("onGridReconstructed", []), this.callEvent("onUnGroup", []))
    }, dhtmlXGridObject.prototype._mirror_rowsCol = function() {
        this._fake._groups = this._groups, this._fake._gIndex = this._gIndex, this.rowsBuffer = dhtmlxArray();
        for (var a = 0; a < this.rowsCol.length; a++) this.rowsCol[a]._cntr || this.rowsBuffer.push(this.rowsCol[a]);
        for (this._fake.rowsBuffer = dhtmlxArray(), a = 0; a < this._fake.rowsCol.length; a++) this._fake.rowsCol[a]._cntr || this._fake.rowsBuffer.push(this._fake.rowsCol[a])
    }, dhtmlXGridObject.prototype.groupBy = function(a, b) {
        if (this._groups && this.unGroup(), this._dndProblematic = !0, this._groups = {}, !b)
            for (var b = ["#title"], c = 1; c < this._cCount; c++) b.push("#cspan");
        this._gmask = document.createElement("TR"), this._gmask.origin = b;
        for (var d, e = 0, c = 0; c < b.length; c++) "#cspan" == b[c] ? d.colSpan = (parseInt(d.colSpan) || 1) + 1 : (d = document.createElement("TD"), d._cellIndex = c, this._hrrar[c] && (d.style.display = "none"), d.className = "group_row", d.innerHTML = "&nbsp;", "#title" == b[c] ? this._gmask._title = e : d.align = this.cellAlign[c] || "left", this._gmask.appendChild(d), 0 == b[c].indexOf("#stat") && (this._gmask._math = !0, d._counter = [this["_g_" + b[c].replace("#", "")], c, e]), e++);
        for (var f in this._groups) this._groups[f] = this.undefined;
        if (this._gIndex = a, this._fake && !this._realfake && (this._fake._groups = [], this._fake._gIndex = this._gIndex), this._nextRow = function(a, b) {
                var c = this.rowsCol[a + b];
                return c && ("none" == c.style.display || c._cntr) ? this._nextRow(a + b, b) : c
            }, this.__sortRowsBG || (this._key_events = dhtmlXHeir({}, this._key_events), this._key_events.k38_0_0 = function() {
                if (this.editor && this.editor.combo) this.editor.shiftPrev();
                else {
                    var a = this.row.rowIndex;
                    if (a) {
                        var b = this._nextRow(a - 1, -1);
                        b && this.selectCell(b, this.cell._cellIndex, !0)
                    }
                }
            }, this._key_events.k13_1_0 = this._key_events.k13_0_1 = function() {}, this._key_events.k40_0_0 = function() {
                if (this.editor && this.editor.combo) this.editor.shiftNext();
                else {
                    var a = this.row.rowIndex;
                    if (a) {
                        var b = this._nextRow(a - 1, 1);
                        b && this.selectCell(b, this.cell._cellIndex, !0);
                    }
                }
            }, this.attachEvent("onFilterStart", function() {
                return this._groups && (this._groups = this.undefined), !0
            }), this.attachEvent("onFilterEnd", function() {
                "undefined" != typeof this._gIndex && this.groupBy(this._gIndex, this._gmask.origin)
            }), this.sortRows_bg = this.sortRows, this.sortRows = function(a, b, c) {
                return "undefined" == typeof this._groups ? this.sortRows_bg.apply(this, arguments) : void this.callEvent("onBeforeSorting", [a, b || "str", c || "asc"])
            }, this.attachEvent("onBeforeSorting", function(a, b, c) {
                return "undefined" == typeof this._groups || (a == this._gIndex ? this._sortByGroup(a, b, c) : this._sortInGroup(a, b, c), this.setSortImgState(!0, a, c), this._fake && (this._mirror_rowsCol(), this._fake._groups = [], this._fake._reset_view()), this.setSortImgState(!0, a, c), this.callEvent("onAfterSorting", [a, b, c]), !1)
            }), this.attachEvent("onClearAll", function() {
                this.unGroup()
            }), this.attachEvent("onBeforeRowDeleted", function(a) {
                if (!this._groups) return !0;
                if (!this.rowsAr[a]) return !0;
                var b = this.cells(a, this._gIndex).getValue();
                "" === b && (b = " ");
                var c = this._groups[b];
                return this._dec_group(c), !0
            }), this.attachEvent("onAfterRowDeleted", function() {
                this.updateGroups()
            }), this.attachEvent("onCheckbox", function(a, b, c) {
                this.callEvent("onEditCell", [2, a, b, c ? 1 : 0, c ? 0 : 1])
            }), this.attachEvent("onXLE", this.updateGroups), this.attachEvent("onColumnHidden", this.hideGroupColumn), this.attachEvent("onEditCell", function(a, b, c, d, e) {
                if (!this._groups) return !0;
                if (2 == a && d != e && c == this._gIndex) {
                    "" === e && (e = " "), this._dec_group(this._groups[e]);
                    var f = this.rowsAr[b],
                        g = this.rowsCol._dhx_find(f),
                        h = this._inc_group(d),
                        i = this.rowsCol[h];
                    f == i && (i = i.nextSibling);
                    var j = f.parentNode;
                    f.rowIndex, j.removeChild(f), i ? j.insertBefore(f, i) : j.appendChild(f), this.rowsCol._dhx_insertAt(h, f), h < g && g++, this.rowsCol._dhx_removeAt(g, f), this._fixAlterCss()
                } else 2 == a && d != e && (this.updateGroups(), this._updateGroupView(this._groups[this.cells(b, this._gIndex).getValue() || " "]));
                return !0
            }), this.__sortRowsBG = !0), this._groupExisting(), this._hrrar)
            for (c = 0; c < this._hrrar.length; c++) this._hrrar[c] && this.hideGroupColumn(c, !0);
        this.callEvent("onGroup", []), (this._ahgr || this._awdth) && this.setSizes()
    }, dhtmlXGridObject.prototype._sortInGroup = function(a, b, c) {
        var d = this._groups_get();
        d.reverse();
        for (var e = 0; e < d.length; e++) {
            for (var f = d[e]._cntr._childs, g = {}, h = 0; h < f.length; h++) {
                var i = this.cells3(f[h], a);
                g[f[h].idd] = i.getDate ? i.getDate() : i.getValue()
            }
            this._sortCore(a, b, c, g, f)
        }
        this._groups_put(d), this.setSizes(), this.callEvent("onGridReconstructed", [])
    }, dhtmlXGridObject.prototype._sortByGroup = function(a, b, c) {
        for (var d = this._groups_get(), e = [], f = 0; f < d.length; f++) d[f].idd = "_sort_" + f, e["_sort_" + f] = d[f]._cntr.text;
        this._sortCore(a, b, c, e, d), this._groups_put(d), this.callEvent("onGridReconstructed", []), this.setSizes()
    }, dhtmlXGridObject.prototype._inc_group = function(a, b, c) {
        "" === a && (a = " "), this._groups[a] || (this._groups[a] = {
            text: a,
            row: this._addPseudoRow(),
            count: 0,
            state: b ? "plus" : "minus"
        });
        var d = this._groups[a];
        d.row._cntr = d;
        var e = this.rowsCol._dhx_find(d.row) + d.count + 1;
        return d.count++, c || (this._updateGroupView(d), this.updateGroups()), e
    }, dhtmlXGridObject.prototype._dec_group = function(a) {
        if (a) return a.count--, 0 == a.count ? (a.row.parentNode.removeChild(a.row), this.rowsCol._dhx_removeAt(this.rowsCol._dhx_find(a.row)), delete this._groups[a.text]) : this._updateGroupView(a), this._fake && !this._realfake && this._fake._dec_group(this._fake._groups[a.text]), this.updateGroups(), !0
    }, dhtmlXGridObject.prototype._insertRowAt_gA = dhtmlXGridObject.prototype._insertRowAt, dhtmlXGridObject.prototype._insertRowAt = function(a, b, c) {
        if ("undefined" != typeof this._groups) {
            var d = this._realfake ? this._fake._bfs_cells(a.idd, this._gIndex).getValue() : this._bfs_cells3 ? this._bfs_cells3(a, this._gIndex).getValue() : this.cells3(a, this._gIndex).getValue();
            d || (d = " "), b = this._inc_group(d, "none" == a.style.display)
        }
        var e = this._insertRowAt_gA(a, b, c);
        return "undefined" != typeof this._groups && (this.expandGroup(d), this._updateGroupView(this._groups[d]), this.updateGroups()), e
    }, dhtmlXGridObject.prototype._updateGroupView = function(a) {
        if (this._fake && !this._realfake) return a.row.firstChild.innerHTML = "&nbsp;";
        var b = this._gmask || this._fake._gmask,
            c = "<img style='margin-bottom:-4px' src='" + this.imgURL + a.state + ".gif'> ";
        c += this.customGroupFormat ? this.customGroupFormat(a.text, a.count) : a.text + " ( " + a.count + " ) ", a.row.childNodes[b._title].innerHTML = c
    }, dhtmlXGridObject.prototype._addPseudoRow = function(a) {
        for (var b = this._gmask || this._fake._gmask, c = b.cloneNode(!0), d = 0; d < c.childNodes.length; d++) c.childNodes[d]._cellIndex = b.childNodes[d]._cellIndex, this._realfake && (c.childNodes[d].style.display = "");
        var e = this;
        return c.onclick = function(a) {
            e.callEvent("onGroupClick", [this._cntr.text]) && (e._fake && e._realfake ? e._fake._switchGroupState(e._fake._groups[this._cntr.text].row) : e._switchGroupState(this), (a || event).cancelBubble = "true")
        }, c.ondblclick = function(a) {
            (a || event).cancelBubble = "true"
        }, a || (_isKHTML ? this.obj.appendChild(c) : this.obj.firstChild.appendChild(c), this.rowsCol.push(c)), c
    }, dhtmlXGridObject.prototype._groups_get = function() {
        var a = [];
        this._temp_par = this.obj.parentNode, this._temp_par.removeChild(this.obj);
        for (var b = [], c = this.rowsCol.length - 1; c >= 0; c--) this.rowsCol[c]._cntr ? (this.rowsCol[c]._cntr._childs = b, b = [], a.push(this.rowsCol[c])) : b.push(this.rowsCol[c]), this.rowsCol[c].parentNode.removeChild(this.rowsCol[c]);
        return a
    }, dhtmlXGridObject.prototype._groups_put = function(a) {
        var b = this.rowsCol.stablesort;
        this.rowsCol = new dhtmlxArray(0), this.rowsCol.stablesort = b;
        for (var c = 0; c < a.length; c++) {
            var d = a[c]._cntr;
            this.obj.firstChild.appendChild(d.row), this.rowsCol.push(d.row), d.row.idd = null;
            for (var e = 0; e < d._childs.length; e++) this.obj.firstChild.appendChild(d._childs[e]), this.rowsCol.push(d._childs[e]);
            delete d._childs
        }
        this._temp_par.appendChild(this.obj)
    }, dhtmlXGridObject.prototype._groupExisting = function(a) {
        if (this.getRowsNum()) {
            a = [], this._temp_par = this.obj.parentNode, this._temp_par.removeChild(this.obj);
            for (var b = this.rowsCol.length, c = 0; c < b; c++) {
                var d = this.cells4(this.rowsCol[c].childNodes[this._gIndex]).getValue();
                if (this.rowsCol[c].style.display = "", d || (d = " "), !this._groups[d]) {
                    this._groups[d] = {
                        text: d,
                        row: this._addPseudoRow(!0),
                        count: 0,
                        state: "minus"
                    };
                    var e = this._groups[d];
                    e.row._cntr = e, this._groups[d]._childs = [], a.push(e.row)
                }
                this._groups[d].count++, this._groups[d]._childs.push(this.rowsCol[c]), this.rowsCol[c].parentNode.removeChild(this.rowsCol[c])
            }
            for (c = 0; c < a.length; c++) this._updateGroupView(a[c]._cntr);
            this._groups_put(a), this._fake && !this._realfake && (this._mirror_rowsCol(), this._fake._groups = [], this._fake._reset_view()), this.callEvent("onGridReconstructed", []), this.updateGroups()
        }
    }, dhtmlXGridObject.prototype._switchGroupState = function(a) {
        var b = a._cntr;
        this._fake && !this._realfake && (b.state = this._fake._groups[a._cntr.text].row._cntr.state, this._fake._switchGroupState(this._fake._groups[a._cntr.text].row));
        var c = this.rowsCol._dhx_find(b.row) + 1;
        b.state = "minus" == b.state ? "plus" : "minus";
        for (var d = "plus" == b.state ? "none" : ""; this.rowsCol[c] && !this.rowsCol[c]._cntr;) this.rowsCol[c].style.display = d, c++;
        this._updateGroupView(b), this.callEvent("onGroupStateChanged", [b.text, "minus" == b.state]), this.setSizes()
    }, dhtmlXGridObject.prototype.expandGroup = function(a) {
        "plus" == this._groups[a].state && this._switchGroupState(this._groups[a].row)
    }, dhtmlXGridObject.prototype.collapseGroup = function(a) {
        "minus" == this._groups[a].state && this._switchGroupState(this._groups[a].row)
    }, dhtmlXGridObject.prototype.expandAllGroups = function() {
        for (var a in this._groups) this._groups[a] && "plus" == this._groups[a].state && this._switchGroupState(this._groups[a].row)
    }, dhtmlXGridObject.prototype.collapseAllGroups = function() {
        for (var a in this._groups) this._groups[a] && "minus" == this._groups[a].state && this._switchGroupState(this._groups[a].row)
    }, dhtmlXGridObject.prototype.hideGroupColumn = function(a, b) {
        if (!this._fake) {
            for (var c = -1, d = this._gmask.childNodes, e = 0; e < d.length; e++)
                if (d[e]._cellIndex == a) {
                    c = e;
                    break
                }
            if (c != -1)
                for (var f in this._groups) this._groups[f].row.childNodes[c].style.display = b ? "none" : ""
        }
    }, dhtmlXGridObject.prototype.groupStat = function(a, b, c) {
        var c = this["_g_" + (c || "stat_total")],
            d = 0,
            e = 0;
        return this.forEachRowInGroup(a, function(a) {
            d = c(d, 1 * this.cells(a, b).getValue(), e), e++
        }), d
    }, dhtmlXGridObject.prototype.forEachRowInGroup = function(a, b) {
        var c = this._groups[a].row.nextSibling;
        if (c)
            for (; c && !c._cntr;) b.call(this, c.idd), c = c.nextSibling;
        else {
            var d = this._groups[a]._childs;
            if (d)
                for (var e = 0; e < d.length; e++) b.call(this, d[e].idd)
        }
    }, dhtmlXGridObject.prototype.updateGroups = function() {
        if (this._gmask && this._gmask._math && !this._parsing)
            for (var a = this._gmask.childNodes, b = 0; b < a.length; b++) a[b]._counter && this._b_processing.apply(this, a[b]._counter)
    }, dhtmlXGridObject.prototype._b_processing = function(a, b, c) {
        var d = 0,
            e = 0;
        this._ecache[this.cellType[b]] || this.cells5({
            parentNode: {
                grid: this
            }
        }, this.cellType[b]);
        for (var f = this.rowsCol.length - 1; f >= 0; f--) this.rowsCol[f]._cntr ? (this.cells5(this.rowsCol[f].childNodes[c], this.cellType[b]).setValue(d), e = d = 0) : (d = a(d, 1 * this.cells3(this.rowsCol[f], b).getValue(), e), e++)
    }, dhtmlXGridObject.prototype._g_stat_total = function(a, b) {
        return a + b
    }, dhtmlXGridObject.prototype._g_stat_min = function(a, b, c) {
        return c || (a = 1 / 0), Math.min(a, b)
    }, dhtmlXGridObject.prototype._g_stat_max = function(a, b, c) {
        return c || (a = -(1 / 0)), Math.max(a, b)
    }, dhtmlXGridObject.prototype._g_stat_average = function(a, b, c) {
        return (a * c + b) / (c + 1)
    }, dhtmlXGridObject.prototype._g_stat_count = function(a) {
        return a++
    }, dhtmlXGridObject.prototype.enableDragAndDrop = function(a) {
        "temporary_disabled" == a ? (this.dADTempOff = !1, a = !0) : this.dADTempOff = !0, this.dragAndDropOff = convertStringToBoolean(a), this._drag_validate = !0, a && (this.objBox.ondragstart = function(a) {
            return (a || event).cancelBubble = !0, !1
        })
    }, dhtmlXGridObject.prototype.setDragBehavior = function(a) {
        switch (this.dadmodec = this.dadmodefix = 0, a) {
            case "child":
                this.dadmode = 0, this._sbmod = !1;
                break;
            case "sibling":
                this.dadmode = 1, this._sbmod = !1;
                break;
            case "sibling-next":
                this.dadmode = 1, this._sbmod = !0;
                break;
            case "complex":
                this.dadmode = 2, this._sbmod = !1;
                break;
            case "complex-next":
                this.dadmode = 2, this._sbmod = !0
        }
    }, dhtmlXGridObject.prototype.enableDragOrder = function(a) {
        this._dndorder = convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype._checkParent = function(a, b) {
        var c = this._h2.get[a.idd].parent;
        if (c.parent) {
            for (var d = 0; d < b.length; d++)
                if (b[d] == c.id) return !0;
            return this._checkParent(this.rowsAr[c.id], b)
        }
    }, dhtmlXGridObject.prototype._createDragNode = function(a, b) {
        if (this.editStop(), window.dhtmlDragAndDrop.dragNode) return null;
        if (!this.dADTempOff) return null;
        a.parentObject = {}, a.parentObject.treeNod = this;
        var c = this.callEvent("onBeforeDrag", [a.parentNode.idd, a._cellIndex, b]);
        if (!c) return null;
        for (var d = [], d = (d = this.getSelectedId()) && "" != d ? d.split(this.delim) : [], e = !1, f = 0; f < d.length; f++) d[f] == a.parentNode.idd && (e = !0);
        if (e || (this.selectRow(this.rowsAr[a.parentNode.idd], !1, b.ctrlKey, !1), b.ctrlKey || (d = []), d[this.selMultiRows ? d.length : 0] = a.parentNode.idd), this.isTreeGrid())
            for (f = d.length - 1; f >= 0; f--) this._checkParent(this.rowsAr[d[f]], d) && d.splice(f, 1);
        var g = this;
        d.length && this._dndorder && d.sort(function(a, b) {
            return g.rowsAr[a].rowIndex > g.rowsAr[b].rowIndex ? 1 : -1
        });
        var h = this.getFirstParentOfType(_isIE ? b.srcElement : b.target, "TD");
        for (h && (this._dndExtra = h._cellIndex), this._dragged = [], f = 0; f < d.length; f++) this.rowsAr[d[f]] && (this._dragged[this._dragged.length] = this.rowsAr[d[f]], this.rowsAr[d[f]].treeNod = this);
        a.parentObject.parentNode = a.parentNode;
        var i = document.createElement("div");
        return i.innerHTML = c !== !0 ? c : this.rowToDragElement(a.parentNode.idd), i.style.position = "absolute", i.className = "dragSpanDiv", i
    }, dhtmlXGridObject.prototype._createSdrgc = function() {
        this._sdrgc = document.createElement("DIV"), this._sdrgc.innerHTML = "&nbsp;", this._sdrgc.className = "gridDragLine", this.objBox.appendChild(this._sdrgc)
    }, dragContext.prototype.valid = function() {
        if (this.sobj != this.tobj) return !0;
        if (this.sid == this.tid) return !1;
        if ("treeGrid" == this.target)
            for (var a = this.tid; a = this.tobj.getParentId(a);)
                if (this.sid == a) return !1;
        return !0
    }, dragContext.prototype.close = function() {
        this.tobj = this.sobj = null
    }, dragContext.prototype.copy = function() {
        return new dragContext(this.source, this.target, this.mode, this.dropmode, this.sid, this.tid, this.sobj, this.tobj, this.sExtra, this.tExtra)
    }, dragContext.prototype.set = function(a, b) {
        return this[a] = b, this
    }, dragContext.prototype.uid = function() {
        for (this.nid = this.sid; this.tobj.rowsAr[this.nid];) this.nid += (new Date).valueOf();
        return this
    }, dragContext.prototype.data = function() {
        return this.sobj == this.tobj ? this.sobj._getRowArray(this.sobj.rowsAr[this.sid]) : "tree" == this.source ? this.tobj.treeToGridElement(this.sobj, this.sid, this.tid) : this.tobj.gridToGrid(this.sid, this.sobj, this.tobj)
    }, dragContext.prototype.attrs = function() {
        return "tree" == this.source ? {} : this.sobj.rowsAr[this.sid]._attrs
    }, dragContext.prototype.childs = function() {
        return "treeGrid" == this.source && this.sobj._h2.get[this.sid]._xml_await ? this.sobj._h2.get[this.sid].has_kids : null
    }, dragContext.prototype.pid = function() {
        if (!this.tid) return 0;
        if (!this.tobj._h2) return 0;
        if ("treeGrid" == this.target) {
            if ("child" == this.dropmode) return this.tid;
            var a = this.tobj.rowsAr[this.tid],
                b = this.tobj._h2.get[a.idd].parent.id;
            if (this.alfa && this.tobj._sbmod && a.nextSibling) {
                var c = this.tobj._h2.get[a.nextSibling.idd].parent.id;
                if (c == this.tid) return this.tid;
                if (c != b) return c
            }
            return b
        }
    }, dragContext.prototype.ind = function() {
        if (this.tid == window.unknown) return this.tobj.rowsBuffer.length;
        "treeGrid" == this.target && ("child" == this.dropmode ? this.tobj.openItem(this.tid) : this.tobj.openItem(this.tobj.getParentId(this.tid)));
        var a = this.tobj.rowsBuffer._dhx_find(this.tobj.rowsAr[this.tid]);
        if (this.alfa && this.tobj._sbmod && "sibling" == this.dropmode) {
            var b = this.tobj.rowsAr[this.tid];
            if (b.nextSibling && this._h2.get[b.nextSibling.idd].parent.id == this.tid) return a + 1
        }
        return a + 1 + ("treeGrid" == this.target && a >= 0 && "minus" == this.tobj._h2.get[this.tobj.rowsBuffer[a].idd].state ? this.tobj._getOpenLenght(this.tobj.rowsBuffer[a].idd, 0) : 0)
    }, dragContext.prototype.img = function() {
        return "grid" != this.target && this.sobj._h2 ? this.sobj.getItemImage(this.sid) : null
    }, dragContext.prototype.slist = function() {
        for (var a = [], b = 0; b < this.sid.length; b++) a[a.length] = this.sid[b]["tree" == this.source ? "id" : "idd"];
        return a.join(",")
    }, dhtmlXGridObject.prototype._drag = function(a, b, c, d) {
        if (this._realfake) return this._fake._drag();
        this.lastLanding, this._autoOpenTimer && window.clearTimeout(this._autoOpenTimer);
        var e = c.parentNode,
            f = a.parentObject;
        e.idd || (e.grid = this, this.dadmodefix = 0);
        var g = new dragContext(0, 0, 0, 1 == e.grid.dadmode || e.grid.dadmodec ? "sibling" : "child");
        if (f && f.childNodes) g.set("source", "tree").set("sobj", f.treeNod).set("sid", g.sobj._dragged);
        else {
            if (!f) return !0;
            f.treeNod.isTreeGrid && f.treeNod.isTreeGrid() && g.set("source", "treeGrid"), g.set("sobj", f.treeNod).set("sid", g.sobj._dragged)
        }
        e.grid.isTreeGrid() ? g.set("target", "treeGrid") : g.set("dropmode", "sibling"), g.set("tobj", e.grid).set("tid", e.idd), 2 == g.tobj.dadmode && 1 == g.tobj.dadmodec && g.tobj.dadmodefix < 0 && (g.tid = g.tobj.obj.rows[1].idd != g.tid ? e.previousSibling.idd : 0);
        var h = this.getFirstParentOfType(d, "TD");
        if (h && g.set("tExtra", h._cellIndex), h && g.set("sExtra", g.sobj._dndExtra), g.sobj.dpcpy && g.set("mode", "copy"), g.tobj._realfake && (g.tobj = g.tobj._fake), g.sobj._realfake && (g.sobj = g.sobj._fake), g.tobj._clearMove(), f && f.treeNod && f.treeNod._nonTrivialRow) f.treeNod._nonTrivialRow(this, g.tid, g.dropmode, f);
        else {
            if (g.tobj.dragContext = g, !g.tobj.callEvent("onDrag", [g.slist(), g.tid, g.sobj, g.tobj, g.sExtra, g.tExtra])) return g.tobj.dragContext = null;
            var i = [];
            if ("object" == typeof g.sid) {
                for (var j = g.copy(), k = 0; k < g.sid.length; k++) j.set("alfa", !k).set("sid", g.sid[k]["tree" == g.source ? "id" : "idd"]).valid() && (j.tobj._dragRoutine(j), "treeGrid" == j.target && "child" == j.dropmode && j.tobj.openItem(j.tid), i[i.length] = j.nid, j.set("dropmode", "sibling").set("tid", j.nid));
                j.close()
            } else g.tobj._dragRoutine(g);
            g.tobj.laterLink && g.tobj.laterLink(), g.tobj.callEvent("onDrop", [g.slist(), g.tid, i.join(","), g.sobj, g.tobj, g.sExtra, g.tExtra])
        }
        g.tobj.dragContext = null, g.close()
    }, dhtmlXGridObject.prototype._dragRoutine = function(a) {
        if (a.sobj != a.tobj || "grid" != a.source || "move" != a.mode || this._fake) {
            var b;
            if (this._h2 && "undefined" != typeof a.tid && "sibling" == a.dropmode && (this._sbmod || a.tid) ? a.alfa && this._sbmod && this._h2.get[a.tid].childs.length ? (this.openItem(a.tid), b = a.uid().tobj.addRowBefore(a.nid, a.data(), this._h2.get[a.tid].childs[0].id, a.img(), a.childs())) : b = a.uid().tobj.addRowAfter(a.nid, a.data(), a.tid, a.img(), a.childs()) : b = a.uid().tobj.addRow(a.nid, a.data(), a.ind(), a.pid(), a.img(), a.childs()), b._attrs = a.attrs(), "tree" == a.source) {
                this.callEvent("onRowAdded", [a.nid]);
                var c = a.sobj._globalIdStorageFind(a.sid);
                if (c.childsCount) {
                    for (var d = a.copy().set("tid", a.nid).set("dropmode", "grid" == a.target ? "sibling" : "child"), e = 0; e < c.childsCount; e++) a.tobj._dragRoutine(d.set("sid", c.childNodes[e].id)), "move" == a.mode && e--;
                    d.close()
                }
            } else if (a.tobj._copyUserData(a), this.callEvent("onRowAdded", [a.nid]), "treeGrid" == a.source) {
                a.sobj == a.tobj && (b._xml = a.sobj.rowsAr[a.sid]._xml);
                var f = a.sobj._h2.get[a.sid];
                if (f && f.childs.length) {
                    d = a.copy().set("tid", a.nid), "grid" == a.target ? d.set("dropmode", "sibling") : (d.tobj.openItem(a.tid), d.set("dropmode", "child"));
                    for (var g = f.childs.length, e = 0; e < g; e++) a.sobj.render_row_tree(null, f.childs[e].id), a.tobj._dragRoutine(d.set("sid", f.childs[e].id)), g != f.childs.length && (e--, g = f.childs.length);
                    d.close()
                }
            }
            "move" != a.mode || (a.sobj["tree" == a.source ? "deleteItem" : "deleteRow"](a.sid), a.sobj != a.tobj || a.tobj.rowsAr[a.sid]) || (a.tobj.changeRowId(a.nid, a.sid), a.nid = a.sid)
        } else if (!a.sobj._dndProblematic) {
            var h = a.sobj.rowsAr[a.sid],
                i = a.sobj.rowsCol._dhx_find(h);
            if (a.sobj.rowsCol._dhx_removeAt(a.sobj.rowsCol._dhx_find(h)), a.sobj.rowsBuffer._dhx_removeAt(a.sobj.rowsBuffer._dhx_find(h)), a.sobj.rowsBuffer._dhx_insertAt(a.ind(), h), a.tobj._fake) {
                a.tobj._fake.rowsCol._dhx_removeAt(i);
                var j = a.tobj._fake.rowsAr[a.sid];
                j.parentNode.removeChild(j)
            }
            a.sobj._insertRowAt(h, a.ind()), a.nid = a.sid, a.sobj.callEvent("onGridReconstructed", [])
        }
    }, dhtmlXGridObject.prototype.gridToGrid = function(a, b) {
        for (var c = [], d = 0; d < b.hdr.rows[0].cells.length; d++) c[d] = b.cells(a, d).getValue();
        return c
    }, dhtmlXGridObject.prototype.checkParentLine = function(a, b) {
        return !!(this._h2 && b && a) && (a.id == b || this.checkParentLine(a.parent, b))
    }, dhtmlXGridObject.prototype._dragIn = function(a, b, c, d) {
        if (!this.dADTempOff) return 0;
        var e = this.isTreeGrid(),
            f = b.parentNode.idd ? b.parentNode : b.parentObject;
        if (this._drag_validate) {
            if (a.parentNode == b.parentNode) return 0;
            if (e && this == f.grid && this.checkParentLine(this._h2.get[a.parentNode.idd], b.parentNode.idd)) return 0
        }
        return this.callEvent("onDragIn", [f.idd || f.id, a.parentNode.idd, f.grid || f.treeNod, a.grid || a.parentNode.grid]) ? (this._setMove(a, c, d), e && "" != a.parentNode.expand ? (this._autoOpenTimer = window.setTimeout(new callerFunction(this._autoOpenItem, this), 1e3), this._autoOpenId = a.parentNode.idd) : this._autoOpenTimer && window.clearTimeout(this._autoOpenTimer), a) : this._setMove(a, c, d, !0)
    }, dhtmlXGridObject.prototype._autoOpenItem = function(a, b) {
        b.openItem(b._autoOpenId)
    }, dhtmlXGridObject.prototype._dragOut = function(a) {
        this._clearMove();
        var b = a.parentNode.parentObject ? a.parentObject.id : a.parentNode.idd;
        this.callEvent("onDragOut", [b]), this._autoOpenTimer && window.clearTimeout(this._autoOpenTimer)
    }, dhtmlXGridObject.prototype._setMove = function(a, b, c, d) {
        if (a.parentNode.idd) {
            var e = getAbsoluteTop(a),
                f = getAbsoluteTop(this.objBox);
            if (e - f > parseInt(this.objBox.offsetHeight) - 50 && (this.objBox.scrollTop = parseInt(this.objBox.scrollTop) + 20), e - f + parseInt(this.objBox.scrollTop) < parseInt(this.objBox.scrollTop) + 30 && (this.objBox.scrollTop = parseInt(this.objBox.scrollTop) - 20), d) return 0;
            if (2 == this.dadmode) {
                var g = c - e + (document.body.scrollTop || document.documentElement.scrollTop) - 2 - a.offsetHeight / 2;
                Math.abs(g) - a.offsetHeight / 6 > 0 ? (this.dadmodec = 1, this.dadmodefix = g < 0 ? -1 : 1) : this.dadmodec = 0
            } else this.dadmodec = this.dadmode;
            if (this.dadmodec) this._sdrgc || this._createSdrgc(), this._sdrgc.style.display = "block", this._sdrgc.style.top = e - f + parseInt(this.objBox.scrollTop) + (this.dadmodefix >= 0 ? a.offsetHeight : 0) + "px";
            else if (this._llSelD = a, "TR" == a.parentNode.tagName)
                for (var h = 0; h < a.parentNode.childNodes.length; h++) g = a.parentNode.childNodes[h], g._bgCol = g.style.backgroundColor, g.style.backgroundColor = "#FFCCCC"
        }
    }, dhtmlXGridObject.prototype._clearMove = function() {
        if (this._sdrgc && (this._sdrgc.style.display = "none"), this._llSelD && "TR" == this._llSelD.parentNode.tagName)
            for (var a = this._llSelD.parentNode.childNodes, b = 0; b < a.length; b++) a[b].style.backgroundColor = a[b]._bgCol;
        this._llSelD = null
    }, dhtmlXGridObject.prototype.rowToDragElement = function(a) {
        var b = this.cells(a, 0).getValue();
        return b
    }, dhtmlXGridObject.prototype._copyUserData = function(a) {
        if (!a.tobj.UserData[a.nid] || a.tobj != a.sobj) {
            a.tobj.UserData[a.nid] = new Hashtable;
            var b = a.sobj.UserData[a.sid],
                c = a.tobj.UserData[a.nid];
            b && (c.keys = c.keys.concat(b.keys), c.values = c.values.concat(b.values))
        }
    }, dhtmlXGridObject.prototype.moveRow = function(a, b, c, d) {
        switch (b) {
            case "row_sibling":
                this.moveRowTo(a, c, "move", "sibling", this, d);
                break;
            case "up":
                this.moveRowUp(a);
                break;
            case "down":
                this.moveRowDown(a)
        }
    }, dhtmlXGridObject.prototype._nonTrivialNode = function(a, b, c, d, e) {
        if (a.callEvent && !e && !a.callEvent("onDrag", [d.idd, b.id, c ? c.id : null, this, a])) return !1;
        for (var f = d.idd, g = f; a._idpull[g];) g += (new Date).getMilliseconds().toString();
        var h = this.isTreeGrid() ? this.getItemImage(f) : "";
        if (c) {
            for (k = 0; k < b.childsCount && b.childNodes[k] != c; k++);
            0 != k ? c = b.childNodes[k - 1] : (st = "TOP", c = "")
        }
        var i = a._attachChildNode(b, g, this.gridToTreeElement(a, g, f), "", h, h, h, "", "", c);
        if (this._h2) {
            var j = this._h2.get[f];
            if (j.childs.length)
                for (var k = 0; k < j.childs.length; k++) this._nonTrivialNode(a, i, 0, this.rowsAr[j.childs[k].id], 1), this.dpcpy || k--
        }
        this.dpcpy || this.deleteRow(f), a.callEvent && !e && a.callEvent("onDrop", [g, b.id, c ? c.id : null, this, a])
    }, dhtmlXGridObject.prototype.gridToTreeElement = function(a, b, c) {
        return this.cells(c, 0).getValue()
    }, dhtmlXGridObject.prototype.treeToGridElement = function(a, b) {
        var c = [],
            d = this.cellType._dhx_find("tree");
        d == -1 && (d = 0);
        for (var e = 0; e < this.getColumnCount(); e++) c[c.length] = e != d ? a.getUserData(b, this.getColumnId(e)) || "" : a.getItemText(b);
        return c
    }, dhtmlXGridObject.prototype.moveRowTo = function(a, b, c, d, e, f) {
        var g = new dragContext((e || this).isTreeGrid() ? "treeGrid" : "grid", (f || this).isTreeGrid() ? "treeGrid" : "grid", c, d || "sibling", a, b, e || this, f || this);
        return g.tobj._dragRoutine(g), g.close(), g.nid
    }, dhtmlXGridObject.prototype.enableMercyDrag = function(a) {
        this.dpcpy = convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype._process_xmlA = function(a) {
        if (!a.doXPath) {
            var b = new dtmlXMLLoaderObject(function() {});
            "string" == typeof a ? b.loadXMLString(a) : (b.xmlDoc = a.responseXML ? a : {}, b.xmlDoc.responseXML = a), a = b
        }
        this._parsing = !0;
        var c = a.getXMLTopNode(this.xml.top);
        this._parseHead(c);
        var d = a.doXPath(this.xml.row, c),
            e = parseInt(a.doXPath("//" + this.xml.top)[0].getAttribute("pos") || 0),
            f = parseInt(a.doXPath("//" + this.xml.top)[0].getAttribute("total_count") || 0);
        if (f && !this.rowsBuffer[f - 1] && (this.rowsBuffer[f - 1] = null), this.isTreeGrid()) return this._get_xml_data = this._get_xml_dataA, this._process_xml_row = this._process_xml_rowA, this._process_tree_xml(a);
        for (var g = 0; g < d.length; g++)
            if (!this.rowsBuffer[g + e]) {
                var h = d[g].getAttribute("id") || this.uid();
                this.rowsBuffer[g + e] = {
                    idd: h,
                    data: d[g],
                    _parser: this._process_xml_rowA,
                    _locator: this._get_xml_dataA
                }, this.rowsAr[h] = d[g]
            }
        return this.render_dataset(), this._parsing = !1, a.xmlDoc.responseXML ? a.xmlDoc.responseXML : a.xmlDoc
    }, dhtmlXGridObject.prototype._process_xmlB = function(a) {
        if (!a.doXPath) {
            var b = new dtmlXMLLoaderObject(function() {});
            "string" == typeof a ? b.loadXMLString(a) : (b.xmlDoc = a.responseXML ? a : {}, b.xmlDoc.responseXML = a), a = b
        }
        this._parsing = !0;
        var c = a.getXMLTopNode(this.xml.top);
        this._parseHead(c);
        var d = a.doXPath(this.xml.row, c),
            e = parseInt(a.doXPath("//" + this.xml.top)[0].getAttribute("pos") || 0),
            f = parseInt(a.doXPath("//" + this.xml.top)[0].getAttribute("total_count") || 0);
        if (f && !this.rowsBuffer[f - 1] && (this.rowsBuffer[f - 1] = null), this.isTreeGrid()) return this._get_xml_data = this._get_xml_dataB, this._process_xml_row = this._process_xml_rowB, this._process_tree_xml(a);
        for (var g = 0; g < d.length; g++)
            if (!this.rowsBuffer[g + e]) {
                var h = d[g].getAttribute("id") || this.uid();
                this.rowsBuffer[g + e] = {
                    idd: h,
                    data: d[g],
                    _parser: this._process_xml_rowB,
                    _locator: this._get_xml_dataB
                }, this.rowsAr[h] = d[g]
            }
        return this.render_dataset(), this._parsing = !1, a.xmlDoc.responseXML ? a.xmlDoc.responseXML : a.xmlDoc
    }, dhtmlXGridObject.prototype._process_xml_rowA = function(a, b) {
        var c = [];
        a._attrs = this._xml_attrs(b);
        for (var d = 0; d < this.columnIds.length; d++) {
            var e = this.columnIds[d],
                f = a._attrs[e] || "";
            a.childNodes[d] && (a.childNodes[d]._attrs = {}), c.push(f)
        }
        return this._fillRow(a, this._c_order ? this._swapColumns(c) : c), a
    }, dhtmlXGridObject.prototype._get_xml_dataA = function(a, b) {
        return a.getAttribute(this.getColumnId(b))
    }, dhtmlXGridObject.prototype._process_xml_rowB = function(a, b) {
        var c = [];
        if (a._attrs = this._xml_attrs(b), this._ud_enabled)
            for (var d = this.xmlLoader.doXPath("./userdata", b), e = d.length - 1; e >= 0; e--) this.setUserData(d[e].getAttribute("name"), d[e].firstChild ? d[e].firstChild.data : "");
        for (var f = 0; f < b.childNodes.length; f++) {
            var g = b.childNodes[f];
            if (g.tagName) {
                var h = this.getColIndexById(g.tagName);
                if (!isNaN(h)) {
                    var i = g.getAttribute("type");
                    i && (a.childNodes[h]._cellType = i), a.childNodes[h]._attrs = this._xml_attrs(g), g.getAttribute("xmlcontent") || (g = g.firstChild ? g.firstChild.data : ""), c[h] = g
                }
            }
        }
        for (e = 0; e < a.childNodes.length; e++) a.childNodes[e]._attrs || (a.childNodes[e]._attrs = {});
        return this._fillRow(a, this._c_order ? this._swapColumns(c) : c), a
    }, dhtmlXGridObject.prototype._get_xml_dataB = function(a, b) {
        for (var c = this.getColumnId(b), a = a.firstChild; a;) {
            if (a.tagName == c) return a.firstChild ? a.firstChild.data : "";
            a = a.nextSibling
        }
        return ""
    }, dhtmlXGridObject.prototype.attachHeaderA = dhtmlXGridObject.prototype.attachHeader, dhtmlXGridObject.prototype.attachHeader = function() {
        if (this.attachHeaderA.apply(this, arguments), this._realfake) return !0;
        this.formAutoSubmit(), "undefined" == typeof this.FormSubmitOnlyChanged && this.submitOnlyChanged(!0), "undefined" == typeof this._submitAR && this.submitAddedRows(!0);
        var a = this;
        this._added_rows = [], this._deleted_rows = [], this.attachEvent("onRowAdded", function(b) {
            return a._added_rows.push(b), a.forEachCell(b, function(a) {
                a.cell.wasChanged = !0
            }), !0
        }), this.attachEvent("onBeforeRowDeleted", function(b) {
            return a._deleted_rows.push(b), !0
        }), this.attachHeader = this.attachHeaderA
    }, dhtmlXGridObject.prototype.formAutoSubmit = function() {
        if (this.parentForm = this.detectParentFormPresent(), this.parentForm === !1) return !1;
        if (!this.formEventAttached) {
            this.formInputs = [];
            var a = this;
            dhtmlxEvent(this.parentForm, "submit", function() {
                a.entBox && a.parentFormOnSubmit()
            }), this.formEventAttached = !0
        }
    }, dhtmlXGridObject.prototype.parentFormOnSubmit = function() {
        if (this.formCreateInputCollection(), !this.callEvent("onBeforeFormSubmit", [])) return !1
    }, dhtmlXGridObject.prototype.submitOnlyChanged = function(a) {
        this.FormSubmitOnlyChanged = convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype.submitColumns = function(a) {
        "string" == typeof a && (a = a.split(this.delim)), this._submit_cols = a
    }, dhtmlXGridObject.prototype.setFieldName = function(a) {
        a = a.replace(/\{GRID_ID\}/g, "'+a1+'"), a = a.replace(/\{ROW_ID\}/g, "'+a2+'"), a = a.replace(/\{ROW_INDEX\}/g, "'+this.getRowIndex(a2)+'"), a = a.replace(/\{COLUMN_INDEX\}/g, "'+a3+'"), a = a.replace(/\{COLUMN_ID\}/g, "'+this.getColumnId(a3)+'"), this._input_mask = Function("a1", "a2", "a3", "return '" + a + "';")
    }, dhtmlXGridObject.prototype.submitSerialization = function(a) {
        this.FormSubmitSerialization = convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype.submitAddedRows = function(a) {
        this._submitAR = convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype.submitOnlySelected = function(a) {
        this.FormSubmitOnlySelected = convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype.submitOnlyRowID = function(a) {
        this.FormSubmitOnlyRowID = convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype.createFormInput = function(a, b) {
        var c = document.createElement("input");
        c.type = "hidden", c.name = this._input_mask && "string" != typeof a ? this._input_mask.apply(this, a) : ((this.globalBox || this.entBox).id || "dhtmlXGrid") + "_" + a, c.value = b, this.parentForm.appendChild(c), this.formInputs.push(c)
    }, dhtmlXGridObject.prototype.createFormInputRow = function(a) {
        for (var b = (this.globalBox || this.entBox).id, c = 0; c < this._cCount; c++) {
            var d = this.cells3(a, c);
            this.FormSubmitOnlyChanged && !d.wasChanged() || this._submit_cols && !this._submit_cols[c] || this.createFormInput(this._input_mask ? [b, a.idd, c] : a.idd + "_" + c, d.getValue())
        }
    }, dhtmlXGridObject.prototype.formCreateInputCollection = function() {
        if (0 == this.parentForm) return !1;
        for (var a = 0; a < this.formInputs.length; a++) this.parentForm.removeChild(this.formInputs[a]);
        if (this.formInputs = [], this.FormSubmitSerialization) this.createFormInput("serialized", this.serialize());
        else if (this.FormSubmitOnlySelected)
            if (this.FormSubmitOnlyRowID) this.createFormInput("selected", this.getSelectedId());
            else
                for (a = 0; a < this.selectedRows.length; a++) this.createFormInputRow(this.selectedRows[a]);
        else this._submitAR && (this._added_rows.length && this.createFormInput("rowsadded", this._added_rows.join(",")), this._deleted_rows.length && this.createFormInput("rowsdeleted", this._deleted_rows.join(","))), this.forEachRow(function(a) {
            this.getRowById(a), this.createFormInputRow(this.rowsAr[a])
        })
    }, dhtmlXGridObject.prototype.detectParentFormPresent = function() {
        for (var a = !1, b = this.entBox; b && b.tagName && b != document.body;) {
            if ("form" == b.tagName.toLowerCase()) {
                a = b;
                break
            }
            b = b.parentNode
        }
        return a
    }, dhtmlXGridObject.prototype.enableHeaderMenu = function(a) {
        "string" == typeof a && (a = a.split(",")), this._hm_config = a;
        var b = this;
        this.attachEvent("onInit", function() {
            this.hdr.oncontextmenu = function(a) {
                return b._doHContClick(a || window.event)
            }, this.startColResizeA = this.startColResize, this.startColResize = function(a) {
                return 2 == a.button || _isMacOS && a.ctrlKey ? this._doHContClick(a) : this.startColResizeA(a)
            }, this._chm_ooc = this.obj.onclick, this._chm_hoc = this.hdr.onclick, this.hdr.onclick = function(a) {
                return (!a || !(2 == a.button || _isMacOS && a.ctrlKey)) && (b._showHContext(!1), b._chm_hoc.apply(this, arguments))
            }, this.obj.onclick = function() {
                return b._showHContext(!1), b._chm_ooc.apply(this, arguments)
            }
        }), dhtmlxEvent(document.body, "click", function() {
            b._hContext && b._showHContext(!1)
        }), this.hdr.rows.length && this.callEvent("onInit", []), this.enableHeaderMenu = function() {}
    }, dhtmlXGridObject.prototype._doHContClick = function(a) {
        function b(a) {
            if (a.pageX || a.pageY) return {
                x: a.pageX,
                y: a.pageY
            };
            var b = _isIE && "BackCompat" != document.compatMode ? document.documentElement : document.body;
            return {
                x: a.clientX + b.scrollLeft - b.clientLeft,
                y: a.clientY + b.scrollTop - b.clientTop
            }
        }
        this._createHContext();
        var c = b(a);
        return this._showHContext(!0, c.x, c.y), a[_isIE ? "srcElement" : "target"].oncontextmenu = function(a) {
            return (a || event).cancelBubble = !0, !1
        }, a.cancelBubble = !0, a.preventDefault && a.preventDefault(), !1
    }, dhtmlXGridObject.prototype._createHContext = function() {
        if (this._hContext) return this._hContext;
        var a = document.createElement("DIV");
        a.oncontextmenu = function(a) {
            return (a || event).cancelBubble = !0, !1
        }, a.onclick = function(a) {
            return (a || event).cancelBubble = !0
        }, a.className = "dhx_header_cmenu", a.style.width = a.style.height = "5px", a.style.display = "none";
        var b = [],
            c = 0;
        this._fake && (c = this._fake._cCount);
        for (var d = c; c < this.hdr.rows[1].cells.length; c++) {
            var e = this.hdr.rows[1].cells[c];
            if (!this._hm_config || this._hm_config[c] && "false" != this._hm_config[c]) {
                var f = e.firstChild && "DIV" == e.firstChild.tagName ? e.firstChild.innerHTML : e.innerHTML,
                    f = f.replace(/<[^>]*>/gi, "");
                b.push("<div class='dhx_header_cmenu_item'><input type='checkbox' column='" + d + "' len='" + (e.colSpan || 1) + "' checked='true' />" + f + "</div>")
            }
            d += e.colSpan || 1
        }
        a.innerHTML = b.join("");
        for (var g = this, h = function() {
                var a = this.getAttribute("column");
                if (!this.checked && !g._checkLast(a)) return this.checked = !0;
                g._realfake && (g = g._fake);
                for (var b = 0; b < this.getAttribute("len"); b++) g.setColumnHidden(1 * a + 1 * b, !this.checked);
                this.checked && 0 == g.getColWidth(a) && g.adjustColumnSize(a)
            }, c = 0; c < a.childNodes.length; c++) a.childNodes[c].firstChild.onclick = h;
        document.body.insertBefore(a, document.body.firstChild), this._hContext = a, a.style.position = "absolute", a.style.zIndex = 999, a.style.width = "auto", a.style.height = "auto", a.style.display = "block"
    }, dhtmlXGridObject.prototype._checkLast = function(a) {
        for (var b = 0; b < this._cCount; b++)
            if (!(this._hrrar && this._hrrar[b] || b == a)) return !0;
        return !1
    }, dhtmlXGridObject.prototype._updateHContext = function() {
        for (var a = 0; a < this._hContext.childNodes.length; a++) {
            var b = this._hContext.childNodes[a].firstChild,
                c = b.getAttribute("column");
            (this.isColumnHidden(c) || 0 == this.getColWidth(c)) && (b.checked = !1)
        }
    }, dhtmlXGridObject.prototype._showHContext = function(a, b, c) {
        a && this.enableColumnMove && (this._hContext.parentNode.removeChild(this._hContext), this._hContext = null), this._createHContext(), this._hContext.style.display = a ? "block" : "none", a && (this._updateHContext(!0), this._hContext.style.left = b + "px", this._hContext.style.top = c + "px")
    }, eXcell_math.prototype = new eXcell, dhtmlXGridObject.prototype._init_point_bm = dhtmlXGridObject.prototype._init_point, dhtmlXGridObject.prototype._init_point = function() {
        this._mat_links = {}, this._aggregators = [], this.attachEvent("onClearAll", function() {
            this._mat_links = {}, this._aggregators = []
        }), this.attachEvent("onCellChanged", function(a, b) {
            if (this._mat_links[a]) {
                var c = this._mat_links[a][b];
                if (c)
                    for (var d = 0; d < c.length; d++) c[d].parentNode && this.cells5(c[d]).setValue(this._calcSCL(c[d]))
            }
            if (!this._parsing && this._aggregators[b]) {
                var e = this._h2.get[a].parent.id;
                if (0 != e) {
                    var f = this.cells(e, b);
                    f.setValue(this._calcSCL(f.cell))
                }
            }
        }), this.attachEvent("onAfterRowDeleted", function(a, b) {
            if (0 != b && !this._parsing && this._aggregators.length)
                for (var c = 0; c < this._aggregators.length; c++)
                    if (this._aggregators[c]) {
                        var d = this.cells(b, c);
                        d.setValue(this._calcSCL(d.cell))
                    }
            return !0
        }), this.attachEvent("onXLE", function() {
            for (var a = 0; a < this._aggregators.length; a++) this._aggregators[a] && this._h2.forEachChild(0, function(b) {
                if (0 != b.childs.length) {
                    var c = this.cells(b.id, a);
                    c.setValue(this._calcSCL(c.cell))
                }
            }, this)
        }), (this._init_point = this._init_point_bm) && this._init_point()
    }, dhtmlXGridObject.prototype.enableMathSerialization = function(a) {
        this._mathSerialization = convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype.setMathRound = function(a) {
        this._roundDl = a, this._roundD = Math.pow(10, a)
    }, dhtmlXGridObject.prototype.enableMathEditing = function(a) {
        this._mathEdit = convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype._calcSCL = function(a) {
        if (!a._code) return this.cells5(a).getValue();
        try {
            dhtmlx.agrid = this;
            var b = eval(a._code)
        } catch (a) {
            return "#SCL"
        }
        if (this._roundD) {
            var d = Math.abs(b) < 1 ? "0" : "";
            if (b < 0 && (d = "-" + d), b = Math.round(Math.abs(b) * this._roundD).toString(), 0 == b) return 0;
            if (this._roundDl > 0) {
                var e = b.length - this._roundDl;
                return e < 0 && (b = ("000000000" + b).substring(9 + e), e = 0), d + b.substring(0, e) + "." + b.substring(e, b.length)
            }
            return d + b
        }
        return b
    }, dhtmlXGridObject.prototype._countTotal = function(a, b) {
        for (var c = 0, d = this._h2.get[a], e = 0; e < d.childs.length && d.childs[e].buff; e++) {
            if (d.childs[e].buff._parser) {
                this._h2.forEachChild(a, function(a) {
                    0 == a.childs.length && (c += parseFloat(this._get_cell_value(a.buff, b), 10))
                }, this);
                break
            }
            c += parseFloat(this._get_cell_value(d.childs[e].buff, b), 10)
        }
        return c
    }, dhtmlXGridObject.prototype._compileSCL = function(a, b, c) {
        if (null === a || a === window.undefined) return a;
        if (a = a.toString(), 0 != a.indexOf("=")) return this._reLink([], b), c && (b._code = b.original = null), a;
        b.original = a;
        var d = null,
            a = a.replace("=", "");
        if (a.indexOf("sum") != -1) return a = a.replace("sum", "(dhtmlx.agrid._countTotal('" + b.parentNode.idd + "'," + b._cellIndex + "))"), this._aggregators || (this._aggregators = []), this._aggregators[b._cellIndex] = "sum", b._code = a, this._parsing ? "" : this._calcSCL(b);
        if (a.indexOf("[[") != -1) {
            var e = /(\[\[([^\,]*)\,([^\]]*)]\])/g;
            dhtmlx.agrid = this, d = d || [], a = a.replace(e, function(a, c, e, f) {
                return "-" == e && (e = b.parentNode.idd), 0 == e.indexOf("#") && (e = dhtmlx.agrid.getRowId(e.replace("#", ""))), d[d.length] = [e, f], '(parseFloat(dhtmlx.agrid.cells("' + e + '",' + f + ").getValue(),10))"
            })
        }
        if (a.indexOf(":") != -1) {
            e = /:(\w+)/g, dhtmlx.agrid = this;
            var f = b.parentNode.idd,
                d = d || [],
                a = a.replace(e, function(a, b) {
                    return d[d.length] = [f, dhtmlx.agrid.getColIndexById(b)], '(parseFloat(dhtmlx.agrid.cells("' + f + '",dhtmlx.agrid.getColIndexById("' + b + '")).getValue(),10))'
                })
        } else e = /c([0-9]+)/g, dhtmlx.agrid = this, f = b.parentNode.idd, d = d || [], a = a.replace(e, function(a, b) {
            return d[d.length] = [f, b], '(parseFloat(dhtmlx.agrid.cells("' + f + '",' + b + ").getValue(),10))"
        });
        return this._reLink(d, b), b._code = a, this._calcSCL(b)
    }, dhtmlXGridObject.prototype._reLink = function(a, b) {
        if (a.length)
            for (var c = 0; c < a.length; c++) {
                this._mat_links[a[c][0]] || (this._mat_links[a[c][0]] = {});
                var d = this._mat_links[a[c][0]];
                d[a[c][1]] || (d[a[c][1]] = []), d[a[c][1]].push(b)
            }
    }, _isKHTML && function() {
        var a = String.prototype.replace;
        String.prototype.replace = function(b, c) {
            if ("function" != typeof c) return a.apply(this, arguments);
            var d = "" + this,
                e = c;
            if (!(b instanceof RegExp)) {
                var f = d.indexOf(b);
                return f == -1 ? d : a.apply(d, [b, e(b, f, d)])
            }
            for (var g, h = b, i = [], j = h.lastIndex; null != (g = h.exec(d));) {
                var f = g.index,
                    k = g.concat(f, d);
                if (i.push(d.slice(j, f), e.apply(null, k).toString()), !h.global) {
                    j += RegExp.lastMatch.length;
                    break
                }
                j = h.lastIndex
            }
            return i.push(d.slice(j)), i.join("")
        }
    }(), dhtmlXGridObject.prototype.insertColumn = function(a, b, c, d, e, f, g, h, i) {
        if (a = parseInt(a), a > this._cCount && (a = this._cCount), this._cMod || (this._cMod = this._cCount), this._processAllArrays(this._cCount, a - 1, [b || "&nbsp;", d || 100, c || "ed", f || "left", g || "", e || "na", i || "", "", this._cMod, d || 100]), this._processAllRows("_addColInRow", a), "object" == typeof b)
            for (var j = 1; j < this.hdr.rows.length; j++)
                if ("#rspan" == b[j - 1]) {
                    for (var k = j - 1, l = !1, m = null; !l;) {
                        for (var m = this.hdr.rows[k], n = 0; n < m.cells.length; n++)
                            if (m.cells[n]._cellIndex == a) {
                                l = n;
                                break
                            }
                        k--
                    }
                    this.hdr.rows[k + 1].cells[n].rowSpan = (this.hdr.rows[k].cells[n].rowSpan || 1) + 1
                } else this.setHeaderCol(a, b[j - 1] || "&nbsp;", j);
        else this.setHeaderCol(a, b || "&nbsp;");
        this._cCount++, this._cMod++, this._master_row = null, this.setSizes()
    }, dhtmlXGridObject.prototype.deleteColumn = function(a) {
        a = parseInt(a), 0 != this._cCount && (this._cMod || (this._cMod = this._cCount), a >= this._cCount || (this._processAllArrays(a, this._cCount - 1, [null, null, null, null, null, null, null, null, null, null, null]), this._processAllRows("_deleteColInRow", a), this._cCount--, this._master_row = null, this.setSizes()))
    }, dhtmlXGridObject.prototype._processAllRows = function(a, b, c) {
        this[a](this.obj.rows[0], b, c, 0);
        for (var d = this.hdr.rows.length, e = 0; e < d; e++) this[a](this.hdr.rows[e], b, c, e);
        if (this.ftr)
            for (d = this.ftr.firstChild.rows.length, e = 0; e < d; e++) this[a](this.ftr.firstChild.rows[e], b, c, e);
        this.forEachRow(function(d) {
            this.rowsAr[d] && "TR" == this.rowsAr[d].tagName && this[a](this.rowsAr[d], b, c, -1)
        })
    }, dhtmlXGridObject.prototype._processAllArrays = function(a, b, c) {
        var d = "hdrLabels,initCellWidth,cellType,cellAlign,cellVAlign,fldSort,columnColor,_hrrar,_c_order".split(",");
        this.cellWidthPX.length && d.push("cellWidthPX"), this.cellWidthPC.length && d.push("cellWidthPC"), this._col_combos && d.push("_col_combos"), this._mCols && (d[d.length] = "_mCols"), this.columnIds && (d[d.length] = "columnIds"), this._maskArr && d.push("_maskArr"), this._drsclmW && d.push("_drsclmW"), this._RaSeCol && d.push("_RaSeCol"), this.clists && d.push("clists"), this._validators && this._validators.data && d.push(this._validators.data), d.push("combos"), this._customSorts && d.push("_customSorts"), this._aggregators && d.push("_aggregators");
        var e = a <= b;
        if (!this._c_order) {
            this._c_order = [];
            for (var f = this._cCount, g = 0; g < f; g++) this._c_order[g] = g
        }
        for (g = 0; g < d.length; g++) {
            var h = this[d[g]] || d[g];
            if (h) {
                if (e) {
                    for (var i = h[a], j = a; j < b; j++) h[j] = h[j + 1];
                    h[b] = i
                } else {
                    for (i = h[a], j = a; j > b + 1; j--) h[j] = h[j - 1];
                    h[b + 1] = i
                }
                c && (h[b + (e ? 0 : 1)] = c[g])
            }
        }
    }, dhtmlXGridObject.prototype.moveColumn = function(a, b) {
        b--;
        var a = parseInt(a),
            b = parseInt(b),
            c = b < a ? b + 1 : b;
        return !!this.callEvent("onBeforeCMove", [a, c]) && void(a != c && (this.editStop(), this._processAllRows("_moveColInRow", a, b), this._processAllArrays(a, b), this.fldSorted && this.setSortImgPos(this.fldSorted._cellIndex), this.callEvent("onAfterCMove", [a, c])))
    }, dhtmlXGridObject.prototype._swapColumns = function(a) {
        for (var b = [], c = 0; c < this._cCount; c++) {
            var d = a[this._c_order[c]];
            "undefined" == typeof d && (d = ""), b[c] = d
        }
        return b
    }, dhtmlXGridObject.prototype._moveColInRow = function(a, b, c) {
        var d = a.childNodes[b],
            e = a.childNodes[c + 1];
        if (d) {
            e ? a.insertBefore(d, e) : a.appendChild(d);
            for (var f = 0; f < a.childNodes.length; f++) a.childNodes[f]._cellIndex = a.childNodes[f]._cellIndexS = f
        }
    }, dhtmlXGridObject.prototype._addColInRow = function(a, b, c, d) {
        var e = b;
        if (a._childIndexes) {
            if (a._childIndexes[b - 1] != a._childIndexes[b] && a.childNodes[a._childIndexes[b - 1]])
                for (f = a._childIndexes.length; f >= b; f--) a._childIndexes[f] = f ? a._childIndexes[f - 1] + 1 : 0;
            else {
                for (var f = a._childIndexes.length; f >= b; f--) a._childIndexes[f] = f ? a._childIndexes[f - 1] + 1 : 0;
                a._childIndexes[b]--
            }
            e = a._childIndexes[b]
        }
        var g = a.childNodes[e],
            h = document.createElement(d ? "TD" : "TH");
        for (d ? h._attrs = {} : h.style.width = (parseInt(this.cellWidthPX[b]) || "100") + "px", g ? a.insertBefore(h, g) : a.appendChild(h), this.dragAndDropOff && a.idd && this.dragger.addDraggableItem(a.childNodes[e], this), f = e + 1; f < a.childNodes.length; f++) a.childNodes[f]._cellIndex = a.childNodes[f]._cellIndexS = a.childNodes[f]._cellIndex + 1;
        a.childNodes[e] && (a.childNodes[e]._cellIndex = a.childNodes[e]._cellIndexS = b), a.idd || "undefined" != typeof a.idd ? (this.cells3(a, b).setValue(""), h.align = this.cellAlign[b], h.style.verticalAlign = this.cellVAlign[b], h.bgColor = this.columnColor[b]) : "TD" == h.tagName && (h.innerHTML = !a.idd && this.forceDivInHeader ? "<div class='hdrcell'>&nbsp;</div>" : "&nbsp;")
    }, dhtmlXGridObject.prototype._deleteColInRow = function(a, b) {
        a._childIndexes && (b = a._childIndexes[b]);
        var c = a.childNodes[b];
        if (c) {
            if (c.colSpan && c.colSpan > 1 && c.parentNode.idd) {
                var d = c.colSpan - 1,
                    e = this.cells4(c).getValue();
                if (this.setColspan(c.parentNode.idd, c._cellIndex, 1), d > 1) {
                    var f = 1 * c._cellIndex;
                    this.setColspan(c.parentNode.idd, f + 1, d), this.cells(c.parentNode.idd, 1 * c._cellIndex + 1).setValue(e), a._childIndexes.splice(f, 1);
                    for (var g = f; g < a._childIndexes.length; g++) a._childIndexes[g] -= 1
                }
            } else if (a._childIndexes)
                for (a._childIndexes.splice(b, 1), g = b; g < a._childIndexes.length; g++) a._childIndexes[g]--;
            for (c && a.removeChild(c), g = b; g < a.childNodes.length; g++) a.childNodes[g]._cellIndex = a.childNodes[g]._cellIndexS = a.childNodes[g]._cellIndex - 1
        }
    }, dhtmlXGridObject.prototype.enableColumnMove = function(a, b) {
        this._mCol = convertStringToBoolean(a), "undefined" != typeof b && (this._mCols = b.split(",")), this._mmevTrue || (dhtmlxEvent(this.hdr, "mousedown", this._startColumnMove), dhtmlxEvent(document.body, "mousemove", this._onColumnMove), dhtmlxEvent(document.body, "mouseup", this._stopColumnMove), this._mmevTrue = !0)
    }, dhtmlXGridObject.prototype._startColumnMove = function(a) {
        for (var a = a || event, b = a.target || a.srcElement, c = b;
            "TABLE" != c.tagName;) c = c.parentNode;
        var d = c.grid;
        if (d && (d.setActive(), d._mCol && 2 != a.button)) return b = d.getFirstParentOfType(b, "TD"), "default" != b.style.cursor || (!d || d._colInMove || (d.resized = null, d._mCols && "true" != d._mCols[b._cellIndex]) || (d._colInMove = b._cellIndex + 1), !0)
    }, dhtmlXGridObject.prototype._onColumnMove = function(a) {
        var a = a || event,
            b = window.globalActiveDHTMLGridObject;
        if (b && b._colInMove) {
            if (b._showHContext && b._showHContext(!1), "object" != typeof b._colInMove) {
                var c = document.createElement("DIV");
                c._aIndex = b._colInMove - 1, c._bIndex = null, c.innerHTML = b.getHeaderCol(c._aIndex), c.className = "dhx_dragColDiv", c.style.position = "absolute", document.body.appendChild(c), b._colInMove = c
            }
            var d = [];
            d[0] = document.body.scrollLeft || document.documentElement.scrollLeft, d[1] = document.body.scrollTop || document.documentElement.scrollTop, b._colInMove.style.left = a.clientX + d[0] + 8 + "px", b._colInMove.style.top = a.clientY + d[1] + 8 + "px";
            for (var e = a.target || a.srcElement; e && "undefined" == typeof e._cellIndexS;) e = e.parentNode;
            if (b._colInMove._oldHe && (b._colInMove._oldHe.className = b._colInMove._oldHe.className.replace(/columnTarget(L|R)/g, ""), b._colInMove._oldHe = null, b._colInMove._bIndex = null), e) {
                var f = b.hdr.rows[1]._childIndexes ? b.hdr.rows[1].cells[b.hdr.rows[1]._childIndexes[e._cellIndexS]] : b.hdr.rows[1].cells[e._cellIndexS],
                    c = a.clientX - (getAbsoluteLeft(f) - b.hdrBox.scrollLeft);
                c / f.offsetWidth > .5 ? (f.className += " columnTargetR", b._colInMove._bIndex = e._cellIndexS) : (f.className += " columnTargetL", b._colInMove._bIndex = e._cellIndexS - 1), f.offsetLeft < b.objBox.scrollLeft + 20 && (b.objBox.scrollLeft = Math.max(0, f.offsetLeft - 20)), f.offsetLeft + f.offsetWidth - b.objBox.scrollLeft > b.objBox.offsetWidth - 20 && (b.objBox.scrollLeft = Math.min(b.objBox.scrollLeft + f.offsetWidth + 20, b.objBox.scrollWidth - b.objBox.offsetWidth)), b._colInMove._oldHe = f
            }
            return a.cancelBubble = !0, !1
        }
        return !0
    }, dhtmlXGridObject.prototype._stopColumnMove = function(a) {
        var a = a || event,
            b = window.globalActiveDHTMLGridObject;
        return b && b._colInMove && ("object" == typeof b._colInMove && (b._colInMove.parentNode.removeChild(b._colInMove), null != b._colInMove._bIndex && b.moveColumn(b._colInMove._aIndex, b._colInMove._bIndex + 1), b._colInMove._oldHe && (b._colInMove._oldHe.className = b._colInMove._oldHe.className.replace(/columnTarget(L|R)/g, "")), b._colInMove._oldHe = null, b._colInMove.grid = null, b.resized = !0), b._colInMove = 0), !0
    };
dhtmlXGridObject.prototype.loadCSVFile = function(a, b) {
    this.load(a, b, "csv")
};
dhtmlXGridObject.prototype.enableCSVAutoID = function(a) {
        this._csvAID = convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype.enableCSVHeader = function(a) {
        this._csvHdr = convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype.setCSVDelimiter = function(a) {
        this.csv.cell = a
    }, dhtmlXGridObject.prototype._csvAID = !0, dhtmlXGridObject.prototype.loadCSVString = function(a) {
        this.parse(a, "csv")
    }, dhtmlXGridObject.prototype.serializeToJsonMMS = function(a) {

		if(!this.getRowsNum()) {
			return [];
		}

        // loop nas colunas da grid para pegar os IDs / return array
        arrayKey = [];
        var totalColumns = this.getColumnsNum();

        for (i = 0; i < totalColumns; i++) {
            arrayKey.push(this.getColumnId(i));
        }

        // SerializeToCSV para pegar os dados da grid / return array
        dataGrid = this.serializeToCSV();
        arrayData = dhx.csvToArray(dataGrid);

        for (i in arrayData) {
            // combinar: valor do array com os IDs (chave) com as linhas da grid serializado (value) / return json
            arrayData[i] = dhx.arrayCombineJson(arrayKey, arrayData[i]);
        }

        return arrayData;

    }, dhtmlXGridObject.prototype.serializeToJsonStrMMS = function(a) {
        return JSON.stringify(this.serializeToJsonMMS(a));

    }, dhtmlXGridObject.prototype.serializeToCSV = function(a) {
        this.editStop(), this._agetm = this._mathSerialization ? "getMathValue" : this._strictText || a ? "getTitle" : "getValue";
        var b = [];
        if (this._csvHdr)
            for (var c = 1; c < this.hdr.rows.length; c++) {
                for (var d = [], e = 0; e < this._cCount; e++)(!this._srClmn || this._srClmn[e]) && d.push(this.getColumnLabel(e, c - 1));
                b.push(this.csvParser.str(d, this.csv.cell, this.csv.row))
            }
        for (var e = 0, f = this.rowsBuffer.length; e < f; e++) {
            var g = this._serializeRowToCVS(null, e);
            "" != g && b.push(g)
        }
        return this.csvParser.block(b, this.csv.row)
    }, dhtmlXGridObject.prototype._serializeRowToCVS = function(a, b, c, d) {
        var e = [];
        a || (a = this.render_row(b), this._fake && !this._fake.rowsAr[a.idd] && this._fake.render_row(b)), this._csvAID || (e[e.length] = a.idd);
        for (var c = c || 0, d = d || this._cCount, f = !1, g = c; a.childNodes[c]._cellIndex > g && c;) c--;
        for (var h = c; g < d && a.childNodes[h]; h++) {
            var i = a.childNodes[h]._cellIndex;
            if (this._srClmn && !this._srClmn[i] || this._serialize_visible && this._hrrar[i]) g++;
            else {
                for (var j = a.childNodes[h], k = this.cells(a.idd, i); g != i && (g++, e.push(""), !(g >= d)););
                if (g >= d) break;
                if (g++, zxVal = k.cell ? k[this._agetm]() : "", this._chAttr && k.wasChanged() && (f = !0), e[e.length] = null === zxVal ? "" : zxVal, this._ecspn && j.colSpan && j.colSpan > 1)
                    for (var j = j.colSpan - 1, l = 0; l < j; l++) e[e.length] = "", g++
            }
        }
        return this._onlChAttr && !f ? "" : this.csvParser.str(e, this.csv.cell, this.csv.row)
    }, dhtmlXGridObject.prototype.toClipBoard = function(a) {
        window.clipboardData ? window.clipboardData.setData("Text", a) : (new Clipboard).copy(a)
    }, dhtmlXGridObject.prototype.fromClipBoard = function() {
        return window.clipboardData ? window.clipboardData.getData("Text") : (new Clipboard).paste()
    }, dhtmlXGridObject.prototype.cellToClipboard = function(a, b) {
        if (!a || !b) {
            if (!this.selectedRows[0]) return;
            a = this.selectedRows[0].idd, b = this.cell._cellIndex
        }
        var c = this.cells(a, b);
        this.toClipBoard(((c.getLabel ? c.getLabel() : c.getValue()) || "").toString())
    }, dhtmlXGridObject.prototype.updateCellFromClipboard = function(a, b) {
        if (!a || !b) {
            if (!this.selectedRows[0]) return;
            a = this.selectedRows[0].idd, b = this.cell._cellIndex
        }
        var c = this.cells(a, b);
        c[c.setImage ? "setLabel" : "setValue"](this.fromClipBoard())
    }, dhtmlXGridObject.prototype.rowToClipboard = function(a) {
        var b = "";
        if (this._agetm = this._mathSerialization ? "getMathValue" : this._strictText ? "getTitle" : "getValue", a) b = this._serializeRowToCVS(this.getRowById(a));
        else
            for (var c = [], d = 0; d < this.selectedRows.length; d++) c[c.length] = this._serializeRowToCVS(this.selectedRows[d]), b = this.csvParser.block(c, this.csv.row);
        this.toClipBoard(b)
    }, dhtmlXGridObject.prototype.updateRowFromClipboard = function(a) {
        var b = this.fromClipBoard();
        if (b) {
            var c = a ? this.getRowById(a) : this.selectedRows[0];
            if (c) {
                var d = this.csvParser,
                    b = d.unblock(b, this.csv.cell, this.csv.row)[0];
                this._csvAID || b.splice(0, 1);
                for (var e = 0; e < b.length; e++) {
                    var f = this.cells3(c, e);
                    f[f.setImage ? "setLabel" : "setValue"](b[e])
                }
            }
        }
    }, dhtmlXGridObject.prototype.csvParser = {
        block: function(a, b) {
            return a.join(b)
        },
        unblock: function(a, b, c) {
            for (var d = (a || "").split(c), e = 0; e < d.length; e++) d[e] = (d[e] || "").split(b);
            var f = d.length - 1;
            return 1 == d[f].length && "" == d[f][0] && d.splice(f, 1), d
        },
        str: function(a, b) {
            return a.join(b)
        }
    }, dhtmlXGridObject.prototype.csvExtParser = {
        _quote: RegExp('"', "g"),
        _quote_esc: RegExp('\\\\"', "g"),
        block: function(a, b) {
            return a.join(b)
        },
        unblock: function(a, b, c) {
            var d = [
                    []
                ],
                e = 0;
            if (!a) return d;
            for (var f = /^[ ]*"/, g = /"[ ]*$/, h = RegExp(".*" + c + ".*$"), i = a.split(b), j = 0; j < i.length; j++)
                if (i[j].match(f)) {
                    for (var k = i[j].replace(f, ""); !i[j].match(g);) j++, k += i[j];
                    d[e].push(k.replace(g, "").replace(this._quote_esc, '"'))
                } else if (i[j].match(h)) {
                var l = i[j].indexOf(c);
                d[e].push(i[j].substr(0, l)), e++, d[e] = [], i[j] = i[j].substr(l + 1), j--
            } else(i[j] || j != i.length - 1) && d[e].push(i[j]);
            var m = d.length - 1;
            return m > 0 && !d[m].length && d.splice(m, 1), d
        },
        str: function(a, b) {
            for (var c = 0; c < a.length; c++) a[c] = '"' + a[c].replace(this._quote, '\\"') + '"';
            return a.join(b)
        }
    }, dhtmlXGridObject.prototype.addRowFromClipboard = function() {
        var a = this.fromClipBoard();
        if (a)
            for (var b = this.csvParser.unblock(a, this.csv.cell, this.csv.row), c = 0; c < b.length; c++) b[c] && (a = b[c], a.length && (this._csvAID ? this.addRow(this.getRowsNum() + 2, a) : (this.rowsAr[a[0]] && (a[0] = this.uid()), this.addRow(a[0], a.slice(1)))))
    }, dhtmlXGridObject.prototype.gridToClipboard = function() {
        this.toClipBoard(this.serializeToCSV())
    }, dhtmlXGridObject.prototype.gridFromClipboard = function() {
        var a = this.fromClipBoard();
        a && this.loadCSVString(a)
    }, dhtmlXGridObject.prototype.getXLS = function(a) {
        if (!this.xslform) {
            this.xslform = document.createElement("FORM"), this.xslform.action = (a || "") + "xls.php", this.xslform.method = "post", this.xslform.target = _isIE ? "_blank" : "", document.body.appendChild(this.xslform);
            var b = document.createElement("INPUT");
            b.type = "hidden", b.name = "csv", this.xslform.appendChild(b);
            var c = document.createElement("INPUT");
            c.type = "hidden", c.name = "csv_header", this.xslform.appendChild(c)
        }
        var d = this.serializeToCSV();
        this.xslform.childNodes[0].value = d;
        for (var e = [], f = this._cCount, g = 0; g < f; g++) e.push(this.getHeaderCol(g));
        e = e.join(","), this.xslform.childNodes[1].value = e, this.xslform.submit()
    }, dhtmlXGridObject.prototype.printView = function(a, b) {
        var c = "<style>TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }\t\n  </style>",
            d = null;
        if (this._fake)
            for (var d = [].concat(this._hrrar), e = 0; e < this._fake._cCount; e++) this._hrrar[e] = null;
        c += "<base  href='" + document.location.href + "'></base>", this.parentGrid || (c += a || ""), c += '<table width="100%" border="2px" cellpadding="0" cellspacing="0">';
        var f = Math.max(this.rowsBuffer.length, this.rowsCol.length),
            g = this._cCount,
            h = this._printWidth();
        for (c += '<tr class="header_row_1">', e = 0; e < g; e++)
            if (!this._hrrar || !this._hrrar[e]) {
                for (var i = this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes ? this.hdr.rows[1]._childIndexes[parseInt(e)] : e], j = i.colSpan || 1, k = i.rowSpan || 1, l = 1; l < j; l++) h[e] += h[l];
                c += '<td rowspan="' + k + '" width="' + h[e] + '%" style="background-color:lightgrey;" colspan="' + j + '">' + this.getHeaderCol(e) + "</td>", e += j - 1
            }
        for (c += "</tr>", e = 2; e < this.hdr.rows.length; e++)
            if (_isIE) {
                c += "<tr style='background-color:lightgrey' class='header_row_" + e + "'>";
                for (var m = this.hdr.rows[e].childNodes, l = 0; l < m.length; l++) this._hrrar && this._hrrar[m[l]._cellIndex] || (c += m[l].outerHTML);
                c += "</tr>"
            } else c += "<tr class='header_row_" + e + "' style='background-color:lightgrey'>" + (this._fake ? this._fake.hdr.rows[e].innerHTML : "") + this.hdr.rows[e].innerHTML + "</tr>";
        for (e = 0; e < f; e++)
            if (c += "<tr>", this.rowsCol[e] && this.rowsCol[e]._cntr) c += this.rowsCol[e].innerHTML.replace(/<img[^>]*>/gi, "") + "</tr>";
            else if (!this.rowsCol[e] || "none" != this.rowsCol[e].style.display) {
            var n;
            if (this.rowsCol[e]) n = this.rowsCol[e].idd;
            else {
                if (!this.rowsBuffer[e]) continue;
                n = this.rowsBuffer[e].idd
            }
            for (l = 0; l < g; l++)
                if (!this._hrrar || !this._hrrar[l]) {
                    if (this.rowsAr[n] && "TR" == this.rowsAr[n].tagName) var o = this.cells(n, l),
                        p = o._setState ? "" : o.getContent ? o.getContent() : o.getImage || o.combo ? o.cell.innerHTML : o.getValue();
                    else p = this._get_cell_value(this.rowsBuffer[e], l);
                    var q = this.columnColor[l] ? "background-color:" + this.columnColor[l] + ";" : "",
                        r = this.cellAlign[l] ? "text-align:" + this.cellAlign[l] + ";" : "",
                        s = o.getAttribute("colspan");
                    c += '<td style="' + q + r + '" ' + (s ? 'colSpan="' + s + '"' : "") + ">" + ("" === p ? "&nbsp;" : p) + "</td>", s && (l += s - 1)
                }
            if (c += "</tr>", this.rowsCol[e] && this.rowsCol[e]._expanded) {
                var t = this.cells4(this.rowsCol[e]._expanded.ctrl);
                c += t.getSubGrid ? '<tr><td colspan="' + g + '">' + t.getSubGrid().printView() + "</td></tr>" : '<tr><td colspan="' + g + '">' + this.rowsCol[e]._expanded.innerHTML + "</td></tr>"
            }
        }
        if (this.ftr)
            for (e = 1; e < this.ftr.childNodes[0].rows.length; e++) c += "<tr style='background-color:lightgrey'>" + (this._fake ? this._fake.ftr.childNodes[0].rows[e].innerHTML : "") + this.ftr.childNodes[0].rows[e].innerHTML + "</tr>";
        if (c += "</table>", this.parentGrid) return c;
        c += b || "";
        var u = window.open("", "_blank");
        u.document.write(c), u.document.write("<script>window.onerror=function(){return true;}</script>"), u.document.close(), this._fake && (this._hrrar = d)
    }, dhtmlXGridObject.prototype._printWidth = function() {
        for (var a = [], b = 0, c = 0; c < this._cCount; c++) {
            var d = this.getColWidth(c);
            a.push(d), b += d
        }
        for (var e = [], f = 0, c = 0; c < a.length; c++) {
            var g = Math.floor(a[c] / b * 100);
            f += g, e.push(g)
        }
        return e[e.length - 1] += 100 - f, e
    }, dhtmlXGridObject.prototype.loadObject = function() {}, dhtmlXGridObject.prototype.loadJSONFile = function() {}, dhtmlXGridObject.prototype.serializeToObject = function() {}, dhtmlXGridObject.prototype.serializeToJSON = function() {}, window.clipboardData || (window.clipboardData = {
        _make: function() {
            var a = Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);
            if (!a) return null;
            var b = Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);
            if (!b) return null;
            b.addDataFlavor("text/unicode");
            var c = Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);
            return this._p = [a, b, c], !0
        },
        setData: function(a, b) {
            try {
                netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
            } catch (c) {
                return dhtmlxError.throwError("Clipboard", "Access to clipboard denied", [a, b]), ""
            }
            if (!this._make()) return !1;
            this._p[2].data = b, this._p[1].setTransferData("text/unicode", this._p[2], 2 * b.length);
            var c = Components.interfaces.nsIClipboard;
            this._p[0].setData(this._p[1], null, c.kGlobalClipboard)
        },
        getData: function(a) {
            try {
                netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
            } catch (b) {
                return dhtmlxError.throwError("Clipboard", "Access to clipboard denied", [a]), ""
            }
            if (!this._make()) return !1;
            this._p[0].getData(this._p[1], this._p[0].kGlobalClipboard);
            var b = {},
                c = {};
            try {
                this._p[1].getTransferData("text/unicode", c, b)
            } catch (a) {
                return ""
            }
            return c && (c = c.value.QueryInterface(Components.interfaces.nsISupportsString)), c ? c.data.substring(0, b.value / 2) : ""
        }
    }), dhtmlXGridObject.prototype.enableBlockSelection = function(a) {
        if ("undefined" == typeof this._bs_mode) {
            var b = this;
            this.obj.onmousedown = function(a) {
                return b._bs_mode && b._OnSelectionStart(a || event, this), !0
            }, this._CSVRowDelimiter = this.csv.row, this.attachEvent("onResize", function() {
                return b._HideSelection(), !0
            }), this.attachEvent("onGridReconstructed", function() {
                return b._HideSelection(), !0
            }), this.attachEvent("onFilterEnd", this._HideSelection)
        }
        return a === !1 ? (this._bs_mode = !1, this._HideSelection()) : void(this._bs_mode = !0)
    }, dhtmlXGridObject.prototype.forceLabelSelection = function(a) {
        this._strictText = convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype.disableBlockSelection = function() {
        this.obj.onmousedown = null
    }, dhtmlXGridObject.prototype._OnSelectionStart = function(a) {
        var b = this;
        if (2 != a.button) {
            var c = a.srcElement || a.target;
            if (this.editor) {
                if (c.tagName && ("INPUT" == c.tagName || "TEXTAREA" == c.tagName)) return;
                this.editStop()
            }
            b.setActive(!0);
            var d = this.getPosition(this.obj),
                e = a.clientX - d[0] + (document.body.scrollLeft || (document.documentElement ? document.documentElement.scrollLeft : 0)),
                f = a.clientY - d[1] + (document.body.scrollTop || (document.documentElement ? document.documentElement.scrollTop : 0));
            if (this._CreateSelection(e - 4, f - 4), c == this._selectionObj) this._HideSelection(), this._startSelectionCell = null;
            else {
                for (;
                    "td" != c.tagName.toLowerCase();) c = c.parentNode;
                this._startSelectionCell = c
            }
            if (this._startSelectionCell && !this.callEvent("onBeforeBlockSelected", [this._startSelectionCell.parentNode.idd, this._startSelectionCell._cellIndex])) return this._startSelectionCell = null;
            this.obj.onmousedown = null, this.obj[_isIE ? "onmouseleave" : "onmouseout"] = function() {
                b._blsTimer && window.clearTimeout(b._blsTimer)
            }, this.obj.onmmold = this.obj.onmousemove, this._init_pos = [e, f], this._selectionObj.onmousemove = this.obj.onmousemove = function(c) {
                c = c || a, c.returnValue = !1, b._OnSelectionMove(c)
            }, this._oldDMP = document.body.onmouseup, document.body.onmouseup = function(c) {
                return c = c || a, b._OnSelectionStop(c, this), !0
            }, this.callEvent("onBeforeBlockSelection", []), document.body.onselectstart = function() {
                return !1
            }
        }
    }, dhtmlXGridObject.prototype._getCellByPos = function(a, b) {
        this._fake && (a += this._fake.objBox.scrollHeight);
        for (var c = 0, d = 0; d < this.obj.rows.length; d++)
            if (b -= this.obj.rows[d].offsetHeight, b <= 0) {
                c = this.obj.rows[d];
                break
            }
        if (!c || !c.idd) return null;
        for (d = 0; d < this._cCount; d++)
            if (a -= this.getColWidth(d), a <= 0)
                for (;;) {
                    if (!c._childIndexes || c._childIndexes[d + 1] != c._childIndexes[d]) return this.cells(c.idd, d).cell;
                    c = c.previousSibling
                }
        return null
    }, dhtmlXGridObject.prototype._OnSelectionMove = function(a) {
        var b = this;
        this._ShowSelection();
        var c = this.getPosition(this.obj),
            d = a.clientX - c[0] + (document.body.scrollLeft || (document.documentElement ? document.documentElement.scrollLeft : 0)),
            e = a.clientY - c[1] + (document.body.scrollTop || (document.documentElement ? document.documentElement.scrollTop : 0));
        if (Math.abs(this._init_pos[0] - d) < 5 && Math.abs(this._init_pos[1] - e) < 5) return this._HideSelection();
        var f = this._endSelectionCell;
        if (null == this._startSelectionCell) this._endSelectionCell = this._startSelectionCell = this.getFirstParentOfType(a.srcElement || a.target, "TD");
        else if (a.srcElement || a.target)
            if ("dhtmlxGrid_selection" == (a.srcElement || a.target).className) this._endSelectionCell = this._getCellByPos(d, e) || this._endSelectionCell;
            else {
                var g = this.getFirstParentOfType(a.srcElement || a.target, "TD");
                g.parentNode.idd && (this._endSelectionCell = g)
            }
        this._endSelectionCell && !this.callEvent("onBeforeBlockSelected", [this._endSelectionCell.parentNode.idd, this._endSelectionCell._cellIndex]) && (this._endSelectionCell = f);
        var h = this.objBox.scrollLeft + this.objBox.clientWidth,
            i = this.objBox.scrollTop + this.objBox.clientHeight,
            j = this.objBox.scrollLeft,
            k = this.objBox.scrollTop,
            l = !1;
        if (this._blsTimer && window.clearTimeout(this._blsTimer), d + 20 >= h ? (this.objBox.scrollLeft += 20, l = !0) : d - 20 < j && (this.objBox.scrollLeft -= 20, l = !0), e + 20 >= i && !this._realfake ? (this.objBox.scrollTop += 20, l = !0) : e - 20 < k && !this._realfake && (this.objBox.scrollTop -= 20, l = !0), this._selectionArea = this._RedrawSelectionPos(this._startSelectionCell, this._endSelectionCell), l) {
            var m = a.clientX,
                n = a.clientY;
            this._blsTimer = window.setTimeout(function() {
                b._OnSelectionMove({
                    clientX: m,
                    clientY: n
                })
            }, 100)
        }
    }, dhtmlXGridObject.prototype._OnSelectionStop = function(a) {
        var b = this;
        if (this._blsTimer && window.clearTimeout(this._blsTimer), this.obj.onmousedown = function(c) {
                return b._bs_mode && b._OnSelectionStart(c || a, this), !0
            }, this.obj.onmousemove = this.obj.onmmold || null, this._selectionObj.onmousemove = null, document.body.onmouseup = this._oldDMP || null, parseInt(this._selectionObj.style.width) < 2 && parseInt(this._selectionObj.style.height) < 2) this._HideSelection();
        else {
            var c = this.getFirstParentOfType(a.srcElement || a.target, "TD");
            if (c && c.parentNode.idd || (c = this._endSelectionCell), !c) return this._HideSelection();
            for (;
                "td" != c.tagName.toLowerCase();) c = c.parentNode;
            this._stopSelectionCell = c, this._selectionArea = this._RedrawSelectionPos(this._startSelectionCell, this._stopSelectionCell), this.callEvent("onBlockSelected", [])
        }
        document.body.onselectstart = function() {}
    }, dhtmlXGridObject.prototype._RedrawSelectionPos = function(a, b) {
        var c = {};
        c.LeftTopCol = a._cellIndex, c.LeftTopRow = this.getRowIndex(a.parentNode.idd), c.RightBottomCol = b._cellIndex, c.RightBottomRow = this.getRowIndex(b.parentNode.idd);
        var d = a.offsetWidth,
            e = a.offsetHeight,
            a = this.getPosition(a, this.obj),
            f = b.offsetWidth,
            g = b.offsetHeight,
            b = this.getPosition(b, this.obj);
        if (a[0] < b[0]) var h = a[0],
            i = b[0] + f;
        else {
            var j = c.RightBottomCol;
            c.RightBottomCol = c.LeftTopCol, c.LeftTopCol = j, h = b[0], i = a[0] + d
        }
        if (a[1] < b[1]) var k = a[1],
            l = b[1] + g;
        else j = c.RightBottomRow, c.RightBottomRow = c.LeftTopRow, c.LeftTopRow = j, k = b[1], l = a[1] + e;
        var m = i - h,
            n = l - k;
        return this._selectionObj.style.left = h + "px", this._selectionObj.style.top = k + "px", this._selectionObj.style.width = m + "px", this._selectionObj.style.height = n + "px", c
    }, dhtmlXGridObject.prototype._CreateSelection = function(a, b) {
        if (null == this._selectionObj) {
            var c = document.createElement("div");
            c.style.position = "absolute", c.style.display = "none", c.className = "dhtmlxGrid_selection", this._selectionObj = c, this._selectionObj.onmousedown = function(a) {
                if (a = a || event, 2 == a.button || _isMacOS && a.ctrlKey) return this.parentNode.grid.callEvent("onBlockRightClick", ["BLOCK", a])
            }, this._selectionObj.oncontextmenu = function(a) {
                return (a || event).cancelBubble = !0, !1
            }, this.objBox.appendChild(this._selectionObj)
        }
        this._selectionObj.style.width = "0px", this._selectionObj.style.height = "0px", this._selectionObj.style.left = a + "px", this._selectionObj.style.top = b + "px", this._selectionObj.startX = a, this._selectionObj.startY = b
    }, dhtmlXGridObject.prototype._ShowSelection = function() {
        this._selectionObj && (this._selectionObj.style.display = "")
    }, dhtmlXGridObject.prototype._HideSelection = function() {
        this._selectionObj && (this._selectionObj.style.display = "none"), this._selectionArea = null
    }, dhtmlXGridObject.prototype.copyBlockToClipboard = function() {
        if (null != this._selectionArea) {
            var a = [];
            this._agetm = this._mathSerialization ? "getMathValue" : this._strictText ? "getTitle" : "getValue", this._serialize_visible = !0;
            for (var b = this._selectionArea.LeftTopRow; b <= this._selectionArea.RightBottomRow; b++) {
                var c = this._serializeRowToCVS(this.rowsBuffer[b], null, this._selectionArea.LeftTopCol, this._selectionArea.RightBottomCol + 1);
                a[a.length] = this._csvAID ? c : c.substr(c.indexOf(this.csv.cell) + 1)
            }
            a = a.join(this._CSVRowDelimiter), this.toClipBoard(a), this._serialize_visible = !1
        }
    }, dhtmlXGridObject.prototype.pasteBlockFromClipboard = function() {
        var a = this.fromClipBoard();
        if (null != this._selectionArea) var b = this._selectionArea.LeftTopRow,
            c = this._selectionArea.LeftTopCol;
        else {
            if (null == this.cell || this.editor) return !1;
            b = this.getRowIndex(this.cell.parentNode.idd), c = this.cell._cellIndex
        }
        var a = this.csvParser.unblock(a, this.csv.cell, this.csv.row),
            d = b + a.length,
            e = c + a[0].length;
        e > this._cCount && (e = this._cCount);
        for (var f = 0, g = b; g < d; g++) {
            var h = this.render_row(g);
            if (h != -1) {
                for (var i = 0, j = c; j < e; j++)
                    if (this._hrrar[j]) e = Math.max(e + 1, this._cCount);
                    else {
                        var k = this.cells3(h, j);
                        if (k.isDisabled()) i++;
                        else {
                            if (this._onEditUndoRedo && this._onEditUndoRedo(2, h.idd, j, a[f][i], k.getValue()), k.combo) {
                                for (var l = k.combo.values, m = 0; m < l.length; m++)
                                    if (a[f][i] == l[m]) {
                                        k.setValue(k.combo.keys[m]), l = null;
                                        break
                                    }
                                null != l && k.editable ? k.setValue(a[f][i++]) : i++
                            } else k[k.setImage ? "setLabel" : "setValue"](a[f][i++]);
                            k.cell.wasChanged = !0
                        }
                    }
                this.callEvent("onRowPaste", [h.idd]), f++
            }
        }
    }, dhtmlXGridObject.prototype.getSelectedBlock = function() {
        return this._selectionArea ? this._selectionArea : null !== this.getSelectedRowId() ? {
            LeftTopRow: this.getSelectedRowId(),
            LeftTopCol: this.getSelectedCellIndex(),
            RightBottomRow: this.getSelectedRowId(),
            RightBottomCol: this.getSelectedCellIndex()
        } : null
    }, dhtmlXGridObject.prototype.enablePaging = function(a, b, c, d, e, f) {
        this._pgn_parentObj = "string" == typeof d ? document.getElementById(d) : d, this._pgn_recInfoParentObj = "string" == typeof f ? document.getElementById(f) : f, this.pagingOn = a, this.showRecInfo = e, this.rowsBufferOutSize = parseInt(b), this.currentPage = 1, this.pagesInGroup = parseInt(c), this._init_pgn_events(), this.setPagingSkin("default")
    }, dhtmlXGridObject.prototype.setXMLAutoLoading = function(a, b) {
        this.xmlFileUrl = a, this._dpref = b
    }, dhtmlXGridObject.prototype.changePageRelative = function(a) {
        this.changePage(this.currentPage + a)
    }, dhtmlXGridObject.prototype.changePage = function(a) {
        0 == arguments.length && (a = this.currentPage || 0), a = parseInt(a), a = Math.max(1, Math.min(a, Math.ceil(this.rowsBuffer.length / this.rowsBufferOutSize))), this.callEvent("onBeforePageChanged", [this.currentPage, a]) && (this.currentPage = parseInt(a), this._reset_view(), this._fixAlterCss(), this.callEvent("onPageChanged", this.getStateOfView()))
    }, dhtmlXGridObject.prototype.setPagingSkin = function(a, b) {
        this._pgn_skin = this["_pgn_" + a], "toolbar" == a && (this._pgn_skin_tlb = b)
    }, dhtmlXGridObject.prototype.setPagingTemplates = function(a, b) {
        this._pgn_templateA = this._pgn_template_compile(a), this._pgn_templateB = this._pgn_template_compile(b), this._page_skin_update()
    }, dhtmlXGridObject.prototype._page_skin_update = function() {
        this.pagesInGroup || (this.pagesInGroup = Math.ceil(Math.min(5, this.rowsBuffer.length / this.rowsBufferOutSize)));
        var a = Math.ceil(this.rowsBuffer.length / this.rowsBufferOutSize);
        return a && a < this.currentPage ? this.changePage(a) : void(this.pagingOn && this._pgn_skin && this._pgn_skin.apply(this, this.getStateOfView()))
    }, dhtmlXGridObject.prototype._init_pgn_events = function() {
        this.attachEvent("onXLE", this._page_skin_update), this.attachEvent("onClearAll", this._page_skin_update), this.attachEvent("onPageChanged", this._page_skin_update), this.attachEvent("onGridReconstructed", this._page_skin_update), this._init_pgn_events = function() {}
    }, dhtmlXGridObject.prototype._pgn_default = function() {
        if (!this.pagingBlock) {
            if (this.pagingBlock = document.createElement("DIV"), this.pagingBlock.className = "pagingBlock", this.recordInfoBlock = document.createElement("SPAN"), this.recordInfoBlock.className = "recordsInfoBlock", !this._pgn_parentObj) return;
            this._pgn_parentObj.appendChild(this.pagingBlock), this._pgn_recInfoParentObj && this.showRecInfo && this._pgn_recInfoParentObj.appendChild(this.recordInfoBlock), this._pgn_templateA || (this._pgn_templateA = this._pgn_template_compile("[prevpages:&lt;:&nbsp;] [currentpages:,&nbsp;] [nextpages:&gt;:&nbsp;]"), this._pgn_templateB = this._pgn_template_compile("Results <b>[from]-[to]</b> of <b>[total]</b>"))
        }
        var a = this.getStateOfView();
        this.pagingBlock.innerHTML = this._pgn_templateA.apply(this, a), this.recordInfoBlock.innerHTML = this._pgn_templateB.apply(this, a), this._pgn_template_active(this.pagingBlock), this._pgn_template_active(this.recordInfoBlock), this.callEvent("onPaging", [])
    }, dhtmlXGridObject.prototype._pgn_block = function(a) {
        for (var b = Math.floor((this.currentPage - 1) / this.pagesInGroup) * this.pagesInGroup, c = Math.min(Math.ceil(this.rowsBuffer.length / this.rowsBufferOutSize), b + this.pagesInGroup), d = [], e = b + 1; e <= c; e++) e == this.currentPage ? d.push("<a class='dhx_not_active'><b>" + e + "</b></a>") : d.push("<a onclick='this.grid.changePage(" + e + "); return false;'>" + e + "</a>");
        return d.join(a)
    }, dhtmlXGridObject.prototype._pgn_link = function(a, b, c) {
        if ("prevpages" == a || "prev" == a) return 1 == this.currentPage ? c : "<a onclick='this.grid.changePageRelative(-1*" + ("prev" == a ? "1" : "this.grid.pagesInGroup") + "); return false;'>" + b + "</a>";
        if ("nextpages" == a || "next" == a) return this.rowsBuffer.length / this.rowsBufferOutSize <= this.currentPage ? c : this.rowsBuffer.length / (this.rowsBufferOutSize * ("next" == a ? 1 : this.pagesInGroup)) <= 1 ? c : "<a onclick='this.grid.changePageRelative(" + ("next" == a ? "1" : "this.grid.pagesInGroup") + "); return false;'>" + b + "</a>";
        if ("current" == a) {
            var d = this.currentPage + (b ? parseInt(b) : 0);
            return d < 1 || Math.ceil(this.rowsBuffer.length / this.rowsBufferOutSize) < d ? c : "<a " + (d == this.currentPage ? "class='dhx_active_page_link' " : "") + "onclick='this.grid.changePage(" + d + "); return false;'>" + d + "</a>"
        }
        return b
    }, dhtmlXGridObject.prototype._pgn_template_active = function(a) {
        var b = a.getElementsByTagName("A");
        if (b)
            for (var c = 0; c < b.length; c++) b[c].grid = this
    }, dhtmlXGridObject.prototype._pgn_template_compile = function(a) {
        return a = a.replace(/\[([^\]]*)\]/g, function(a, b) {
            switch (b = b.split(":"), b[0]) {
                case "from":
                    return '"+(arguments[1]*1+(arguments[2]*1?1:0))+"';
                case "total":
                    return '"+arguments[3]+"';
                case "to":
                    return '"+arguments[2]+"';
                case "current":
                case "prev":
                case "next":
                case "prevpages":
                case "nextpages":
                    return "\"+this._pgn_link('" + b[0] + "','" + b[1] + "','" + b[2] + "')+\"";
                case "currentpages":
                    return "\"+this._pgn_block('" + b[1] + "')+\""
            }
        }), new Function('return "' + a + '";')
    }, dhtmlXGridObject.prototype.i18n.paging = {
        results: "Results",
        records: "Records from ",
        to: " to ",
        page: "Page ",
        perpage: "rows per page",
        first: "To first Page",
        previous: "Previous Page",
        found: "Found records",
        next: "Next Page",
        last: "To last Page",
        of: " of ",
        notfound: "No Records Found"
    }, dhtmlXGridObject.prototype.setPagingWTMode = function(a, b, c, d) {
        this._WTDef = [a, b, c, d]
    }, dhtmlXGridObject.prototype._pgn_bricks = function(a, b, c) {
        var d = (this.skin_name || "").split("_")[1],
            e = "";
        "light" != d && "modern" != d && "skyblue" != d || (e = "_" + d), this.pagerElAr = [], this.pagerElAr.pagerCont = document.createElement("DIV"), this.pagerElAr.pagerBord = document.createElement("DIV"), this.pagerElAr.pagerLine = document.createElement("DIV"), this.pagerElAr.pagerBox = document.createElement("DIV"), this.pagerElAr.pagerInfo = document.createElement("DIV"), this.pagerElAr.pagerInfoBox = document.createElement("DIV");
        var f = this.globalBox || this.objBox;
        if (this.pagerElAr.pagerCont.style.width = f.clientWidth + "px", this.pagerElAr.pagerCont.style.overflow = "hidden", this.pagerElAr.pagerCont.style.clear = "both", this.pagerElAr.pagerBord.className = "dhx_pbox" + e, this.pagerElAr.pagerLine.className = "dhx_pline" + e, this.pagerElAr.pagerBox.style.clear = "both", this.pagerElAr.pagerInfo.className = "dhx_pager_info" + e, this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerBord), this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerLine), this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerInfo), this.pagerElAr.pagerLine.appendChild(this.pagerElAr.pagerBox), this.pagerElAr.pagerInfo.appendChild(this.pagerElAr.pagerInfoBox), this._pgn_parentObj.innerHTML = "", this._pgn_parentObj.appendChild(this.pagerElAr.pagerCont), this.rowsBuffer.length > 0) {
            var g = 20,
                h = 22;
            if (a > this.pagesInGroup) {
                var i = document.createElement("DIV"),
                    j = document.createElement("DIV");
                i.className = "dhx_page" + e, j.innerHTML = "&larr;", i.appendChild(j), this.pagerElAr.pagerBox.appendChild(i);
                var k = this;
                i.pgnum = (Math.ceil(a / this.pagesInGroup) - 1) * this.pagesInGroup, i.onclick = function() {
                    k.changePage(this.pgnum)
                }, g += h
            }
            for (var l = 1; l <= this.pagesInGroup && (i = document.createElement("DIV"), j = document.createElement("DIV"), i.className = "dhx_page" + e, pageNumber = (Math.ceil(a / this.pagesInGroup) - 1) * this.pagesInGroup + l, !(pageNumber > Math.ceil(this.rowsBuffer.length / this.rowsBufferOutSize))); l++) j.innerHTML = pageNumber, i.appendChild(j), a == pageNumber ? (i.className += " dhx_page_active" + e, j.className = "dhx_page_active" + e) : (k = this, i.pgnum = pageNumber, i.onclick = function() {
                k.changePage(this.pgnum)
            }), g += parseInt(h / 3) * pageNumber.toString().length + 15, j.style.width = parseInt(h / 3) * pageNumber.toString().length + 8 + "px", this.pagerElAr.pagerBox.appendChild(i);
            Math.ceil(a / this.pagesInGroup) * this.pagesInGroup < Math.ceil(this.rowsBuffer.length / this.rowsBufferOutSize) && (i = document.createElement("DIV"), j = document.createElement("DIV"), i.className = "dhx_page" + e, j.innerHTML = "&rarr;", i.appendChild(j), this.pagerElAr.pagerBox.appendChild(i), k = this, i.pgnum = Math.ceil(a / this.pagesInGroup) * this.pagesInGroup + 1, i.onclick = function() {
                k.changePage(this.pgnum)
            }, g += h), this.pagerElAr.pagerLine.style.width = g + "px"
        }
        this.rowsBuffer.length > 0 && this.showRecInfo ? this.pagerElAr.pagerInfoBox.innerHTML = this.i18n.paging.records + (b + 1) + this.i18n.paging.to + c + this.i18n.paging.of + this.rowsBuffer.length : 0 == this.rowsBuffer.length && (this.pagerElAr.pagerLine.parentNode.removeChild(this.pagerElAr.pagerLine), this.pagerElAr.pagerInfoBox.innerHTML = this.i18n.paging.notfound), this.pagerElAr.pagerBox.appendChild(document.createElement("SPAN")).innerHTML = "&nbsp;", this.pagerElAr.pagerBord.appendChild(document.createElement("SPAN")).innerHTML = "&nbsp;", this.pagerElAr.pagerCont.appendChild(document.createElement("SPAN")).innerHTML = "&nbsp;", this.callEvent("onPaging", [])
    }, dhtmlXGridObject.prototype._pgn_toolbar = function(a, b, c) {
        this.aToolBar || (this.aToolBar = this._pgn_createToolBar());
        var d = Math.ceil(this.rowsBuffer.length / this.rowsBufferOutSize);
        if (this._WTDef[0] && (this.aToolBar.enableItem("right"), this.aToolBar.enableItem("rightabs"), this.aToolBar.enableItem("left"), this.aToolBar.enableItem("leftabs"), this.currentPage >= d && (this.aToolBar.disableItem("right"), this.aToolBar.disableItem("rightabs")), 1 == this.currentPage && (this.aToolBar.disableItem("left"), this.aToolBar.disableItem("leftabs"))), this._WTDef[2]) {
            var e = this;
            this.aToolBar.forEachListOption("pages", function(a) {
                e.aToolBar.removeListOption("pages", a)
            });
            for (var f = 0; f < d; f++) this.aToolBar.addListOption("pages", "pages_" + (f + 1), NaN, "button", this.i18n.paging.page + (f + 1));
            this.aToolBar.setItemText("pages", "<div style='width:100%; text-align:right'>" + this.i18n.paging.page + a + "</div>")
        }
        this._WTDef[1] && (this.getRowsNum() ? this.aToolBar.setItemText("results", "<div style='width:100%; text-align:center'>" + this.i18n.paging.records + (b + 1) + this.i18n.paging.to + c + "</div>") : this.aToolBar.setItemText("results", this.i18n.paging.notfound)), this._WTDef[3] && this.aToolBar.setItemText("perpagenum", "<div style='width:100%; text-align:right'>" + this.rowsBufferOutSize.toString() + " " + this.i18n.paging.perpage + "</div>"), this.callEvent("onPaging", [])
    }, dhtmlXGridObject.prototype._pgn_createToolBar = function() {
        this.aToolBar = new dhtmlXToolbarObject(this._pgn_parentObj, this._pgn_skin_tlb || "dhx_blue"), this._WTDef || this.setPagingWTMode(!0, !0, !0, !0);
        var a = this;
        this.aToolBar.attachEvent("onClick", function(b) {
            switch (b = b.split("_"), b[0]) {
                case "leftabs":
                    a.changePage(1);
                    break;
                case "left":
                    a.changePage(a.currentPage - 1);
                    break;
                case "rightabs":
                    a.changePage(99999);
                    break;
                case "right":
                    a.changePage(a.currentPage + 1);
                    break;
                case "perpagenum":
                    if (b[1] === this.undefined) break;
                    a.rowsBufferOutSize = parseInt(b[1]), a.changePage(), a.aToolBar.setItemText("perpagenum", "<div style='width:100%; text-align:right'>" + b[1] + " " + a.i18n.paging.perpage + "</div>");
                    break;
                case "pages":
                    if (b[1] === this.undefined) break;
                    a.changePage(b[1]), a.aToolBar.setItemText("pages", "<div style='width:100%; text-align:right'>" + a.i18n.paging.page + b[1] + "</div>")
            }
        }), this._WTDef[0] && (this.aToolBar.addButton("leftabs", NaN, "", this.imgURL + "ar_left_abs.gif", this.imgURL + "ar_left_abs_dis.gif"), this.aToolBar.setWidth("leftabs", "20"), this.aToolBar.addButton("left", NaN, "", this.imgURL + "ar_left.gif", this.imgURL + "ar_left_dis.gif"), this.aToolBar.setWidth("left", "20")), this._WTDef[1] && (this.aToolBar.addText("results", NaN, this.i18n.paging.results), this.aToolBar.setWidth("results", "150"), this.aToolBar.disableItem("results")), this._WTDef[0] && (this.aToolBar.addButton("right", NaN, "", this.imgURL + "ar_right.gif", this.imgURL + "ar_right_dis.gif"), this.aToolBar.setWidth("right", "20"), this.aToolBar.addButton("rightabs", NaN, "", this.imgURL + "ar_right_abs.gif", this.imgURL + "ar_right_abs_dis.gif"), this.aToolBar.setWidth("rightabs", "20")), this._WTDef[2] && (this.aToolBar.addButtonSelect("pages", NaN, "select page", [], null, null, !0, !0), this.aToolBar.setWidth("pages", "75"));
        var b;
        if (b = this._WTDef[3]) {
            this.aToolBar.addButtonSelect("perpagenum", NaN, "select size", [], null, null, !0, !0), "object" != typeof b && (b = [5, 10, 15, 20, 25, 30]);
            for (var c = 0; c < b.length; c++) this.aToolBar.addListOption("perpagenum", "perpagenum_" + b[c], NaN, "button", b[c] + " " + this.i18n.paging.perpage);
            this.aToolBar.setWidth("perpagenum", "135")
        }
        return this.aToolBar
    }, dhtmlXGridObject.prototype.hidePivot = function() {
        if (this._pgridCont) {
            this._pgrid && this._pgrid.destructor();
            var a = this._pgridCont.parentNode;
            a.innerHTML = "", a.parentNode == this.entBox && this.entBox.removeChild(a), this._pgrid = this._pgridSelect = this._pUNI = this._pgridCont = null
        }
    }, dhtmlXGridObject.prototype.makePivot = function(a, b) {
        if (b = b || {}, this.hidePivot(), a || (a = document.createElement("DIV"), a.style.cssText = "position:absolute; top:0px; left:0px;background-color:white;", a.style.height = this.entBox.offsetHeight + "px", a.style.width = this.entBox.offsetWidth + "px", "absolute" != this.entBox.style.position && (this.entBox.style.position = "relative"), this.entBox.appendChild(a)), "object" != typeof a && (a = document.getElementById(a)), b.column_list) this._column_list = b.column_list;
        else {
            this._column_list = [];
            for (var c = 0; c < this.hdr.rows[1].cells.length; c++) this._column_list.push(this.hdr.rows[1].cells[c][_isIE ? "innerText" : "textContent"])
        }
        var d = this;
        a.innerHTML = "<table cellspacing='0' cellpadding='0'><tr><td style='width:160px' align='center'></td><td>&nbsp;&nbsp;&nbsp;</td><td></td></tr></table><div></div>";
        var e = this.makePivotSelect(this._column_list);
        e.style.width = "80px", e.onchange = function() {
            d._pivotS.value = this.value != -1 ? this.value : "", d._reFillPivotLists(), d._renderPivot2()
        };
        var f = this.makePivotSelect(this._column_list);
        f.onchange = function() {
            d._pivotS.x = this.value != -1 ? this.value : "", d._reFillPivotLists(), d._renderPivot()
        };
        var g = this.makePivotSelect(this._column_list);
        g.onchange = function() {
            d._pivotS.y = this.value != -1 ? this.value : "", d._reFillPivotLists(), d._renderPivot()
        };
        var h = this.makePivotSelect(["Sum", "Min", "Max", "Average", "Count"], -1);
        h.style.width = "70px", h.onchange = function() {
            d._pivotS.action = this.value != -1 ? this.value : null, d._renderPivot2()
        }, b.readonly && (e.disabled = f.disabled = g.disabled = h.disabled = !0), a.firstChild.rows[0].cells[0].appendChild(h), a.firstChild.rows[0].cells[0].appendChild(e), a.firstChild.rows[0].cells[2].appendChild(f);
        var i = a.childNodes[1];
        i.style.width = a.offsetWidth + "px", i.style.height = a.offsetHeight - 20 + "px", i.style.overflow = "hidden", this._pgridCont = i, this._pgridSelect = [e, f, g, h], this._pData = this._fetchPivotData(), this._pUNI = [], this._pivotS = {
            action: b.action || "0",
            value: "undefined" != typeof b.value ? b.value || "0" : null,
            x: "undefined" != typeof b.x ? b.x || "0" : null,
            y: "undefined" != typeof b.y ? b.y || "0" : null
        }, e.value = this._pivotS.value, f.value = this._pivotS.x, g.value = this._pivotS.y, h.value = this._pivotS.action, d._reFillPivotLists(), this._renderPivot()
    }, dhtmlXGridObject.prototype._fetchPivotData = function() {
        for (var a = [], b = 0; b < this._cCount; b++) {
            for (var c = [], d = 0; d < this.rowsCol.length; d++) this.rowsCol[d]._cntr || c.push(this.cells2(d, b).getValue());
            a.push(c)
        }
        return a
    }, dhtmlXGridObject.prototype._renderPivot = function() {
        if (_isIE && this._pgridSelect[2].removeNode(!0), this._pgrid && this._pgrid.destructor(), this._pgrid = new dhtmlXGridObject(this._pgridCont), this._pgrid.setImagePath(this.imgURL), this._pgrid.attachEvent("onBeforeSelect", function() {
                return !1
            }), this._pivotS.x) {
            for (var a = this._getUniList(this._pivotS.x), b = [160], c = 0; c < a.length; c++) b.push(100);
            a = [""].concat(a), this._pgrid.setHeader(a), this._pgrid.setInitWidths(b.join(","))
        } else this._pgrid.setHeader(""), this._pgrid.setInitWidths("160");
        this._pgrid.init(), this._pgrid.setEditable(!1), this._pgrid.setSkin(this.entBox.className.replace("gridbox gridbox_", ""));
        var d = this._pgrid.hdr.rows[1].cells[0];
        if (d.firstChild && "DIV" == d.firstChild.tagName && (d = d.firstChild), d.appendChild(this._pgridSelect[2]), this._pgrid.setSizes(), this._pivotS.y)
            for (a = this._getUniList(this._pivotS.y), c = 0; c < a.length; c++) this._pgrid.addRow(this._pgrid.uid(), [a[c]], -1);
        else this._pgrid.addRow(1, "not ready", 1);
        this._renderPivot2()
    }, dhtmlXGridObject.prototype._pivot_action_0 = function(a, b, c, d, e, f) {
        for (var g = 0, h = f[a], i = f[b], j = f[c], k = h.length - 1; k >= 0; k--) h[k] == d && i[k] == e && (g += this.parseFloat(j[k]));
        return g
    }, dhtmlXGridObject.prototype._pivot_action_1 = function(a, b, c, d, e, f) {
        ret = 9999999999;
        for (var g = f[a], h = f[b], i = f[c], j = g.length - 1; j >= 0; j--) g[j] == d && h[j] == e && (ret = Math.min(this.parseFloat(i[j]), ret));
        return 9999999999 == ret && (ret = ""), ret
    }, dhtmlXGridObject.prototype._pivot_action_2 = function(a, b, c, d, e, f) {
        ret = -9999999999;
        for (var g = f[a], h = f[b], i = f[c], j = g.length - 1; j >= 0; j--) g[j] == d && h[j] == e && (ret = Math.max(this.parseFloat(i[j]), ret));
        return ret == -9999999999 && (ret = ""), ret
    }, dhtmlXGridObject.prototype._pivot_action_3 = function(a, b, c, d, e, f) {
        for (var g = 0, h = 0, i = f[a], j = f[b], k = f[c], l = i.length - 1; l >= 0; l--) i[l] == d && j[l] == e && (g += this.parseFloat(k[l]), h++);
        return h ? g / h : ""
    }, dhtmlXGridObject.prototype._pivot_action_4 = function(a, b, c, d, e, f) {
        for (var g = 0, h = f[a], i = f[b], j = (f[c], h.length - 1); j >= 0; j--) h[j] == d && i[j] == e && g++;
        return g
    }, dhtmlXGridObject.prototype.parseFloat = function(a) {
        return a = parseFloat(a), isNaN(a) ? 0 : a
    }, dhtmlXGridObject.prototype._renderPivot2 = function() {
        if (this._pivotS.x && this._pivotS.y && this._pivotS.value && this._pivotS.action)
            for (var a = this["_pivot_action_" + this._pivotS.action], b = this._getUniList(this._pivotS.x), c = this._getUniList(this._pivotS.y), d = 0; d < b.length; d++)
                for (var e = 0; e < c.length; e++) this._pgrid.cells2(e, d + 1).setValue(Math.round(100 * a(this._pivotS.x, this._pivotS.y, this._pivotS.value, b[d], c[e], this._pData)) / 100)
    }, dhtmlXGridObject.prototype._getUniList = function(a) {
        if (!this._pUNI[a]) {
            for (var b = {}, c = [], d = this._pData[a].length - 1; d >= 0; d--) b[this._pData[a][d]] = !0;
            for (var e in b) b[e] === !0 && c.push(e);
            this._pUNI[a] = c.sort()
        }
        return this._pUNI[a]
    }, dhtmlXGridObject.prototype._fillPivotList = function(a, b, c, d) {
        c || (c = {}, d = -1), a.innerHTML = "", a.options[a.options.length] = new Option("-select-", -1);
        for (var e = 0; e < b.length; e++) c[e] || null === b[e] || (a.options[a.options.length] = new Option(b[e], e));
        a.value = parseInt(d)
    }, dhtmlXGridObject.prototype._reFillPivotLists = function() {
        for (var a = [], b = [], c = 0; c < 3; c++) a.push(this._pgridSelect[c]), b.push(a[c].value);
        var d = this._reFfillPivotLists,
            e = {};
        e[b[1]] = e[b[2]] = !0, this._fillPivotList(a[0], this._column_list, e, b[0]), e = {}, e[b[0]] = e[b[2]] = !0, this._fillPivotList(a[1], this._column_list, e, b[1]), e = {}, e[b[1]] = e[b[0]] = !0, this._fillPivotList(a[2], this._column_list, e, b[2]), this._reFfillPivotLists = d
    }, dhtmlXGridObject.prototype.makePivotSelect = function(a, b) {
        var c = document.createElement("SELECT");
        return this._fillPivotList(c, a, b), c.style.cssText = "width:150px; height:20px; font-family:Tahoma; font-size:8pt; font-weight:normal;", c
    }, dhtmlXGridObject.prototype.setRowspan = function(a, b, c) {
        var d = this[this._bfs_cells ? "_bfs_cells" : "cells"](a, b).cell,
            e = this.rowsAr[a];
        if (d.rowSpan && 1 != d.rowSpan)
            for (var f = e.nextSibling, g = 1; g < d.rowSpan; g++) {
                var h = f.childNodes[f._childIndexes[d._cellIndex + 1]],
                    i = document.createElement("TD");
                i.innerHTML = "&nbsp;", i._cellIndex = d._cellIndex, i._clearCell = !0, h ? h.parentNode.insertBefore(i, h) : f.parentNode.appendChild(i), this._shiftIndexes(f, d._cellIndex, -1), f = f.nextSibling
            }
        d.rowSpan = c;
        for (var e = this._h2 ? this.rowsAr[this._h2.get[e.idd].parent.childs[this._h2.get[e.idd].index + 1].id] : e.nextSibling || this.rowsCol[this.rowsCol._dhx_find(e) + 1], j = [], g = 1; g < c; g++) {
            var k = null,
                k = this._fake && !this._realfake ? this._bfs_cells3(e, b).cell : this.cells3(e, b).cell;
            this._shiftIndexes(e, d._cellIndex, 1), k && k.parentNode.removeChild(k), j.push(e), this._h2 ? (e = this._h2.get[e.idd].parent.childs[this._h2.get[e.idd].index + 1]) && (e = this.rowsAr[e.id]) : e = e.nextSibling || this.rowsCol[this.rowsCol._dhx_find(e) + 1]
        }
        this.rowsAr[a]._rowSpan = this.rowsAr[a]._rowSpan || {}, this.rowsAr[a]._rowSpan[b] = j, this._fake && !this._realfake && b < this._fake._cCount && this._fake.setRowspan(a, b, c)
    }, dhtmlXGridObject.prototype._shiftIndexes = function(a, b, c) {
        if (!a._childIndexes) {
            a._childIndexes = [];
            for (var d = 0; d < a.childNodes.length; d++) a._childIndexes[d] = d
        }
        for (d = 0; d < a._childIndexes.length; d++) d > b && (a._childIndexes[d] -= c)
    }, dhtmlXGridObject.prototype.enableRowspan = function() {
        this._erspan = !0, this.enableRowspan = function() {}, this.attachEvent("onAfterSorting", function() {
            if (!this._dload) {
                for (var a = 1; a < this.obj.rows.length; a++)
                    if (this.obj.rows[a]._rowSpan) {
                        var b, c = this.obj.rows[a];
                        for (b in c._rowSpan)
                            for (var d = c, e = d._rowSpan[b], f = 0; f < e.length; f++) {
                                if (d.nextSibling ? d.parentNode.insertBefore(e[f], d.nextSibling) : d.parentNode.appendChild(e[f]), this._fake) {
                                    var g = this._fake.rowsAr[d.idd],
                                        h = this._fake.rowsAr[e[f].idd];
                                    g.nextSibling ? g.parentNode.insertBefore(h, g.nextSibling) : g.parentNode.appendChild(h), this._correctRowHeight(d.idd)
                                }
                                d = d.nextSibling
                            }
                    }
                var i = this.rowsCol.stablesort;
                for (this.rowsCol = new dhtmlxArray, this.rowsCol.stablesort = i, a = 1; a < this.obj.rows.length; a++) this.rowsCol.push(this.obj.rows[a])
            }
        }), this.attachEvent("onXLE", function() {
            for (var a = 0; a < this.rowsBuffer.length; a++)
                for (var b = this.render_row(a), c = b.childNodes, d = 0; d < c.length; d++) c[d]._attrs.rowspan && this.setRowspan(b.idd, d, c[d]._attrs.rowspan)
        })
    }, dhtmlXGridObject.prototype._init_point_bspl = dhtmlXGridObject.prototype._init_point, dhtmlXGridObject.prototype._init_point = function() {
        this._split_later && this.splitAt(this._split_later), (this._init_point = this._init_point_bspl) && this._init_point()
    }, dhtmlXGridObject.prototype.splitAt = function(a) {
        function b(a) {
            var b = a.wheelDelta / -40;
            a.wheelDelta === window.undefined && (b = a.detail);
            var c = p.objBox;
            c.scrollTop += 40 * b, a.preventDefault && a.preventDefault()
        }

        function c(a, b) {
            b.style.whiteSpace = "";
            var c = b.nextSibling,
                d = b.parentNode;
            a.parentNode.insertBefore(b, a), c ? d.insertBefore(a, c) : d.appendChild(a);
            var e = a.style.display;
            a.style.display = b.style.display, b.style.display = e
        }

        function d(b, d, e, f) {
            var g = Array(a).join(this.delim),
                h = [];
            if (2 == b)
                for (var i = 0; i < a; i++) {
                    var j = d[b - 1].cells[d[b - 1]._childIndexes ? d[b - 1]._childIndexes[i] : i];
                    j.rowSpan && j.rowSpan > 1 && (h[j._cellIndex] = j.rowSpan - 1, f[b - 1].cells[f[b - 1]._childIndexes ? f[b - 1]._childIndexes[i] : i].rowSpan = j.rowSpan, j.rowSpan = 1)
                }
            for (; b < d.length; b++) {
                this._fake.attachHeader(g, null, e);
                for (var f = f || this._fake.ftr.childNodes[0].rows, k = a, l = 0, m = 0; m < k; m++)
                    if (h[m]) {
                        if (h[m] -= 1, _isIE || _isFF && _FFrv >= 1.9 || _isOpera) {
                            var n = document.createElement("TD");
                            _isFF && (n.style.display = "none"), d[b].insertBefore(n, d[b].cells[0])
                        }
                        l++
                    } else {
                        var o = f[b].cells[m - l],
                            p = d[b].cells[m - (_isIE ? 0 : l)],
                            q = p.rowSpan;
                        if (c(o, p), q > 1 && (h[m] = q - 1, p.rowSpan = q), f[b].cells[m].colSpan > 1)
                            for (d[b].cells[m].colSpan = f[b].cells[m].colSpan, k -= f[b].cells[m].colSpan - 1, i = 1; i < f[b].cells[m].colSpan; i++) f[b].removeChild(f[b].cells[m + 1])
                    }
            }
        }
        if (!this.obj.rows[0]) return this._split_later = a;
        var a = parseInt(a),
            e = document.createElement("DIV");
        this.entBox.appendChild(e);
        var f = document.createElement("DIV");
        this.entBox.appendChild(f);
        for (var g = this.entBox.childNodes.length - 3; g >= 0; g--) f.insertBefore(this.entBox.childNodes[g], f.firstChild);
        if (this.entBox.style.position = "relative", this.globalBox = this.entBox, this.entBox = f, f.grid = this, e.style.cssText += "border:0px solid red !important;", f.style.cssText += "border:0px solid red !important;", f.style.top = "0px", f.style.position = "absolute", e.style.position = "absolute", e.style.top = "0px", e.style.left = "0px", e.style.zIndex = 11, f.style.height = e.style.height = this.globalBox.clientHeight, this._fake = new dhtmlXGridObject(e), this._fake.setSkin("not_existing_skin"), this.globalBox = this._fake.globalBox = this.globalBox, this._fake._fake = this, this._fake._realfake = !0, this._treeC = this.cellType._dhx_find("tree"), this._fake.delim = this.delim, this._fake.customGroupFormat = this.customGroupFormat, this._fake.imgURL = this.imgURL, this._fake._customSorts = this._customSorts, this._fake.noHeader = this.noHeader, this._fake._enbTts = this._enbTts, this._fake._htkebl = this._htkebl, this._fake.clists = this.clists, this._fake.fldSort = [], this._fake.selMultiRows = this.selMultiRows, (this._fake.multiLine = this.multiLine) || this._erspan) {
            this.attachEvent("onCellChanged", this._correctRowHeight), this.attachEvent("onRowAdded", this._correctRowHeight);
            var h = function() {
                this.forEachRow(function(a) {
                    this._correctRowHeight(a)
                })
            };
            this.attachEvent("onPageChanged", h), this.attachEvent("onXLE", h), this.attachEvent("onResizeEnd", h), this._ads_count || this.attachEvent("onAfterSorting", h), this.attachEvent("onDistributedEnd", h)
        }
        this.attachEvent("onGridReconstructed", function() {
            this._fake.objBox.scrollTop = this.objBox.scrollTop
        }), this._fake.loadedKidsHash = this.loadedKidsHash, this._h2 && (this._fake._h2 = this._h2), this._fake._dInc = this._dInc;
        var i = [
                [],
                [],
                [],
                [],
                [],
                [],
                []
            ],
            j = "hdrLabels,initCellWidth,cellType,cellAlign,cellVAlign,fldSort,columnColor".split(","),
            k = "setHeader,setInitWidths,setColTypes,setColAlign,setColVAlign,setColSorting,setColumnColor".split(",");
        this._fake.callEvent = function() {
            return this._fake._split_event = !0, "onGridReconstructed" == arguments[0] && this._fake.callEvent.apply(this, arguments), this._fake.callEvent.apply(this._fake, arguments)
        }, this._elmn && this._fake.enableLightMouseNavigation(!0), (this.__cssEven || this._cssUnEven) && this._fake.attachEvent("onGridReconstructed", function() {
            this._fixAlterCss()
        }), this._fake._cssEven = this._cssEven, this._fake._cssUnEven = this._cssUnEven, this._fake._cssSP = this._cssSP, this._fake.isEditable = this.isEditable, this._fake._edtc = this._edtc, this._sst && this._fake.enableStableSorting(!0), this._fake._sclE = this._sclE, this._fake._dclE = this._dclE, this._fake._f2kE = this._f2kE, this._fake._maskArr = this._maskArr, this._fake._dtmask = this._dtmask, this._fake.combos = this.combos;
        for (var l = 0, m = this.globalBox.offsetWidth, g = 0; g < a; g++) {
            for (var n = 0; n < j.length; n++) this[j[n]] && (i[n][g] = this[j[n]][g]), "string" == typeof i[n][g] && (i[n][g] = i[n][g].replace(RegExp("\\" + this.delim, "g"), "\\" + this.delim));
            _isFF && (i[1][g] *= 1), "%" == this.cellWidthType ? (i[1][g] = Math.round(parseInt(this[j[1]][g]) * m / 100), l += i[1][g]) : l += parseInt(this[j[1]][g]), this.setColumnHidden(g, !0)
        }
        for (n = 0; n < j.length; n++) {
            var o = i[n].join(this.delim);
            "setHeader" != k[n] ? "" != o && this._fake[k[n]](o) : this._fake[k[n]](o, null, this._hstyles)
        }
        this._fake._strangeParams = this._strangeParams, this._fake._drsclmn = this._drsclmn, l = Math.min(this.globalBox.offsetWidth, l), f.style.left = l + "px", e.style.width = l + "px", f.style.width = Math.max(this.globalBox.offsetWidth - l, 0), this._ecspn && (this._fake._ecspn = !0), this._fake.init(), this.dragAndDropOff && this.dragger.addDragLanding(this._fake.entBox, this), this._fake.objBox.style.overflow = "hidden", this._fake.objBox.style.overflowX = "scroll", this._fake._srdh = this._srdh || 20, this._fake._srnd = this._srnd;
        var p = this;
        dhtmlxEvent(this._fake.objBox, "mousewheel", b), dhtmlxEvent(this._fake.objBox, "DOMMouseScroll", b), this.hdr.rows.length > 2 && d.call(this, 2, this.hdr.rows, "_aHead", this._fake.hdr.rows), this.ftr && (d.call(this, 1, this.ftr.childNodes[0].rows, "_aFoot"), this._fake.ftr.parentNode.style.bottom = (_isFF ? 2 : 1) + "px"), this.saveSizeToCookie && (this.saveSizeToCookie = function(b, c) {
            if (this._realfake) return this._fake.saveSizeToCookie.apply(this._fake, arguments);
            b || (b = this.entBox.id);
            for (var d = [], e = "cellWidthPX", f = 0; f < this[e].length; f++) d[f] = f < a ? this._fake[e][f] : this[e][f];
            return d = d.join(","), this.setCookie(b, c, 0, d), d = (this.initCellWidth || []).join(","), this.setCookie(b, c, 1, d), !0
        }, this.loadSizeFromCookie = function(b) {
            b || (b = this.entBox.id);
            var c = this._getCookie(b, 1);
            if (c) {
                this.initCellWidth = c.split(",");
                var c = this._getCookie(b, 0),
                    d = "cellWidthPX";
                this.cellWidthType = "px";
                var e = 0;
                if (c && c.length)
                    for (var c = c.split(","), f = 0; f < c.length; f++) f < a ? (this._fake[d][f] = c[f], e += 1 * c[f]) : this[d][f] = c[f];
                this._fake.entBox.style.width = e + "px", this._fake.objBox.style.width = e + "px";
                var g = this.globalBox.childNodes[1];
                return g.style.left = e - (_isFF, 0) + "px", this.ftr && (this.ftr.style.left = e - (_isFF, 0) + "px"), g.style.width = this.globalBox.offsetWidth - e + "px", this.setSizes(), !0
            }
        }, this._fake.onRSE = this.onRSE), this.setCellTextStyleA = this.setCellTextStyle, this.setCellTextStyle = function(b, c, d) {
            c < a && this._fake.setCellTextStyle(b, c, d), this.setCellTextStyleA(b, c, d)
        }, this.setRowTextBoldA = this.setRowTextBold, this.setRowTextBold = function(a) {
            this.setRowTextBoldA(a), this._fake.setRowTextBold(a)
        }, this.setRowColorA = this.setRowColor, this.setRowColor = function(a, b) {
            this.setRowColorA(a, b), this._fake.setRowColor(a, b)
        }, this.setRowHiddenA = this.setRowHidden, this.setRowHidden = function(a, b) {
            this.setRowHiddenA(a, b), this._fake.setRowHidden(a, b)
        }, this.setRowTextNormalA = this.setRowTextNormal, this.setRowTextNormal = function(a) {
            this.setRowTextNormalA(a), this._fake.setRowTextNormal(a)
        }, this.getChangedRows = function(a) {
            function b(a) {
                for (var b = 0; b < a.childNodes.length; b++)
                    if (a.childNodes[b].wasChanged) return c[c.length] = a.idd
            }
            var c = [];
            return this.forEachRow(function(d) {
                var e = this.rowsAr[d],
                    f = this._fake.rowsAr[d];
                "TR" == e.tagName && "TR" == f.tagName && (a && e._added ? c[c.length] = e.idd : b(e) || b(f))
            }), c.join(this.delim)
        }, this.setRowTextStyleA = this.setRowTextStyle, this.setRowTextStyle = function(a, b) {
            this.setRowTextStyleA(a, b), this._fake.rowsAr[a] && this._fake.setRowTextStyle(a, b)
        }, this.lockRowA = this.lockRow, this.lockRow = function(a, b) {
            this.lockRowA(a, b), this._fake.lockRow(a, b)
        }, this.getColWidth = function(b) {
            return b < a ? parseInt(this._fake.cellWidthPX[b]) : parseInt(this.cellWidthPX[b])
        }, this.getColumnLabel = function(b) {
            return this._fake.getColumnLabel.apply(b < a ? this._fake : this, arguments)
        }, this.setColWidthA = this._fake.setColWidthA = this.setColWidth, this.setColWidth = function(b, c) {
            b *= 1, b < a ? this._fake.setColWidthA(b, c) : this.setColWidthA(b, c), b + 1 <= a && this._fake._correctSplit(Math.min(this._fake.objBox.offsetWidth, this._fake.obj.offsetWidth))
        }, this.adjustColumnSizeA = this.adjustColumnSize, this.setColumnLabelA = this.setColumnLabel, this.setColumnLabel = function(b, c, d, e) {
            var f = this;
            return b < a && (f = this._fake), this.setColumnLabelA.apply(f, [b, c, d, e])
        }, this.adjustColumnSize = function(b, c) {
            return b < a ? (_isIE && (this._fake.obj.style.tableLayout = ""), this._fake.adjustColumnSize(b, c), _isIE && (this._fake.obj.style.tableLayout = "fixed"), void this._fake._correctSplit()) : this.adjustColumnSizeA(b, c)
        };
        var q = "cells";
        this._bfs_cells = this[q], this[q] = function() {
            return arguments[1] < a ? this._fake.cells.apply(this._fake, arguments) : this._bfs_cells.apply(this, arguments)
        }, this._bfs_isColumnHidden = this.isColumnHidden, this.isColumnHidden = function() {
            return parseInt(arguments[0]) < a ? this._fake.isColumnHidden.apply(this._fake, arguments) : this._bfs_isColumnHidden.apply(this, arguments)
        }, this._bfs_setColumnHidden = this.setColumnHidden, this.setColumnHidden = function() {
            return parseInt(arguments[0]) < a ? (this._fake.setColumnHidden.apply(this._fake, arguments), this._fake._correctSplit()) : this._bfs_setColumnHidden.apply(this, arguments)
        }, q = "cells2", this._bfs_cells2 = this[q], this[q] = function() {
            return arguments[1] < a ? this._fake.cells2.apply(this._fake, arguments) : this._bfs_cells2.apply(this, arguments)
        }, q = "cells3", this._bfs_cells3 = this[q], this[q] = function(b, c) {
            return arguments[1] < a && this._fake.rowsAr[arguments[0].idd] ? this._fake.rowsAr[b.idd] && 0 == this._fake.rowsAr[b.idd].childNodes.length ? this._bfs_cells3.apply(this, arguments) : (arguments[0] = arguments[0].idd, this._fake.cells.apply(this._fake, arguments)) : this._bfs_cells3.apply(this, arguments)
        }, q = "changeRowId", this._bfs_changeRowId = this[q], this[q] = function() {
            this._bfs_changeRowId.apply(this, arguments), this._fake.rowsAr[arguments[0]] && this._fake.changeRowId.apply(this._fake, arguments)
        }, this._fake.getRowById = function(a) {
            var b = this.rowsAr[a];
            if (!b && this._fake.rowsAr[a] && (b = this._fake.getRowById(a)), b) {
                if ("TR" != b.tagName) {
                    for (var c = 0; c < this.rowsBuffer.length; c++)
                        if (this.rowsBuffer[c] && this.rowsBuffer[c].idd == a) return this.render_row(c);
                    if (this._h2) return this.render_row(null, b.idd)
                }
                return b
            }
            return null
        }, this.collapseKids && (this._fake._bfs_collapseKids = this.collapseKids, this._fake.collapseKids = function(a) {
            return this._fake.collapseKids.apply(this._fake, [this._fake.rowsAr[a.idd]])
        }, this._bfs_collapseKids = this.collapseKids, this.collapseKids = function() {
            this._bfs_collapseKids.apply(this, arguments), this._fake._h2syncModel(), this._cssSP || this._fake._fixAlterCss()
        }, this._fake._bfs_expandKids = this.expandKids, this._fake.expandKids = function(a) {
            this._fake.expandKids.apply(this._fake, [this._fake.rowsAr[a.idd]]), this._cssSP || this._fake._fixAlterCss()
        }, this._bfs_expandAll = this.expandAll, this.expandAll = function() {
            this._bfs_expandAll(), this._fake._h2syncModel(), this._cssSP || this._fake._fixAlterCss()
        }, this._bfs_collapseAll = this.collapseAll, this.collapseAll = function() {
            this._bfs_collapseAll(), this._fake._h2syncModel(), this._cssSP || this._fake._fixAlterCss()
        }, this._bfs_expandKids = this.expandKids, this.expandKids = function() {
            this._bfs_expandKids.apply(this, arguments), this._fake._h2syncModel(), this._cssSP || this._fake._fixAlterCss()
        }, this._fake._h2syncModel = function() {
            this._fake.pagingOn ? this._fake._renderSort() : this._renderSort()
        }, this._updateTGRState = function(a) {
            return this._fake._updateTGRState(a)
        }), this._elmnh && (this._setRowHoverA = this._fake._setRowHoverA = this._setRowHover, this._unsetRowHoverA = this._fake._unsetRowHoverA = this._unsetRowHover, this._setRowHover = this._fake._setRowHover = function() {
            var a = this.grid;
            a._setRowHoverA.apply(this, arguments);
            var b = _isIE ? event.srcElement : arguments[0].target;
            (b = a._fake.rowsAr[a.getFirstParentOfType(b, "TD").parentNode.idd]) && a._fake._setRowHoverA.apply(a._fake.obj, [{
                target: b.childNodes[0]
            }, arguments[1]])
        }, this._unsetRowHover = this._fake._unsetRowHover = function() {
            var a = arguments[1] ? this : this.grid;
            a._unsetRowHoverA.apply(this, arguments), a._fake._unsetRowHoverA.apply(a._fake.obj, arguments)
        }, this._fake.enableRowsHover(!0, this._hvrCss), this.enableRowsHover(!1), this.enableRowsHover(!0, this._fake._hvrCss)), this._updateTGRState = function(a) {
            a.update && 0 != a.id && (this.rowsAr[a.id].imgTag && (this.rowsAr[a.id].imgTag.src = this.imgURL + a.state + ".gif"), this._fake.rowsAr[a.id] && this._fake.rowsAr[a.id].imgTag && (this._fake.rowsAr[a.id].imgTag.src = this.imgURL + a.state + ".gif"), a.update = !1)
        }, this.copy_row = function(b) {
            var c = b.cloneNode(!0);
            c._skipInsert = b._skipInsert;
            var d = a;
            if (c._attrs = {}, c._css = b._css, this._ecspn)
                for (var e = d = 0; d < c.childNodes.length && e < a; e += c.childNodes[d].colSpan || 1) d++;
            for (; c.childNodes.length > d;) c.removeChild(c.childNodes[c.childNodes.length - 1]);
            for (var f = d, e = 0; e < f; e++) this.dragAndDropOff && this.dragger.addDraggableItem(c.childNodes[e], this), c.childNodes[e].style.display = this._fake._hrrar && this._fake._hrrar[e] ? "none" : "", c.childNodes[e]._cellIndex = e, c.childNodes[e].combo_value = b.childNodes[e].combo_value, c.childNodes[e]._clearCell = b.childNodes[e]._clearCell, c.childNodes[e]._cellType = b.childNodes[e]._cellType, c.childNodes[e]._brval = b.childNodes[e]._brval, c.childNodes[e]._attrs = b.childNodes[e]._attrs, c.childNodes[e].chstate = b.childNodes[e].chstate, b._attrs.style && (c.childNodes[e].style.cssText += ";" + b._attrs.style), c.childNodes[e].colSpan > 1 && (this._childIndexes = this._fake._childIndexes);
            if (this._h2 && this._treeC < a) {
                var g = this._h2.get[b.idd];
                c.imgTag = c.childNodes[this._treeC].childNodes[0].childNodes[g.level], c.valTag = c.childNodes[this._treeC].childNodes[0].childNodes[g.level + 2]
            }
            return c.idd = b.idd, c.grid = this._fake, c
        }, q = "_insertRowAt", this._bfs_insertRowAt = this[q], this[q] = function() {
            var a = this._bfs_insertRowAt.apply(this, arguments);
            arguments[0] = this.copy_row(arguments[0]);
            var b = this._fake._insertRowAt.apply(this._fake, arguments);
            return a._fhd && (b.parentNode.removeChild(b), this._fake.rowsCol._dhx_removeAt(this._fake.rowsCol._dhx_find(b)), a._fhd = !1), a
        }, this._bfs_setSizes = this.setSizes, this.setSizes = function() {
            this._notresize || (this._bfs_setSizes(this, arguments), this.sync_headers(), this.sync_scroll() && this._ahgr && this.setSizes(), this._fake.entBox.style.height = this.entBox.style.height, this._fake.objBox.style.height = this.objBox.style.height, this._fake.hdrBox.style.height = this.hdrBox.style.height, this._fake.objBox.scrollTop = this.objBox.scrollTop, this._fake.setColumnSizes(this._fake.entBox.clientWidth), this.globalBox.style.width = parseInt(this.entBox.style.width) + parseInt(this._fake.entBox.style.width), this.globalBox.style.height = this.entBox.style.height)
        }, this.sync_scroll = this._fake.sync_scroll = function(a) {
            var b = this.objBox.style.overflowX;
            if (this.obj.offsetWidth <= this.objBox.offsetWidth) {
                if (!a) return this._fake.sync_scroll(!0);
                this.objBox.style.overflowX = "hidden", this._fake.objBox.style.overflowX = "hidden"
            } else this.objBox.style.overflowX = "scroll", this._fake.objBox.style.overflowX = "scroll";
            return b != this.objBox.style.overflowX
        }, this.sync_headers = this._fake.sync_headers = function() {
            if (!this.noHeader && this._fake.hdr.scrollHeight != this.hdr.offsetHeight)
                for (var b = 1; b < this.hdr.rows.length; b++) {
                    var c = this.hdr.rows[b].scrollHeight,
                        d = this._fake.hdr.rows[b].scrollHeight;
                    c != d && (this._fake.hdr.rows[b].style.height = this.hdr.rows[b].style.height = Math.max(c, d) + "px"), window._KHTMLrv && (this._fake.hdr.rows[b].childNodes[0].style.height = this.hdr.rows[b].childNodes[a].style.height = Math.max(c, d) + "px")
                }
        }, this._fake._bfs_setSizes = this._fake.setSizes, this._fake.setSizes = function() {
            this._fake._notresize || this._fake.setSizes()
        }, q = "_doOnScroll", this._bfs__doOnScroll = this[q], this[q] = function() {
            this._bfs__doOnScroll.apply(this, arguments), this._fake.objBox.scrollTop = this.objBox.scrollTop, this._fake._doOnScroll.apply(this._fake, arguments)
        }, q = "selectAll", this._bfs__selectAll = this[q], this[q] = function() {
            this._bfs__selectAll.apply(this, arguments), this._bfs__selectAll.apply(this._fake, arguments)
        }, q = "doClick", this._bfs_doClick = this[q], this[q] = function() {
            if (this._bfs_doClick.apply(this, arguments), "TD" == arguments[0].tagName) {
                var b = arguments[0]._cellIndex >= a;
                arguments[0].parentNode.idd && (b || (arguments[0].className = arguments[0].className.replace(/cellselected/g, "")), this._fake.rowsAr[arguments[0].parentNode.idd] || this._fake.render_row(this.getRowIndex(arguments[0].parentNode.idd)), arguments[0] = this._fake.cells(arguments[0].parentNode.idd, b ? 0 : arguments[0]._cellIndex).cell, b && (this._fake.cell = null), this._fake._bfs_doClick.apply(this._fake, arguments), b ? this._fake.cell = this.cell : this.cell = this._fake.cell, this._fake.onRowSelectTime && clearTimeout(this._fake.onRowSelectTime), b ? (arguments[0].className = arguments[0].className.replace(/cellselected/g, ""), globalActiveDHTMLGridObject = this, this._fake.cell = this.cell) : this.objBox.scrollTop = this._fake.objBox.scrollTop)
            }
        }, this._fake._bfs_doClick = this._fake[q], this._fake[q] = function() {
            if (this._bfs_doClick.apply(this, arguments), "TD" == arguments[0].tagName) {
                var b = arguments[0]._cellIndex < a;
                arguments[0].parentNode.idd && (arguments[0] = this._fake._bfs_cells(arguments[0].parentNode.idd, b ? a : arguments[0]._cellIndex).cell, this._fake.cell = null, this._fake._bfs_doClick.apply(this._fake, arguments), this._fake.cell = this.cell, this._fake.onRowSelectTime && clearTimeout(this._fake.onRowSelectTime), b) && (arguments[0].className = arguments[0].className.replace(/cellselected/g, ""), globalActiveDHTMLGridObject = this, this._fake.cell = this.cell, this._fake.objBox.scrollTop = this.objBox.scrollTop)
            }
        }, this.clearSelectionA = this.clearSelection, this.clearSelection = function(a) {
            a && this._fake.clearSelection(), this.clearSelectionA()
        }, this.moveRowUpA = this.moveRowUp, this.moveRowUp = function(a) {
            this._h2 || this._fake.moveRowUp(a), this.moveRowUpA(a), this._h2 && this._fake._h2syncModel()
        }, this.moveRowDownA = this.moveRowDown, this.moveRowDown = function(a) {
            this._h2 || this._fake.moveRowDown(a), this.moveRowDownA(a), this._h2 && this._fake._h2syncModel()
        }, this._fake.getUserData = function() {
            return this._fake.getUserData.apply(this._fake, arguments)
        }, this._fake.setUserData = function() {
            return this._fake.setUserData.apply(this._fake, arguments)
        }, this.getSortingStateA = this.getSortingState, this.getSortingState = function() {
            var a = this.getSortingStateA();
            return 0 != a.length ? a : this._fake.getSortingState()
        }, this.setSortImgStateA = this._fake.setSortImgStateA = this.setSortImgState, this.setSortImgState = function(b, c, d, e) {
            this.setSortImgStateA(b, c, d, e), 1 * c < a ? (this._fake.setSortImgStateA(b, c, d, e), this.setSortImgStateA(!1)) : this._fake.setSortImgStateA(!1)
        }, this._fake.doColResizeA = this._fake.doColResize, this._fake.doColResize = function(b, c, d, e, f) {
            var g = -1,
                h = 0;
            return arguments[1]._cellIndex == a - 1 ? (g = this._initalSplR + (b.clientX - e), this._initalSplF || (this._initalSplF = arguments[3] + this.objBox.scrollWidth - this.objBox.offsetWidth), this.objBox.scrollWidth == this.objBox.offsetWidth && (this._fake.alter_split_resize || b.clientX - e > 0) && (arguments[3] = this._initalSplF || arguments[3])) : this.obj.offsetWidth < this.entBox.offsetWidth && (g = this.obj.offsetWidth), h = this.doColResizeA.apply(this, arguments), this._correctSplit(g), this.resized = this._fake.resized = 1, h
        }, this._fake.changeCursorState = function(a) {
            var b = a.target || a.srcElement;
            if ("TD" != b.tagName && (b = this.getFirstParentOfType(b, "TD")), "TD" != b.tagName || !this._drsclmn || this._drsclmn[b._cellIndex]) {
                var c = (a.layerX || 0) + (_isIE || "DIV" != a.target.tagName ? 0 : b.offsetLeft),
                    d = parseInt(this.getPosition(b, this.hdrBox));
                b.style.cursor = b.offsetWidth - (a.offsetX || (d - c) * -1) < (_isOpera ? 20 : 10) || this.entBox.offsetWidth - (a.offsetX ? a.offsetX + b.offsetLeft : c) + this.objBox.scrollLeft - 0 < (_isOpera ? 20 : 10) ? "E-resize" : "default", _isOpera && (this.hdrBox.scrollLeft = this.objBox.scrollLeft)
            }
        }, this._fake.startColResizeA = this._fake.startColResize, this._fake.startColResize = function(a) {
            var b = this.startColResizeA(a);
            if (this._initalSplR = this.entBox.offsetWidth, this._initalSplF = null, this.entBox.onmousemove) {
                var c = this.entBox.parentNode;
                if (c._aggrid) return b;
                c._aggrid = c.grid, c.grid = this, this.entBox.parentNode.onmousemove = this.entBox.onmousemove, this.entBox.onmousemove = null
            }
            return b
        }, this._fake.stopColResizeA = this._fake.stopColResize, this._fake.stopColResize = function(a) {
            if (this.entBox.parentNode.onmousemove) {
                var b = this.entBox.parentNode;
                b.grid = b._aggrid, b._aggrid = null, this.entBox.onmousemove = this.entBox.parentNode.onmousemove, this.entBox.parentNode.onmousemove = null, this.obj.offsetWidth < this.entBox.offsetWidth && this._correctSplit(this.obj.offsetWidth)
            }
            return this.stopColResizeA(a)
        }, this.doKeyA = this.doKey, this._fake.doKeyA = this._fake.doKey, this._fake.doKey = this.doKey = function(b) {
            if (!b) return !0;
            if (this._htkebl) return !0;
            if ((b.target || b.srcElement).value !== window.undefined) {
                var c = b.target || b.srcElement;
                if (!c.parentNode || c.parentNode.className.indexOf("editable") == -1) return !0
            }
            switch (b.keyCode) {
                case 9:
                    if (b.shiftKey) {
                        if (this._realfake) {
                            if (this.cell && 0 == this.cell._cellIndex) {
                                if (b.preventDefault && b.preventDefault(), e = this._fake.rowsBuffer[this._fake.getRowIndex(this.cell.parentNode.idd) - 1]) {
                                    for (this._fake.showRow(e.idd), d = this._fake._cCount - 1;
                                        "none" == e.childNodes[d].style.display;) d--;
                                    this._fake.selectCell(this._fake.getRowIndex(e.idd), d, !1, !1, !0)
                                }
                                return !1
                            }
                        } else if (this.cell && this.cell._cellIndex == a) return b.preventDefault && b.preventDefault(), this._fake.selectCell(this.getRowIndex(this.cell.parentNode.idd), a - 1, !1, !1, !0), !1
                    } else {
                        if (this._realfake) {
                            if (this.cell && this.cell._cellIndex == a - 1) {
                                b.preventDefault && b.preventDefault();
                                for (var d = a; this._fake._hrrar && this._fake._hrrar[d];) d++;
                                return this._fake.selectCell(this._fake.getRowIndex(this.cell.parentNode.idd), d, !1, !1, !0), !1
                            }
                            var e = this.doKeyA(b);
                            return globalActiveDHTMLGridObject = this, e
                        }
                        if (this.cell) {
                            for (d = this.cell._cellIndex + 1; this.rowsCol[0].childNodes[d] && "none" == this.rowsCol[0].childNodes[d].style.display;) d++;
                            if (d == this.rowsCol[0].childNodes.length && (b.preventDefault && b.preventDefault(), e = this.rowsBuffer[this.getRowIndex(this.cell.parentNode.idd) + 1])) return this.showRow(e.idd), this._fake.selectCell(this._fake.getRowIndex(e.idd), 0, !1, !1, !0), !1
                        }
                    }
            }
            return this.doKeyA(b)
        }, this.editCellA = this.editCell, this.editCell = function() {
            return this.cell && this.cell.parentNode.grid != this ? this._fake.editCell() : this.editCellA()
        }, this.deleteRowA = this.deleteRow, this.deleteRow = function(a, b) {
            return this.deleteRowA(a, b) !== !1 && void(this._fake.rowsAr[a] && this._fake.deleteRow(a))
        }, this.clearAllA = this.clearAll, this.clearAll = function() {
            this.clearAllA(), this._fake.clearAll()
        }, this.editStopA = this.editStop, this.editStop = function() {
            this._fake.editor ? this._fake.editStop() : this.editStopA()
        }, this.attachEvent("onAfterSorting", function(b) {
            b >= a && this._fake.setSortImgState(!1)
        }), this._fake.sortField = function(a, b) {
            if (this._fake.sortField.call(this._fake, a, b, this._fake.hdr.rows[0].cells[a]), "na" != this.fldSort[a] && this._fake.fldSorted) {
                var c = this._fake.getSortingState()[1];
                this._fake.setSortImgState(!1), this.setSortImgState(!0, a, c)
            }
        }, this.sortTreeRowsA = this.sortTreeRows, this._fake.sortTreeRowsA = this._fake.sortTreeRows, this.sortTreeRows = this._fake.sortTreeRows = function(a, b, c, d) {
            return this._realfake ? this._fake.sortTreeRows(a, b, c, d) : (this.sortTreeRowsA(a, b, c, d), this._fake._h2syncModel(), this._fake.setSortImgStateA(!1), void(this._fake.fldSorted = null))
        }, this._fake._fillers = [], this._fake.rowsBuffer = this.rowsBuffer, this.attachEvent("onClearAll", function() {
            this._fake.rowsBuffer = this.rowsBuffer
        }), this._add_filler_s = this._add_filler, this._add_filler = function(a, b, c, d) {
            if (this._fake._fillers || (this._fake._fillers = []), this._realfake || !d) {
                var e;
                !c && this._fake._fillers.length || (c && c.idd ? e = this._fake.rowsAr[c.idd] : c && c.nextSibling && (e = {}, e.nextSibling = this._fake.rowsAr[c.nextSibling.idd], e.parentNode = e.nextSibling.parentNode), this._fake._fillers.push(this._fake._add_filler(a, b, e)))
            }
            return this._add_filler_s.apply(this, arguments)
        }, this._add_from_buffer_s = this._add_from_buffer, this._add_from_buffer = function() {
            var a = this._add_from_buffer_s.apply(this, arguments);
            return a != -1 && (this._fake._add_from_buffer.apply(this._fake, arguments), this.multiLine && this._correctRowHeight(this.rowsBuffer[arguments[0]].idd)), a
        }, this._fake.render_row = function(a) {
            var b = this._fake.render_row(a);
            return b == -1 ? -1 : b ? this.rowsAr[b.idd] = this.rowsAr[b.idd] || this._fake.copy_row(b) : null
        }, this._reset_view_s = this._reset_view, this._reset_view = function() {
            this._fake._reset_view(!0), this._fake._fillers = [], this._reset_view_s()
        }, this.moveColumn_s = this.moveColumn, this.moveColumn = function(b, c) {
            if (c >= a) return this.moveColumn_s(b, c)
        }, this.attachEvent("onCellChanged", function(b, c, d) {
            if (this._split_event && c < a && this.rowsAr[b]) {
                var e = this._fake.rowsAr[b];
                if (e) {
                    var e = e._childIndexes ? e.childNodes[e._childIndexes[c]] : e.childNodes[c],
                        f = this.rowsAr[b].childNodes[c];
                    f._treeCell && f.firstChild.lastChild ? f.firstChild.lastChild.innerHTML = d : f.innerHTML = e.innerHTML, f._clearCell = !1, f.combo_value = e.combo_value, f.chstate = e.chstate
                }
            }
        }), this._fake.combos = this.combos, this.setSizes(), this.rowsBuffer[0] && this._reset_view(), this.attachEvent("onXLE", function() {
            this._fake._correctSplit()
        }), this._fake._correctSplit()
    }, dhtmlXGridObject.prototype._correctSplit = function(a) {
        if (a = a || this.obj.scrollWidth - this.objBox.scrollLeft, a = Math.min(this.globalBox.offsetWidth, a), a > -1) {
            this.entBox.style.width = a + "px", this.objBox.style.width = a + "px";
            var b = (this.globalBox.offsetWidth - this.globalBox.clientWidth) / 2;
            if (this._fake.entBox.style.left = a + "px", this._fake.entBox.style.width = Math.max(0, this.globalBox.offsetWidth - a - (this.quirks ? 0 : 2) * b) + "px", this._fake.ftr && (this._fake.ftr.parentNode.style.width = this._fake.entBox.style.width), _isIE) {
                var c = _isIE && !window.xmlHttpRequest,
                    b = this.globalBox.offsetWidth - this.globalBox.clientWidth;
                this._fake.hdrBox.style.width = this._fake.objBox.style.width = Math.max(0, this.globalBox.offsetWidth - (c ? b : 0) - a) + "px"
            }
        }
    }, dhtmlXGridObject.prototype._correctRowHeight = function(a) {
        if (this.rowsAr[a] && this._fake.rowsAr[a]) {
            var b = this.rowsAr[a].offsetHeight,
                c = this._fake.rowsAr[a].offsetHeight,
                d = Math.max(b, c);
            d && (this.rowsAr[a].style.height = this._fake.rowsAr[a].style.height = d + "px", window._KHTMLrv) && (this.rowsAr[a].childNodes[this._fake._cCount].style.height = this._fake.rowsAr[a].firstChild.style.height = d + "px")
        }
    }, dhtmlXGridObject.prototype.enableSmartRendering = function(a, b, c) {
        arguments.length > 2 && (b && !this.rowsBuffer[b - 1] && (this.rowsBuffer[b - 1] = 0), b = c), this._srnd = convertStringToBoolean(a), this._srdh = this._srdh || 20, this._dpref = b || 0
    }, dhtmlXGridObject.prototype.enablePreRendering = function(a) {
        this._srnd_pr = parseInt(a || 50)
    }, dhtmlXGridObject.prototype.forceFullLoading = function(a, b) {
        for (var c = 0; c < this.rowsBuffer.length; c++)
            if (!this.rowsBuffer[c]) {
                var d = a || this.rowsBuffer.length - c;
                if (this.callEvent("onDynXLS", [c, d])) {
                    var e = this;
                    this.load(this.xmlFileUrl + getUrlSymbol(this.xmlFileUrl) + "posStart=" + c + "&count=" + d, function() {
                        window.setTimeout(function() {
                            e.forceFullLoading(a, b)
                        }, 100)
                    }, this._data_type)
                }
                return
            }
        b && b.call(this)
    }, dhtmlXGridObject.prototype.setAwaitedRowHeight = function(a) {
        this._srdh = parseInt(a)
    }, dhtmlXGridObject.prototype._get_view_size = function() {
        return Math.floor(parseInt(this.entBox.offsetHeight) / this._srdh) + 2
    }, dhtmlXGridObject.prototype._add_filler = function(a, b, c, d) {
        if (!b) return null;
        var e = "__filler__",
            f = this._prepareRow(e);
        f.firstChild.style.width = "1px";
        for (var g = 1; g < f.childNodes.length; g++) f.childNodes[g].style.display = "none";
        return f.firstChild.style.height = b * this._srdh + "px", (c = c || this.rowsCol[a]) && c.nextSibling ? c.parentNode.insertBefore(f, c.nextSibling) : _isKHTML ? this.obj.appendChild(f) : this.obj.rows[0].parentNode.appendChild(f), this.callEvent("onAddFiller", [a, b, f, c, d]), [a, b, f]
    }, dhtmlXGridObject.prototype._update_srnd_view = function() {
        var a = Math.floor(this.objBox.scrollTop / this._srdh),
            b = a + this._get_view_size();
        if (this.multiLine) {
            for (var c = this.objBox.scrollTop, a = 0; c > 0;) c -= this.rowsCol[a] ? this.rowsCol[a].offsetHeight : this._srdh, a++;
            b = a + this._get_view_size(), a > 0 && a--
        }
        b += this._srnd_pr || 0, b > this.rowsBuffer.length && (b = this.rowsBuffer.length);
        for (var d = a; d < b; d++)
            if (!this.rowsCol[d]) {
                var e = this._add_from_buffer(d);
                if (e == -1) {
                    if (this.xmlFileUrl) {
                        if (this._dpref && this.rowsBuffer[b - 1]) {
                            var f = (this._dpref ? this._dpref : b - d, Math.max(0, b - this._dpref));
                            this._current_load = [f, b - f]
                        } else this._current_load = [d, this._dpref ? this._dpref : b - d];
                        this.callEvent("onDynXLS", this._current_load) && this.load(this.xmlFileUrl + getUrlSymbol(this.xmlFileUrl) + "posStart=" + this._current_load[0] + "&count=" + this._current_load[1], this._data_type)
                    }
                    return
                }
                this._tgle && (this._updateLine(this._h2.get[this.rowsBuffer[d].idd], this.rowsBuffer[d]), this._updateParentLine(this._h2.get[this.rowsBuffer[d].idd], this.rowsBuffer[d])), d && d == (this._realfake ? this._fake : this)._r_select && this.selectCell(d, this.cell ? this.cell._cellIndex : 0, !0)
            }
        this._fake && !this._realfake && this.multiLine && (this._fake.objBox.scrollTop = this.objBox.scrollTop)
    }, dhtmlXGridObject.prototype._add_from_buffer = function(a) {
        var b = this.render_row(a);
        if (b == -1) return -1;
        if ((b._attrs.selected || b._attrs.select) && (this.selectRow(b, !1, !0), b._attrs.selected = b._attrs.select = null), this._cssSP) {
            if (this._h2) {
                var c = this._h2.get[b.idd];
                b.className += " " + (c.level % 2 ? this._cssUnEven + " " + this._cssUnEven : this._cssEven + " " + this._cssEven) + "_" + c.level + (this.rowsAr[c.id]._css || "")
            }
        } else this._cssEven && a % 2 == 0 ? b.className = this._cssEven + (b.className.indexOf("rowselected") != -1 ? " rowselected " : " ") + (b._css || "") : this._cssUnEven && a % 2 == 1 && (b.className = this._cssUnEven + (b.className.indexOf("rowselected") != -1 ? " rowselected " : " ") + (b._css || ""));
        for (var d = 0; d < this._fillers.length; d++) {
            var e = this._fillers[d];
            if (e && e[0] <= a && e[0] + e[1] > a) {
                var f = a - e[0];
                0 == f ? (this._insert_before(a, b, e[2]), this._update_fillers(d, -1, 1)) : f == e[1] - 1 ? (this._insert_after(a, b, e[2]), this._update_fillers(d, -1, 0)) : (this._fillers.push(this._add_filler(a + 1, e[1] - f - 1, e[2], 1)), this._insert_after(a, b, e[2]), this._update_fillers(d, -e[1] + f, 0));
                break
            }
        }
    }, dhtmlXGridObject.prototype._update_fillers = function(a, b, c) {
        var d = this._fillers[a];
        d[1] += b, d[0] += c, d[1] ? (d[2].firstChild.style.height = parseFloat(d[2].firstChild.style.height) + b * this._srdh + "px", this.callEvent("onUpdateFiller", [d[2]])) : (this.callEvent("onRemoveFiller", [d[2]]), d[2].parentNode.removeChild(d[2]), this._fillers.splice(a, 1))
    }, dhtmlXGridObject.prototype._insert_before = function(a, b, c) {
        c.parentNode.insertBefore(b, c), this.rowsCol[a] = b, this.callEvent("onRowInserted", [b, null, c, "before"])
    }, dhtmlXGridObject.prototype._insert_after = function(a, b, c) {
        c.nextSibling ? c.parentNode.insertBefore(b, c.nextSibling) : c.parentNode.appendChild(b), this.rowsCol[a] = b, this.callEvent("onRowInserted", [b, null, c, "after"])
    }, dhtmlXGridObject.prototype.enableAutoSizeSaving = function(a, b) {
        this.attachEvent("onResizeEnd", function() {
            this.saveSizeToCookie(a, b)
        })
    }, dhtmlXGridObject.prototype.saveOpenStates = function(a, b) {
        a || (a = this.entBox.id);
        var c = [];
        this._h2.forEachChild(0, function(a) {
            "minus" == a.state && c.push(a.id)
        });
        var d = "gridOpen" + (a || "") + "=" + c.join("|") + (b ? "; " + b : "");
        document.cookie = d
    }, dhtmlXGridObject.prototype.loadOpenStates = function(a) {
        var b = this.getCookie(a, "gridOpen");
        if (b)
            for (var b = b.split("|"), c = 0; c < b.length; c++) {
                var d = this.getParentId(b[c]);
                this.getOpenState(d) && this.openItem(b[c])
            }
    }, dhtmlXGridObject.prototype.enableAutoHiddenColumnsSaving = function(a, b) {
        this.attachEvent("onColumnHidden", function() {
            this.saveHiddenColumnsToCookie(a, b)
        })
    }, dhtmlXGridObject.prototype.enableSortingSaving = function(a, b) {
        this.attachEvent("onBeforeSorting", function() {
            var c = this;
            return window.setTimeout(function() {
                c.saveSortingToCookie(a, b)
            }, 1), !0
        })
    }, dhtmlXGridObject.prototype.enableOrderSaving = function(a, b) {
        this.attachEvent("onAfterCMove", function() {
            this.saveOrderToCookie(a, b), this.saveSizeToCookie(a, b)
        })
    }, dhtmlXGridObject.prototype.enableAutoSaving = function(a, b) {
        this.enableOrderSaving(a, b), this.enableAutoSizeSaving(a, b), this.enableSortingSaving(a, b)
    }, dhtmlXGridObject.prototype.saveSizeToCookie = function(a, b) {
        var c = "px" == this.cellWidthType ? this.cellWidthPX.join(",") : this.cellWidthPC.join(","),
            d = (this.initCellWidth || []).join(",");
        this.setCookie(a, b, 0, c), this.setCookie(a, b, 1, d)
    }, dhtmlXGridObject.prototype.saveHiddenColumnsToCookie = function(a, b) {
        var c = [].concat(this._hrrar || []);
        if (this._fake && this._fake._hrrar)
            for (var d = 0; d < this._fake._cCount; d++) c[d] = this._fake._hrrar[d] ? "1" : "";
        this.setCookie(a, b, 4, c.join(",").replace(/display:none;/g, "1"))
    }, dhtmlXGridObject.prototype.loadHiddenColumnsFromCookie = function(a) {
        for (var b = this._getCookie(a, 4), c = (b || "").split(","), d = 0; d < this._cCount; d++) this.setColumnHidden(d, !!c[d])
    }, dhtmlXGridObject.prototype.saveSortingToCookie = function(a, b) {
        this.setCookie(a, b, 2, (this.getSortingState() || []).join(","))
    }, dhtmlXGridObject.prototype.loadSortingFromCookie = function(a) {
        var b = this._getCookie(a, 2),
            b = (b || "").split(",");
        b.length > 1 && b[0] < this._cCount && (this.sortRows(b[0], null, b[1]), this.setSortImgState(!0, b[0], b[1]))
    }, dhtmlXGridObject.prototype.saveOrderToCookie = function(a, b) {
        if (!this._c_order) {
            this._c_order = [];
            for (var c = this._cCount, d = 0; d < c; d++) this._c_order[d] = d
        }
        this.setCookie(a, b, 3, (this._c_order || []).slice(0, this._cCount).join(",")), this.saveSortingToCookie()
    }, dhtmlXGridObject.prototype.loadOrderFromCookie = function(a) {
        var b = this._getCookie(a, 3),
            b = (b || "").split(",");
        if (b.length > 1 && b.length <= this._cCount)
            for (var c = 0; c < b.length; c++)
                if (!this._c_order && b[c] != c || this._c_order && b[c] != this._c_order[c]) {
                    var d = b[c];
                    if (this._c_order)
                        for (var e = 0; e < this._c_order.length; e++)
                            if (this._c_order[e] == b[c]) {
                                d = e;
                                break
                            }
                    this.moveColumn(1 * d, c)
                }
    }, dhtmlXGridObject.prototype.loadSizeFromCookie = function(a) {
        var b = this._getCookie(a, 1);
        if (b && (this.initCellWidth = b.split(",")), (b = this._getCookie(a, 0)) && b.length) {
            if (!this._fake && this._hrrar)
                for (var c = 0; c < b.length; c++) this._hrrar[c] && (b[c] = 0);
            "px" == this.cellWidthType ? this.cellWidthPX = b.split(",") : this.cellWidthPC = b.split(",")
        }
        return this.setSizes(), !0
    }, dhtmlXGridObject.prototype.clearConfigCookie = function(a) {
        a || (a = this.entBox.id);
        var b = "gridSettings" + a + "=||||";
        document.cookie = b
    }, dhtmlXGridObject.prototype.clearSizeCookie = dhtmlXGridObject.prototype.clearConfigCookie, dhtmlXGridObject.prototype.setCookie = function(a, b, c, d) {
        a || (a = this.entBox.id);
        var e = this.getCookie(a),
            e = (e || "||||").split("|");
        e[c] = d;
        var f = "gridSettings" + a + "=" + e.join("|").replace(/,/g, "-") + (b ? "; " + b : "");
        document.cookie = f
    }, dhtmlXGridObject.prototype.getCookie = function(a, b) {
        a || (a = this.entBox.id);
        var a = (b || "gridSettings") + a,
            c = a + "=";
        if (document.cookie.length > 0) {
            var d = document.cookie.indexOf(c);
            if (d != -1) {
                d += c.length;
                var e = document.cookie.indexOf(";", d);
                return e == -1 && (e = document.cookie.length), document.cookie.substring(d, e)
            }
        }
    }, dhtmlXGridObject.prototype._getCookie = function(a, b) {
        return (this.getCookie(a) || "||||").replace(/-/g, ",").split("|")[b]
    }, dhtmlXGridObject.prototype._process_html = function(a) {
        if (a.tagName && "TABLE" == a.tagName) return this._process_inner_html(a, 0);
        var b = document.createElement("DIV");
        b.innerHTML = a.xmlDoc.responseText;
        var c = b.getElementsByTagName("TABLE")[0];
        this._process_inner_html(c, 0)
    }, dhtmlXGridObject.prototype._process_inner_html = function(a, b) {
        for (var c = a.rows.length, d = b; d < c; d++) {
            var e = a.rows[d].getAttribute("id") || d;
            this.rowsBuffer.push({
                idd: e,
                data: a.rows[d],
                _parser: this._process_html_row,
                _locator: this._get_html_data
            })
        }
        this.render_dataset(), this.setSizes()
    }, dhtmlXGridObject.prototype._process_html_row = function(a, b) {
        var c = b.getElementsByTagName("TD"),
            d = [];
        a._attrs = this._xml_attrs(b);
        for (var e = 0; e < c.length; e++) {
            var f = c[e],
                g = f.getAttribute("type");
            if (a.childNodes[e] && (g && (a.childNodes[e]._cellType = g), a.childNodes[e]._attrs = this._xml_attrs(c[e])), f.firstChild ? d.push(f.innerHTML) : d.push(""), f.colSpan > 1) {
                a.childNodes[e]._attrs.colspan = f.colSpan;
                for (var h = 1; h < f.colSpan; h++) d.push("")
            }
        }
        for (; e < a.childNodes.length; e++) a.childNodes[e]._attrs = {};
        return this._fillRow(a, this._c_order ? this._swapColumns(d) : d), a
    }, dhtmlXGridObject.prototype._get_html_data = function(a, b) {
        for (a = a.firstChild;;) {
            if (!a) return "";
            if ("TD" == a.tagName && b--, b < 0) break;
            a = a.nextSibling
        }
        return a.firstChild ? a.firstChild.data : ""
    }, dhtmlxEvent(window, "load", function() {
        for (var a = document.getElementsByTagName("table"), b = 0; b < a.length; b++) "dhtmlxGrid" == a[b].className && dhtmlXGridFromTable(a[b])
    }), dhtmlXGridObject.prototype.enableUndoRedo = function() {
        var a = this,
            b = function() {
                return a._onEditUndoRedo.apply(a, arguments)
            };
        this.attachEvent("onEditCell", b);
        var c = function(b, c, d) {
            return a._onEditUndoRedo.apply(a, [2, b, c, d ? 1 : 0, d ? 0 : 1])
        };
        this.attachEvent("onCheckbox", c), this._IsUndoRedoEnabled = !0, this._UndoRedoData = [], this._UndoRedoPos = -1
    }, dhtmlXGridObject.prototype.disableUndoRedo = function() {
        this._IsUndoRedoEnabled = !1, this._UndoRedoData = [], this._UndoRedoPos = -1
    }, dhtmlXGridObject.prototype._onEditUndoRedo = function(a, b, c, d, e) {
        if (this._IsUndoRedoEnabled && 2 == a && e != d) {
            this._UndoRedoPos !== -1 && this._UndoRedoPos != this._UndoRedoData.length - 1 ? this._UndoRedoData = this._UndoRedoData.slice(0, this._UndoRedoPos + 1) : this._UndoRedoPos === -1 && this._UndoRedoData.length > 0 && (this._UndoRedoData = []);
            var f = {
                old_value: e,
                new_value: d,
                row_id: b,
                cell_index: c
            };
            this._UndoRedoData.push(f), this._UndoRedoPos++
        }
        return !0
    }, dhtmlXGridObject.prototype.doUndo = function() {
        if (this._UndoRedoPos === -1) return !1;
        var a = this._UndoRedoData[this._UndoRedoPos--],
            b = this.cells(a.row_id, a.cell_index);
        "tree" == this.getColType(a.cell_index) ? b.setLabel(a.old_value) : b.setValue(a.old_value), this.callEvent("onUndo", [a.row_id])
    }, dhtmlXGridObject.prototype.doRedo = function() {
        if (this._UndoRedoPos == this._UndoRedoData.length - 1) return !1;
        var a = this._UndoRedoData[++this._UndoRedoPos];
        this.cells(a.row_id, a.cell_index).setValue(a.new_value), this.callEvent("onUndo", [a.row_id])
    }, dhtmlXGridObject.prototype.getRedo = function() {
        return this._UndoRedoPos == this._UndoRedoData.length - 1 ? [] : this._UndoRedoData.slice(this._UndoRedoPos + 1)
    }, dhtmlXGridObject.prototype.getUndo = function() {
        return this._UndoRedoPos == -1 ? [] : this._UndoRedoData.slice(0, this._UndoRedoPos + 1)
    }, eXcell_sub_row.prototype = new eXcell, eXcell_sub_row_ajax.prototype = new eXcell_sub_row, eXcell_sub_row_grid.prototype = new eXcell_sub_row, dhtmlXGridObject.prototype._expandMonolite = function(a, b, c) {
        var d = this.parentNode,
            e = d.parentNode,
            f = e.grid;
        (a || window.event) && (!c && !e._expanded && f.editStop(), (a || event).cancelBubble = !0);
        var g = f.getUserData(e.idd, "__sub_row");
        if (f._sub_row_editor || (f._sub_row_editor = new eXcell_sub_row(d)), g) {
            if (e._expanded && !b) {
                f._sub_row_editor._setState("plus.gif", d), d._previous_content = e._expanded, f.objBox.removeChild(e._expanded), e._expanded = !1, e.style.height = (e.oldHeight || 20) + "px", d.style.height = (e.oldHeight || 20) + "px", f._fake && (f._fake.rowsAr[e.idd].style.height = (e.oldHeight || 20) + "px");
                for (var h = 0; h < e.cells.length; h++) e.cells[h].style.verticalAlign = "middle", e.cells[h].style.paddingTop = "0px";
                delete f._flow[e.idd], f._correctMonolite(), e._expanded.ctrl = null
            } else if (!e._expanded && !c) {
                if (f._sub_row_editor._setState("minus.gif", d), e.oldHeight = d.offsetHeight, d._previous_content) {
                    var i = d._previous_content;
                    i.ctrl = d, f.objBox.appendChild(i), f._detectHeight(i, d, parseInt(i.style.height))
                } else i = document.createElement("DIV"), i.ctrl = d, d._sub_row_type ? f._sub_row_render[d._sub_row_type](f, i, d, g) : i.innerHTML = g, i.style.cssText = "position:absolute; left:0px; top:0px; overflow:auto; font-family:Tahoma; font-size:8pt; margin-top:2px; margin-left:4px;", i.className = "dhx_sub_row", f.objBox.appendChild(i), f._detectHeight(i, d);
                f._flow || (f.attachEvent("onGridReconstructed", function() {
                    this.pagingOn && !this.parentGrid || this._srnd ? this._collapsMonolite() : this._correctMonolite()
                }), f.attachEvent("onResizeEnd", function() {
                    this._correctMonolite(!0)
                }), f.attachEvent("onAfterCMove", function() {
                    this._correctMonolite(!0)
                }), f.attachEvent("onDrop", function() {
                    this._correctMonolite(!0)
                }), f.attachEvent("onBeforePageChanged", function() {
                    return this._collapsMonolite(), !0
                }), f.attachEvent("onGroupStateChanged", function() {
                    return this._correctMonolite(), !0
                }), f.attachEvent("onFilterEnd", function() {
                    this._collapsMonolite()
                }), f.attachEvent("onUnGroup", function() {
                    this._collapsMonolite()
                }), f.attachEvent("onPageChanged", function() {
                    this._collapsMonolite()
                }), f.attachEvent("onXLE", function() {
                    this._collapsMonolite()
                }), f.attachEvent("onClearAll", function() {
                    for (var a in this._flow) this._flow[a] && this._flow[a].parentNode && this._flow[a].parentNode.removeChild(this._flow[a]);
                    this._flow = []
                }), f.attachEvent("onEditCell", function(a, b, c) {
                    return 2 !== a && this._flow[b] && "ch" != this.cellType[c] && "ra" != this.cellType[c] && this._expandMonolite.apply(this._flow[b].ctrl.firstChild, [0, !1, !0]), !0
                }), f.attachEvent("onCellChanged", function(a, b) {
                    if (this._flow[a]) {
                        var c = this.cells(a, b).cell;
                        c.style.verticalAlign = "top", c.style.paddingTop = "3px"
                    }
                }), f._flow = []), f._flow[e.idd] = i, f._correctMonolite();
                for (var j = f._srdh > 30 ? 11 : 3, h = 0; h < e.cells.length; h++) e.cells[h].style.verticalAlign = "top", e.cells[h].style.paddingTop = j + "px";
                if (f._fake)
                    for (var k = f._fake.rowsAr[e.idd], h = 0; h < k.cells.length; h++) k.cells[h].style.verticalAlign = "top", k.cells[h].style.paddingTop = j + "px";
                d.style.paddingTop = j - 1 + "px", e._expanded = i
            }
            f._ahgr && f.setSizes(), f.parentGrid && f.callEvent("onGridReconstructed", []), f.callEvent("onSubRowOpen", [e.idd, !!e._expanded])
        }
    }, dhtmlXGridObject.prototype._sub_row_render = {
        ajax: function(a, b, c, d) {
            b.innerHTML = "Loading...";
            var e = new dtmlXMLLoaderObject(function() {
                b.innerHTML = e.xmlDoc.responseText;
                var d = e.xmlDoc.responseText.match(/<script[^>]*>([^\f]+?)<\/script>/g);
                if (d)
                    for (var g = 0; g < d.length; g++) eval(d[g].replace(/<([\/]{0,1})s[^>]*>/g, ""));
                a._detectHeight(b, c), a._correctMonolite(), a.setUserData(c.parentNode.idd, "__sub_row", e.xmlDoc.responseText), c._sub_row_type = null, a._ahgr && a.setSizes(), a.callEvent("onSubAjaxLoad", [c.parentNode.idd, e.xmlDoc.responseText])
            }, this, !0, !0);
            e.loadXML(d)
        },
        grid: function(a, b, c, d) {
            c._sub_grid = new dhtmlXGridObject(b), a.skin_name && c._sub_grid.setSkin(a.skin_name), c._sub_grid.parentGrid = a, c._sub_grid.setImagePath(a.imgURL), c._sub_grid.enableAutoHeight(!0), c._sub_grid._delta_x = c._sub_grid._delta_y = null, c._sub_grid.attachEvent("onGridReconstructed", function() {
                a._detectHeight(b, c, c._sub_grid.objBox.scrollHeight + c._sub_grid.hdr.offsetHeight + (this.ftr ? this.ftr.offsetHeight : 0)), a._correctMonolite(), this.setSizes(), a.parentGrid && a.callEvent("onGridReconstructed", [])
            }), a.callEvent("onSubGridCreated", [c._sub_grid, c.parentNode.idd, c._cellIndex, d]) && c._sub_grid.loadXML(d, function() {
                a._detectHeight(b, c, c._sub_grid.objBox.scrollHeight + c._sub_grid.hdr.offsetHeight + (c._sub_grid.ftr ? c._sub_grid.ftr.offsetHeight : 0)), c._sub_grid.objBox.style.overflow = "hidden", a._correctMonolite(), c._sub_row_type = null, a.callEvent("onSubGridLoaded", [c._sub_grid, c.parentNode.idd, c._cellIndex, d]) && a._ahgr && a.setSizes()
            })
        }
    }, dhtmlXGridObject.prototype._detectHeight = function(a, b, c) {
        var d = b.offsetLeft + b.offsetWidth;
        a.style.left = d + "px", a.style.width = Math.max(0, b.parentNode.offsetWidth - d - 4) + "px", c = c || a.scrollHeight, a.style.overflow = "hidden", a.style.height = c + "px";
        var e = b.parentNode;
        if (b.parentNode.style.height = (e.oldHeight || 20) + 3 + 1 * c + "px", b.style.height = (e.oldHeight || 20) + 3 + 1 * c + "px", this._fake) {
            var f = this._fake.rowsAr[b.parentNode.idd];
            f.style.height = (e.oldHeight || 20) + 3 + 1 * c + "px"
        }
    }, dhtmlXGridObject.prototype._correctMonolite = function(a) {
        if (!this._in_correction) {
            this._in_correction = !0;
            for (var b in this._flow)
                if (this._flow[b] && "DIV" == this._flow[b].tagName)
                    if (this.rowsAr[b]) {
                        if ("none" == this.rowsAr[b].style.display) this.cells4(this._flow[b].ctrl).close();
                        else if (this._flow[b].style.top = this.rowsAr[b].offsetTop + (this.rowsAr[b].oldHeight || 20) + "px", a) {
                            var c = this._flow[b].ctrl.offsetLeft + this._flow[b].ctrl.offsetWidth;
                            this._flow[b].style.left = c + "px", this._flow[b].style.width = this.rowsAr[b].offsetWidth - c - 4 + "px"
                        }
                    } else this._flow[b].ctrl = null, this.objBox.removeChild(this._flow[b]), delete this._flow[b];
            this._in_correction = !1
        }
    }, dhtmlXGridObject.prototype._collapsMonolite = function() {
        for (var a in this._flow) this._flow[a] && "DIV" == this._flow[a].tagName && this.rowsAr[a] && this.cells4(this._flow[a].ctrl).close()
    }, dhtmlxValidation = function() {}, dhtmlxValidation.prototype = {
        trackInput: function(a, b, c, d) {
            dhtmlxEvent(a, "keyup", function() {
                dhtmlxValidation._timer && (window.clearTimeout(dhtmlxValidation._timer), dhtmlxValidation._timer = null), dhtmlxValidation._timer = window.setTimeout(function() {
                    dhtmlxValidation.checkInput(a, b) ? (a.className = a.className.replace(/[ ]*dhtmlx_live_validation_error/g, ""),
                        d && d(a, a.value, b)) : c && !c(a, a.value, b) || (a.className += " dhtmlx_live_validation_error")
                }, 250)
            })
        },
        checkInput: function(a, b) {
            return this.checkValue(a.value, b)
        },
        checkValue: function(a, b) {
            "string" == typeof b && (b = b.split(","));
            for (var c = !0, d = 0; d < b.length; d++) this["is" + b[d]] ? c = c && this["is" + b[d]](a) : alert("Incorrect validation rule: " + b[d]);
            return c
        },
        isEmpty: function(a) {
            return "" == a
        },
        isNotEmpty: function(a) {
            return "" == !a
        },
        isValidBoolean: function(a) {
            return !!a.toString().match(/^(0|1|true|false)$/)
        },
        isValidEmail: function(a) {
            return !!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)
        },
        isValidInteger: function(a) {
            return !!a.toString().match(/(^-?\d+$)/)
        },
        isValidNumeric: function(a) {
            return !!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)
        },
        isValidAplhaNumeric: function(a) {
            return !!a.toString().match(/^[_\-a-z0-9]+$/gi)
        },
        isValidDatetime: function(a) {
            var b = a.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);
            return b && !!(b[1] <= 9999 && b[2] <= 12 && b[3] <= 31 && b[4] <= 59 && b[5] <= 59 && b[6] <= 59) || !1
        },
        isValidDate: function(a) {
            var b = a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);
            return b && !!(b[1] <= 9999 && b[2] <= 12 && b[3] <= 31) || !1
        },
        isValidTime: function(a) {
            var b = a.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);
            return b && !!(b[1] <= 24 && b[2] <= 59 && b[3] <= 59) || !1
        },
        isValidIPv4: function(a) {
            var b = a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);
            return b && !!(b[1] <= 255 && b[2] <= 255 && b[3] <= 255 && b[4] <= 255) || !1
        },
        isValidCurrency: function(a) {
            return a.toString().match(/^\$?\s?\d+?[\.,\,]?\d+?\s?\$?$/) && !0 || !1
        },
        isValidSSN: function(a) {
            return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/) && !0 || !1
        },
        isValidSIN: function(a) {
            return a.toString().match(/^\d{9}$/) && !0 || !1
        }
    }, dhtmlxValidation = new dhtmlxValidation, dhtmlXGridObject.prototype.enableValidation = function(a, b) {
        this._validators = !!(a = convertStringToBoolean(a)) && {
            data: []
        }, arguments.length > 1 && (this._validators._live = b), this._validators._event || (this._validators._event = this.attachEvent("onEditCell", this.validationEvent))
    }, dhtmlXGridObject.prototype.setColValidators = function(a) {
        this._validators || this.enableValidation(!0), "string" == typeof a && (a = a.split(this.delim)), this._validators.data = a
    }, dhtmlXGridObject.prototype.validationEvent = function(a, b, c, d) {
        var e = this._validators;
        if (!e) return !0;
        var f = e.data[c] || this.cells(b, c).getAttribute("validate") || "";
        if (1 == a && f) {
            var g = this.editor || (this._fake || {}).editor;
            if (!g) return !0;
            if (g.cell.className = g.cell.className.replace(/[ ]*dhtmlx_validation_error/g, ""), e._live) {
                var h = this;
                dhtmlxValidation.trackInput(g.getInput(), f, function(a, d, e) {
                    return h.callEvent("onLiveValidationError", [b, c, d, a, e])
                }, function(a, d, e) {
                    return h.callEvent("onLiveValidationCorrect", [b, c, d, a, e])
                })
            }
        }
        return 2 == a && this.validateCell(b, c, f, d), !0
    }, dhtmlXGridObject.prototype.validateCell = function(a, b, c, d) {
        if (c = c || this._validators.data[b] || this.cells(a, b).getAttribute("validate"), d = d || this.cells(a, b).getValue(), c) {
            var e = this.cells(a, b).cell,
                f = !0;
            "string" == typeof c && (c = c.split(this.delim));
            for (var g = 0; g < c.length; g++) dhtmlxValidation.checkValue(d, c[g]) || (this.callEvent("onValidationError", [a, b, d, c[g]]) && (e.className += " dhtmlx_validation_error"), f = !1);
            return f && (this.callEvent("onValidationCorrect", [a, b, d, c]), e.className = e.className.replace(/[ ]*dhtmlx_validation_error/g, "")), f
        }
    }, dhtmlXGridObject.prototype.startFastOperations = function() {
        this._disF = ["setSizes", "callEvent", "_fixAlterCss", "cells4", "forEachRow"], this._disA = [];
        for (var a = this._disF.length - 1; a >= 0; a--) this._disA[a] = this[this._disF[a]], this[this._disF[a]] = function() {
            return !0
        };
        this._cellCache = [], this.cells4 = function(a) {
            var b = this._cellCache[a._cellIndex];
            return b || (b = this._cellCache[a._cellIndex] = this._disA[3].apply(this, [a]), b.destructor = function() {
                return !0
            }, b.setCValue = function(a) {
                b.cell.innerHTML = a
            }), b.cell = a, b.combo = a._combo || this.combos[a._cellIndex], b
        }
    }, dhtmlXGridObject.prototype.stopFastOperations = function() {
        if (this._disF) {
            for (var a = this._disF.length - 1; a >= 0; a--) this[this._disF[a]] = this._disA[a];
            this.setSizes(), this.callEvent("onGridReconstructed", [])
        }
    }, dhtmlXGridObject.prototype.enableMarkedCells = function(a) {
        this.markedRowsArr = new dhtmlxArray(0), this.markedCellsArr = [], this.lastMarkedColumn = this.lastMarkedRow = null, this.markedCells = !0, this.lastMarkMethod = 0, arguments.length > 0 && !convertStringToBoolean(a) && (this.markedCells = !1)
    }, dhtmlXGridObject.prototype.doMark = function(a, b) {
        var c = a.parentNode.idd;
        if (this.setActive(!0), c) {
            this.editStop(), this.cell = a, this.row = a.parentNode;
            var d = a._cellIndex;
            if (b || (b = 0), 0 == b) this.unmarkAll();
            else if (1 == b) {
                if (this.lastMarkedRow)
                    for (var e = Math.min(this.getRowIndex(c), this.getRowIndex(this.lastMarkedRow)), f = Math.max(this.getRowIndex(c), this.getRowIndex(this.lastMarkedRow)), g = Math.min(d, this.lastMarkedColumn), h = Math.max(d, this.lastMarkedColumn), i = e; i < f + 1; i++)
                        for (var j = g; j < h + 1; j++) this.mark(this.getRowId(i), j, !0)
            } else if (2 == b && this.markedRowsArr._dhx_find(c) != -1)
                for (var k = 0; k < this.markedCellsArr[c].length; k++)
                    if (this.markedCellsArr[c][k] == d) return this.mark(c, d, !1), !0;
            this.markedCellsArr[c] || (this.markedCellsArr[c] = new dhtmlxArray(0)), 1 != b && this.mark(c, d), this.moveToVisible(this.cells(c, d).cell), this.lastMarkedRow = c, this.lastMarkedColumn = d, this.lastMarkMethod = b
        }
    }, dhtmlXGridObject.prototype.mark = function(a, b, c) {
        if (arguments.length > 2 && !convertStringToBoolean(c)) {
            if (this.cells(a, b).cell.className = this.cells(a, b).cell.className.replace(/cellselected/g, ""), this.markedRowsArr._dhx_find(a) != -1) {
                var d = this.markedCellsArr[a]._dhx_find(b);
                d != -1 && (this.markedCellsArr[a]._dhx_removeAt(d), 0 == this.markedCellsArr[a].length && this.markedRowsArr._dhx_removeAt(this.markedRowsArr._dhx_find(a)), this.callEvent("onCellUnMarked", [a, b]))
            }
            return !0
        }
        this.cells(a, b).cell.className += " cellselected", this.markedRowsArr._dhx_find(a) == -1 && (this.markedRowsArr[this.markedRowsArr.length] = a), this.markedCellsArr[a] || (this.markedCellsArr[a] = new dhtmlxArray(0)), this.markedCellsArr[a]._dhx_find(b) == -1 && (this.markedCellsArr[a][this.markedCellsArr[a].length] = b, this.callEvent("onCellMarked", [a, b]))
    }, dhtmlXGridObject.prototype.unmarkAll = function() {
        if (this.markedRowsArr) {
            for (var a = 0; a < this.markedRowsArr.length; a++) {
                var b = this.markedRowsArr[a];
                if (this.rowsAr[b])
                    for (var c = 0; c < this.markedCellsArr[b].length; c++) this.callEvent("onCellUnMarked", [b, this.markedCellsArr[b][c]]), this.cells(b, this.markedCellsArr[b][c]).cell.className = this.cells(b, this.markedCellsArr[b][c]).cell.className.replace(/cellselected/g, "")
            }
            this.markedRowsArr = new dhtmlxArray(0), this.markedCellsArr = []
        }
        return !0
    }, dhtmlXGridObject.prototype.getMarked = function() {
        var a = [];
        if (this.markedRowsArr)
            for (var b = 0; b < this.markedRowsArr.length; b++)
                for (var c = this.markedRowsArr[b], d = 0; d < this.markedCellsArr[c].length; d++) a[a.length] = [c, this.markedCellsArr[c][d]];
        return a
    }, eXcell_dhxCalendar.prototype = new eXcell, eXcell_dhxCalendar.prototype.edit = function() {
        var a = this.grid.getPosition(this.cell);
        this.grid._grid_calendarA._show(!1, !1), this.grid._grid_calendarA.setPosition(a[0], a[1] + this.cell.offsetHeight), this.grid._grid_calendarA._last_operation_calendar = !1, this.grid.callEvent("onCalendarShow", [this.grid._grid_calendarA, this.cell.parentNode.idd, this.cell._cellIndex]), this.cell._cediton = !0, this.val = this.cell.val, this._val = this.cell.innerHTML;
        var b = this.grid._grid_calendarA.draw;
        this.grid._grid_calendarA.draw = function() {}, this.grid._grid_calendarA.setDateFormat(this.grid._dtmask || "%d/%m/%Y"), this.grid._grid_calendarA.setDate(this.val || new Date), this.grid._grid_calendarA.draw = b
    }, eXcell_dhxCalendar.prototype.getDate = function() {
        return this.cell.val ? this.cell.val : null
    }, eXcell_dhxCalendar.prototype.getValue = function() {
        return this.cell._clearCell ? "" : this.grid._dtmask_inc && this.cell.val ? this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc, this.cell.val).toString() : this.cell.innerHTML.toString()._dhx_trim()
    }, eXcell_dhxCalendar.prototype.detach = function() {
        if (this.grid._grid_calendarA && (this.grid._grid_calendarA.hide(), this.cell._cediton)) {
            if (this.cell._cediton = !1, this.grid._grid_calendarA._last_operation_calendar) {
                var a = this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask || "%d/%m/%Y"),
                    b = this.grid._grid_calendarA.getDate();
                this.cell.val = new Date(b), this.setCValue(a, b), this.cell._clearCell = !a;
                var c = this.val;
                return this.val = this._val, this.cell.val.valueOf() != c
            }
            return !1
        }
    }, eXcell_dhxCalendar.prototype.setValue = function(a) {
        a && "object" == typeof a ? (this.cell.val = a, this.cell._clearCell = !1, this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask || "%d/%m/%Y", a).toString(), this.cell.val)) : (a && "" != a.toString()._dhx_trim() ? (this.cell._clearCell = !1, this.cell.val = new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc || this.grid._dtmask || "%d/%m/%Y", a.toString(), null, !0)), this.grid._dtmask_inc && (a = this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask || "%d/%m/%Y", this.cell.val))) : (a = "&nbsp", this.cell._clearCell = !0, this.cell.val = ""), "NaN" == this.cell.val || "Invalid Date" == this.cell.val ? (this.cell._clearCell = !0, this.cell.val = new Date, this.setCValue("&nbsp;", 0)) : this.setCValue((a || "").toString(), this.cell.val))
    }, eXcell_dhxCalendarA.prototype = new eXcell, eXcell_dhxCalendarA.prototype.edit = function() {
        var a = this.grid.getPosition(this.cell);
        this.grid._grid_calendarA._show(!1, !1), this.grid._grid_calendarA.setPosition(1 * a[0] + this.cell.offsetWidth, 1 * a[1]), this.grid.callEvent("onCalendarShow", [this.grid._grid_calendarA, this.cell.parentNode.idd, this.cell._cellIndex]), this.grid._grid_calendarA._last_operation_calendar = !1, this.cell._cediton = !0, this.val = this.cell.val, this._val = this.cell.innerHTML;
        var b = this.grid._grid_calendarA.draw;
        this.grid._grid_calendarA.draw = function() {}, this.grid._grid_calendarA.setDateFormat(this.grid._dtmask || "%d/%m/%Y"), this.grid._grid_calendarA.setDate(this.val), this.grid._grid_calendarA.draw = b, this.grid._grid_calendarA.draw(), this.cell.atag = !this.grid.multiLine && (_isKHTML || _isMacOS || _isFF) ? "INPUT" : "TEXTAREA", this.obj = document.createElement(this.cell.atag), this.obj.style.height = this.cell.offsetHeight - (_isIE ? 4 : 2) + "px", this.obj.className = "dhx_combo_edit", this.obj.wrap = "soft", this.obj.style.textAlign = this.cell.align, this.obj.onclick = function(a) {
            (a || event).cancelBubble = !0
        }, this.obj.onmousedown = function(a) {
            (a || event).cancelBubble = !0
        }, this.obj.value = this.getValue(), this.cell.innerHTML = "", this.cell.appendChild(this.obj), _isFF && (this.obj.style.overflow = "visible", this.grid.multiLine && this.obj.offsetHeight >= 18 && this.obj.offsetHeight < 40) && (this.obj.style.height = "36px", this.obj.style.overflow = "scroll"), this.obj.onselectstart = function(a) {
            return a || (a = event), a.cancelBubble = !0
        }, this.obj.focus(), this.obj.focus()
    }, eXcell_dhxCalendarA.prototype.getDate = function() {
        return this.cell.val ? this.cell.val : null
    }, eXcell_dhxCalendarA.prototype.getValue = function() {
        return this.cell._clearCell ? "" : this.grid._dtmask_inc && this.cell.val ? this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc, this.cell.val).toString() : this.cell.innerHTML.toString()._dhx_trim()
    }, eXcell_dhxCalendarA.prototype.detach = function() {
        if (this.grid._grid_calendarA && (this.grid._grid_calendarA.hide(), this.cell._cediton)) {
            if (this.cell._cediton = !1, this.grid._grid_calendarA._last_operation_calendar) {
                this.grid._grid_calendarA._last_operation_calendar = !1;
                var a = this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask || "%d/%m/%Y"),
                    b = this.grid._grid_calendarA.getDate();
                this.cell.val = new Date(b), this.setCValue(a, b), this.cell._clearCell = !a;
                var c = this.val;
                return this.val = this._val, this.cell.val.valueOf() != (0 | c).valueOf()
            }
            return this.setValue(this.obj.value), c = this.val, this.val = this._val, this.cell.val.valueOf() != (c || "").valueOf()
        }
    }, eXcell_dhxCalendarA.prototype.setValue = function(a) {
        a && "object" == typeof a ? (this.cell.val = a, this.cell._clearCell = !1, this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask || "%d/%m/%Y", a).toString(), this.cell.val)) : (a && "" != a.toString()._dhx_trim() ? (this.cell._clearCell = !1, this.cell.val = new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc || this.grid._dtmask || "%d/%m/%Y", a.toString(), null, !0)), this.grid._dtmask_inc && (a = this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask || "%d/%m/%Y", this.cell.val))) : (a = "&nbsp", this.cell._clearCell = !0, this.cell.val = ""), "NaN" == this.cell.val || "Invalid Date" == this.cell.val ? (this.cell.val = new Date, this.cell._clearCell = !0, this.setCValue("&nbsp;", 0)) : this.setCValue((a || "").toString(), this.cell.val))
    }, dhtmlXGridObject.prototype._init_point_bcg = dhtmlXGridObject.prototype._init_point, dhtmlXGridObject.prototype._init_point = function() {
        window.dhx_globalImgPath || (window.dhx_globalImgPath = this.imgURL), this._col_combos = [];
        for (var a = 0; a < this._cCount; a++) 0 == this.cellType[a].indexOf("combo") && (this._col_combos[a] = eXcell_combo.prototype.initCombo.call({
            grid: this
        }, a));
        this._loading_handler_set || (this._loading_handler_set = this.attachEvent("onXLE", function(a, b, c, d) {
            eXcell_combo.prototype.fillColumnCombos(this, d), this.detachEvent(this._loading_handler_set), this._loading_handler_set = null
        })), this._init_point_bcg && this._init_point_bcg()
    }, eXcell_combo.prototype = new eXcell, eXcell_combo_v = function(a) {
        var b = new eXcell_combo(a);
        return a.style.paddingLeft = "0px", a.style.paddingRight = "0px", b._combo_pre = "<img src='" + (window.dhx_globalImgPath ? window.dhx_globalImgPath : this.grid.imgURL) + "combo_select" + (dhtmlx.skin ? "_" + dhtmlx.skin : "") + ".gif' style='position:absolute;z-index:1;top:0px;right:0px;'/>", b
    }, eXcell_combo.prototype.initCombo = function(a) {
        var b = document.createElement("DIV"),
            c = this.grid.defVal[arguments.length ? a : this.cell._cellIndex],
            d = new dhtmlXCombo(b, "combo", 0, c);
        this.grid.defVal[arguments.length ? a : this.cell._cellIndex] = "", d.DOMelem.className += " fake_editable";
        var e = this.grid;
        return d.DOMelem.onselectstart = function() {
            return event.cancelBubble = !0
        }, d.attachEvent("onKeyPressed", function(a) {
            13 != a && 27 != a || (e.editStop(), e._fake && e._fake.editStop())
        }), dhtmlxEvent(d.DOMlist, "click", function() {
            e.editStop(), e._fake && e._fake.editStop()
        }), d.DOMelem.style.border = "0px", d.DOMelem.style.height = "18px", d
    }, eXcell_combo.prototype.fillColumnCombos = function(a, b) {
        if (b) {
            a.combo_columns = a.combo_columns || [], columns = a.xmlLoader.doXPath("//column", b);
            for (var c = 0; c < columns.length; c++) 0 == (columns[c].getAttribute("type") || "").indexOf("combo") && (a.combo_columns[a.combo_columns.length] = c, this.setComboOptions(a._col_combos[c], columns[c], a, c))
        }
    }, eXcell_combo.prototype.setComboCValue = function(a, b) {
        "" != this._combo_pre && (a = "<div style='width:100%;position:relative;height:100%;overflow:hidden;line-height:20px'>" + this._combo_pre + "<span>" + a + "</span></div>"), arguments.length > 1 ? this.setCValue(a, b) : this.setCValue(a)
    }, eXcell_combo.prototype.setComboOptions = function(a, b, c, d, e) {
        if (convertStringToBoolean(b.getAttribute("xmlcontent")) && !b.getAttribute("source")) {
            options = b.childNodes;
            for (var f = [], g = 0; g < options.length; g++)
                if ("option" == options[g].tagName) {
                    var h = options[g].firstChild ? options[g].firstChild.data : "";
                    f[f.length] = [options[g].getAttribute("value"), h]
                }
            if (a.addOption(f), 4 == arguments.length) c.forEachRowA(function(b) {
                var e = c.cells(b, d);
                !e.cell._brval && !e.cell._cellType && e.cell._cellIndex == d && ("" == e.cell.combo_value ? e.setComboCValue("&nbsp;", "") : a.getOption(e.cell.combo_value) ? e.setComboCValue(a.getOption(e.cell.combo_value).text) : e.setComboCValue(e.cell.combo_value))
            });
            else {
                var i = this.cell ? this : c.cells(e, d);
                b.getAttribute("text") ? "" == b.getAttribute("text")._dhx_trim() ? i.setComboCValue("&nbsp;", "") : i.setComboCValue(b.getAttribute("text")) : i.cell.combo_value && "" != i.cell.combo_value._dhx_trim() ? a.getOption(i.cell.combo_value) ? i.setComboCValue(a.getOption(i.cell.combo_value).text) : i.setComboCValue(i.cell.combo_value) : i.setComboCValue("&nbsp;", "")
            }
        }
        if (b.getAttribute("source"))
            if (b.getAttribute("auto") && convertStringToBoolean(b.getAttribute("auto"))) b.getAttribute("xmlcontent") ? (i = this.cell ? this : c.cells(e, d), b.getAttribute("text") && i.setComboCValue(b.getAttribute("text"))) : c.forEachRowA(function(a) {
                var b = c.cells(a, d);
                if (!b.cell._brval && !b.cell._cellType) {
                    var e = b.cell.combo_value.toString();
                    if (e.indexOf("^") != -1) {
                        var f = e.split("^");
                        b.cell.combo_value = f[0], b.setComboCValue(f[1])
                    }
                }
            }), a.enableFilteringMode(!0, b.getAttribute("source"), convertStringToBoolean(b.getAttribute("cache") || !0), convertStringToBoolean(b.getAttribute("sub") || !1));
            else {
                var j = arguments.length;
                a.loadXML(b.getAttribute("source"), function() {
                    if (4 == j) c.forEachRow(function(b) {
                        var e = c.cells(b, d);
                        e.cell._brval || e.cell._cellType || (a.getOption(e.cell.combo_value) ? e.setComboCValue(a.getOption(e.cell.combo_value).text) : "" == (e.cell.combo_value || "").toString()._dhx_trim() ? (e.setComboCValue("&nbsp;", ""), e.cell._clearCell = !0) : e.setComboCValue(e.cell.combo_value))
                    });
                    else {
                        var b = c.cells(e, d);
                        a.getOption(b.cell.combo_value) ? b.setComboCValue(a.getOption(b.cell.combo_value).text) : b.setComboCValue(b.cell.combo_value)
                    }
                })
            }
        b.getAttribute("auto") && convertStringToBoolean(b.getAttribute("auto")) || (b.getAttribute("editable") && !convertStringToBoolean(b.getAttribute("editable")) && a.readonly(!0), b.getAttribute("filter") && convertStringToBoolean(b.getAttribute("filter")) && a.enableFilteringMode(!0))
    }, eXcell_combo.prototype.getCellCombo = function() {
        return this.cell._brval || (this.cell._brval = this.initCombo()), this.cell._brval
    }, eXcell_combo.prototype.refreshCell = function() {
        this.setValue(this.getValue())
    }, dhtmlXGridObject.prototype.getColumnCombo = function(a) {
        return this._col_combos && this._col_combos[a] || (this._col_combos || (this._col_combos = []), this._col_combos[a] = eXcell_combo.prototype.initCombo.call({
            grid: this
        }, a)), this._col_combos[a]
    }, dhtmlXGridObject.prototype.refreshComboColumn = function(a) {
        this.forEachRow(function(b) {
            this.cells(b, a).refreshCell && this.cells(b, a).refreshCell()
        })
    }, dhtmlXGridObject.prototype.resetCounter = function(a) {
        this._fake && !this._realfake && a < this._fake._cCount && this._fake.resetCounter(a, this.currentPage);
        var b = a || 0;
        for (this.currentPage && (b = (this.currentPage - 1) * this.rowsBufferOutSize), b = 0; b < this.rowsBuffer.length; b++) this.rowsBuffer[b] && "TR" == this.rowsBuffer[b].tagName && this.rowsAr[this.rowsBuffer[b].idd] && (this.rowsAr[this.rowsBuffer[b].idd].childNodes[a].innerHTML = b + 1)
    }, eXcell_cntr.prototype = new eXcell, eXcell_link.prototype = new eXcell, eXcell_link.prototype.getTitle = function() {
        var a = this.cell.firstChild;
        return a && a.tagName ? a.getAttribute("href") : ""
    }, eXcell_link.prototype.getContent = function() {
        var a = this.cell.firstChild;
        return a && a.tagName ? a.innerHTML : ""
    }, eXcell_clist.prototype = new eXcell, eXcell_clist.prototype.setValue = function(a) {
        if ("object" == typeof a) {
            var b = this.grid.xmlLoader.doXPath("./option", a);
            b.length && (this.cell._combo = []);
            for (var c = 0; c < b.length; c++) this.cell._combo.push(b[c].firstChild ? b[c].firstChild.data : "");
            a = a.firstChild.data
        }
        "" === a || a === this.undefined ? (this.setCTxtValue(" ", a), this.cell._clearCell = !0) : (this.setCTxtValue(a), this.cell._clearCell = !1)
    }, dhtmlXGridObject.prototype.registerCList = function(a, b) {
        this.clists || (this.clists = []), "object" != typeof b && (b = b.split(",")), this.clists[a] = b
    }, eXcell_ra_str.prototype = new eXcell_ch, eXcell_ra_str.prototype.setValue = function(a) {
        if (this.cell.style.verticalAlign = "middle", a && (a = a.toString()._dhx_trim(), "false" == a || "0" == a) && (a = ""), a) {
            if (this.grid.rowsAr[this.cell.parentNode.idd])
                for (var b = 0; b < this.grid._cCount; b++)
                    if (b !== this.cell._cellIndex) {
                        var c = this.grid.cells(this.cell.parentNode.idd, b);
                        "ra_str" == (c.cell._cellType || this.grid.cellType[c.cell._cellIndex]) && c.getValue() && c.setValue("0")
                    }
            a = "1", this.cell.chstate = "1"
        } else a = "0", this.cell.chstate = "0";
        this.setCValue("<img src='" + this.grid.imgURL + "radio_chk" + a + ".gif' onclick='new eXcell_ra_str(this.parentNode).changeState()'>", this.cell.chstate)
    }, dhtmlXLayoutObject.prototype.unload = function() {
        this._isIPad ? (document.removeEventListener("touchmove", this._doOnMouseMove, !1), document.removeEventListener("touchend", this._doOnMouseUp, !1)) : "function" == typeof window.addEventListener ? (document.body.removeEventListener("mousemove", this._doOnMouseMove, !1), document.body.removeEventListener("mouseup", this._doOnMouseUp, !1)) : (document.body.detachEvent("onselectstart", this._doOnSelectStart), document.body.detachEvent("onmousemove", this._doOnMouseMove), document.body.detachEvent("onmouseup", this._doOnMouseUp)), this._doOnMouseUp = this._doOnMouseMove = this._doOnSelectStart = null;
        for (var a in this.polyObj) {
            var b = this.polyObj[a];
            b._isCell = null, b.skin = null, b.getId = null, b.getIndex = null, b.showHeader = null, b.hideHeader = null, b.isHeaderVisible = null, b.setText = null, b.getText = null, b.expand = null, b.collapse = null, b.isCollapsed = null, b.dock = null, b.undock = null, b.setWidth = null, b.getWidth = null, b.setHeight = null, b.getHeight = null, b.fixSize = null, b.progressOn = null, b.progressOff = null, b._doOnAttachMenu = null, b._doOnAttachToolbar = null, b._doOnAttachStatusBar = null, b._collapsed = null, b._idd = null, b._ind = null, b._rowData = null, b._dir = null, b._initCPanel = null, b._minW = null, b._minH = null, b._resize = null, b._savedH = null, b._savedW = null, b.ondblclick = null;
            var c = b.childNodes[0].childNodes[0];
            c.className = "", c._dockCell = null, c._resize = null, c._h = null, c.ondblclick = null, c.childNodes[4].onclick = null;
            for (var d = 0; d < c.childNodes.length; d++) c.childNodes[d].onselectstart = null;
            for (; c.childNodes.length > 0;) c.removeChild(c.childNodes[0]);
            c.parentNode.removeChild(c), c = null, b._dhxContDestruct(), b._dhxContDestruct = null, b.removeChild(b.childNodes[0]), b.parentNode.removeChild(b), b = null
        }
        for (a in this.polyObj) this.polyObj[a] = null;
        for (var e = 0; e < this.items.length; e++) this.items[e] = null;
        this.items = this.polyObj = null;
        for (var f = this.tpl.childNodes[0]; f.childNodes.length > 0;) {
            for (; f.childNodes[0].childNodes.length > 0;) {
                for (d = f.childNodes[0].childNodes[0], d._top = null, d._bottom = null, d._left = null, d._right = null, d._dblClick = null, d._isSep = null, d._dir = null, d._lastClick = null, d.ondblclick = null, d.onmousedown = null, d.onmouseup = null, d.onselectstart = null; d.childNodes.length > 0;) d.removeChild(d.childNodes[0]);
                d.parentNode.removeChild(d), d = null
            }
            f.removeChild(f.childNodes[0])
        }
        f.parentNode.removeChild(f), f = null, this.tpl.parentNode.removeChild(this.tpl), this.tpl = null;
        for (a in this.sepHor) this.sepHor[a] = null;
        for (a in this.sepVer) this.sepVer[a] = null;
        if (this.sepVer = this.sepHor = null, this._ha) {
            for (this.detachEvent(this._haEv), this._haEv = null; this._ha.childNodes.length > 0;) this._ha.removeChild(this._ha.childNodes[0]);
            this._ha.parentNode.removeChild(this._ha), this._ha = null
        }
        if (this._fa) {
            for (this.detachEvent(this._faEv), this._faEv = null; this._fa.childNodes.length > 0;) this._fa.removeChild(this._fa.childNodes[0]);
            this._fa.parentNode.removeChild(this._fa), this._fa = null
        }
        this.attachFooter = this.attachHeader = null, this.detachAllEvents(), this._CPanelHeight = this._CPanelBtnsWidth = this.tplSizes = this.tplData = this.skinParams = this.skin = this.imagePath = this.h = this.w = this._xmlLoader = this._totalRows = this._totalCols = this._rowsRatio = this._colsRatio = this._resY = this._resX = this._resObj = this._resFunc = this._minHeight = this._minWidth = this._mTop = this._mBottom = this._layoutView = this._effects = this._dimension = this._availAutoSize = this._autoVer = this._autoHor = null, this.sizer.parentNode && this.sizer.parentNode.removeChild(this.sizer), this._resYMaxHeightBottom = this._resYMaxHeightTop = this._resXMaxWidthRight = this._resXMaxWidthLeft = this._resYStart = this._resXStart = this._minHTAlter = this._minHBAlter = this._minWRAlter = this._minWLAlter = this._collapsedW = this._collapsedH = this._dblClickTM = this._doOnDoubleClick = this._autodetectSkin = this.dhx_SeverCatcherPath = this.i18n = this._isIPad = this._effect = this._autosize = this._cells = this.hideStatusBar = this.hideToolbar = this.hideMenu = this.showStatusBar = this.showToolbar = this.showMenu = this.detachStatusBar = this.detachToolbar = this.detachMenu = this.attachStatusBar = this.attachToolbar = this.attachMenu = this.setCollapsedText = this.updateNestedObjectsArray = this.unload = this.unDockWindow = this.showPanel = this.setText = this.setSkin = this.setSizes = this.setImagePath = this.setEffect = this.setAutoSize = this.progressOn = this.progressOff = this.listViews = this.listAutoSizes = this.isPanelVisible = this.hidePanel = this.getTextTooltip = this.getText = this.getIndexById = this.getIdByIndex = this.getEffect = this.forEachItem = this.eventCatcher = this.dockWindow = this.detachEvent = this.detachAllEvents = this.checkEvent = this.cells = this.callEvent = this.attachToolbar = this.attachStatusBar = this.attachMenu = this.attachEvent = this._xmlParser = this._showCovers = this._setWidth = this._setW = this._setHeight = this._setH = this._resAreaData = this._resizeVer = this._resizeStop = this._resizeHor = this._progressControlGlobal = this._progressControl = this._isResizable = this._isCollapsed = this._initWindows = this._init = this._hideCovers = this._getNearestParents = this._fixSplitters = this._fixSize = this._fixPositionInWin = this._fixIcons = this._findDockCellsVer = this._findDockCellsHor = this._expandEffect = this._expand = this._doExpand = this._doCollapse = this._defineWindowMinDimension = this._collectResAreaData = this._collapseEffect = this._collapse = this._checkAlterMinSize = this._changeCPanelText = this._buildSurface = this._attachSizer = this._alterSizes = this.sizer = null, this.obj && (this.obj.parentNode.removeChild(this.obj), this.obj = null), this.base && this.base != document.body && (this.base.parentNode.removeChild(this.base), this.base = null), this.cont && (this.cont.obj._dhxContDestruct(), this.cont = null), this.dhxWins && (this.dhxWins.unload(), this.dhxWinsIdPrefix = this.dhxWins = null), this._doOnResizeStart && ("function" == typeof window.addEventListener ? window.removeEventListener("resize", this._doOnResizeStart, !1) : window.detachEvent("onresize", this._doOnResizeStart), this._tmTime = this._doOnResizeEnd = this._doOnResizeStart = null), that = null
    }, dhtmlXLayoutObject.prototype.tplData = {
        "1C": '<layout><autosize hor="a" ver="a" rows="1" cols="1"/><table data="a"/><row><cell obj="a" wh="1,1" resize="ver" neighbors="a"/></row></layout>',
        "2E": '<layout><autosize hor="a;b" ver="b" rows="2" cols="1"/><table data="a;b"/><row><cell obj="a" wh="1,2" resize="ver" neighbors="a;b"/></row><row sep="true"><cell sep="hor" top="a" bottom="b" dblclick="a"/></row><row><cell obj="b" wh="1,2" resize="ver" neighbors="a;b"/></row></layout>',
        "2U": '<layout><autosize hor="b" ver="a;b" rows="1" cols="2"/><table data="a,b"/><row><cell obj="a" wh="2,1" resize="hor" neighbors="a;b"/><cell sep="ver" left="a" right="b" dblclick="a"/><cell obj="b" wh="2,1" resize="hor" neighbors="a;b"/></row></layout>',
        "3E": '<layout><autosize hor="a;b;c" ver="c" rows="3" cols="1"/><table data="a;b;c"/><row><cell obj="a" wh="1,3" resize="ver" neighbors="a;b;c"/></row><row sep="yes"><cell sep="hor" top="a" bottom="b;c" dblclick="a"/></row><row><cell obj="b" wh="1,3" resize="ver" neighbors="a;b;c"/></row><row sep="yes"><cell sep="hor" top="a;b" bottom="c" dblclick="b"/></row><row><cell obj="c" wh="1,3" resize="ver" neighbors="a;b;c"/></row></layout>',
        "3W": '<layout><autosize hor="c" ver="a;b;c" rows="1" cols="3"/><table data="a,b,c"/><row><cell obj="a" wh="3,1" resize="hor" neighbors="a;b;c"/><cell sep="ver" left="a" right="b;c" dblclick="a"/><cell obj="b" wh="3,1" resize="hor" neighbors="a;b;c"/><cell sep="ver" left="a;b" right="c" dblclick="b"/><cell obj="c" wh="3,1" resize="hor" neighbors="a;b;c"/></row></layout>',
        "3J": '<layout><autosize hor="b" ver="b;c" rows="2" cols="2"/><table data="a,b;c,b"/><row><cell obj="a" wh="2,2" resize="ver" neighbors="a;c"/><cell sep="ver" left="a,c" right="b" dblclick="b" rowspan="3"/><cell obj="b" wh="2,1" resize="hor" neighbors="a,c;b" rowspan="3"/></row><row sep="yes"><cell sep="hor" top="a" bottom="c" dblclick="a"/></row><row><cell obj="c" wh="2,2" resize="ver" neighbors="a;c"/></row></layout>',
        "3T": '<layout><autosize hor="a;c" ver="b;c" rows="2" cols="2"/><table data="a,a;b,c"/><row><cell obj="a" wh="1,2" resize="ver" neighbors="a;b,c" colspan="3"/></row><row sep="true"><cell sep="hor" top="a" bottom="b,c" dblclick="a" colspan="3"/></row><row><cell obj="b" wh="2,2" resize="hor" neighbors="b;c"/><cell sep="ver" left="b" right="c" dblclick="b"/><cell obj="c" wh="2,2" resize="hor" neighbors="b;c"/></row></layout>',
        "3L": '<layout><autosize hor="b;c" ver="a;c" rows="2" cols="2"/><table data="a,b;a,c"/><row><cell obj="a" wh="2,1" resize="hor" neighbors="a;b,c" rowspan="3"/><cell sep="ver" left="a" right="b,c" dblclick="a" rowspan="3"/><cell obj="b" wh="2,2" resize="ver" neighbors="b;c"/></row><row sep="true"><cell sep="hor" top="b" dblclick="b" bottom="c"/></row><row><cell obj="c" wh="b,2" resize="ver" neighbors="b;c"/></row></layout>',
        "3U": '<layout><autosize hor="b;c" ver="c" rows="2" cols="2"/><table data="a,b;c,c"/><row><cell obj="a" wh="2,2" resize="hor" neighbors="a;b"/><cell sep="ver" left="a" right="b" dblclick="a"/><cell obj="b" wh="2,2" resize="hor" neighbors="a;b"/></row><row sep="true"><cell sep="hor" top="a,b" bottom="c" dblclick="c" colspan="3"/></row><row><cell obj="c" wh="1,2" resize="ver" neighbors="a,b;c" colspan="3"/></row></layout>',
        "4H": '<layout><autosize hor="d" ver="a;c;d" rows="2" cols="3"/><table data="a,b,d;a,c,d"/><row><cell obj="a" wh="3,1" resize="hor" neighbors="a;b,c;d" rowspan="3"/><cell sep="ver" left="a" right="b,c;d" dblclick="a" rowspan="3"/><cell obj="b" wh="3,2" resize="ver" neighbors="b;c"/><cell sep="ver" left="a;b,c" right="d" dblclick="d" rowspan="3"/><cell obj="d" wh="3,1" resize="hor" neighbors="a;b,c;d" rowspan="3"/></row><row sep="true"><cell sep="hor" top="b" dblclick="b" bottom="c"/></row><row><cell obj="c" wh="3,2" resize="ver" neighbors="b;c"/></row></layout>',
        "4I": '<layout><autosize hor="a;c;d" ver="d" rows="3" cols="2"/><table data="a,a;b,c;d,d"/><row><cell obj="a" wh="1,3" resize="ver" neighbors="a;b,c;d" colspan="3"/></row><row sep="true"><cell sep="hor" top="a" bottom="b,c;d" dblclick="a" colspan="3"/></row><row><cell obj="b" wh="2,3" resize="hor" neighbors="b;c"/><cell sep="ver" left="b" dblclick="b" right="c"/><cell obj="c" wh="2,3" resize="hor" neighbors="b;c"/></row><row sep="true"><cell sep="hor" top="a;b,c" bottom="d" dblclick="d" colspan="3"/></row><row><cell obj="d" wh="1,3" resize="ver" neighbors="a;b,c;d" colspan="3"/></row></layout>',
        "4T": '<layout><autosize hor="a;d" ver="b;c;d" rows="2" cols="3"/><table data="a,a,a;b,c,d"/><row><cell obj="a" wh="1,2" resize="ver" neighbors="a;b,c,d" colspan="5"/></row><row sep="true"><cell sep="hor" top="a" bottom="b,c,d" dblclick="a" colspan="5"/></row><row><cell obj="b" wh="3,2" resize="hor" neighbors="b;c;d"/><cell sep="ver" left="b" right="c;d" dblclick="b"/><cell obj="c" wh="3,2" resize="hor" neighbors="b;c;d"/><cell sep="ver" left="b;c" right="d" dblclick="c"/><cell obj="d" wh="3,2" resize="hor" neighbors="b;c;d"/></row></layout>',
        "4U": '<layout><autosize hor="c;d" ver="d" rows="2" cols="3"/><table data="a,b,c;d,d,d"/><row><cell obj="a" wh="3,2" resize="hor" neighbors="a;b;c"/><cell sep="ver" left="a" right="b;c" dblclick="a"/><cell obj="b" wh="3,2" resize="hor" neighbors="a;b;c"/><cell sep="ver" left="a;b" right="c" dblclick="b"/><cell obj="c" wh="3,2" resize="hor" neighbors="a;b;c"/></row><row sep="true"><cell sep="hor" top="a,b,c" bottom="d" dblclick="d" colspan="5"/></row><row><cell obj="d" wh="1,2" resize="ver" neighbors="a,b,c;d" colspan="5"/></row></layout>',
        "5H": '<layout><autosize hor="b;c;d" ver="a;c;e" rows="3" cols="3"/><table data="a,b,e;a,c,e;a,d,e"/><row><cell obj="a" wh="3,1" resize="hor" neighbors="a;b,c,d" rowspan="5"/><cell sep="ver" left="a" right="b,c,d;e" dblclick="a" rowspan="5"/><cell obj="b" wh="3,3" resize="ver" neighbors="b;c;d"/><cell sep="ver" left="a;b,c,d" right="e" dblclick="e" rowspan="5"/><cell obj="e" wh="3,1" resize="hor" neighbors="b,c,d;e" rowspan="5"/></row><row sep="true"><cell sep="hor" top="b" dblclick="b" bottom="c;d"/></row><row><cell obj="c" wh="3,3" resize="ver" neighbors="b;c;d"/></row><row sep="true"><cell sep="hor" top="b;c" dblclick="c" bottom="d"/></row><row><cell obj="d" wh="3,3" resize="ver" neighbors="b;c;d"/></row></layout>',
        "5I": '<layout><autosize hor="a;d;e" ver="e" rows="3" cols="3"/><table data="a,a,a;b,c,d;e,e,e"/><row><cell obj="a" wh="1,3" resize="ver" neighbors="a;b,c,d;e" colspan="5"/></row><row sep="match"><cell sep="hor" top="a" bottom="b,c,d;e" dblclick="a" colspan="5"/></row><row><cell obj="b" wh="3,3" resize="hor" neighbors="b;c;d"/><cell sep="ver" left="b" right="c;d" dblclick="b"/><cell obj="c" wh="3,3" resize="hor" neighbors="b;c;d"/><cell sep="ver" left="b;c" right="d" dblclick="c"/><cell obj="d" wh="3,3" resize="hor" neighbors="b;c;d"/></row><row sep="match"><cell sep="hor" top="a;b,c,d" bottom="e" dblclick="e" colspan="5"/></row><row><cell obj="e" wh="1,3" resize="ver" neighbors="a;b,c,d;e" colspan="5"/></row></layout>',
        "6I": '<layout><autosize hor="a;e;f" ver="f" rows="3" cols="4"/><table data="a,a,a,a;b,c,d,e;f,f,f,f"/><row><cell obj="a" wh="1,3" resize="ver" neighbors="a;b,c,d,e;f" colspan="7"/></row><row sep="true"><cell sep="hor" top="a" bottom="b,c,d,e;f" dblclick="a" colspan="7"/></row><row><cell obj="b" wh="4,3" resize="hor" neighbors="b;c;d;e"/><cell sep="ver" left="b" right="c;d;e" dblclick="b"/><cell obj="c" wh="4,3" resize="hor" neighbors="b;c;d;e"/><cell sep="ver" left="b;c" right="d;e" dblclick="c"/><cell obj="d" wh="4,3" resize="hor" neighbors="b;c;d;e"/><cell sep="ver" left="b;c;d" right="e" dblclick="d"/><cell obj="e" wh="4,3" resize="hor" neighbors="b;c;d;e"/></row><row sep="true"><cell sep="hor" top="a;b,c,d,e" bottom="f" dblclick="f" colspan="7"/></row><row><cell obj="f" wh="1,3" resize="ver" neighbors="a;b,c,d,e;f" colspan="7"/></row></layout>'
    }, dhtmlXLayoutObject.prototype._availAutoSize = {
        "1C_hor": ["a"],
        "1C_ver": ["a"],
        "2E_hor": ["a;b"],
        "2E_ver": ["a", "b"],
        "2U_hor": ["a", "b"],
        "2U_ver": ["a;b"],
        "3E_hor": ["a;b;c"],
        "3E_ver": ["a", "b", "c"],
        "3W_hor": ["a", "b", "c"],
        "3W_ver": ["a;b;c"],
        "3J_hor": ["a;c", "b"],
        "3J_ver": ["a;b", "c;b"],
        "3T_hor": ["a;b", "a;c"],
        "3T_ver": ["a", "b;c"],
        "3L_hor": ["a", "b;c"],
        "3L_ver": ["a;b", "a;c"],
        "3U_hor": ["a;c", "b;c"],
        "3U_ver": ["a;b", "c"],
        "4H_hor": ["a", "b;c", "d"],
        "4H_ver": ["a;b;d", "a;c;d"],
        "4I_hor": ["a;b;d", "a;c;d"],
        "4I_ver": ["a", "b;c", "d"],
        "4T_hor": ["a;b", "a;c", "a;d"],
        "4T_ver": ["a", "b;c;d"],
        "4U_hor": ["a;d", "b;d", "c;d"],
        "4U_ver": ["a;b;c", "d"],
        "5H_hor": ["a", "b;c;d", "e"],
        "5H_ver": ["a;b;e", "a;c;e", "a;d;e"],
        "5I_hor": ["a;b;e", "a;c;e", "a;d;e"],
        "5I_ver": ["a", "b;c;d", "e"],
        "6I_hor": ["a;b;f", "a;c;f", "a;d;f", "a;e;f"],
        "6I_ver": ["a", "b;c;d;e", "f"]
    }, dhtmlXLayoutObject.prototype.setCollapsedText = function(a, b) {
        if (this.polyObj[a]) {
            var c = this.polyObj[a].childNodes[0].childNodes[0];
            if (c.childNodes[c.childNodes.length - 1]._ct === !0) var d = c.childNodes[c.childNodes.length - 1];
            else d = document.createElement("DIV"), d._ct = !0, d.className = "dhtmlxInfoBarLabel_collapsed_" + this.polyObj[a]._resize, c.appendChild(d);
            d.innerHTML = b, this._fixCollapsedText(), c = null
        }
    }, dhtmlXLayoutObject.prototype._fixCollapsedText = function() {
        for (var a in this.polyObj)
            if ("hor" == this.polyObj[a]._resize) {
                var b = this.polyObj[a].childNodes[0].childNodes[0];
                b.childNodes[b.childNodes.length - 1]._ct === !0 && (b.childNodes[b.childNodes.length - 1].style.width = Math.max(0, b.offsetHeight - b.childNodes[4].offsetTop - b.childNodes[4].offsetHeight - 12) + "px", _isFF || _isOpera || _isChrome || navigator.userAgent.indexOf("MSIE 10.0") >= 0) && (b.childNodes[b.childNodes.length - 1].style.bottom = "-12px")
            }
    }, dhtmlXLayoutObject.prototype.i18n = {
        dhxcontalert: "dhtmlxcontainer.js is missed on the page",
        collapse: "Ocultar",
        expand: "Abrir",
        dock: "Dock",
        undock: "UnDock"
    },
    function() {
        dhtmlx.extend_api("dhtmlXLayoutObject", {
            _init: function(a) {
                return [a.parent, a.pattern, a.skin]
            },
            image_path: "setImagePath",
            effect: "_effect",
            cells: "_cells",
            autosize: "_autosize"
        }, {
            _cells: function(a) {
                for (var b = 0; b < a.length; b++) {
                    var c = a[b],
                        d = this.cells(c.id);
                    d && (c.height && d.setHeight(c.height), c.width && d.setWidth(c.width), c.text && d.setText(c.text), c.collapse && d.collapse(), c.fix_size && d.fixSize(c.fix_size[0], c.fix_size[1]), c.header === !1 && d.hideHeader())
                }
            },
            _autosize: function(a) {
                this.setAutoSize(a[0], a[1])
            },
            _effect: function(a) {
                a.collapse && this.setEffect("collapse", a.collapse), a.resize && this.setEffect("resize", a.resize), a.highlight && this.setEffect("highlight", a.highlight)
            }
        })
    }(), dhtmlXLayoutObject.prototype.attachHeader = function(a) {
        if (!this._ha && this.cont.obj == document.body) {
            "object" != typeof a && (a = document.getElementById(a));
            var b = 2,
                c = -4,
                d = 2;
            "dhx_web" == this.skin ? (b = d = 9, c = -18) : "dhx_terrace" == this.skin && (b = d = 14, c = -28), null != this._fa && (c = this.cont.obj._offsetHeight), this.cont.obj._offsetTop = a.offsetHeight + 2 * b, this.cont.obj._offsetHeight = -a.offsetHeight + c - b, this.setSizes(), this._ha = document.createElement("DIV"), this._ha.style.position = "absolute", this._ha.style.top = d + "px", this._ha.style.left = this.cont.obj.vs[this.cont.obj.av].dhxcont.style.left, this._ha.style.width = this.cont.obj.vs[this.cont.obj.av].dhxcont.style.width, this._ha.style.height = a.offsetHeight + "px", document.body.appendChild(this._ha), this._ha.appendChild(a), this._haEv = this.attachEvent("onResizeFinish", function() {
                this._ha.style.width = this.cont.obj.vs[this.cont.obj.av].dhxcont.style.width
            })
        }
    }, dhtmlXLayoutObject.prototype.detachHeader = function() {
        if (this._ha && this.cont.obj == document.body) {
            document.body.appendChild(this._ha.firstChild), this.detachEvent(this._haEv), this._ha.parentNode.removeChild(this._ha), this._ha = this._haEv = null;
            var a = 2,
                b = -4;
            "dhx_web" == this.skin ? (a = 9, b = -18) : "dhx_terrace" == this.skin && (a = 14, b = -28), null != this._fa && (b = this.cont.obj._offsetHeight + this.cont.obj._offsetTop - a), this.cont.obj._offsetTop = a, this.cont.obj._offsetHeight = b, this.setSizes()
        }
    }, dhtmlXLayoutObject.prototype.attachFooter = function(a) {
        if (!this._fa && this.cont.obj == document.body) {
            "object" != typeof a && (a = document.getElementById(a));
            var b = 2,
                c = -4,
                d = 2;
            "dhx_web" == this.skin ? (b = d = 9, c = -18) : "dhx_terrace" == this.skin && (b = d = 14, c = -28), null != this._ha && (b = this.cont.obj._offsetTop), this.cont.obj._offsetHeight = -a.offsetHeight + c - b, this.setSizes(), this._fa = document.createElement("DIV"), this._fa.style.position = "absolute", this._fa.style.bottom = d + "px", this._fa.style.left = this.cont.obj.vs[this.cont.obj.av].dhxcont.style.left, this._fa.style.width = this.cont.obj.vs[this.cont.obj.av].dhxcont.style.width, this._fa.style.height = a.offsetHeight + "px", document.body.appendChild(this._fa), this._fa.appendChild(a), this._faEv = this.attachEvent("onResizeFinish", function() {
                this._fa.style.width = this.cont.obj.vs[this.cont.obj.av].dhxcont.style.width
            })
        }
    }, dhtmlXLayoutObject.prototype.detachFooter = function() {
        if (this._fa && this.cont.obj == document.body) {
            document.body.appendChild(this._fa.firstChild), this.detachEvent(this._faEv), this._fa.parentNode.removeChild(this._fa), this._fa = this._faEv = null;
            var a = 2,
                b = -4;
            "dhx_web" == this.skin ? (a = 9, b = -18) : "dhx_terrace" == this.skin && (a = 14, b = -28), null != this._ha && (b = -this.cont.obj._offsetTop - a, a = this.cont.obj._offsetTop), this.cont.obj._offsetTop = a, this.cont.obj._offsetHeight = b, this.setSizes()
        }
    }, dhtmlXLayoutObject.prototype._fixToolbars = function() {
        if (_isIE)
            for (var a in this.polyObj) null != this.polyObj[a].vs[this.polyObj[a].av].toolbar && this.polyObj[a].vs[this.polyObj[a].av].toolbar._fixSpacer()
    }, dhtmlXLayoutObject.prototype._hideBorders = function() {
        if ("dhx_terrace" == this.skin) {
            this._cpm_old = this.skinParams[this.skin].cell_pading_max, this.skinParams[this.skin].cell_pading_max = [1, 0, 0, 0];
            for (var a in this.polyObj) this.polyObj[a]._setPadding(this.skinParams[this.skin].cell_pading_max, "dhxcont_layout_" + this.skin), this.polyObj[a].adjustContent(this.polyObj[a].childNodes[0], this.skinParams[this.skin].cpanel_height)
        }
    }, dhtmlXMenuObject.prototype.init = function() {
        1 != this._isInited && (this.dLoad ? (this.callEvent("onXLS", []), this._xmlLoader.loadXML(this.dLoadUrl + this.dLoadSign + "action=loadMenu&etc=" + (new Date).getTime())) : (this._initTopLevelMenu(), this._isInited = !0))
    }, dhtmlXMenuObject.prototype._countVisiblePolygonItems = function(a) {
        var b, c = 0;
        for (b in this.itemPull) {
            var d = this.itemPull[b].parent,
                e = this.itemPull[b].type;
            null != this.idPull[b] && d == a && ("item" == e || "radio" == e || "checkbox" == e) && "none" != this.idPull[b].style.display && c++
        }
        return c
    }, dhtmlXMenuObject.prototype._redefineComplexState = function(a) {
        if (this.idPrefix + this.topId != a && null != this.idPull["polygon_" + a] && null != this.idPull[a]) {
            var b = this._countVisiblePolygonItems(a);
            b > 0 && !this.itemPull[a].complex && this._updateItemComplexState(a, !0, !1), 0 == b && this.itemPull[a].complex && this._updateItemComplexState(a, !1, !1)
        }
    }, dhtmlXMenuObject.prototype._updateItemComplexState = function(a, b) {
        if (this.context || "TopLevel" != this._getItemLevelType(a.replace(this.idPrefix, ""))) {
            if (null != this.idPull[a] && null != this.itemPull[a] && (this.itemPull[a].complex = b, a != this.idPrefix + this.topId)) {
                var c = null,
                    d = this.idPull[a].childNodes[this._rtl ? 0 : 2];
                if (d.childNodes[0] && 0 === String(d.childNodes[0].className).search("complex_arrow") && (c = d.childNodes[0]), this.itemPull[a].complex) {
                    if (null == c) {
                        for (c = document.createElement("DIV"), c.className = "complex_arrow", c.id = "arrow_" + a; d.childNodes.length > 0;) d.removeChild(d.childNodes[0]);
                        d.appendChild(c)
                    }
                    this.dLoad && "get" == this.itemPull[a].loaded && this.loaderIcon ? "complex_arrow_loading" != c.className && (c.className = "complex_arrow_loading") : c.className = "complex_arrow"
                } else !this.itemPull[a].complex && null != c && (d.removeChild(c), null != this.itemPull[a].hotkey_backup && this.setHotKey && this.setHotKey(a.replace(this.idPrefix, ""), this.itemPull[a].hotkey_backup))
            }
        } else this.itemPull[a].complex = b
    }, dhtmlXMenuObject.prototype._getItemLevelType = function(a) {
        return this.itemPull[this.idPrefix + a].parent == this.idPrefix + this.topId ? "TopLevel" : "SubLevelArea"
    }, dhtmlXMenuObject.prototype._redistribTopLevelSelection = function(a) {
        var b = this._getSubItemToDeselectByPolygon("parent");
        this._removeSubItemFromSelected(-1, -1);
        for (var c = 0; c < b.length; c++) b[c] != a && this._hidePolygon(b[c]), null != this.idPull[b[c]] && b[c] != a && (this.idPull[b[c]].className = this.idPull[b[c]].className.replace(/Selected/g, "Normal"));
        "enabled" == this.itemPull[this.idPrefix + a].state && (this.idPull[this.idPrefix + a].className = "dhtmlxMenu_" + this.skin + "_TopLevel_Item_Selected", this._addSubItemToSelected(this.idPrefix + a, "parent"), this.menuSelected = "win" == this.menuMode ? this.menuSelected != -1 ? a : this.menuSelected : a, this.itemPull[this.idPrefix + a].complex && this.menuSelected != -1 && this._showPolygon(this.idPrefix + a, this.dirTopLevel))
    }, dhtmlXMenuObject.prototype._initTopLevelMenu = function() {
        if (this.dirTopLevel = "bottom", this.dirSubLevel = this._rtl ? "left" : "right", this.context) this.idPull[this.idPrefix + this.topId] = [0, 0], this._addSubMenuPolygon(this.idPrefix + this.topId, this.idPrefix + this.topId);
        else
            for (var a = this._getMenuNodes(this.idPrefix + this.topId), b = 0; b < a.length; b++) "item" == this.itemPull[a[b]].type && this._renderToplevelItem(a[b], null), "separator" == this.itemPull[a[b]].type && this._renderSeparator(a[b], null)
    };
dhtmlXMenuObject.prototype._renderToplevelItem = function(a, b) {
    var c = this,
        d = document.createElement("DIV");
    if (d.id = a, d.className = "enabled" == this.itemPull[a].state && null != this.itemPull[a].cssNormal ? this.itemPull[a].cssNormal : "dhtmlxMenu_" + this.skin + "_TopLevel_Item_" + ("enabled" == this.itemPull[a].state ? "Normal" : "Disabled"), "" != this.itemPull[a].title) {
        var e = document.createElement("DIV");
        e.className = "top_level_text", e.innerHTML = this.itemPull[a].title, d.appendChild(e)
    }
    if (this.itemPull[a].tip.length > 0 && (d.title = this.itemPull[a].tip), "" != this.itemPull[a].imgen || "" != this.itemPull[a].imgdis) {
        var f = this.itemPull[a]["enabled" == this.itemPull[a].state ? "imgen" : "imgdis"];
        if (f) {
            var g = document.createElement("IMG");
            g.border = "0", g.id = "image_" + a, g.src = this.imagePath + f, g.className = "dhtmlxMenu_TopLevel_Item_Icon", d.childNodes.length > 0 && !this._rtl ? d.insertBefore(g, d.childNodes[0]) : d.appendChild(g)
        }
    }
    d.onselectstart = function(a) {
        return a = a || event, a.returnValue = !1
    }, d.oncontextmenu = function(a) {
        return a = a || event, a.returnValue = !1
    }, this.cont || (this.cont = document.createElement("DIV"), this.cont.dir = "ltr", this.cont.className = "right" == this._align ? "align_right" : "align_left", this.base.appendChild(this.cont)), null != b && (b++, b < 0 && (b = 0), b > this.cont.childNodes.length - 1 && (b = null)), null != b ? this.cont.insertBefore(d, this.cont.childNodes[b]) : this.cont.appendChild(d), this.idPull[d.id] = d, this.itemPull[a].complex && !this.dLoad && this._addSubMenuPolygon(this.itemPull[a].id, this.itemPull[a].id), d.onmouseover = function() {
        "web" == c.menuMode && window.clearTimeout(c.menuTimeoutHandler);
        var a = c._getSubItemToDeselectByPolygon("parent");
        c._removeSubItemFromSelected(-1, -1);
        for (var b = 0; b < a.length; b++) a[b] != this.id && c._hidePolygon(a[b]), null != c.idPull[a[b]] && a[b] != this.id && (null != c.itemPull[a[b]].cssNormal ? c.idPull[a[b]].className = c.itemPull[a[b]].cssNormal : ("sub_item_selected" == c.idPull[a[b]].className && (c.idPull[a[b]].className = "sub_item"), c.idPull[a[b]].className = c.idPull[a[b]].className.replace(/Selected/g, "Normal")));
        if ("enabled" == c.itemPull[this.id].state) {
            if (this.className = "dhtmlxMenu_" + c.skin + "_TopLevel_Item_Selected", c._addSubItemToSelected(this.id, "parent"), c.menuSelected = "win" == c.menuMode ? c.menuSelected != -1 ? this.id : c.menuSelected : this.id, c.dLoad && "no" == c.itemPull[this.id].loaded) {
                c.menuModeTopLevelTimeout && "web" == c.menuMode && !c.context && (this._mouseOver = !0, this._dynLoadTM = (new Date).getTime());
                var d = new dtmlXMLLoaderObject(c._xmlParser, window);
                c.itemPull[this.id].loaded = "get", c.callEvent("onXLS", []), d.loadXML(c.dLoadUrl + c.dLoadSign + "action=loadMenu&parentId=" + this.id.replace(c.idPrefix, "") + "&etc=" + (new Date).getTime())
            }
            if ((!c.dLoad || c.dLoad && (!c.itemPull[this.id].loaded || "yes" == c.itemPull[this.id].loaded)) && c.itemPull[this.id].complex && c.menuSelected != -1)
                if (c.menuModeTopLevelTimeout && "web" == c.menuMode && !c.context) {
                    this._mouseOver = !0;
                    var e = this.id;
                    this._menuOpenTM = window.setTimeout(function() {
                        c._showPolygon(e, c.dirTopLevel)
                    }, c.menuModeTopLevelTimeoutTime)
                } else c._showPolygon(this.id, c.dirTopLevel)
        }
        c._doOnTouchMenu(this.id.replace(c.idPrefix, ""))
    }, d.onmouseout = function() {
        c.itemPull[this.id].complex && c.menuSelected != -1 || "enabled" != c.itemPull[this.id].state || (d.className = null != c.itemPull[this.id].cssNormal ? c.itemPull[this.id].cssNormal : "dhtmlxMenu_" + c.skin + "_TopLevel_Item_Normal"), "web" == c.menuMode && (window.clearTimeout(c.menuTimeoutHandler), c.menuTimeoutHandler = window.setTimeout(function() {
            c._clearAndHide()
        }, c.menuTimeoutMsec, "JavaScript")), c.menuModeTopLevelTimeout && "web" == c.menuMode && !c.context && (this._mouseOver = !1, window.clearTimeout(this._menuOpenTM))
    }, d.onclick = function(a) {
        if ("web" == c.menuMode && window.clearTimeout(c.menuTimeoutHandler), "web" == c.menuMode || "disabled" != c.itemPull[this.id].state) {
            if (a = a || event, a.cancelBubble = !0, a.returnValue = !1, "win" == c.menuMode && c.itemPull[this.id].complex) {
                if (c.menuSelected == this.id) {
                    c.menuSelected = -1;
                    var b = !1
                } else c.menuSelected = this.id, b = !0;
                b ? c._showPolygon(this.id, c.dirTopLevel) : c._hidePolygon(this.id)
            }
            var d = c.itemPull[this.id].complex ? "c" : "-",
                e = "enabled" != c.itemPull[this.id].state ? "d" : "-",
                f = {
                    ctrl: a.ctrlKey,
                    alt: a.altKey,
                    shift: a.shiftKey
                };
            return c._doOnClick(this.id.replace(c.idPrefix, ""), d + e + "t", f), !1
        }
    }, "dhx_terrace" == this.skin && this._improveTerraceSkin()
};
dhtmlXMenuObject.prototype.setImagePath = function() {}, dhtmlXMenuObject.prototype.setIconsPath = function(a) {
    this.imagePath = a
}, dhtmlXMenuObject.prototype.setIconPath = dhtmlXMenuObject.prototype.setIconsPath, dhtmlXMenuObject.prototype._updateItemImage = function(a) {
    var a = this.idPrefix + a,
        b = this.itemPull[a].parent == this.idPrefix + this.topId && !this.context,
        c = null;
    if (b)
        for (var d = 0; d < this.idPull[a].childNodes.length; d++) try {
            "dhtmlxMenu_TopLevel_Item_Icon" == this.idPull[a].childNodes[d].className && (c = this.idPull[a].childNodes[d])
        } catch (a) {} else try {
            c = this.idPull[a].childNodes[this._rtl ? 2 : 0].childNodes[0]
        } catch (a) {}
    var e = "radio" == this.itemPull[a].type ? this.itemPull[a]["enabled" == this.itemPull[a].state ? "imgen" : "imgdis"] : this.itemPull[a]["enabled" == this.itemPull[a].state ? "imgen" : "imgdis"];
    if (e.length > 0)
        if (null != c) c.src = this.imagePath + e;
        else if (b) c = document.createElement("IMG"), c.className = "dhtmlxMenu_TopLevel_Item_Icon", c.src = this.imagePath + e, c.border = "0", c.id = "image_" + a, !this._rtl && this.idPull[a].childNodes.length > 0 ? this.idPull[a].insertBefore(c, this.idPull[a].childNodes[0]) : this.idPull[a].appendChild(c);
    else {
        c = document.createElement("IMG"), c.className = "sub_icon", c.src = this.imagePath + e, c.border = "0", c.id = "image_" + a;
        for (var f = this.idPull[a].childNodes[this._rtl ? 2 : 0]; f.childNodes.length > 0;) f.removeChild(f.childNodes[0]);
        f.appendChild(c)
    } else null != c && c.parentNode.removeChild(c)
}, dhtmlXMenuObject.prototype.removeItem = function(a, b, c) {
    b || (a = this.idPrefix + a);
    var d = null;
    if (a != this.idPrefix + this.topId) {
        if (null == this.itemPull[a]) return;
        this.idPull["polygon_" + a] && this.idPull["polygon_" + a]._tmShow && window.clearTimeout(this.idPull["polygon_" + a]._tmShow);
        var e = this.itemPull[a].type;
        if ("separator" == e) {
            var f = this.idPull["separator_" + a];
            this.itemPull[a].parent == this.idPrefix + this.topId ? (f.onclick = null, f.onselectstart = null, f.id = null) : (f.childNodes[0].childNodes[0].onclick = null, f.childNodes[0].childNodes[0].onselectstart = null, f.childNodes[0].childNodes[0].id = null, f.childNodes[0].removeChild(f.childNodes[0].childNodes[0]), f.removeChild(f.childNodes[0])), f.parentNode.removeChild(f), this.idPull["separator_" + a] = null, this.itemPull[a] = null, delete this.idPull["separator_" + a]
        } else {
            for (d = this.itemPull[a].parent, f = this.idPull[a], f.onclick = null, f.oncontextmenu = null, f.onmouseover = null, f.onmouseout = null, f.onselectstart = null, f.id = null; f.childNodes.length > 0;) f.removeChild(f.childNodes[0]);
            f.parentNode.removeChild(f), this.idPull[a] = null, this.itemPull[a] = null, delete this.idPull[a]
        }
        delete this.itemPull[a], e = f = null
    }
    for (var g in this.itemPull) this.itemPull[g].parent == a && this.removeItem(g, !0, !0);
    var h = Array(a);
    null != d && !c && null != this.idPull["polygon_" + d] && 0 == this.idPull["polygon_" + d].tbd.childNodes.length && (h.push(d), this._updateItemComplexState(d, !1, !1));
    for (var i = 0; i < h.length; i++)
        if (this.idPull["polygon_" + h[i]]) {
            var j = this.idPull["polygon_" + h[i]];
            if (j.onclick = null, j.oncontextmenu = null, j.tbl.removeChild(j.tbd), j.tbd = null, j.removeChild(j.tbl), j.tbl = null, j.id = null, j.parentNode.removeChild(j), j = null, this._isIE6) {
                var k = "polygon_" + h[i] + "_ie6cover";
                null != this.idPull[k] && (document.body.removeChild(this.idPull[k]), delete this.idPull[k])
            }
            null != this.idPull["arrowup_" + a] && this._removeArrow && this._removeArrow("arrowup_" + a), null != this.idPull["arrowdown_" + a] && this._removeArrow && this._removeArrow("arrowdown_" + a), this.idPull["polygon_" + h[i]] = null, delete this.idPull["polygon_" + h[i]]
        }
    h = null, "dhx_terrace" == this.skin && 1 == arguments.length && this._improveTerraceSkin()
}, dhtmlXMenuObject.prototype._getAllParents = function(a) {
    var b, c = [];
    for (b in this.itemPull)
        if (this.itemPull[b].parent == a && (c[c.length] = this.itemPull[b].id, this.itemPull[b].complex))
            for (var d = this._getAllParents(this.itemPull[b].id), e = 0; e < d.length; e++) c[c.length] = d[e];
    return c
}, dhtmlXMenuObject.prototype.renderAsContextMenu = function() {
    this.context = !0, 1 == this.base._autoSkinUpdate && (this.base.className = this.base.className.replace("dhtmlxMenu_" + this.skin + "_Middle", ""), this.base._autoSkinUpdate = !1), null != this.addBaseIdAsContextZone && this.addContextZone(this.addBaseIdAsContextZone)
}, dhtmlXMenuObject.prototype.addContextZone = function(a) {
    if (a == document.body) var a = "document.body." + this.idPrefix,
        b = document.body;
    else b = document.getElementById(a);
    var c, d = !1;
    for (c in this.contextZones) d = d || c == a || this.contextZones[c] == b;
    if (1 == d) return !1;
    this.contextZones[a] = b;
    var e = this;
    _isOpera ? (this.operaContext = function(a) {
        e._doOnContextMenuOpera(a, e)
    }, b.addEventListener("mouseup", this.operaContext, !1)) : (null == b.oncontextmenu || b._oldContextMenuHandler || (b._oldContextMenuHandler = b.oncontextmenu), b.oncontextmenu = function(a) {
        for (var b in dhtmlxMenuObjectLiveInstances) b != e._UID && dhtmlxMenuObjectLiveInstances[b].context && dhtmlxMenuObjectLiveInstances[b]._hideContextMenu();
        return a = a || event, a.cancelBubble = !0, a.returnValue = !1, e._doOnContextBeforeCall(a, this), !1
    })
}, dhtmlXMenuObject.prototype._doOnContextMenuOpera = function(a, b) {
    for (var c in dhtmlxMenuObjectLiveInstances) c != b._UID && dhtmlxMenuObjectLiveInstances[c].context && dhtmlxMenuObjectLiveInstances[c]._hideContextMenu();
    return a.cancelBubble = !0, a.returnValue = !1, 0 == a.button && 1 == a.ctrlKey && b._doOnContextBeforeCall(a, this), !1
}, dhtmlXMenuObject.prototype.removeContextZone = function(a) {
    if (!this.isContextZone(a)) return !1;
    a == document.body && (a = "document.body." + this.idPrefix);
    var b = this.contextZones[a];
    _isOpera ? b.removeEventListener("mouseup", this.operaContext, !1) : (b.oncontextmenu = null != b._oldContextMenuHandler ? b._oldContextMenuHandler : null, b._oldContextMenuHandler = null);
    try {
        this.contextZones[a] = null, delete this.contextZones[a]
    } catch (a) {}
    return !0
}, dhtmlXMenuObject.prototype.isContextZone = function(a) {
    if (a == document.body && null != this.contextZones["document.body." + this.idPrefix]) return !0;
    var b = !1;
    return null != this.contextZones[a] && this.contextZones[a] == document.getElementById(a) && (b = !0), b
}, dhtmlXMenuObject.prototype._isContextMenuVisible = function() {
    return null != this.idPull["polygon_" + this.idPrefix + this.topId] && "" == this.idPull["polygon_" + this.idPrefix + this.topId].style.display
}, dhtmlXMenuObject.prototype._showContextMenu = function(a, b, c) {
    return this._clearAndHide(), null != this.idPull["polygon_" + this.idPrefix + this.topId] && (window.clearTimeout(this.menuTimeoutHandler), this.idPull[this.idPrefix + this.topId] = [a, b], this._showPolygon(this.idPrefix + this.topId, "bottom"), void this.callEvent("onContextMenu", [c]))
}, dhtmlXMenuObject.prototype._hideContextMenu = function() {
    return null != this.idPull["polygon_" + this.idPrefix + this.topId] && (this._clearAndHide(), this._hidePolygon(this.idPrefix + this.topId), void(this.zInd = this.zIndInit))
}, dhtmlXMenuObject.prototype._doOnContextBeforeCall = function(a, b) {
    this.contextMenuZoneId = b.id, this._clearAndHide(), this._hideContextMenu();
    var c = a.srcElement || a.target,
        d = _isIE || _isOpera || _KHTMLrv ? a.offsetX : a.layerX,
        e = _isIE || _isOpera || _KHTMLrv ? a.offsetY : a.layerY,
        f = getAbsoluteLeft(c) + d,
        g = getAbsoluteTop(c) + e;
    this.checkEvent("onBeforeContextMenu") ? this.callEvent("onBeforeContextMenu", [b.id, a]) && this.contextAutoShow && (this._showContextMenu(f, g, b.id), this.callEvent("onAfterContextMenu", [b.id, a])) : this.contextAutoShow && (this._showContextMenu(f, g, b.id), this.callEvent("onAfterContextMenu", [b.id]))
}, dhtmlXMenuObject.prototype.showContextMenu = function(a, b) {
    this._showContextMenu(a, b, !1)
}, dhtmlXMenuObject.prototype.hideContextMenu = function() {
    this._hideContextMenu()
}, dhtmlXMenuObject.prototype._autoDetectVisibleArea = function() {
    this._isVisibleArea || (this.menuX1 = document.body.scrollLeft, this.menuX2 = this.menuX1 + (window.innerWidth || document.body.clientWidth), this.menuY1 = Math.max((_isIE ? document.documentElement : document.getElementsByTagName("html")[0]).scrollTop, document.body.scrollTop), this.menuY2 = this.menuY1 + (_isIE ? Math.max(document.documentElement.clientHeight || 0, document.documentElement.offsetHeight || 0, document.body.clientHeight || 0) : window.innerHeight))
}, dhtmlXMenuObject.prototype.getItemPosition = function(a) {
    var a = this.idPrefix + a,
        b = -1;
    if (null == this.itemPull[a]) return b;
    for (var c = this.itemPull[a].parent, d = null != this.idPull["polygon_" + c] ? this.idPull["polygon_" + c].tbd : this.cont, e = 0; e < d.childNodes.length; e++) d.childNodes[e] != this.idPull["separator_" + a] && d.childNodes[e] != this.idPull[a] || (b = e);
    return b
}, dhtmlXMenuObject.prototype.setItemPosition = function(a, b) {
    if (a = this.idPrefix + a, null != this.idPull[a]) {
        var c = this.itemPull[a].parent == this.idPrefix + this.topId,
            d = this.idPull[a],
            e = this.getItemPosition(a.replace(this.idPrefix, "")),
            f = this.itemPull[a].parent,
            g = null != this.idPull["polygon_" + f] ? this.idPull["polygon_" + f].tbd : this.cont;
        g.removeChild(g.childNodes[e]), b < 0 && (b = 0), c && b < 1 && (b = 1), b < g.childNodes.length ? g.insertBefore(d, g.childNodes[b]) : g.appendChild(d)
    }
}, dhtmlXMenuObject.prototype.getParentId = function(a) {
    return a = this.idPrefix + a, null == this.itemPull[a] ? null : (null != this.itemPull[a].parent ? this.itemPull[a].parent : this.topId).replace(this.idPrefix, "")
}, dhtmlXMenuObject.prototype.addNewSibling = function(a, b, c, d, e, f) {
    var g = this.idPrefix + (null != b ? b : this._genStr(24)),
        h = this.idPrefix + (null != a ? this.getParentId(a) : this.topId);
    this._addItemIntoGlobalStrorage(g, h, c, "item", d, e, f), h != this.idPrefix + this.topId || this.context ? this._renderSublevelItem(g, this.getItemPosition(a)) : this._renderToplevelItem(g, this.getItemPosition(a))
}, dhtmlXMenuObject.prototype.addNewChild = function(a, b, c, d, e, f, g) {
    if (null == a) {
        if (!this.context) return this.addNewSibling(a, c, d, e, f, g), void(null != b && this.setItemPosition(c, b));
        a = this.topId
    }
    c = this.idPrefix + (null != c ? c : this._genStr(24)), this.setHotKey && this.setHotKey(a, ""), a = this.idPrefix + a, this._addItemIntoGlobalStrorage(c, a, d, "item", e, f, g), null == this.idPull["polygon_" + a] && this._renderSublevelPolygon(a, a), this._renderSublevelItem(c, b - 1), this._redefineComplexState(a)
}, dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage = function(a, b, c, d, e, f, g) {
    var h = {
        id: a,
        title: c,
        imgen: null != f ? f : "",
        imgdis: null != g ? g : "",
        type: d,
        state: 1 == e ? "disabled" : "enabled",
        parent: b,
        complex: !1,
        hotkey: "",
        tip: ""
    };
    this.itemPull[h.id] = h
}, dhtmlXMenuObject.prototype._addSubMenuPolygon = function(a, b) {
    for (var c = (this._renderSublevelPolygon(a, b), this._getMenuNodes(b)), d = 0; d < c.length; d++) "separator" == this.itemPull[c[d]].type ? this._renderSeparator(c[d], null) : this._renderSublevelItem(c[d], null);
    for (var d = 0; d < c.length; d++) this.itemPull[c[d]].complex && this._addSubMenuPolygon(a, this.itemPull[c[d]].id)
}, dhtmlXMenuObject.prototype._renderSublevelPolygon = function(a, b) {
    var c = document.createElement("DIV");
    c.className = "dhtmlxMenu_" + this.skin + "_SubLevelArea_Polygon " + (this._rtl ? "dir_right" : ""), c.dir = "ltr", c.oncontextmenu = function(a) {
        return a = a || event, a.returnValue = !1, a.cancelBubble = !0, !1
    }, c.id = "polygon_" + b, c.onclick = function(a) {
        a = a || event, a.cancelBubble = !0
    }, c.style.display = "none", document.body.insertBefore(c, document.body.firstChild);
    var d = document.createElement("TABLE");
    d.className = "dhtmlxMebu_SubLevelArea_Tbl", d.cellSpacing = 0, d.cellPadding = 0, d.border = 0;
    var e = document.createElement("TBODY");
    return d.appendChild(e), c.appendChild(d), c.tbl = d, c.tbd = e, this.idPull[c.id] = c, null != this.sxDacProc && (this.idPull["sxDac_" + b] = new this.sxDacProc(c, c.className), _isIE ? (this.idPull["sxDac_" + b]._setSpeed(this.dacSpeedIE), this.idPull["sxDac_" + b]._setCustomCycle(this.dacCyclesIE)) : (this.idPull["sxDac_" + b]._setSpeed(this.dacSpeed), this.idPull["sxDac_" + b]._setCustomCycle(this.dacCycles))), c
}, dhtmlXMenuObject.prototype._renderSublevelItem = function(a, b) {
    var c = this,
        d = document.createElement("TR");
    d.className = "enabled" == this.itemPull[a].state ? "sub_item" : "sub_item_dis";
    var e = document.createElement("TD");
    e.className = "sub_item_icon";
    var f = this.itemPull[a]["enabled" == this.itemPull[a].state ? "imgen" : "imgdis"];
    if ("" != f) {
        var g = this.itemPull[a].type;
        if ("checkbox" == g || "radio" == g) {
            var h = document.createElement("DIV");
            h.id = "image_" + this.itemPull[a].id, h.className = "sub_icon " + f, e.appendChild(h)
        }
        "checkbox" != g && "radio" != g && (h = document.createElement("IMG"), h.id = "image_" + this.itemPull[a].id, h.className = "sub_icon", h.src = this.imagePath + f, e.appendChild(h))
    }
    var i = document.createElement("TD");
    if (i.className = "sub_item_text", "" != this.itemPull[a].title) {
        var j = document.createElement("DIV");
        j.className = "sub_item_text", j.innerHTML = this.itemPull[a].title, i.appendChild(j)
    } else i.innerHTML = "&nbsp;";
    var k = document.createElement("TD");
    if (k.className = "sub_item_hk", this.itemPull[a].complex) {
        var l = document.createElement("DIV");
        l.className = "complex_arrow", l.id = "arrow_" + this.itemPull[a].id, k.appendChild(l)
    } else if (this.itemPull[a].hotkey.length > 0 && !this.itemPull[a].complex) {
        var m = document.createElement("DIV");
        m.className = "sub_item_hk", m.innerHTML = this.itemPull[a].hotkey, k.appendChild(m)
    } else k.innerHTML = "&nbsp;";
    d.appendChild(this._rtl ? k : e), d.appendChild(i), d.appendChild(this._rtl ? e : k), d.id = this.itemPull[a].id, d.parent = this.itemPull[a].parent, this.itemPull[a].tip.length > 0 && (d.title = this.itemPull[a].tip), this._hideTMData || (this._hideTMData = {}), d.onselectstart = function(a) {
        return a = a || event, a.returnValue = !1
    }, d.onmouseover = function() {
        c._hideTMData[this.id] && window.clearTimeout(c._hideTMData[this.id]), "web" == c.menuMode && window.clearTimeout(c.menuTimeoutHandler), this._visible || c._redistribSubLevelSelection(this.id, this.parent), this._visible = !0
    }, d.onmouseout = function() {
        "web" == c.menuMode && (c.menuTimeoutHandler && window.clearTimeout(c.menuTimeoutHandler), c.menuTimeoutHandler = window.setTimeout(function() {
            c && c._clearAndHide && c._clearAndHide()
        }, c.menuTimeoutMsec, "JavaScript"));
        var a = this;
        c._hideTMData[this.id] && window.clearTimeout(c._hideTMData[this.id]), c._hideTMData[this.id] = window.setTimeout(function() {
            a._visible = !1
        }, 50)
    }, d.onclick = function(a) {
        if (c.checkEvent("onClick") || !c.itemPull[this.id].complex) {
            a = a || event, a.cancelBubble = !0, a.returnValue = !1, tc = c.itemPull[this.id].complex ? "c" : "-", td = "enabled" == c.itemPull[this.id].state ? "-" : "d";
            var b = {
                ctrl: a.ctrlKey,
                alt: a.altKey,
                shift: a.shiftKey
            };
            switch (c.itemPull[this.id].type) {
                case "checkbox":
                    c._checkboxOnClickHandler(this.id.replace(c.idPrefix, ""), tc + td + "n", b);
                    break;
                case "radio":
                    c._radioOnClickHandler(this.id.replace(c.idPrefix, ""), tc + td + "n", b);
                    break;
                case "item":
                    c._doOnClick(this.id.replace(c.idPrefix, ""), tc + td + "n", b)
            }
            return !1
        }
    };
    var n = this.idPull["polygon_" + this.itemPull[a].parent];
    null != b && (b++, b < 0 && (b = 0), b > n.tbd.childNodes.length - 1 && (b = null)), null != b && null != n.tbd.childNodes[b] ? n.tbd.insertBefore(d, n.tbd.childNodes[b]) : n.tbd.appendChild(d), this.idPull[d.id] = d
}, dhtmlXMenuObject.prototype._renderSeparator = function(a, b) {
    var c = this.context ? "SubLevelArea" : this.itemPull[a].parent == this.idPrefix + this.topId ? "TopLevel" : "SubLevelArea";
    if ("TopLevel" != c || !this.context) {
        var d = this;
        if ("TopLevel" != c) {
            var e = document.createElement("TR");
            e.className = "sub_sep";
            var f = document.createElement("TD");
            f.colSpan = "3", e.appendChild(f)
        }
        var g = document.createElement("DIV");
        if (g.id = "separator_" + a, g.className = "TopLevel" == c ? "top_sep" : "sub_sep", g.onselectstart = function(a) {
                a = a || event, a.returnValue = !1
            }, g.onclick = function(a) {
                a = a || event, a.cancelBubble = !0;
                var b = {
                    ctrl: a.ctrlKey,
                    alt: a.altKey,
                    shift: a.shiftKey
                };
                d._doOnClick(this.id.replace("separator_" + d.idPrefix, ""), "--s", b)
            }, "TopLevel" == c) {
            if (null != b) b++, b < 0 && (b = 0), null != this.cont.childNodes[b] ? this.cont.insertBefore(g, this.cont.childNodes[b]) : this.cont.appendChild(g);
            else {
                var h = this.cont.childNodes[this.cont.childNodes.length - 1];
                String(h).search("TopLevel_Text") == -1 ? this.cont.appendChild(g) : this.cont.insertBefore(g, h)
            }
            this.idPull[g.id] = g
        } else {
            var i = this.idPull["polygon_" + this.itemPull[a].parent];
            null != b && (b++, b < 0 && (b = 0), b > i.tbd.childNodes.length - 1 && (b = null)), null != b && null != i.tbd.childNodes[b] ? i.tbd.insertBefore(e, i.tbd.childNodes[b]) : i.tbd.appendChild(e), f.appendChild(g), this.idPull[g.id] = e
        }
    }
}, dhtmlXMenuObject.prototype.addNewSeparator = function(a, b) {
    var b = this.idPrefix + (null != b ? b : this._genStr(24)),
        c = this.idPrefix + this.getParentId(a);
    this._addItemIntoGlobalStrorage(b, c, "", "separator", !1, "", ""), this._renderSeparator(b, this.getItemPosition(a))
}, dhtmlXMenuObject.prototype.hide = function() {
    this._clearAndHide()
}, dhtmlXMenuObject.prototype.clearAll = function() {
    this.removeItem(this.idPrefix + this.topId, !0), this._isInited = !1, this.idPrefix = this._genStr(12), this.itemPull = {}
}, dhtmlXMenuObject.prototype.unload = function() {
    if ("function" == typeof window.addEventListener ? (window.removeEventListener("click", this._bodyClick, !1), window.removeEventListener("contextmenu", this._bodyContext, !1)) : (document.body.detachEvent("onclick", this._bodyClick), document.body.detachEvent("oncontextmenu", this._bodyContext)), this._bodyContext = this._bodyClick = null, this.removeItem(this.idPrefix + this.topId, !0), this.idPull = this.itemPull = null, this.context)
        for (var a in this.contextZones) this.removeContextZone(a);
    null != this.cont && (this.cont.className = "", this.cont.parentNode.removeChild(this.cont), this.cont = null), null != this.base && (this.base.className = "", this.context || (this.base.oncontextmenu = this.base._oldContextMenuHandler || null), this.base = this.base.onselectstart = null), this.setSkin = null, this.detachAllEvents(), this._xmlLoader && (this._xmlLoader.destructor(), this._xmlLoader = null), this.extendedModule = this.serialize = this.addCheckbox = this.getCheckboxState = this.setCheckboxState = this.addRadioButton = this.setRadioChecked = this.getRadioChecked = this.userData = this.setOverflowHeight = this.contextZones = this.getCircuit = this.clearHref = this.setHref = this.setAlign = this.setRTL = this.setTopText = this.setItemSelected = this.getHotKey = this.setHotKey = this.getTooltip = this.setTooltip = this.setVisibleArea = this.getContextMenuHideAllMode = this.setContextMenuHideAllMode = this.setAutoHideMode = this.setAutoShowMode = this.clearItemImage = this.setItemImage = this.getItemImage = this.enableDynamicLoading = this.setWebModeTimeout = this.setOpenMode = this.getUserData = this.setUserData = this.isItemHidden = this.showItem = this.hideItem = this.loadFromHTML = this.setItemText = this.getItemText = this.isItemEnabled = this.setItemDisabled = this.setItemEnabled = this._removeArrow = this._checkboxOnClickHandler = this._updateCheckboxImage = this._readLevel = this._setCheckboxState = this._getCheckboxState = this._radioOnClickHandler = this._setRadioState = this._getRadioImgObj = this._countPolygonItems = this._doScrollDown = this._doScrollUp = this._isArrowExists = this._removeDownArrow = this._removeUpArrow = this._addDownArrow = this._addUpArrow = this._checkArrowsState = this._clearAllSelectedSubItemsInPolygon = this._updateLoaderIcon = this._changeItemVisible = this._changeItemState = this.hideContextMenu = this.showContextMenu = this.hide = this.detachAllEvents = this.radio = this.items = this.unload = this.dhx_Event = this.detachEvent = this.eventCatcher = this.checkEvent = this.callEvent = this.attachEvent = this.addNewSeparator = this.addNewChild = this.addNewSibling = this.getParentId = this.setItemPosition = this.getItemPosition = this.clearAll = this._hideContextMenu = this._renderSeparator = this._renderSublevelItem = this._renderSublevelPolygon = this._addSubMenuPolygon = this._addItemIntoGlobalStrorage = this._autoDetectVisibleArea = this._doOnContextBeforeCall = this._showContextMenu = this._isContextMenuVisible = this.isContextZone = this.removeContextZone = this.addContextZone = this.renderAsContextMenu = this._getAllParents = this.removeItem = this._updateItemImage = this.setIconPath = this.setIconsPath = this.setImagePath = this._renderToplevelItem = this._initTopLevelMenu = this._redistribTopLevelSelection = this._getItemLevelType = this._updateItemComplexState = this._redefineComplexState = this._countVisiblePolygonItems = this._hideSubLevelItem = this._showSubLevelItem = this._xmlParser = this._buildMenu = this.loadXMLString = this.loadXML = this.init = this.forEachItem = this.getItemType = this._doOnLoad = this._clearAndHide = this._genStr = this._getMenuNodes = this._searchMenuNode = this._doOnTouchMenu = this._doOnClick = this._redistribSubLevelSelection = this._showPolygon = this._hidePolygon = this._getSubItemToDeselectByPolygon = this._removeSubItemFromSelected = this._addSubItemToSelected = this._openedPolygons = this._selectedSubItems = this._enableDacSupport = this.zIndStep = this.zIndInit = this.zInd = this.dacSpeedIE = this.dacSpeed = this.dacCyclesIE = this.dacCycles = this.topId = this.skin = this.userDataTagName = this.itemTipTagName = this.itemTextTagName = this.itemTagName = this.itemHrefTagName = this.itemHotKeyTagName = this.isDhtmlxMenuObject = this.menuTouched = this.menuTimeoutMsec = this.menuTimeoutHandler = this.menuModeTopLevelTimeoutTime = this.menuModeTopLevelTimeout = this.menuMode = this.imagePath = this.idPrefix = this.menuLastClicked = this.menuSelected = this.limit = this.dirTopLevel = this.dirSubLevel = this.fixedPosition = this.loaderIcon = this.dLoadUrl = this.dLoadSign = this.dLoad = this.contextMenuZoneId = this.contextHideAllMode = this.contextAutoShow = this.contextAutoHide = this.context = this.addBaseIdAsContextZone = this._topLevelRightMargin = this._topLevelBottomMargin = this._topLevelOffsetLeft = this._topLevelBottomMargin = this._scrollUpTMTime = this._scrollUpTMStep = this._scrollDownTMTime = this._scrollDownTMStep = this._rtl = this._isInited = this._isIE6 = this._arrowFFFix = this._align = null,
        dhtmlxMenuObjectLiveInstances[this._UID] = null;
    try {
        delete dhtmlxMenuObjectLiveInstances[this._UID]
    } catch (a) {}
    this._UID = null
};
var dhtmlxMenuObjectLiveInstances = {};
dhtmlXMenuObject.prototype.i18n = {
        dhxmenuextalert: "dhtmlxmenu_ext.js required"
    },
    function() {
        dhtmlx.extend_api("dhtmlXMenuObject", {
            _init: function(a) {
                return [a.parent, a.skin]
            },
            align: "setAlign",
            top_text: "setTopText",
            context: "renderAsContextMenu",
            icon_path: "setIconsPath",
            open_mode: "setOpenMode",
            rtl: "setRTL",
            skin: "setSkin",
            dynamic: "enableDynamicLoading",
            xml: "loadXML",
            items: "items",
            overflow: "setOverflowHeight"
        }, {
            items: function(a, b) {
                for (var c = 1e5, d = null, e = 0; e < a.length; e++) {
                    var f = a[e];
                    "separator" == f.type ? (this.addNewSeparator(d, c, f.id), d = f.id) : (this.addNewChild(b, c, f.id, f.text, f.disabled, f.img, f.img_disabled), d = f.id, f.items && this.items(f.items, f.id))
                }
            }
        })
    }(), dhtmlXMenuObject.prototype._improveTerraceSkin = function() {
        for (var a in this.itemPull)
            if (this.itemPull[a].parent == this.idPrefix + this.topId && null != this.idPull[a]) {
                var b = !1,
                    c = !1;
                this.idPull[a].parentNode.firstChild == this.idPull[a] && (b = !0), this.idPull[a].parentNode.lastChild == this.idPull[a] && (c = !0);
                for (var d in this.itemPull) "separator" == this.itemPull[d].type && this.itemPull[d].parent == this.idPrefix + this.topId && (this.idPull[a].nextSibling == this.idPull["separator_" + d] && (c = !0), this.idPull[a].previousSibling == this.idPull["separator_" + d] && (b = !0));
                this.idPull[a].style.borderLeft = b ? "1px solid #cecece" : "0px solid white", this.idPull[a].style.borderTopLeftRadius = this.idPull[a].style.borderBottomLeftRadius = b ? "5px" : "0px", this.idPull[a].style.borderTopRightRadius = this.idPull[a].style.borderBottomRightRadius = c ? "5px" : "0px", this.idPull[a]._bl = b, this.idPull[a]._br = c
            }
    }, dhtmlXMenuObject.prototype._improveTerraceButton = function(a, b) {
        b ? (this.idPull[a].style.borderBottomLeftRadius = this.idPull[a]._bl ? "5px" : "0px", this.idPull[a].style.borderBottomRightRadius = this.idPull[a]._br ? "5px" : "0px") : (this.idPull[a].style.borderBottomLeftRadius = "0px", this.idPull[a].style.borderBottomRightRadius = "0px")
    }, dhtmlXMenuObject.prototype.extendedModule = "DHXMENUEXT", dhtmlXMenuObject.prototype.setItemEnabled = function(a) {
        this._changeItemState(a, "enabled", this._getItemLevelType(a))
    }, dhtmlXMenuObject.prototype.setItemDisabled = function(a) {
        this._changeItemState(a, "disabled", this._getItemLevelType(a))
    }, dhtmlXMenuObject.prototype.isItemEnabled = function(a) {
        return null != this.itemPull[this.idPrefix + a] && "enabled" == this.itemPull[this.idPrefix + a].state
    }, dhtmlXMenuObject.prototype._changeItemState = function(a, b, c) {
        var d = !1,
            e = this.idPrefix + a;
        return null != this.itemPull[e] && null != this.idPull[e] && this.itemPull[e].state != b && (this.itemPull[e].state = b, this.idPull[e].className = this.itemPull[e].parent != this.idPrefix + this.topId || this.context ? "sub_item" + ("enabled" == this.itemPull[e].state ? "" : "_dis") : "dhtmlxMenu_" + this.skin + "_TopLevel_Item_" + ("enabled" == this.itemPull[e].state ? "Normal" : "Disabled"), this._updateItemComplexState(this.idPrefix + a, this.itemPull[this.idPrefix + a].complex, !1), this._updateItemImage(a, c), this.idPrefix + this.menuLastClicked == e && "TopLevel" != c && this._redistribSubLevelSelection(e, this.itemPull[e].parent)), d
    }, dhtmlXMenuObject.prototype.getItemText = function(a) {
        return null != this.itemPull[this.idPrefix + a] ? this.itemPull[this.idPrefix + a].title : ""
    }, dhtmlXMenuObject.prototype.setItemText = function(a, b) {
        if (a = this.idPrefix + a, null != this.itemPull[a] && null != this.idPull[a])
            if (this._clearAndHide(), this.itemPull[a].title = b, this.itemPull[a].parent != this.idPrefix + this.topId || this.context) {
                for (c = null, d = 0; d < this.idPull[a].childNodes[1].childNodes.length; d++) "sub_item_text" == String(this.idPull[a].childNodes[1].childNodes[d].className || "") && (c = this.idPull[a].childNodes[1].childNodes[d]);
                "" == String(this.itemPull[a].title).length || null == this.itemPull[a].title ? c && (c.parentNode.removeChild(c), c = null, this.idPull[a].childNodes[1].innerHTML = "&nbsp;") : (c || (c = document.createElement("DIV"), c.className = "sub_item_text", this.idPull[a].childNodes[1].innerHTML = "", this.idPull[a].childNodes[1].appendChild(c)), c.innerHTML = this.itemPull[a].title)
            } else {
                for (var c = null, d = 0; d < this.idPull[a].childNodes.length; d++) try {
                    "top_level_text" == this.idPull[a].childNodes[d].className && (c = this.idPull[a].childNodes[d])
                } catch (a) {}
                "" == String(this.itemPull[a].title).length || null == this.itemPull[a].title ? null != c && c.parentNode.removeChild(c) : (c || (c = document.createElement("DIV"), c.className = "top_level_text", this._rtl && this.idPull[a].childNodes.length > 0 ? this.idPull[a].insertBefore(c, this.idPull[a].childNodes[0]) : this.idPull[a].appendChild(c)), c.innerHTML = this.itemPull[a].title)
            }
    }, dhtmlXMenuObject.prototype.loadFromHTML = function(a, b, c) {
        this.itemTagName = "DIV", "string" == typeof a && (a = document.getElementById(a)), this._buildMenu(a, null), this.init(), b && a.parentNode.removeChild(a), null != c && c()
    }, dhtmlXMenuObject.prototype.hideItem = function(a) {
        this._changeItemVisible(a, !1)
    }, dhtmlXMenuObject.prototype.showItem = function(a) {
        this._changeItemVisible(a, !0)
    }, dhtmlXMenuObject.prototype.isItemHidden = function(a) {
        var b = null;
        return null != this.idPull[this.idPrefix + a] && (b = "none" == this.idPull[this.idPrefix + a].style.display), b
    }, dhtmlXMenuObject.prototype._changeItemVisible = function(a, b) {
        var c = this.idPrefix + a;
        null != this.itemPull[c] && ("separator" == this.itemPull[c].type && (c = "separator_" + c), null != this.idPull[c]) && (this.idPull[c].style.display = b ? "" : "none", this._redefineComplexState(this.itemPull[this.idPrefix + a].parent))
    }, dhtmlXMenuObject.prototype.setUserData = function(a, b, c) {
        this.userData[this.idPrefix + a + "_" + b] = c
    }, dhtmlXMenuObject.prototype.getUserData = function(a, b) {
        return null != this.userData[this.idPrefix + a + "_" + b] ? this.userData[this.idPrefix + a + "_" + b] : null
    }, dhtmlXMenuObject.prototype.setOpenMode = function(a) {
        "win" != a && "web" != a || (this.menuMode = a)
    }, dhtmlXMenuObject.prototype.setWebModeTimeout = function(a) {
        this.menuTimeoutMsec = isNaN(a) ? 400 : a
    }, dhtmlXMenuObject.prototype.enableDynamicLoading = function(a, b) {
        this.dLoad = !0, this.dLoadUrl = a, this.dLoadSign = String(this.dLoadUrl).search(/\?/) == -1 ? "?" : "&", this.loaderIcon = b, this.init()
    }, dhtmlXMenuObject.prototype._updateLoaderIcon = function(a, b) {
        if (null != this.idPull[a] && !(String(this.idPull[a].className).search("TopLevel_Item") >= 0)) {
            var c = this._rtl ? 0 : 2;
            if (this.idPull[a].childNodes[c] && this.idPull[a].childNodes[c].childNodes[0]) {
                var d = this.idPull[a].childNodes[c].childNodes[0];
                0 === String(d.className).search("complex_arrow") && (d.className = "complex_arrow" + (b ? "_loading" : ""))
            }
        }
    }, dhtmlXMenuObject.prototype.getItemImage = function(a) {
        var b = [null, null],
            a = this.idPrefix + a;
        return "item" == this.itemPull[a].type && (b[0] = this.itemPull[a].imgen, b[1] = this.itemPull[a].imgdis), b
    }, dhtmlXMenuObject.prototype.setItemImage = function(a, b, c) {
        "item" == this.itemPull[this.idPrefix + a].type && (this.itemPull[this.idPrefix + a].imgen = b, this.itemPull[this.idPrefix + a].imgdis = c, this._updateItemImage(a, this._getItemLevelType(a)))
    }, dhtmlXMenuObject.prototype.clearItemImage = function(a) {
        this.setItemImage(a, "", "")
    }, dhtmlXMenuObject.prototype.setAutoShowMode = function(a) {
        this.contextAutoShow = 1 == a
    }, dhtmlXMenuObject.prototype.setAutoHideMode = function(a) {
        this.contextAutoHide = 1 == a
    }, dhtmlXMenuObject.prototype.setContextMenuHideAllMode = function(a) {
        this.contextHideAllMode = 1 == a
    }, dhtmlXMenuObject.prototype.getContextMenuHideAllMode = function() {
        return this.contextHideAllMode
    }, dhtmlXMenuObject.prototype.setVisibleArea = function(a, b, c, d) {
        this._isVisibleArea = !0, this.menuX1 = a, this.menuX2 = b, this.menuY1 = c, this.menuY2 = d
    }, dhtmlXMenuObject.prototype.setTooltip = function(a, b) {
        a = this.idPrefix + a, null != this.itemPull[a] && null != this.idPull[a] && (this.idPull[a].title = b.length > 0 ? b : null, this.itemPull[a].tip = b)
    }, dhtmlXMenuObject.prototype.getTooltip = function(a) {
        return null == this.itemPull[this.idPrefix + a] ? null : this.itemPull[this.idPrefix + a].tip
    }, dhtmlXMenuObject.prototype.setHotKey = function(a, b) {
        if (a = this.idPrefix + a, null != this.itemPull[a] && null != this.idPull[a] && (this.itemPull[a].parent != this.idPrefix + this.topId || this.context) && !this.itemPull[a].complex) {
            var c = this.itemPull[a].type;
            if ("item" == c || "checkbox" == c || "radio" == c) {
                var d = null;
                try {
                    "sub_item_hk" == this.idPull[a].childNodes[this._rtl ? 0 : 2].childNodes[0].className && (d = this.idPull[a].childNodes[this._rtl ? 0 : 2].childNodes[0])
                } catch (a) {}
                if (0 == b.length) this.itemPull[a].hotkey_backup = this.itemPull[a].hotkey, this.itemPull[a].hotkey = "", null != d && d.parentNode.removeChild(d);
                else {
                    if (this.itemPull[a].hotkey = b, this.itemPull[a].hotkey_backup = null, null == d) {
                        d = document.createElement("DIV"), d.className = "sub_item_hk";
                        for (var e = this.idPull[a].childNodes[this._rtl ? 0 : 2]; e.childNodes.length > 0;) e.removeChild(e.childNodes[0]);
                        e.appendChild(d)
                    }
                    d.innerHTML = b
                }
            }
        }
    }, dhtmlXMenuObject.prototype.getHotKey = function(a) {
        return null == this.itemPull[this.idPrefix + a] ? null : this.itemPull[this.idPrefix + a].hotkey
    }, dhtmlXMenuObject.prototype.setItemSelected = function(a) {
        if (null == this.itemPull[this.idPrefix + a]) return null
    }, dhtmlXMenuObject.prototype.setTopText = function(a) {
        this.context || (null == this._topText && (this._topText = document.createElement("DIV"), this._topText.className = "dhtmlxMenu_TopLevel_Text_" + (this._rtl ? "left" : "left" == this._align ? "right" : "left"), this.base.appendChild(this._topText)), this._topText.innerHTML = a)
    }, dhtmlXMenuObject.prototype.setAlign = function(a) {
        this._align == a || "left" != a && "right" != a || (this._align = a, this.cont && (this.cont.className = "right" == this._align ? "align_right" : "align_left"), null != this._topText && (this._topText.className = "dhtmlxMenu_TopLevel_Text_" + ("left" == this._align ? "right" : "left")))
    }, dhtmlXMenuObject.prototype.setHref = function(a, b, c) {
        null != this.itemPull[this.idPrefix + a] && (this.itemPull[this.idPrefix + a].href_link = b, null != c && (this.itemPull[this.idPrefix + a].href_target = c))
    }, dhtmlXMenuObject.prototype.clearHref = function(a) {
        null != this.itemPull[this.idPrefix + a] && (delete this.itemPull[this.idPrefix + a].href_link, delete this.itemPull[this.idPrefix + a].href_target)
    }, dhtmlXMenuObject.prototype.getCircuit = function(a) {
        for (var b = Array(a); this.getParentId(a) != this.topId;) a = this.getParentId(a), b[b.length] = a;
        return b.reverse()
    }, dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon = function(a) {
        for (var b = this._getSubItemToDeselectByPolygon(a), c = 0; c < this._openedPolygons.length; c++) this._openedPolygons[c] != a && this._hidePolygon(this._openedPolygons[c]);
        for (c = 0; c < b.length; c++) null != this.idPull[b[c]] && "enabled" == this.itemPull[b[c]].state && (this.idPull[b[c]].className = "dhtmlxMenu_" + this.skin + "_SubLevelArea_Item_Normal")
    }, dhtmlXMenuObject.prototype._checkArrowsState = function(a) {
        var b = this.idPull["polygon_" + a],
            c = this.idPull["arrowup_" + a],
            d = this.idPull["arrowdown_" + a];
        c.className = 0 == b.scrollTop ? "dhtmlxMenu_" + this.skin + "_SubLevelArea_ArrowUp_Disabled" : "dhtmlxMenu_" + this.skin + "_SubLevelArea_ArrowUp" + (c.over ? "_Over" : ""), d.className = b.scrollTop + b.offsetHeight < b.scrollHeight ? "dhtmlxMenu_" + this.skin + "_SubLevelArea_ArrowDown" + (d.over ? "_Over" : "") : "dhtmlxMenu_" + this.skin + "_SubLevelArea_ArrowDown_Disabled"
    }, dhtmlXMenuObject.prototype._addUpArrow = function(a) {
        var b = this,
            c = document.createElement("DIV");
        c.pId = this.idPrefix + a, c.id = "arrowup_" + this.idPrefix + a, c.className = "dhtmlxMenu_" + this.skin + "_SubLevelArea_ArrowUp", c.innerHTML = "<div class='dhtmlxMenu_" + this.skin + "_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>", c.style.display = "none", c.over = !1, c.onselectstart = function(a) {
            return a = a || event, a.returnValue = !1
        }, c.oncontextmenu = function(a) {
            return a = a || event, a.returnValue = !1
        }, c.onmouseover = function() {
            "web" == b.menuMode && window.clearTimeout(b.menuTimeoutHandler), b._clearAllSelectedSubItemsInPolygon(this.pId), this.className != "dhtmlxMenu_" + b.skin + "_SubLevelArea_ArrowUp_Disabled" && (this.className = "dhtmlxMenu_" + b.skin + "_SubLevelArea_ArrowUp_Over", this.over = !0, b._canScrollUp = !0, b._doScrollUp(this.pId, !0))
        }, c.onmouseout = function() {
            "web" == b.menuMode && (window.clearTimeout(b.menuTimeoutHandler), b.menuTimeoutHandler = window.setTimeout(function() {
                b._clearAndHide()
            }, b.menuTimeoutMsec, "JavaScript")), this.over = !1, b._canScrollUp = !1, this.className != "dhtmlxMenu_" + b.skin + "_SubLevelArea_ArrowUp_Disabled" && (this.className = "dhtmlxMenu_" + b.skin + "_SubLevelArea_ArrowUp", window.clearTimeout(b._scrollUpTM))
        }, c.onclick = function(a) {
            return a = a || event, a.returnValue = !1, a.cancelBubble = !0, !1
        }, document.body.insertBefore(c, document.body.firstChild), this.idPull[c.id] = c
    }, dhtmlXMenuObject.prototype._addDownArrow = function(a) {
        var b = this,
            c = document.createElement("DIV");
        c.pId = this.idPrefix + a, c.id = "arrowdown_" + this.idPrefix + a, c.className = "dhtmlxMenu_" + this.skin + "_SubLevelArea_ArrowDown", c.innerHTML = "<div class='dhtmlxMenu_" + this.skin + "_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>", c.style.display = "none", c.over = !1, c.onselectstart = function(a) {
            return a = a || event, a.returnValue = !1
        }, c.oncontextmenu = function(a) {
            return a = a || event, a.returnValue = !1
        }, c.onmouseover = function() {
            "web" == b.menuMode && window.clearTimeout(b.menuTimeoutHandler), b._clearAllSelectedSubItemsInPolygon(this.pId), this.className != "dhtmlxMenu_" + b.skin + "_SubLevelArea_ArrowDown_Disabled" && (this.className = "dhtmlxMenu_" + b.skin + "_SubLevelArea_ArrowDown_Over", this.over = !0, b._canScrollDown = !0, b._doScrollDown(this.pId, !0))
        }, c.onmouseout = function() {
            "web" == b.menuMode && (window.clearTimeout(b.menuTimeoutHandler), b.menuTimeoutHandler = window.setTimeout(function() {
                b._clearAndHide()
            }, b.menuTimeoutMsec, "JavaScript")), this.over = !1, b._canScrollDown = !1, this.className != "dhtmlxMenu_" + b.skin + "_SubLevelArea_ArrowDown_Disabled" && (this.className = "dhtmlxMenu_" + b.skin + "_SubLevelArea_ArrowDown", window.clearTimeout(b._scrollDownTM))
        }, c.onclick = function(a) {
            return a = a || event, a.returnValue = !1, a.cancelBubble = !0, !1
        }, document.body.insertBefore(c, document.body.firstChild), this.idPull[c.id] = c
    }, dhtmlXMenuObject.prototype._removeUpArrow = function(a) {
        var b = "arrowup_" + this.idPrefix + a;
        this._removeArrow(b)
    }, dhtmlXMenuObject.prototype._removeDownArrow = function(a) {
        var b = "arrowdown_" + this.idPrefix + a;
        this._removeArrow(b)
    }, dhtmlXMenuObject.prototype._removeArrow = function(a) {
        var b = this.idPull[a];
        b.onselectstart = null, b.oncontextmenu = null, b.onmouseover = null, b.onmouseout = null, b.onclick = null, b.parentNode && b.parentNode.removeChild(b), b = null, this.idPull[a] = null;
        try {
            delete this.idPull[a]
        } catch (a) {}
    }, dhtmlXMenuObject.prototype._isArrowExists = function(a) {
        return null != this.idPull["arrowup_" + a] && null != this.idPull["arrowdown_" + a]
    }, dhtmlXMenuObject.prototype._doScrollUp = function(a, b) {
        var c = this.idPull["polygon_" + a];
        if (this._canScrollUp && c.scrollTop > 0) {
            var d = !1,
                e = c.scrollTop - this._scrollUpTMStep;
            if (e < 0 && (d = !0, e = 0), c.scrollTop = e, !d) {
                var f = this;
                this._scrollUpTM = window.setTimeout(function() {
                    f._doScrollUp(a, !1)
                }, this._scrollUpTMTime)
            }
        } else this._canScrollUp = !1, this._checkArrowsState(a);
        b && this._checkArrowsState(a)
    }, dhtmlXMenuObject.prototype._doScrollDown = function(a, b) {
        var c = this.idPull["polygon_" + a];
        if (this._canScrollDown && c.scrollTop + c.offsetHeight <= c.scrollHeight) {
            var d = !1,
                e = c.scrollTop + this._scrollDownTMStep;
            if (e + c.offsetHeight > c.scollHeight && (d = !0, e = c.scollHeight - c.offsetHeight), c.scrollTop = e, !d) {
                var f = this;
                this._scrollDownTM = window.setTimeout(function() {
                    f._doScrollDown(a, !1)
                }, this._scrollDownTMTime)
            }
        } else this._checkArrowsState(a);
        b && this._checkArrowsState(a)
    }, dhtmlXMenuObject.prototype._countPolygonItems = function(a) {
        var b, c = 0;
        for (b in this.itemPull) {
            var d = this.itemPull[b].parent,
                e = this.itemPull[b].type;
            d == this.idPrefix + a && ("item" == e || "radio" == e || "checkbox" == e) && c++
        }
        return c
    }, dhtmlXMenuObject.prototype.setOverflowHeight = function(a) {
        if ("auto" === a) this.limit = 0, this.autoOverflow = !0;
        else if (!(0 == this.limit && a <= 0))
            if (this._clearAndHide(), this.limit >= 0 && a > 0) this.limit = a;
            else if (this.limit > 0 && a <= 0) {
            for (var b in this.itemPull)
                if (this._isArrowExists(b)) {
                    var c = String(b).replace(this.idPrefix, "");
                    this._removeUpArrow(c), this._removeDownArrow(c), this.idPull["polygon_" + b].style.height = ""
                }
            this.limit = 0
        }
    }, dhtmlXMenuObject.prototype._getRadioImgObj = function(a) {
        try {
            var b = this.idPull[this.idPrefix + a].childNodes[this._rtl ? 2 : 0].childNodes[0]
        } catch (a) {
            b = null
        }
        return b
    }, dhtmlXMenuObject.prototype._setRadioState = function(a, b) {
        var c = this._getRadioImgObj(a);
        if (null != c) {
            var d = this.itemPull[this.idPrefix + a];
            d.checked = b, d.imgen = "rdbt_" + (d.checked ? "1" : "0"), d.imgdis = d.imgen, c.className = "sub_icon " + d.imgen
        }
    }, dhtmlXMenuObject.prototype._radioOnClickHandler = function(a, b, c) {
        if ("d" != b.charAt(1) && null != this.itemPull[this.idPrefix + a].group) {
            var d = this.itemPull[this.idPrefix + a].group;
            this.checkEvent("onRadioClick") ? this.callEvent("onRadioClick", [d, this.getRadioChecked(d), a, this.contextMenuZoneId, c]) && this.setRadioChecked(d, a) : this.setRadioChecked(d, a), this.checkEvent("onClick") && this.callEvent("onClick", [a])
        }
    }, dhtmlXMenuObject.prototype.getRadioChecked = function(a) {
        for (var b = null, c = 0; c < this.radio[a].length; c++) {
            var d = this.radio[a][c].replace(this.idPrefix, ""),
                e = this._getRadioImgObj(d);
            if (null != e) {
                var f = e.className.match(/rdbt_1$/gi);
                null != f && (b = d)
            }
        }
        return b
    }, dhtmlXMenuObject.prototype.setRadioChecked = function(a, b) {
        if (null != this.radio[a])
            for (var c = 0; c < this.radio[a].length; c++) {
                var d = this.radio[a][c].replace(this.idPrefix, "");
                this._setRadioState(d, d == b)
            }
    }, dhtmlXMenuObject.prototype.addRadioButton = function(a, b, c, d, e, f, g, h) {
        if (!this.context || b != this.topId) {
            if (null == this.itemPull[this.idPrefix + b]) return;
            if ("child" == a && "item" != this.itemPull[this.idPrefix + b].type) return
        }
        var i = this.idPrefix + (null != d ? d : this._genStr(24)),
            j = "rdbt_" + (g ? "1" : "0"),
            k = j;
        if ("sibling" == a) {
            var l = this.idPrefix + this.getParentId(b);
            this._addItemIntoGlobalStrorage(i, l, e, "radio", h, j, k), this._renderSublevelItem(i, this.getItemPosition(b))
        } else l = this.idPrefix + b, this._addItemIntoGlobalStrorage(i, l, e, "radio", h, j, k), null == this.idPull["polygon_" + l] && this._renderSublevelPolygon(l, l), this._renderSublevelItem(i, c - 1), this._redefineComplexState(l);
        var m = null != f ? f : this._genStr(24);
        this.itemPull[i].group = m, null == this.radio[m] && (this.radio[m] = []), this.radio[m][this.radio[m].length] = i, 1 == g && this.setRadioChecked(m, String(i).replace(this.idPrefix, ""))
    }, dhtmlXMenuObject.prototype._getCheckboxState = function(a) {
        return null == this.itemPull[this.idPrefix + a] ? null : this.itemPull[this.idPrefix + a].checked
    }, dhtmlXMenuObject.prototype._setCheckboxState = function(a, b) {
        null != this.itemPull[this.idPrefix + a] && (this.itemPull[this.idPrefix + a].checked = b)
    }, dhtmlXMenuObject.prototype._updateCheckboxImage = function(a) {
        if (null != this.idPull[this.idPrefix + a]) {
            this.itemPull[this.idPrefix + a].imgen = "chbx_" + (this._getCheckboxState(a) ? "1" : "0"), this.itemPull[this.idPrefix + a].imgdis = this.itemPull[this.idPrefix + a].imgen;
            try {
                this.idPull[this.idPrefix + a].childNodes[this._rtl ? 2 : 0].childNodes[0].className = "sub_icon " + this.itemPull[this.idPrefix + a].imgen
            } catch (a) {}
        }
    }, dhtmlXMenuObject.prototype._checkboxOnClickHandler = function(a, b, c) {
        if ("d" != b.charAt(1) && null != this.itemPull[this.idPrefix + a]) {
            var d = this._getCheckboxState(a);
            this.checkEvent("onCheckboxClick") ? this.callEvent("onCheckboxClick", [a, d, this.contextMenuZoneId, c]) && this.setCheckboxState(a, !d) : this.setCheckboxState(a, !d), this.checkEvent("onClick") && this.callEvent("onClick", [a])
        }
    }, dhtmlXMenuObject.prototype.setCheckboxState = function(a, b) {
        this._setCheckboxState(a, b), this._updateCheckboxImage(a)
    }, dhtmlXMenuObject.prototype.getCheckboxState = function(a) {
        return this._getCheckboxState(a)
    }, dhtmlXMenuObject.prototype.addCheckbox = function(a, b, c, d, e, f, g) {
        if (!this.context || b != this.topId) {
            if (null == this.itemPull[this.idPrefix + b]) return;
            if ("child" == a && "item" != this.itemPull[this.idPrefix + b].type) return
        }
        var h = "chbx_" + (f ? "1" : "0"),
            i = h;
        if ("sibling" == a) {
            var j = this.idPrefix + (null != d ? d : this._genStr(24)),
                k = this.idPrefix + this.getParentId(b);
            this._addItemIntoGlobalStrorage(j, k, e, "checkbox", g, h, i), this.itemPull[j].checked = f, this._renderSublevelItem(j, this.getItemPosition(b))
        } else j = this.idPrefix + (null != d ? d : this._genStr(24)), k = this.idPrefix + b, this._addItemIntoGlobalStrorage(j, k, e, "checkbox", g, h, i), this.itemPull[j].checked = f, null == this.idPull["polygon_" + k] && this._renderSublevelPolygon(k, k), this._renderSublevelItem(j, c - 1), this._redefineComplexState(k)
    }, dhtmlXMenuObject.prototype._readLevel = function(a) {
        var b, c = "";
        for (b in this.itemPull)
            if (this.itemPull[b].parent == a) {
                var d = "",
                    e = "",
                    f = "",
                    g = String(this.itemPull[b].id).replace(this.idPrefix, ""),
                    h = "",
                    i = "" != this.itemPull[b].title ? ' text="' + this.itemPull[b].title + '"' : "",
                    j = "";
                "item" == this.itemPull[b].type && ("" != this.itemPull[b].imgen && (d = ' img="' + this.itemPull[b].imgen + '"'), "" != this.itemPull[b].imgdis && (e = ' imgdis="' + this.itemPull[b].imgdis + '"'), "" != this.itemPull[b].hotkey && (f = "<hotkey>" + this.itemPull[b].hotkey + "</hotkey>")), "separator" == this.itemPull[b].type ? h = ' type="separator"' : "disabled" == this.itemPull[b].state && (j = ' enabled="false"'), "checkbox" == this.itemPull[b].type && (h = ' type="checkbox"' + (this.itemPull[b].checked ? ' checked="true"' : "")), "radio" == this.itemPull[b].type && (h = ' type="radio" group="' + this.itemPull[b].group + '" ' + (this.itemPull[b].checked ? ' checked="true"' : "")), c += "<item id='" + g + "'" + i + h + d + e + j + ">", c += f, this.itemPull[b].complex && (c += this._readLevel(b)), c += "</item>"
            }
        return c
    }, dhtmlXMenuObject.prototype.serialize = function() {
        var a = "<menu>" + this._readLevel(this.idPrefix + this.topId) + "</menu>";
        return a
    }, dhtmlxSlider.prototype.createStructure = function() {
        if (this.con && (this.con.parentNode.removeChild(this.con), this.con = null), this.vMode) {
            this._sW = "height", this._sH = "width", this._sL = "top", this._sT = "left";
            var a = this.imgURL + "skins/" + this.skin + "/vertical/"
        } else this._sW = "width", this._sH = "height", this._sL = "left", this._sT = "top", a = this.imgURL + "skins/" + this.skin + "/";
        this.con = document.createElement("DIV"), this.con.onselectstart = function() {
            return !1
        }, this.con._etype = "slider", this.con.className = "dhtmlxSlider" + ("default" != this.skin ? "_" + this.skin : ""), this._skinsImgs[this.skin].bg && (this.con.style.backgroundImage = "url(" + a + "bg.gif)"), this.drag = document.createElement("DIV"), this.drag._etype = "drag", this.drag.className = "selector", this.drag.style.backgroundImage = "url(" + a + "selector.gif)";
        var b = document.createElement("DIV");
        b.className = "leftSide", this._skinsImgs[this.skin].ls && (b.style.background = "url(" + a + "leftside_bg.gif)"), this.leftZone = document.createElement("DIV"), this.leftZone.className = "leftZone", this._skinsImgs[this.skin].lz && (this.leftZone.style.background = "url(" + a + "leftzone_bg.gif)");
        var c = document.createElement("DIV");
        if (c.className = "rightSide", this._skinsImgs[this.skin].rs && (c.style.background = "url(" + a + "rightside_bg.gif)"), this.rightZone = document.createElement("DIV"), this.rightZone.className = "rightZone", this._skinsImgs[this.skin].rz && (this.rightZone.style.background = "url(" + a + "rightzone_bg.gif)"), this.con.appendChild(b), this.con.appendChild(this.leftZone), this.con.appendChild(this.rightZone), this.con.appendChild(c), this.con.appendChild(this.drag), this.parent.appendChild(this.con), (!this.parent.parentNode || !this.parent.parentNode.tagName) && document.body.appendChild(this.parent), this.vMode) {
            this._sW = "height", this._sH = "width", this._sL = "top", this._sT = "left", this.con.style.width = this.con.offsetHeight + "px";
            for (var d = 0; d < this.con.childNodes.length; d++) {
                this.con.childNodes[d].style.fontSize = "0";
                var e = this.con.childNodes[d].offsetWidth;
                this.con.childNodes[d].style.width = this.con.childNodes[d].offsetHeight + "px", this.con.childNodes[d].style.height = e + "px", e = this.con.childNodes[d].offsetLeft, this.con.childNodes[d].style.left = this.con.childNodes[d].offsetTop + "px", this.con.childNodes[d].style.top = e + "px"
            }
            c.style.top = this.size - c.offsetHeight + "px", this.zoneSize = this.size - c.offsetHeight, this.dragLeft = this.drag.offsetTop, this.dragWidth = this.drag.offsetHeight, this.rightZone.style.height = this.zoneSize + "px"
        } else this.zoneSize = this.size - c.offsetWidth, this.dragLeft = this.drag.offsetLeft, this.dragWidth = this.drag.offsetWidth, this.rightZone.style.width = this.zoneSize + "px";
        this.con.style[this._sW] = this.size + "px", this.con.onmousedown = this._onMouseDown, this.con.onmouseup = this.con.onmouseout = function() {
            clearInterval(this.that._int)
        }, this.con.that = this, this._aCalc(this._def)
    }, dhtmlxSlider.prototype._aCalc = function(a) {
        if (this.isInit) return this.shift = a[0], this.limit = a[1] - this.shift, this._mod = (a[4] - 2 * this.dragLeft - this.dragWidth) / this.limit, this._step = a[2], this.step = this._step * this._mod, this._xlimit = a[4] - 2 * this.dragLeft - this.dragWidth, this.posX || (this.posX = this._xlimit * (a[3] - this.shift) / this.limit), this._applyPos(!0), this
    }, dhtmlxSlider.prototype.setMin = function(a) {
        this._def[0] = a - 0, this._aCalc(this._def)
    }, dhtmlxSlider.prototype.setMax = function(a) {
        this._def[1] = a - 0, this._aCalc(this._def)
    }, dhtmlxSlider.prototype.setStep = function(a) {
        this._def[2] = a - 0, this._aCalc(this._def)
    }, dhtmlxSlider.prototype._applyPos = function(a) {
        if (this.isInit) {
            1 != this.step && this.step && (this.posX = Math.round(this.posX / this.step) * this.step), this.posX < 0 && (this.posX = 0), this.value < (this._def[0] || 0) && (this.value = this._def[0] || 0), this.value > this._def[1] && (this.value = this._def[1]), this.posX > this._xlimit && (this.posX = this._xlimit);
            var b = this.drag.style[this._sL];
            this.drag.style[this._sL] = this.posX + 1 * this.dragLeft + "px", this.leftZone.style[this._sW] = this.posX + 1 * this.dragLeft + "px", this.rightZone.style[this._sL] = this.posX + 1 * this.dragLeft + 1 + "px", this.rightZone.style[this._sW] = this.zoneSize - (this.posX + 1 * this.dragLeft) + "px";
            var c = this.getValue();
            this._link && (this._linkBoth ? this._link.value = c : this._link.innerHTML = c), !a && b != this.drag.style[this._sL] && this.callEvent("onChange", [c, this]), this.value = this.getValue(), this._dttp || this._setTooltip(c)
        }
    }, dhtmlxSlider.prototype._setTooltip = function(a) {
        this.con.title = a
    }, dhtmlxSlider.prototype.setSkin = function(a) {
        this.skin = a || "default", this.isInit && this.createStructure()
    }, dhtmlxSlider.prototype.startDrag = function(a) {
        if (!this._busy && (0 === a.button || 1 === a.button)) {
            this.drag_mx = a.clientX, this.drag_my = a.clientY, this.drag_cx = this.posX, this.d_b_move = document.body.onmousemove, this.d_b_up = document.body.onmouseup;
            var b = this;
            document.body.onmouseup = function(a) {
                b.stopDrag(a || event), b = null
            }, document.body.onmousemove = function(a) {
                b.onDrag(a || event)
            }, this._busy = !0
        }
    }, dhtmlxSlider.prototype.onDrag = function(a) {
        this._busy && (this.posX = this.vMode ? this.drag_cx + a.clientY - this.drag_my : this.drag_cx + a.clientX - this.drag_mx, this._applyPos())
    }, dhtmlxSlider.prototype.stopDrag = function() {
        document.body.onmousemove = this.d_b_move ? this.d_b_move : null, document.body.onmouseup = this.d_b_up ? this.d_b_up : null, this.d_b_move = this.d_b_up = null, this._busy = !1, this.callEvent("onSlideEnd", [this.getValue()])
    }, dhtmlxSlider.prototype.getValue = function() {
        return !this._busy && this.inputPriority ? (Math.round(this.value / this._step) * this._step).toFixed(6) - 0 : Math.round(1e4 * (Math.round(this.posX / this._mod / this._step) * this._step + 1 * this.shift)) / 1e4
    }, dhtmlxSlider.prototype.setValue = function(a, b) {
        isNaN(a) || (this._def[3] = this.value = a - 0, this.posX = Math.round(((a || 0) - this.shift) * this._mod), this._applyPos(null == b || b))
    }, dhtmlxSlider.prototype._getActionElement = function(a) {
        return a._etype ? a : a.parentNode ? this._getActionElement(a.parentNode) : null
    }, dhtmlxSlider.prototype._onMouseDown = function(a) {
        if (!this.that.disabled) {
            var a = a || event,
                b = this.that,
                c = b._getActionElement(_isIE ? a.srcElement : a.target);
            switch (c._etype) {
                case "slider":
                    var d = b.vMode ? a.clientY - (getAbsoluteTop(b.con) - document.body.scrollTop) : a.clientX - (getAbsoluteLeft(b.con) - document.body.scrollLeft),
                        e = b.posX;
                    b.posX = d - b.dragLeft - b.dragWidth / 2, b.direction = b.posX > e ? 1 : -1, b.stepping ? (clearInterval(b._int), b.setValue(b.value + b._step * b.direction, !1), b._int = setInterval(function() {
                        b.setValue(b.value + b._step * b.direction, !1)
                    }, 600)) : (b._busy = !0, b._applyPos(), b._busy = !1);
                    break;
                case "drag":
                    b.startDrag(a || event)
            }
            return !1
        }
    }, dhtmlxSlider.prototype.setOnChangeHandler = function(a) {
        this.attachEvent("onChange", a)
    }, dhtmlxSlider.prototype._linkFrom = function() {
        this.disabled || this.setValue(parseFloat(this._link.value), !1)
    }, dhtmlxSlider.prototype.linkTo = function(a) {
        this._link = a = "object" != typeof a ? document.getElementById(a) : a;
        var b = a.tagName.toString().toLowerCase();
        if (this._linkBoth = "input" == b || "select" == b || "textarea" == b ? 1 : 0) {
            var c = this,
                d = function() {
                    this._nextSlider && window.clearTimeout(this._nextSlider), this._nextSlider = window.setTimeout(function() {
                        c._linkFrom()
                    }, 500)
                };
            a.onblur = a.onkeypress = a.onchange = d
        }
        this._applyPos()
    }, dhtmlxSlider.prototype.enableTooltip = function(a) {
        this._dttp = !convertStringToBoolean(a), this._setTooltip(this._dttp ? "" : this.getValue())
    }, dhtmlxSlider.prototype.setImagePath = function(a) {
        this.imgURL = a
    }, dhtmlxSlider.prototype.init = function() {
        this.isInit = !0, this.createStructure()
    }, dhtmlxSlider.prototype.setInputPriority = function(a) {
        this.inputPriority = a
    }, dhtmlxSlider.prototype.setSteppingMode = function(a) {
        this.stepping = a
    }, dhtmlxSlider.prototype.disable = function(a) {
        this.disabled = a
    },
    function() {
        dhtmlx.extend_api("dhtmlxSlider", {
            _init: function(a) {
                return [a.parent, a.size, a.skin, a.vertical, a.min, a.max, a.value, a.step]
            },
            link: "linkTo"
        }, {})
    }(), dhtmlXTabBar.prototype = {
        _get_size: function(a, b) {
            var c = this.entBox.getAttribute(a) || this.entBox.style[a] || (window.getComputedStyle ? window.getComputedStyle(this.entBox, null)[a] : this.entBox.currentStyle ? this.entBox.currentStyle[a] : 0);
            return (c || "").indexOf("%") != -1 && this.enableAutoReSize(!0, !0), c && c.indexOf("%") == -1 && "auto" != c || (c = b + "px"), c
        },
        setStyle: function(a) {
            this.setSkin(a)
        },
        _getSkin: function() {
            return this._a
        },
        setSkin: function(a) {
            a = a.toLowerCase(), this._styles[a] || (a = "default"), this._a = this._styles[a], this.skin = a, this._tabAll && (this._tabAll.className = "dhx_tabbar_zone dhx_tabbar_zone_" + this.skin);
            var b = 0 == a.indexOf("dhx_sky"),
                c = 0 == a.indexOf("dhx_web"),
                d = 0 == a.indexOf("dhx_terrace");
            if (d && !this._custom_height && (this._s.line_height = 28, this._setRowSizes()),
                b && (this._s.skin_line = 0), c && (this._s.line_height = 29, this._s.ext_border = -1, this._s.expand = !0), b) {
                this._s.line_height = 26, this._setRowSizes(), this._s.expand && (this._s.tab_margin = -1), this._s.skin_line_x = !0, this._s.skin_line = -3;
                var e = this._s._rendered;
                if (e)
                    for (var f = 0; f < e.length; f++) e[f].parentNode.removeChild(e[f]);
                var g = document.createElement("DIV");
                g.className = "dhx_tabbar_lineA", this._tabAll.appendChild(g);
                var h = document.createElement("DIV");
                h.className = "dhx_tabbar_lineB", this._tabAll.appendChild(h);
                var i = document.createElement("DIV");
                i.className = "dhx_tabbar_lineC", this._tabAll.appendChild(i);
                var j = document.createElement("DIV");
                j.className = "dhx_tabbar_lineD", this._tabAll.appendChild(j), this._getCoverLine(), this._s._rendered = [g, h, i, j], this._s.expand && (this._conZone.style.borderWidth = "0px 0px 0px 0px", this._tabZone.firstChild.style.borderWidth = "0px 0px 0px 0px", i.style.borderWidth = "0px 0px 0px 0px", j.style.left = "0px", i.style.right = "0px", g.style.borderWidth = "0px 0px 0px 0px", "top" == this._s.mode && (this._lineA.style.borderWidth = "1px 0px 0px 0px"), h.style.left = "1px", this._s.ext_border = 0);
                var k = function() {
                    this._lineA.style[this._dx] = "1px";
                    var a = _isIE && "BackCompat" == document.compatMode,
                        b = this._tabAll[this._s._vMode ? "offsetHeight" : "offsetWidth"] + (a ? 2 : 0);
                    this._lastActive && (b = Math.max(b, this._lastActive.parentNode[this._s._vMode ? "scrollHeight" : "scrollWidth"])), b < 6 || (g.style[this._py] = parseInt(this._conZone.style[this._py]) - 3 + "px", g.style[this._dx] = b - 2 + "px", h.style[this._py] = parseInt(this._conZone.style[this._py]) - 3 + "px", h.style[this._dx] = b - (a ? 6 : 4) + (this._s.expand ? 2 : 0) + "px", i.style[this._dy] = parseInt(this._tabZone.style[this._dy]) - 3 + "px", this._lineA.style[this._dx] = b - 2 + "px")
                };
                k.call(this);
                var l = this._checkScroll;
                this._checkScroll = function() {
                    k.apply(this, arguments), l.apply(this, arguments)
                };
                var m = this._scrollTo;
                this._scrollTo = function() {
                    m.apply(this, arguments), k.apply(this, arguments)
                }
            }
            this._a.data_color && this._conZone && (this._conZone.style.backgroundColor = this._a.data_color), this.__skin = !0
        },
        enableAutoReSize: function() {
            var a = this;
            dhtmlxEvent(window, "resize", function() {
                window.setTimeout(function() {
                    a && a._setSizes && a._setSizes()
                }, 1)
            })
        },
        _createSelf: function() {
            this._tabAll = document.createElement("DIV"),
                this._tabZone = document.createElement("DIV"),
                this._conZone = document.createElement("DIV"),
                this.entBox.appendChild(this._tabAll),
                this._tabAll.appendChild(this._tabZone),
                this._tabAll.appendChild(this._conZone),
                this._tabAll.className = "dhx_tabbar_zone dhx_tabbar_zone_" + this.skin,
                this._s._vMode && (this._tabAll.className += "V"),
                this._s._bMode && (this._tabAll.className += "B"),
                this._tabZone.className = "dhx_tablist_zone",
                this._conZone.className = "dhx_tabcontent_zone",
                this.entBox._hideBorders && (this._conZone.style.borderLeft = this._conZone.style.borderRight = this._conZone.style.borderBottom = "0px solid white"),
                this._a.data_color && (this._conZone.style.backgroundColor = this._a.data_color),
                this._tabZone.onselectstart = function() {
                    return !1
                },
                this._tabZone.onclick = this._onClickHandler,
                this._tabZone.onmouseover = this._onMouseOverHandler,
                this._tabZone[_isFF ? "onmouseout" : "onmouseleave"] = this._onMouseOutHandler,
                this._tabZone.tabbar = this, this._createRow()
        },
        _createRow: function() {
            var a = document.createElement("DIV");
            a.className = "dhx_tabbar_row", a.tabCount = 0, this._tabZone.appendChild(a), this._rows[this._rows.length] = a, this._setRowSizes()
        },
        _removeRow: function(a) {
            a.parentNode.removeChild(a);
            for (var b = [], c = 0; c < this._rows.length; c++) this._rows[c] != a && (b[b.length] = this._rows[c]);
            this._rows = b
        },
        _setSizes: function(a, b) {
            var c = ["clientHeight", "clientWidth"];
            "width" != this._dx && c.reverse();
            var d = _isIE && "BackCompat" == document.compatMode,
                e = this._conZone.offsetWidth - this._conZone.clientWidth,
                f = b || this.entBox[c[0]] + (d ? e : 0),
                d = a || this.entBox[c[1]] + (d ? e : 0),
                g = this._rows.length * (this._s.line_height - (this._s.skin_line_x ? 4 : 2)) + (this._s.skin_line_x ? 2 : 0);
            this._tabZone.style[this._dy] = g + "px", this._conZone.style[this._dy] = Math.max(0, f - this._s.ext_border - g - (this._s.skin_line_x ? 3 : 0) - this._s.tab_margin) + "px", this._conZone.style[this._dx] = Math.max(0, d - (this._s.expand ? 0 : 2)) + "px", this._tabZone.style[this._py] = this._s.tab_margin + "px", this._conZone.style[this._py] = g + this._s.tab_margin - this._s.skin_line + "px", this._checkScroll();
            var h = this.getActiveTab();
            h && this.cells(h).activate()
        },
        _checkScroll: function() {
            if (this._lineA) {
                this._lineA.style[this._dx] = "1px";
                var a = _isIE && "BackCompat" == document.compatMode,
                    b = this._tabAll[this._s._vMode ? "offsetHeight" : "offsetWidth"] + (a ? 2 : 0);
                this._lastActive && (b = Math.max(b, this._lastActive.parentNode[this._s._vMode ? "scrollHeight" : "scrollWidth"])), b > 2 && (this._lineA.style[this._dx] = b - 2 + "px")
            }
            if (!this._s._vMode && this._s.scrolls)
                for (var c = 0; c < this._rows.length; c++) this._rows[c].scrollWidth - this._rows[c].offsetWidth > 2 ? this._showScroll(c) : this._hideScroll(c)
        },
        _showScroll: function(a) {
            if (!this._rows[a]._scroll) {
                this.callEvent("onBeforeShowScroll", [a]);
                var b = this._rows[a]._scroll = [],
                    c = Math.max(0, this._s.line_height - 23);
                b[0] = document.createElement("DIV"), b[0].style.cssText = "background-image:url(" + this.imgUrl + this.skin + "/" + this.skin + "_scroll_left.gif); width:20px; height:21px;position:absolute;left:0px;z-index:990;top:" + c + "px;", b[0].className = "dhx_tab_scroll_left", this._rows[a].appendChild(b[0]), b[1] = document.createElement("DIV"), b[1].style.cssText = "background-image:url(" + this.imgUrl + this.skin + "/" + this.skin + "_scroll_right.gif); width:20px; height:21px;position:absolute;right:0px;z-index:990;top:" + c + "px;", b[1].className = "dhx_tab_scroll_right", this._rows[a].appendChild(b[1])
            }
        },
        _hideScroll: function(a) {
            this._rows[a]._scroll && this.callEvent("onBeforeHideScroll", [a]), this._rows[a]._scroll && (this._rows[a].removeChild(this._rows[a]._scroll[0]), this._rows[a].removeChild(this._rows[a]._scroll[1]), this._rows[a]._scroll = null)
        },
        _setRowSizes: function() {
            for (var a = 0; a < this._rows.length; a++) this._rows[a].style[this._dy] = this._s.line_height + "px", this._rows[a].style[this._py] = a * (this._s.line_height - (this._s.skin_line_x ? 4 : 2)) - (_isIE && !window.postMessage && this._s._bMode, 0) + "px", this._rows[a].style.zIndex = 10 + a;
            this._setSizes()
        },
        _setTabSizes: function(a) {
            for (var b = this._a.offset, c = this._s.align ? this._pxc : this._px, d = 0; d < a.tabCount; d++) {
                var e = a.childNodes[d];
                "none" != e.style.display && (e.style[c] = b - (this._lastActive == e ? this._a.select_shift : 0) + "px", b += e._size + this._a.margin)
            }
        },
        addTab: function(a, b, c, d, e) {
            !this.__skin && dhtmlx.skin && this.setSkin(dhtmlx.skin);
            for (var e = e || 0, f = this._rows.length; f <= e; f++) this._createRow();
            var g = this._rows[e].tabCount;
            !d && 0 !== d && (d = g);
            var h = this._createTab(a, b, "*" == c ? 10 : c || this._s._tabSize);
            this._addTab(this._rows[e], h, c, d), this._tabs[a] = h, this.cells(a).hide(), this._checkScroll()
        },
        getIndex: function(a) {
            var b = this._tabs[a];
            if (b)
                for (var c = b.parentNode, d = 0; d < c.childNodes.length; d++)
                    if (c.childNodes[d] == b) return d;
            return -1
        },
        moveTab: function(a, b) {
            var c = this._tabs[a];
            if (c) {
                var d = this.getIndex(a),
                    e = c.parentNode,
                    b = Math.min(b, e.tabCount - 1);
                d != b && (d < b && b++, c.parentNode.childNodes[b] ? c.parentNode.insertBefore(c, c.parentNode.childNodes[b]) : c.parentNode.appendChild(c), this._setTabSizes(c.parentNode))
            }
        },
        removeTab: function(a, b) {
            var c = this._tabs[a];
            if (c) {
                this.cells(a)._dhxContDestruct(), this._content[a] && this._content[a].parentNode && this._content[a].parentNode.removeChild(this._content[a]), this._content[a] = null, this._goToAny(c, b);
                var d = c.parentNode;
                c.innerHTML = "", d.removeChild(c), d.tabCount--, 0 == d.tabCount && this._rows.length > 1 ? this._removeRow(d) : this._setTabSizes(d), delete this._tabs[a], this._lastActive == c && (this._lastActive = null), this._setRowSizes()
            }
        },
        _goToAny: function(a, b) {
            this._lastActive == a && (b && this.goToNextTab() == a && this.goToPrevTab(), this._lastActive == a) && (this._lastActive = null)
        },
        _createTab: function(a, b, c) {
            var d = document.createElement("DIV");
            d.className = "dhx_tab_element dhx_tab_element_inactive";
            var e = "<span>" + b + "</span><div></div><div></div><div></div>";
            if (this._close && (e += "<IMG style='" + this._pxc + ":4px; " + this._py + ("dhx_web" == this.skin ? ":7" : ":4") + "px; position:absolute;z-index:11;' src='" + this.imgUrl + this.skin + "/close.png' >"), d.innerHTML = e, d.setAttribute("tab_id", a), d._size = parseInt(c), d.style[this._dx] = parseInt(c) + "px", d.style[this._dy] = this._s.line_height + "px", d.style[this._py] = this._a.select_top + "px", d.skin = this.skin, this._a.tab_color && (d.style.backgroundColor = this._a.tab_color), this._c[a] && (d.childNodes[0].style.cssText = this._c[a].color), this._img_all(d), this._close) {
                var f = this;
                d.childNodes[4].onclick = function(a) {
                    var b = this.parentNode.getAttribute("tab_id");
                    f.callEvent("onTabClose", [b]) && f.removeTab(b, !0), (a || event).cancelBubble = !0
                }
            }
            return d
        },
        _img_all: function(a) {
            var b = this._getSkin(a),
                c = a._active ? 1 : 4;
            this._img(a.childNodes[1], c, this._px, b.left), this._img(a.childNodes[2], c + 2, this._pxc, b.right), this._img(a.childNodes[3], c + 1, this._px, parseInt(a.style[this._dx]) - (b.left + b.right), b.left)
        },
        _get_img_pos: function(a) {
            return this._s._bMode && a < 7 && (a = Math.abs(a - 6)), a = -5 - a * (1 == this._s._vMode && "dhx_terrace" == this.skin ? 245 : 45), this._s._vMode ? a + "px 0px" : "0px " + a + "px"
        },
        _img: function(a, b, c, d, e) {
            "undefined" != typeof a && (a.style.backgroundImage = "url(" + this.imgUrl + this.skin + "/" + this.skin + "_" + this._s.mode + ".gif)", a.style.backgroundPosition = this._get_img_pos(b), 1 == this._s._vMode && "dhx_terrace" == this.skin && (a.style.width = "240px"), a.style[this._py] = "0px", c && (a.style[this._dx] = Math.max(d, 0) + "px", a.style[c] = (e || 0) + "px"))
        },
        _addTab: function(a, b, c, d) {
            var e = this._a.offset;
            if (a.tabCount) var f = a.childNodes[a.tabCount - 1],
                e = parseInt(f.style[this._s.align ? this._pxc : this._px]) + parseInt(f._size) + this._a.margin;
            var g = a.childNodes[d];
            g ? a.insertBefore(b, g) : a.appendChild(b), a.tabCount++, "*" == c && (b.style.whiteSpace = "nowrap", this.adjustTabSize(b)), b.style[this._s.align ? this._pxc : this._px] = e + "px", d != a.tabCount - 1 && this._setTabSizes(a)
        },
        adjustTabSize: function(a, b) {
            var c = this._getSkin(c);
            b || (a.style.fontWeight = "bold", a.childNodes[3].style[this._dx] = a.style[this._dx] = "10px", b = a[this._s._vMode ? "scrollHeight" : "scrollWidth"] + 10 + (this._close ? 20 : 0), a.style.fontWeight = ""), a.style[this._dx] = b + "px", a._size = b, this._img_all(a)
        },
        _onMouseOverHandler: function(a) {
            var b = this.tabbar._getTabTarget(a ? a.target : event.srcElement);
            this.tabbar._showHover(b)
        },
        _onMouseOutHandler: function() {
            this.tabbar._showHover()
        },
        _showHover: function(a) {
            if (a != this._lastHower) {
                if (this._lastHower && this._lastHower != this._lastActive) {
                    var b = this._getSkin(this._lastHower);
                    this._lastHower.className = this._lastHower.className.replace(/[ ]*dhx_tab_hover/gi, ""), b.hover ? this._img_all(this._lastHower) : this._img(this._lastHower.childNodes[3], 5, this._px, parseInt(this._lastHower.style[this._dx]) - (b.left + b.right), b.left), this._lastHower = null
                }
                a && (a == this._lastActive || a._disabled) || (this._lastHower = a) && (b = this._getSkin(a), a.className += " dhx_tab_hover", b.hover && (this._img(a.childNodes[1], 7, this._px, b.left), this._img(a.childNodes[2], 8, this._pxc, b.right)), this._img(a.childNodes[3], 0, this._px, parseInt(a.style[this._dx]) - (b.left + b.right), b.left))
            }
        },
        _getTabTarget: function(a) {
            if (!a) return null;
            for (; !a.className || a.className.indexOf("dhx_tab_element") == -1;) {
                if (a.className && a.className.indexOf("dhx_tabbar_zone") != -1) return null;
                if (a = a.parentNode, !a) return null
            }
            return a
        },
        _onClickHandler: function(a) {
            var b = a ? a.target : event.srcElement,
                c = this.tabbar._getTabTarget(b);
            if (c && !c._disabled) this.tabbar._setTabActive(c);
            else {
                var d = null;
                if ("dhx_tab_scroll_left" == b.className ? (b.parentNode.scrollLeft = Math.max(0, b.parentNode.scrollLeft - b.parentNode.offsetWidth / 2), d = b, this.tabbar._setTabTop(this.tabbar._lastActive)) : "dhx_tab_scroll_right" == b.className && (b.parentNode.scrollLeft += b.parentNode.offsetWidth / 2, d = b.previousSibling, this.tabbar._setTabTop(this.tabbar._lastActive)), d && d.parentNode && d.parentNode.tagName) return d.style.left = d.parentNode.scrollLeft + "px", _isIE && !window.XMLHttpRequest || (d.nextSibling.style.right = d.parentNode.scrollLeft * -1 + "px"), !1
            }
        },
        _deactivateTab: function() {
            this._setTabInActive(this._lastActive), this._lastActive = null
        },
        _setTabInActive: function(a) {
            if (!a || a != this._lastActive) return !0;
            var b = this._getSkin(a),
                c = a.getAttribute("tab_id"),
                d = this._s.align ? this._pxc : this._px;
            a.className = a.className.replace("_active", "_inactive"), a.style[this._py] = b.select_top + "px", a.style[d] = parseInt(a.style[d]) + b.select_shift + "px", a.style[this._dx] = a._size + "px", a._active = !1, b.tab_color && (a.style.backgroundColor = b.tab_color), this._c[c] && (a.childNodes[0].style.cssText = this._c[c].color), this._img_all(a), this.cells(c).hide()
        },
        _setTabActive: function(a, b) {
            if (!a) return !0;
            var c = a.getAttribute("tab_id"),
                d = this._lastActive ? this._lastActive.getAttribute("tab_id") : null,
                e = this._getSkin(a);
            if (b || this.callEvent("onTabClick", [c, d]), a == this._lastActive) return !0;
            if (b || this.callEvent("onSelect", [c, d])) {
                var f = this._s.align ? this._pxc : this._px;
                return this._setTabInActive(this._lastActive), a.className = a.className.replace("_inactive", "_active"), a.style[this._py] = "0px", a.style[f] = parseInt(a.style[f]) - e.select_shift + "px", a.style[this._dx] = a._size + 2 * e.select_shift + "px", a._active = !0, e.data_color && (a.style.backgroundColor = e.data_color), this._c[c] && (a.childNodes[0].style.cssText = this._c[c].scolor), this._img_all(a), this._setTabTop(a), this._lastActive = a, this.cells(c).show(), this._scrollTo(a), !0
            }
        },
        _scrollTo: function(a) {
            if (this._s.scrolls && (a.offsetLeft < a.parentNode.scrollLeft || a.offsetLeft + a.offsetWidth > a.parentNode.scrollLeft + a.parentNode.offsetWidth)) {
                a.parentNode.scrollLeft = a.offsetLeft;
                var b = a.parentNode._scroll;
                b && b[0] && (b[0].style.left = b[0].parentNode.scrollLeft + "px", !_isIE || window.XMLHttpRequest) && (b[1].style.right = b[1].parentNode.scrollLeft * -1 + "px")
            }
        },
        _setTabTop: function(a) {
            if (!a) return !1;
            for (var b = this._rows.length - 1, c = 0; c < this._rows.length; c++)
                if (this._rows[c] == a.parentNode) {
                    var d = this._rows[c];
                    c != b && (this._rows[c] = this._rows[b], this._rows[b] = d);
                    var e = this._getCoverLine();
                    d.appendChild(e), e.style[this._dx] = "1px";
                    var f = this._s._vMode ? Math.max(this._tabZone.offsetHeight, d.scrollHeight) : Math.max(this._tabZone.offsetWidth, d.scrollWidth);
                    f > 0 && (e.style[this._dx] = f + "px"), a.style.zIndex = e._index++;
                    break
                }
            this._setRowSizes()
        },
        _getCoverLine: function() {
            return this._lineA || (this._lineA = document.createElement("div"), this._lineA.className = "dhx_tablist_line", this._lineA.style[this._py] = this._s.line_height - 3 - (this._s.skin_line_x ? 1 : 0) + "px", this._lineA.style[this._dx] = "100%", this._lineA._index = 1), this._lineA.style.zIndex = this._lineA._index++, this._lineA
        },
        cells: function(a) {
            if (!this._tabs[a]) return null;
            if (!this._content[a]) {
                var b = document.createElement("DIV");
                b.style.cssText = "width:100%;height:100%;visibility:hidden;overflow:hidden;position:absolute;top:0px; left:0px;", b.setAttribute("tab_id", a), b.skin = this.skin, this._conZone.appendChild(b), new dhtmlXContainer(b).setContent(b), "dhx_web" == this.skin && b._setPadding && b._setPadding(1, "dhxcont_tabbar_dhx_web"), b._isTabbarCell = !0, this._content[a] = b;
                var c = this;
                b.show = function() {
                    c._s.hide && (this.style.display = ""), this.style.visibility = "", this.style.zIndex = "1", this.autoSize(), this._activate()
                }, b.hide = function() {
                    c._s.hide ? (this.style.visibility = "", this.style.display = "none") : this.style.visibility = "hidden", this.style.zIndex = -1, "iframe" == c._hrfmode && this.attachURL("javascript:false")
                }, b.autoSize = function() {
                    if (c._awdj || c._ahdj) {
                        var a = this.vs ? this.vs[this.av].dhxcont.mainCont[this.av] : this.mainCont;
                        a.offsetWidth || (a.style.width = Math.max(0, c.entBox.offsetWidth - 2) + "px"), c._ahdj && (a.style.height = "1px");
                        var b = this._getContentDim();
                        c._awdj && (c.entBox.style.width = b[0] + 2 + "px", a.style.width = b[0] + "px"), c._ahdj && (c._tabAll.style.height = c.entBox.style.height = b[1] + c._rows.length * (c._s.line_height - 2) + (c._s.expand ? 0 : 2) + 2 + "px", a.style.height = b[1] + "px"), c._setSizes(), c._setTabTop(c._lastActive)
                    }
                }, b._activate = function() {
                    this._delay && this._attachContent.apply(this, this._delay), this.activate(), "iframe" != c._hrfmode && (this._delay = null)
                }, b._doOnResize = function() {
                    this.activate()
                }, b.activate = function() {
                    this.adjustContent(this.parentNode, 0, 0, !1, 0), b.updateNestedObjects()
                }, b._doOnAttachStatusBar = b.activate, b._doOnAttachMenu = b.activate, b._doOnAttachToolbar = b.activate, b._getContentDim = function() {
                    var a = this.vs ? this.vs[this.av].dhxcont.mainCont[this.av] : this.mainCont;
                    return [a.scrollWidth, a.scrollHeight]
                }, b._doOnFrameContentLoaded = function() {
                    (c._awdj || c._ahdj) && c.cells(a).autoSize(), c.callEvent("onXLE", []), c.callEvent("onTabContentLoaded", [this.getAttribute("tab_id")])
                }, b._doOnBeforeAttachURL = function() {
                    c.callEvent("onXLS", [])
                }, b.adjustContent(b.parentNode, 0, 0, !1, 0)
            }
            return this._content[a]
        },
        forceLoad: function(a, b) {
            this.setContentHref(a, b || this._hrefs[a]), this.cells(a)._activate()
        },
        enableAutoSize: function(a, b) {
            this._ahdj = convertStringToBoolean(b), this._awdj = convertStringToBoolean(a)
        },
        clearAll: function() {
            for (var a in this._tabs) this.removeTab(a, !1);
            if (this._lineA) {
                var b = this._getCoverLine();
                b.parentNode && b.parentNode.removeChild(b)
            }
        },
        enableTabCloseButton: function(a) {
            this._close = convertStringToBoolean(a)
        },
        preventIECashing: function(a) {
            this.no_cashe = convertStringToBoolean(a), this.XMLLoader && (this.XMLLoader.rSeed = this.no_cashe)
        },
        setTabActive: function(a, b) {
            this._setTabActive(this._tabs[a], b === !1)
        },
        setTabInActive: function() {
            var a = this._lastActive;
            a && (this._deactivateTab(), this._setTabTop(a), this._getCoverLine())
        },
        loadXMLString: function(a, b) {
            this.XMLLoader = new dtmlXMLLoaderObject(this._parseXML, this, !0, this.no_cashe), this.XMLLoader.waitCall = b || 0, this.XMLLoader.loadXMLString(a)
        },
        loadXML: function(a, b) {
            this.callEvent("onXLS", []), this.XMLLoader = new dtmlXMLLoaderObject(this._parseXML, this, !0, this.no_cashe), this.XMLLoader.waitCall = b || 0, this.XMLLoader.loadXML(a)
        },
        _parseXML: function(a, b, c, d, e) {
            a.clearAll();
            var f = "";
            e || (e = a.XMLLoader);
            var g = e.getXMLTopNode("tabbar"),
                h = e.doXPath("//row", g),
                i = g.getAttribute("tabstyle");
            i && a.setStyle(i), a._hrfmode = g.getAttribute("hrefmode") || a._hrfmode, a._a.margin = parseInt(g.getAttribute("margin") || a._a.margin, 10), (i = g.getAttribute("align")) && (a._s.align = "right" == i || "bottom" == i), a._a.offset = parseInt(g.getAttribute("offset") || a._a.offset, 10), (i = g.getAttribute("skinColors")) && a.setSkinColors(i.split(",")[0], i.split(",")[1]);
            for (var j = 0; j < h.length; j++)
                for (var k = e.doXPath("./tab", h[j]), l = 0; l < k.length; l++) {
                    var m = k[l].getAttribute("width"),
                        n = a._getXMLContent(k[l]),
                        o = k[l].getAttribute("id");
                    if (a.addTab(o, n, m, "", j), k[l].getAttribute("selected") && (f = o), a._hrfmode) a.setContentHref(o, k[l].getAttribute("href"));
                    else
                        for (var p = 0; p < k[l].childNodes.length; p++) {
                            var q = k[l].childNodes[p];
                            "content" == q.tagName && (q.getAttribute("id") ? a.setContent(o, q.getAttribute("id")) : a.setContentHTML(o, a._getXMLContent(q)))
                        }
                }
            f && a.setTabActive(f), a.callEvent("onXLE", [])
        },
        adjustOuterSize: function() {
            this._setSizes()
        },
        _getXMLContent: function(a) {
            for (var b = "", c = 0; c < a.childNodes.length; c++) {
                var d = a.childNodes[c];
                b += null === d.nodeValue ? "" : d.nodeValue
            }
            return b
        },
        enableContentZone: function(a) {
            this._conZone.style.display = convertStringToBoolean(a) ? "" : "none", this._setSizes()
        },
        enableForceHiding: function(a) {
            this._s.hide = convertStringToBoolean(a)
        },
        setSize: function(a, b) {
            this.entBox.style.width = a + "px", this.entBox.style.height = b + "px", this._setSizes()
        },
        setSkinColors: function(a, b, c) {
            a && (this._a.data_color = a), b && (this._a.tab_color = b);
            var d = document.createElement("style");
            d.setAttribute("type", "text/css"), d.setAttribute("media", "screen"), document.getElementsByTagName("head")[0].appendChild(d);
            var e = document.styleSheets[document.styleSheets.length - 1];
            e.addRule ? e.addRule("#" + this.entBox.id + " .dhx_tabcontent_zone > div", "background-color: " + (c || a) + ";", 0) : e.insertRule("#" + this.entBox.id + " .dhx_tabcontent_zone > div{ background-color: " + (c || a) + ";}", 0), this._conZone.style.backgroundColor = c || a
        },
        setCustomStyle: function(a, b, c, d) {
            this._c[a] = {
                color: ";" + (b ? "color:" + b + ";" : "") + (d || ""),
                scolor: ";" + (c ? "color:" + c + ";" : "") + (d || "")
            }, this._tabs[a] && (this._tabs[a].childNodes[0].style.cssText = this._tabs[a] == this._lastActive ? this._c[a].scolor : this._c[a].color)
        },
        setImagePath: function(a) {
            this.imgUrl = a
        },
        getNext: function(a, b) {
            var b = b || "nextSibling",
                c = a[b];
            return c && c.className.indexOf("dhx_tab_element") == -1 && (c = null), !c && a.parentNode[b] && (c = a.parentNode[b].childNodes[0]), c || a
        },
        getAllTabs: function() {
            var a, b = [];
            for (a in this._tabs) b.push(a);
            return b
        },
        goToNextTab: function(a) {
            do a = this.getNext(a || this._lastActive); while (!this._setTabActive(a));
            return a
        },
        goToPrevTab: function(a) {
            do a = this.getNext(a || this._lastActive, "previousSibling"); while (!this._setTabActive(a));
            return a
        },
        disableTab: function(a) {
            this._tabs[a]._disabled = !0, this._tabs[a].className += " dhx_tab_element_disabled", this._tabs[a].style.color = "silver"
        },
        enableTab: function(a) {
            this._tabs[a]._disabled = !1, this._tabs[a].className && (this._tabs[a].className = this._tabs[a].className.replace(/dhx_tab_element_disabled/g, "")), this._tabs[a].style.color = ""
        },
        showTab: function(a) {
            var b = this._tabs[a];
            b.style.display = "", this._setTabSizes(b.parentNode)
        },
        hideTab: function(a, b) {
            var c = this._tabs[a];
            c.style.display = "none", c == this._lastActive && b !== !1 && this.goToNextTab(), this._setTabSizes(c.parentNode)
        },
        getActiveTab: function() {
            return this._lastActive ? this._lastActive.getAttribute("tab_id") : null
        },
        setLabel: function(a, b, c) {
            this.getActiveTab(), this._tabs[a].firstChild.innerHTML = b, this.adjustTabSize(this._tabs[a], c), this._setTabSizes(this._tabs[a].parentNode), this._checkScroll()
        },
        getLabel: function(a) {
            return this._tabs[a].firstChild.innerHTML
        },
        setOffset: function(a) {
            this._a.offset = 1 * a
        },
        enableScroll: function(a) {
            this._s.scrolls = convertStringToBoolean(a)
        },
        setMargin: function(a) {
            this._a.margin = 1 * a
        },
        setAlign: function(a) {
            this._s.align = "bottom" == a || "right" == a
        },
        tabWindow: function(a) {
            var b = null;
            if (this._content[a]) var c = this.cells(a),
                b = (c.vs ? c.vs[c.av] : this._content[a])._frame.contentWindow;
            return b
        },
        setContentHTML: function(a, b) {
            this.cells(a).attachHTMLString(b)
        },
        setContent: function(a, b) {
            this.cells(a).attachObject(b), this.cells(a).activate()
        },
        setHrefMode: function(a) {
            this._hrfmode = a
        },
        setContentHref: function(a, b) {
            switch (this._hrefs[a] = b, this._hrfmode) {
                case "iframes":
                    this.cells(a).attachURL(b);
                    break;
                case "iframe":
                case "iframes-on-demand":
                    this.cells(a)._delay = ["url", b, !1];
                    break;
                case "ajax":
                    var c = this.cells(a),
                        d = this;
                    c._delay = ["urlajax", b, !0], c.attachHTMLStringA || (c.attachHTMLStringA = c.attachHTMLString, c.attachHTMLString = function(a, b) {
                        return b && (a = d._getXMLContent(b.doXPath("//content")[0])), this.attachHTMLStringA(a)
                    });
                    break;
                case "ajax-html":
                    this.cells(a)._delay = ["urlajax", b, !0]
            }
            this._tabs[a] == this._lastActive && this.cells(a).show(!0)
        },
        normalize: function(a, b) {
            function c(a, b) {
                d[b]._size += j != 1 / 0 ? j - i : 0, a.adjustTabSize(d[b], d[b]._size)
            }
            for (var a = a || this._tabZone.offsetWidth, d = [], e = 0; e < this._rows.length; e++)
                for (var f = 0; f < this._rows[e].tabCount; f++) d.push(this._rows[e].removeChild(this._rows[e].childNodes[0]));
            this._tabZone.innerHTML = "", this._rows = [];
            var g = this._lastActive;
            this._lastActive = null, this._createRow();
            for (var h = 0, i = this._a.offset, j = 1 / 0, f = 0; f < d.length; f++) i + d[f]._size + this._a.margin < a ? (this._rows[h].appendChild(d[f]), this._rows[h].tabCount++, i += d[f]._size + this._a.margin) : (b && i < j && c(this, f - 1), this._createRow(), f--, h++, j = i, i = this._a.offset);
            for (b && i < j && j != 1 / 0 && c(this, f - 1), e = 0; e < this._rows.length; e++) this._setTabSizes(this._rows[e]);
            this._setSizes(), (this._lastActive = g) && this._setTabTop(this._lastActive)
        },
        showInnerScroll: function() {
            for (var a in this._tabs) {
                var b = dhtmlx.$customScroll;
                if (this.cells(a).vs) {
                    var c = this.cells(a).av;
                    b ? dhtmlx.CustomScroll.enable(this.cells(a).vs[c].dhxcont.mainCont[c]) : this.cells(a).vs[c].dhxcont.mainCont[c].style.overflow = "auto"
                } else b ? dhtmlx.CustomScroll.enable(this.cells(a).dhxcont.mainCont) : this.cells(a).dhxcont.mainCont.style.overflow = "auto"
            }
        },
        getNumberOfTabs: function() {
            for (var a = 0, b = 0; b < this._rows.length; b++) a += this._rows[b].tabCount;
            return a
        },
        destructor: function() {}
    }, window.dhtmlXContainer || (window.dhtmlXContainer = function(a) {
        var b = this;
        this.obj = a, this.dhxcont = null, this.setContent = function(a) {
            this.dhxcont = a, this.dhxcont.innerHTML = "<div id='dhxMainCont' class='dhxcont_main_content'></div><div id='dhxContBlocker' class='dhxcont_content_blocker' style='display: none;'></div>", this.dhxcont.mainCont = this.dhxcont.childNodes[0], this.obj.dhxcont = this.dhxcont
        }, this.obj._genStr = function(a) {
            for (var b = "", c = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789", d = 0; d < a; d++) b += c.charAt(Math.round(Math.random() * c.length));
            return b
        }, this.obj.setMinContentSize = function(a, b) {
            this._minDataSizeW = a, this._minDataSizeH = b
        }, this.obj.moveContentTo = function(a) {
            a.updateNestedObjects()
        }, this.obj.adjustContent = function(a, b, c, d, e) {
            this.dhxcont.style.top = b + "px", this.dhxcont.style.left = "0px", 1 != d && (this.dhxcont.style.width = a.clientWidth + "px");
            var f = a.clientHeight - b;
            f < 0 && (f = 0), this.dhxcont.style.height = f + (null != c ? c : 0) + "px", 1 != d && this.dhxcont.offsetWidth > a.clientWidth && (this.dhxcont.style.width = Math.max(0, 2 * a.clientWidth - this.dhxcont.offsetWidth) + "px"), this.dhxcont.offsetHeight > a.clientHeight - b && (f = 2 * (a.clientHeight - b) - this.dhxcont.offsetHeight, f < 0 && (f = 0), this.dhxcont.style.height = f + "px"), e && !isNaN(e) && (this.dhxcont.style.height = parseInt(this.dhxcont.style.height) - e + "px"), null != this._minDataSizeH && parseInt(this.dhxcont.style.height) < this._minDataSizeH && (this.dhxcont.style.height = this._minDataSizeH + "px"), null != this._minDataSizeW && parseInt(this.dhxcont.style.width) < this._minDataSizeW && (this.dhxcont.style.width = this._minDataSizeW + "px"), 1 != d && (this.dhxcont.mainCont.style.width = this.dhxcont.clientWidth + "px");
            var g = null != this.menu ? this.menuHidden ? 0 : this.menuHeight : 0,
                h = null != this.toolbar ? this.toolbarHidden ? 0 : this.toolbarHeight : 0,
                i = null != this.sb ? this.sbHidden ? 0 : this.sbHeight : 0;
            this.dhxcont.mainCont.style.height = this.dhxcont.clientHeight - g - h - i + "px"
        }, this.obj.updateNestedObjects = function() {}, this.obj.attachObject = function(a, b) {
            if ("string" == typeof a && (a = document.getElementById(a)), b) {
                a.style.visibility = "hidden", a.style.display = "";
                var c = a.offsetWidth,
                    d = a.offsetHeight
            }
            this._attachContent("obj", a), b && this._isWindow && (a.style.visibility = "", this._adjustToContent(c, d))
        }, this.obj.appendObject = function(a) {
            "string" == typeof a && (a = document.getElementById(a)), this._attachContent("obj", a, !0)
        }, this.obj.attachHTMLString = function(a) {
            this._attachContent("str", a);
            for (var b = a.match(/<script[^>]*>[^\f]*?<\/script>/g) || [], c = 0; c < b.length; c++) {
                var d = b[c].replace(/<([\/]{0,1})script[^>]*>/g, "");
                if (window.execScript) {
                    var e = b[c].match(/<script[^>]*src\s*=\s*("|')([^"']+)("|')/);
                    e && (d = dhtmlxAjax.getSync(e[2]).xmlDoc.responseText), d && window.execScript(d)
                } else window.eval(d)
            }
        }, this.obj.attachURL = function(a, b) {
            this._attachContent(1 == b ? "urlajax" : "url", a, !1)
        }, this.obj._attachContent = function(a, c, d) {
            if (d !== !0)
                for (; b.dhxcont.mainCont.childNodes.length > 0;) b.dhxcont.mainCont.removeChild(b.dhxcont.mainCont.childNodes[0]);
            if ("url" == a) {
                var e = document.createElement("IFRAME");
                e.frameBorder = 0, e.border = 0, e.style.width = "100%", e.style.height = "100%", b.dhxcont.mainCont.appendChild(e), e.src = c, this._frame = e, this._doOnFrameContentLoaded && this._doOnFrameContentLoaded(!0)
            } else if ("urlajax" == a) {
                var f = this,
                    g = function() {
                        f.attachHTMLString(this.xmlDoc.responseText, this), f._doOnFrameContentLoaded && f._doOnFrameContentLoaded(!1), this.destructor()
                    },
                    h = new dtmlXMLLoaderObject(g, window);
                h.loadXML(c), f._doOnBeforeAttachURL && f._doOnBeforeAttachURL(!1)
            } else "obj" == a ? (b.dhxcont._frame = null, b.dhxcont.mainCont.appendChild(c), b.dhxcont.mainCont.style.overflow = d === !0 ? "auto" : "hidden", c.style.display = "") : "str" == a && (b.dhxcont._frame = null, b.dhxcont.mainCont.innerHTML = c)
        }, this.obj._dhxContDestruct = function() {}
    }),
    function() {
        dhtmlx.extend_api("dhtmlXTabBar", {
            _init: function(a) {
                return [a.parent, a.mode, a.height]
            },
            tabs: "tabs",
            skin: "setSkin",
            offset: "setOffset",
            margin: "setMargin",
            image_path: "setImagePath",
            href_mode: "setHrefMode",
            align: "setAlign",
            xml: "loadXML",
            close_button: "enableTabCloseButton",
            scroll: "enableScroll",
            forced: "enableForceHiding",
            content_zone: "enableContentZone",
            size_by_content: "enableAutoSize",
            auto_size: "enableAutoReSize"
        }, {
            tabs: function(a) {
                for (var b = 0; b < a.length; b++) {
                    var c = a[b];
                    this.addTab(c.id, c.label, c.width, c.index, c.row), c.active && this.setTabActive(c.id)
                }
            }
        })
    }(), dhtmlxEvent(window, "load", dhx_init_tabbars), dhtmlXToolbarObject.prototype.addSpacer = function(a) {
        var b = this.idPrefix + a;
        if (null != this._spacer) {
            if (this._spacer.idd == a) return;
            if (this._spacer == this.objPull[b].obj.parentNode) {
                for (var c = !0; c;) {
                    var d = this._spacer.childNodes[0].idd;
                    this.base.appendChild(this._spacer.childNodes[0]), d != a && 0 != this._spacer.childNodes.length || (null != this.objPull[b].arw && this.base.appendChild(this.objPull[b].arw), c = !1)
                }
                return this._spacer.idd = a, void this._fixSpacer()
            }
            if (this.base == this.objPull[b].obj.parentNode) {
                for (var c = !0, e = null != this.objPull[b].arw; c;) {
                    var f = this.base.childNodes.length - 1;
                    1 == e && this.base.childNodes[f] == this.objPull[b].arw && (c = !1), this.base.childNodes[f].idd == a && (c = !1), c && (this._spacer.childNodes.length > 0 ? this._spacer.insertBefore(this.base.childNodes[f], this._spacer.childNodes[0]) : this._spacer.appendChild(this.base.childNodes[f]))
                }
                return this._spacer.idd = a, void this._fixSpacer()
            }
        } else {
            for (var g = null, f = 0; f < this.base.childNodes.length; f++) this.base.childNodes[f] == this.objPull[this.idPrefix + a].obj && (g = f, null != this.objPull[this.idPrefix + a].arw && (g = f + 1));
            if (null != g) {
                for (this._spacer = document.createElement("DIV"), this._spacer.className = "dhxtoolbar_spacer " + ("right" == this.align ? " float_left" : " float_right"), this._spacer.dir = "ltr", this._spacer.idd = a; this.base.childNodes.length > g + 1;) this._spacer.appendChild(this.base.childNodes[g + 1]);
                this.cont.appendChild(this._spacer), this._fixSpacer()
            }
        }
        "dhx_terrace" == this.skin && this._improveTerraceSkin()
    }, dhtmlXToolbarObject.prototype.removeSpacer = function() {
        if (this._spacer) {
            for (; this._spacer.childNodes.length > 0;) this.base.appendChild(this._spacer.childNodes[0]);
            this._spacer.parentNode.removeChild(this._spacer), this._spacer = null, "dhx_terrace" == this.skin && this._improveTerraceSkin()
        }
    }, dhtmlXToolbarObject.prototype._fixSpacer = function() {
        if (_isIE && null != this._spacer) {
            this._spacer.style.borderLeft = "1px solid #a4bed4";
            var a = this._spacer;
            window.setTimeout(function() {
                a.style.borderLeft = "0px solid #a4bed4", a = null
            }, 1)
        }
    }, dhtmlXToolbarObject.prototype.getType = function(a) {
        var b = this.getParentId(a);
        if (null != b) {
            var c = null,
                d = this.objPull[this.idPrefix + b]._listOptions[a];
            return null != d && (c = null != d.sep ? "buttonSelectSeparator" : "buttonSelectButton"), c
        }
        return null == this.objPull[this.idPrefix + a] ? null : this.objPull[this.idPrefix + a].type
    }, dhtmlXToolbarObject.prototype.getTypeExt = function(a) {
        var b = this.getType(a);
        return "buttonSelectButton" == b || "buttonSelectSeparator" == b ? b = "buttonSelectButton" == b ? "button" : "separator" : null
    }, dhtmlXToolbarObject.prototype.inArray = function(a, b) {
        for (var c = 0; c < a.length; c++)
            if (a[c] == b) return !0;
        return !1
    }, dhtmlXToolbarObject.prototype.getParentId = function(a) {
        var b, c = null;
        for (b in this.objPull)
            if (this.objPull[b]._listOptions)
                for (var d in this.objPull[b]._listOptions) d == a && (c = String(b).replace(this.idPrefix, ""));
        return c
    }, dhtmlXToolbarObject.prototype._addItem = function(a, b) {
        this._addItemToStorage(a, b), "dhx_terrace" == this.skin && this._improveTerraceSkin()
    }, dhtmlXToolbarObject.prototype.addButton = function(a, b, c, d, e) {
        this._addItem({
            id: a,
            type: "button",
            text: c,
            img: d,
            imgdis: e
        }, b)
    }, dhtmlXToolbarObject.prototype.addText = function(a, b, c) {
        this._addItem({
            id: a,
            type: "text",
            text: c
        }, b)
    }, dhtmlXToolbarObject.prototype.addButtonSelect = function(a, b, c, d, e, f, g, h, i, j) {
        for (var k = [], l = 0; l < d.length; l++) {
            var m = {};
            d[l] instanceof Array ? (m.id = d[l][0], m.type = "obj" == d[l][1] ? "button" : "separator", m.text = d[l][2] || null, m.img = d[l][3] || null) : d[l] instanceof Object && null != d[l] && "undefined" != typeof d[l].id && "undefined" != typeof d[l].type && (m.id = d[l].id, m.type = "obj" == d[l].type ? "button" : "separator", m.text = d[l].text, m.img = d[l].img), k[k.length] = m
        }
        this._addItem({
            id: a,
            type: "buttonSelect",
            text: c,
            img: e,
            imgdis: f,
            renderSelect: g,
            openAll: h,
            items: k,
            maxOpen: i,
            mode: j
        }, b)
    }, dhtmlXToolbarObject.prototype.addButtonTwoState = function(a, b, c, d, e) {
        this._addItem({
            id: a,
            type: "buttonTwoState",
            img: d,
            imgdis: e,
            text: c
        }, b)
    }, dhtmlXToolbarObject.prototype.addSeparator = function(a, b) {
        this._addItem({
            id: a,
            type: "separator"
        }, b)
    }, dhtmlXToolbarObject.prototype.addSlider = function(a, b, c, d, e, f, g, h, i) {
        this._addItem({
            id: a,
            type: "slider",
            length: c,
            valueMin: d,
            valueMax: e,
            valueNow: f,
            textMin: g,
            textMax: h,
            toolTip: i
        }, b)
    }, dhtmlXToolbarObject.prototype.addInput = function(a, b, c, d) {
        this._addItem({
            id: a,
            type: "buttonInput",
            value: c,
            width: d
        }, b)
    }, dhtmlXToolbarObject.prototype.forEachItem = function(a) {
        for (var b in this.objPull) this.inArray(this.rootTypes, this.objPull[b].type) && a(this.objPull[b].id.replace(this.idPrefix, ""))
    },
    function() {
        for (var a = "isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(","), b = [!1, "", "", !1, "", "", "", "", "", "", "", "", "", !1, "", "", "", null, "", [null, null], "", [null, null], "", null], c = function(a, b) {
                return function(c, d, e) {
                    return c = this.idPrefix + c, null != this.objPull[c][a] ? this.objPull[c][a].call(this.objPull[c], d, e) : b
                }
            }, d = 0; d < a.length; d++) {
            var e = a[d],
                f = b[d];
            dhtmlXToolbarObject.prototype[e] = c(e, f)
        }
    }(), dhtmlXToolbarObject.prototype.showItem = function(a) {
        a = this.idPrefix + a, null != this.objPull[a] && null != this.objPull[a].showItem && (this.objPull[a].showItem(), "dhx_terrace" == this.skin && this._improveTerraceSkin())
    }, dhtmlXToolbarObject.prototype.hideItem = function(a) {
        a = this.idPrefix + a, null != this.objPull[a] && null != this.objPull[a].hideItem && (this.objPull[a].hideItem(), "dhx_terrace" == this.skin && this._improveTerraceSkin())
    }, dhtmlXToolbarObject.prototype.getPosition = function(a) {
        return this._getPosition(a)
    }, dhtmlXToolbarObject.prototype._getPosition = function(a) {
        if (null == this.objPull[this.idPrefix + a]) return null;
        for (var b = null, c = 0, d = 0; d < this.base.childNodes.length; d++) null != this.base.childNodes[d].idd && (this.base.childNodes[d].idd == a && (b = c), c++);
        if (!b && null != this._spacer)
            for (d = 0; d < this._spacer.childNodes.length; d++) null != this._spacer.childNodes[d].idd && (this._spacer.childNodes[d].idd == a && (b = c), c++);
        return b
    }, dhtmlXToolbarObject.prototype.setPosition = function(a, b) {
        this._setPosition(a, b)
    }, dhtmlXToolbarObject.prototype._setPosition = function(a, b) {
        if (null != this.objPull[this.idPrefix + a]) {
            isNaN(b) && (b = this.base.childNodes.length), b < 0 && (b = 0);
            var c = null;
            this._spacer && (c = this._spacer.idd, this.removeSpacer());
            var d = this.objPull[this.idPrefix + a];
            this.base.removeChild(d.obj), d.arw && this.base.removeChild(d.arw);
            var e = this._getIdByPosition(b, !0);
            null == e[0] ? (this.base.appendChild(d.obj), d.arw && this.base.appendChild(d.arw)) : (this.base.insertBefore(d.obj, this.base.childNodes[e[1]]), d.arw && this.base.insertBefore(d.arw, this.base.childNodes[e[1] + 1])), null != c && this.addSpacer(c)
        }
    }, dhtmlXToolbarObject.prototype._getIdByPosition = function(a, b) {
        for (var c = null, d = 0, e = 0, f = 0; f < this.base.childNodes.length; f++) null != this.base.childNodes[f].idd && null == c && d++ == a && (c = this.base.childNodes[f].idd), null == c && e++;
        return e = null == c ? null : e, 1 == b ? [c, e] : c
    }, dhtmlXToolbarObject.prototype.removeItem = function(a) {
        this._removeItem(a),
            "dhx_terrace" == this.skin && this._improveTerraceSkin()
    }, dhtmlXToolbarObject.prototype._removeItem = function(a) {
        var b = this.getType(a),
            a = this.idPrefix + a,
            c = this.objPull[a];
        if ("button" == b && (c.obj._doOnMouseOver = null, c.obj._doOnMouseOut = null, c.obj._doOnMouseUp = null, c.obj._doOnMouseUpOnceAnywhere = null, c.obj.onclick = null, c.obj.onmouseover = null, c.obj.onmouseout = null, c.obj.onmouseup = null, c.obj.onmousedown = null, c.obj.onselectstart = null, c.obj.renderAs = null, c.obj.idd = null, c.obj.parentNode.removeChild(c.obj), c.obj = null, c.id = null, c.state = null, c.img = null, c.imgEn = null, c.imgDis = null, c.type = null, c.enableItem = null, c.disableItem = null, c.isEnabled = null, c.showItem = null, c.hideItem = null, c.isVisible = null, c.setItemText = null, c.getItemText = null, c.setItemImage = null, c.clearItemImage = null, c.setItemImageDis = null, c.clearItemImageDis = null, c.setItemToolTip = null, c.getItemToolTip = null), "buttonTwoState" == b && (c.obj._doOnMouseOver = null, c.obj._doOnMouseOut = null, c.obj.onmouseover = null, c.obj.onmouseout = null, c.obj.onmousedown = null, c.obj.onselectstart = null, c.obj.renderAs = null, c.obj.idd = null, c.obj.parentNode.removeChild(c.obj), c.obj = null, c.id = null, c.state = null, c.img = null, c.imgEn = null, c.imgDis = null, c.type = null, c.enableItem = null, c.disableItem = null, c.isEnabled = null, c.showItem = null, c.hideItem = null, c.isVisible = null, c.setItemText = null, c.getItemText = null, c.setItemImage = null, c.clearItemImage = null, c.setItemImageDis = null, c.clearItemImageDis = null, c.setItemToolTip = null, c.getItemToolTip = null, c.setItemState = null, c.getItemState = null), "buttonSelect" == b) {
            for (var d in c._listOptions) this.removeListOption(a, d);
            c._listOptions = null, c.polygon._ie6cover && (document.body.removeChild(c.polygon._ie6cover), c.polygon._ie6cover = null), c.p_tbl.removeChild(c.p_tbody), c.polygon.removeChild(c.p_tbl), c.polygon.onselectstart = null, document.body.removeChild(c.polygon), c.p_tbody = null, c.p_tbl = null, c.polygon = null, c.obj.onclick = null, c.obj.onmouseover = null, c.obj.onmouseout = null, c.obj.onmouseup = null, c.obj.onmousedown = null, c.obj.onselectstart = null, c.obj.idd = null, c.obj.iddPrefix = null, c.obj.parentNode.removeChild(c.obj), c.obj = null, c.arw.onclick = null, c.arw.onmouseover = null, c.arw.onmouseout = null, c.arw.onmouseup = null, c.arw.onmousedown = null, c.arw.onselectstart = null, c.arw.parentNode.removeChild(c.arw), c.arw = null, c.renderSelect = null, c.state = null, c.type = null, c.id = null, c.img = null, c.imgEn = null, c.imgDis = null, c.openAll = null, c._isListButton = null, c._separatorButtonSelectObject = null, c._buttonButtonSelectObject = null, c.setWidth = null, c.enableItem = null, c.disableItem = null, c.isEnabled = null, c.showItem = null, c.hideItem = null, c.isVisible = null, c.setItemText = null, c.getItemText = null, c.setItemImage = null, c.clearItemImage = null, c.setItemImageDis = null, c.clearItemImageDis = null, c.setItemToolTip = null, c.getItemToolTip = null, c.addListOption = null, c.removeListOption = null, c.showListOption = null, c.hideListOption = null, c.isListOptionVisible = null, c.enableListOption = null, c.disableListOption = null, c.isListOptionEnabled = null, c.setListOptionPosition = null, c.getListOptionPosition = null, c.setListOptionImage = null, c.getListOptionImage = null, c.clearListOptionImage = null, c.setListOptionText = null, c.getListOptionText = null, c.setListOptionToolTip = null, c.getListOptionToolTip = null, c.forEachListOption = null, c.getAllListOptions = null, c.setListOptionSelected = null, c.getListOptionSelected = null
        }
        if ("buttonInput" == b && (c.obj.childNodes[0].onkeydown = null, c.obj.removeChild(c.obj.childNodes[0]), c.obj.w = null, c.obj.idd = null, c.obj.parentNode.removeChild(c.obj), c.obj = null, c.id = null, c.type = null, c.enableItem = null, c.disableItem = null, c.isEnabled = null, c.showItem = null, c.hideItem = null, c.isVisible = null, c.setItemToolTip = null, c.getItemToolTip = null, c.setWidth = null, c.getWidth = null, c.setValue = null, c.getValue = null, c.setItemText = null, c.getItemText = null), "slider" == b) {
            for (this._isIPad ? (document.removeEventListener("touchmove", pen._doOnMouseMoveStart, !1), document.removeEventListener("touchend", pen._doOnMouseMoveEnd, !1)) : "function" == typeof window.addEventListener ? (window.removeEventListener("mousemove", c.pen._doOnMouseMoveStart, !1), window.removeEventListener("mouseup", c.pen._doOnMouseMoveEnd, !1)) : (document.body.detachEvent("onmousemove", c.pen._doOnMouseMoveStart), document.body.detachEvent("onmouseup", c.pen._doOnMouseMoveEnd)), c.pen.allowMove = null, c.pen.initXY = null, c.pen.maxX = null, c.pen.minX = null, c.pen.nowX = null, c.pen.newNowX = null, c.pen.valueMax = null, c.pen.valueMin = null, c.pen.valueNow = null, c.pen._definePos = null, c.pen._detectLimits = null, c.pen._doOnMouseMoveStart = null, c.pen._doOnMouseMoveEnd = null, c.pen.onmousedown = null, c.obj.removeChild(c.pen), c.pen = null, c.label.tip = null, document.body.removeChild(c.label), c.label = null, c.obj.onselectstart = null, c.obj.idd = null; c.obj.childNodes.length > 0;) c.obj.removeChild(c.obj.childNodes[0]);
            c.obj.parentNode.removeChild(c.obj), c.obj = null, c.id = null, c.type = null, c.state = null, c.enableItem = null, c.disableItem = null, c.isEnabled = null, c.setItemToolTipTemplate = null, c.getItemToolTipTemplate = null, c.setMaxValue = null, c.setMinValue = null, c.getMaxValue = null, c.getMinValue = null, c.setValue = null, c.getValue = null, c.showItem = null, c.hideItem = null, c.isVisible = null
        }
        "separator" == b && (c.obj.onselectstart = null, c.obj.idd = null, c.obj.parentNode.removeChild(c.obj), c.obj = null, c.id = null, c.type = null, c.showItem = null, c.hideItem = null, c.isVisible = null), "text" == b && (c.obj.onselectstart = null, c.obj.idd = null, c.obj.parentNode.removeChild(c.obj), c.obj = null, c.id = null, c.type = null, c.showItem = null, c.hideItem = null, c.isVisible = null, c.setWidth = null, c.setItemText = null, c.getItemText = null), c = b = null, this.objPull[this.idPrefix + a] = null, delete this.objPull[this.idPrefix + a]
    },
    function() {
        for (var a = "addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(","), b = function(a) {
                return function(b, c, d, e, f, g) {
                    if (b = this.idPrefix + b, null != this.objPull[b]) return "buttonSelect" != this.objPull[b].type ? void 0 : this.objPull[b][a].call(this.objPull[b], c, d, e, f, g)
                }
            }, c = 0; c < a.length; c++) {
            var d = a[c];
            dhtmlXToolbarObject.prototype[d] = b(d)
        }
    }(), dhtmlXToolbarObject.prototype._rtlParseBtn = function(a, b) {
        return a + b
    }, dhtmlXToolbarObject.prototype._separatorObject = function(a, b, c) {
        return this.id = a.idPrefix + b, this.obj = document.createElement("DIV"), this.obj.className = "dhx_toolbar_sep", this.obj.style.display = null != c.hidden ? "none" : "", this.obj.idd = String(b), this.obj.title = c.title || "", this.obj.onselectstart = function(a) {
            a = a || event, a.returnValue = !1
        }, a._isIPad && (this.obj.ontouchstart = function(a) {
            return a = a || event, a.returnValue = !1, a.cancelBubble = !0, !1
        }), a.base.appendChild(this.obj), this.showItem = function() {
            this.obj.style.display = ""
        }, this.hideItem = function() {
            this.obj.style.display = "none"
        }, this.isVisible = function() {
            return "" == this.obj.style.display
        }, this
    }, dhtmlXToolbarObject.prototype._textObject = function(a, b, c) {
        return this.id = a.idPrefix + b, this.obj = document.createElement("DIV"), this.obj.className = "dhx_toolbar_text", this.obj.style.display = null != c.hidden ? "none" : "", this.obj.idd = String(b), this.obj.title = c.title || "", this.obj.onselectstart = function(a) {
            a = a || event, a.returnValue = !1
        }, a._isIPad && (this.obj.ontouchstart = function(a) {
            return a = a || event, a.returnValue = !1, a.cancelBubble = !0, !1
        }), this.obj.innerHTML = c.text || "", a.base.appendChild(this.obj), this.showItem = function() {
            this.obj.style.display = ""
        }, this.hideItem = function() {
            this.obj.style.display = "none"
        }, this.isVisible = function() {
            return "" == this.obj.style.display
        }, this.setItemText = function(a) {
            this.obj.innerHTML = a
        }, this.getItemText = function() {
            return this.obj.innerHTML
        }, this.setWidth = function(a) {
            this.obj.style.width = a + "px"
        }, this.setItemToolTip = function(a) {
            this.obj.title = a
        }, this.getItemToolTip = function() {
            return this.obj.title
        }, this
    }, dhtmlXToolbarObject.prototype._buttonObject = function(a, b, c) {
        this.id = a.idPrefix + b, this.state = null == c.enabled, this.imgEn = c.img || "", this.imgDis = c.imgdis || "", this.img = this.state ? "" != this.imgEn ? this.imgEn : "" : "" != this.imgDis ? this.imgDis : "", this.obj = document.createElement("DIV"), this.obj.className = "dhx_toolbar_btn " + (this.state ? "def" : "dis"), this.obj.style.display = null != c.hidden ? "none" : "", this.obj.allowClick = !1, this.obj.extAction = c.action || null, this.obj.renderAs = this.obj.className, this.obj.idd = String(b), this.obj.title = c.title || "", this.obj.pressed = !1, this.obj.innerHTML = a._rtlParseBtn("" != this.img ? "<img src='" + a.imagePath + this.img + "'>" : "", null != c.text ? "<div>" + c.text + "</div>" : "");
        var d = this;
        return this.obj.onselectstart = function(a) {
            a = a || event, a.returnValue = !1
        }, this.obj.onmouseover = function() {
            this._doOnMouseOver()
        }, this.obj.onmouseout = function() {
            this._doOnMouseOut()
        }, this.obj._doOnMouseOver = function() {
            this.allowClick = !0, 0 != d.state && "none" == a.anyUsed && (this.renderAs = this.className = "dhx_toolbar_btn over")
        }, this.obj._doOnMouseOut = function() {
            this.allowClick = !1, 0 != d.state && "none" == a.anyUsed && (this.className = "dhx_toolbar_btn def", this.renderAs = this.renderAs)
        }, this.obj.onclick = function(b) {
            if (0 != d.state && 0 != this.allowClick) {
                var b = b || event,
                    c = this.idd.replace(a.idPrefix, "");
                if (this.extAction) try {
                    window[this.extAction](c)
                } catch (a) {}
                a && a.callEvent && a.callEvent("onClick", [c])
            }
        }, this.obj[a._isIPad ? "ontouchstart" : "onmousedown"] = function(b) {
            return 0 == d.state ? (b = b || event, b.returnValue = !1, b.cancelBubble = !0, !1) : "none" == a.anyUsed ? (a.anyUsed = this.idd, this.className = "dhx_toolbar_btn pres", this.pressed = !0, this.onmouseover = function() {
                this._doOnMouseOver()
            }, this.onmouseout = function() {
                a.anyUsed = "none", this._doOnMouseOut()
            }, !1) : void 0
        }, this.obj[a._isIPad ? "ontouchend" : "onmouseup"] = function() {
            if (0 != d.state && ("none" == a.anyUsed || a.anyUsed == this.idd)) {
                var b = a.anyUsed;
                this._doOnMouseUp(), a._isIPad && "none" != b && a.callEvent("onClick", [this.idd.replace(a.idPrefix, "")])
            }
        }, a._isIPad && (this.obj.ontouchmove = function() {
            this._doOnMouseUp()
        }), this.obj._doOnMouseUp = function() {
            a.anyUsed = "none", this.className = this.renderAs, this.pressed = !1
        }, this.obj._doOnMouseUpOnceAnywhere = function() {
            this._doOnMouseUp(), this.onmouseover = function() {
                this._doOnMouseOver()
            }, this.onmouseout = function() {
                this._doOnMouseOut()
            }
        }, a.base.appendChild(this.obj), this.enableItem = function() {
            a._enableItem(this)
        }, this.disableItem = function() {
            a._disableItem(this)
        }, this.isEnabled = function() {
            return this.state
        }, this.showItem = function() {
            this.obj.style.display = ""
        }, this.hideItem = function() {
            this.obj.style.display = "none"
        }, this.isVisible = function() {
            return "" == this.obj.style.display
        }, this.setItemText = function(b) {
            a._setItemText(this, b)
        }, this.getItemText = function() {
            return a._getItemText(this)
        }, this.setItemImage = function(b) {
            a._setItemImage(this, b, !0)
        }, this.clearItemImage = function() {
            a._clearItemImage(this, !0)
        }, this.setItemImageDis = function(b) {
            a._setItemImage(this, b, !1)
        }, this.clearItemImageDis = function() {
            a._clearItemImage(this, !1)
        }, this.setItemToolTip = function(a) {
            this.obj.title = a
        }, this.getItemToolTip = function() {
            return this.obj.title
        }, this
    }, dhtmlXToolbarObject.prototype._buttonSelectObject = function(a, b, c) {
        this.id = a.idPrefix + b, this.state = null == c.enabled || "true" == c.enabled, this.imgEn = c.img || "", this.imgDis = c.imgdis || "", this.img = this.state ? "" != this.imgEn ? this.imgEn : "" : "" != this.imgDis ? this.imgDis : "", this.mode = c.mode || "button", "select" == this.mode ? (this.openAll = !0, this.renderSelect = !1, c.text && 0 != c.text.length || (c.text = "&nbsp;")) : (this.openAll = "true" == c.openAll || 1 == c.openAll || 1 == c.openAll || "1" == c.openAll || "yes" == c.openAll || "on" == c.openAll, this.renderSelect = null == c.renderSelect || "false" != c.renderSelect && "disabled" != c.renderSelect), this.maxOpen = isNaN(c.maxOpen ? c.maxOpen : "") ? null : c.maxOpen, this._maxOpenTest = function() {
            if (!isNaN(this.maxOpen) && !a._sbw) {
                var b = document.createElement("DIV");
                b.className = "dhxtoolbar_maxopen_test", document.body.appendChild(b);
                var c = document.createElement("DIV");
                c.className = "dhxtoolbar_maxopen_test2", b.appendChild(c), a._sbw = b.offsetWidth - c.offsetWidth, b.removeChild(c), c = null, document.body.removeChild(b), b = null
            }
        }, this._maxOpenTest(), this.obj = document.createElement("DIV"), this.obj.allowClick = !1, this.obj.extAction = c.action || null, this.obj.className = "dhx_toolbar_btn " + (this.state ? "def" : "dis"), this.obj.style.display = null != c.hidden ? "none" : "", this.obj.renderAs = this.obj.className, this.obj.onselectstart = function(a) {
            a = a || event, a.returnValue = !1
        }, this.obj.idd = String(b), this.obj.title = c.title || "", this.callEvent = this.obj.pressed = !1, this.obj.innerHTML = a._rtlParseBtn("" != this.img ? "<img src='" + a.imagePath + this.img + "'>" : "", null != c.text ? "<div>" + c.text + "</div>" : ""), a.base.appendChild(this.obj), this.arw = document.createElement("DIV"), this.arw.className = "dhx_toolbar_arw " + (this.state ? "def" : "dis"), this.arw.style.display = this.obj.style.display, this.arw.innerHTML = "<div class='arwimg'>&nbsp;</div>", this.arw.title = this.obj.title, this.arw.onselectstart = function(a) {
            a = a || event, a.returnValue = !1
        }, a.base.appendChild(this.arw);
        var d = this;
        if (this.obj.onmouseover = function(b) {
                b = b || event, "none" == a.anyUsed && d.state && (d.obj.renderAs = "dhx_toolbar_btn over", d.obj.className = d.obj.renderAs, d.arw.className = String(d.obj.renderAs).replace("btn", "arw"))
            }, this.obj.onmouseout = function() {
                d.obj.allowClick = !1, "none" == a.anyUsed && d.state && (d.obj.renderAs = "dhx_toolbar_btn def", d.obj.className = d.obj.renderAs, d.arw.className = String(d.obj.renderAs).replace("btn", "arw"), d.callEvent = !1)
            }, this.arw.onmouseover = this.obj.onmouseover, this.arw.onmouseout = this.obj.onmouseout, 1 != this.openAll && (this.obj.onclick = function(b) {
                if (b = b || event, d.obj.allowClick && d.state && "none" == a.anyUsed) {
                    var c = d.obj.idd.replace(a.idPrefix, "");
                    if (d.obj.extAction) try {
                        window[d.obj.extAction](c)
                    } catch (a) {}
                    a.callEvent("onClick", [c])
                }
            }, this.obj[a._isIPad ? "ontouchstart" : "onmousedown"] = function(b) {
                b = b || event, "none" == a.anyUsed && d.state && (d.obj.allowClick = !0, d.obj.className = "dhx_toolbar_btn pres", d.arw.className = "dhx_toolbar_arw pres", d.callEvent = !0)
            }, this.obj[a._isIPad ? "ontouchend" : "onmouseup"] = function(b) {
                if (b = b || event, b.cancelBubble = !0, "none" == a.anyUsed && d.state && (d.obj.className = d.obj.renderAs, d.arw.className = String(d.obj.renderAs).replace("btn", "arw"), a._isIPad && d.callEvent)) {
                    var c = d.obj.idd.replace(a.idPrefix, "");
                    a.callEvent("onClick", [c])
                }
            }), a._isIPad && (this.obj.ontouchmove = this.obj.onmouseout), this.arw[a._isIPad ? "ontouchstart" : "onmousedown"] = function(b) {
                var b = b || event,
                    c = 0 === this.className.indexOf("dhx_toolbar_arw") ? this : this.nextSibling;
                if (c._skip ? (b = b || event, b.cancelBubble = !0) : c._skip = !0, c = null, d.state) {
                    if (a.anyUsed == d.obj.idd) d.obj.className = d.obj.renderAs, d.arw.className = String(d.obj.renderAs).replace("btn", "arw"), a.anyUsed = "none", d.polygon.style.display = "none", d.polygon._ie6cover && (d.polygon._ie6cover.style.display = "none"), "dhx_terrace" == a.skin && a._improveTerraceButtonSelect(d.id, !0);
                    else {
                        if ("none" != a.anyUsed && "buttonSelect" == a.objPull[a.idPrefix + a.anyUsed].type) {
                            var e = a.objPull[a.idPrefix + a.anyUsed];
                            "none" != e.polygon.style.display && (e.obj.renderAs = "dhx_toolbar_btn def", e.obj.className = e.obj.renderAs, e.arw.className = String(d.obj.renderAs).replace("btn", "arw"), e.polygon.style.display = "none", e.polygon._ie6cover && (e.polygon._ie6cover.style.display = "none"), "dhx_terrace" == a.skin && a._improveTerraceButtonSelect(e.id, !0))
                        }
                        d.obj.className = "dhx_toolbar_btn over", d.arw.className = "dhx_toolbar_arw pres", a.anyUsed = d.obj.idd, d.polygon.style.top = "0px", d.polygon.style.visibility = "hidden", d.polygon.style.display = "", "dhx_terrace" == a.skin && a._improveTerraceButtonSelect(d.id, !1), d._fixMaxOpenHeight(d.maxOpen || null), a._autoDetectVisibleArea();
                        var f = getAbsoluteTop(d.obj) + d.obj.offsetHeight + a.selectPolygonOffsetTop,
                            g = d.polygon.offsetHeight;
                        if (f + g > a.tY2) {
                            var h = null != d.maxOpen ? Math.floor((a.tY2 - f) / 22) : 0;
                            h >= 1 ? d._fixMaxOpenHeight(h) : (f = getAbsoluteTop(d.obj) - g - a.selectPolygonOffsetTop, f < 0 && (f = 0))
                        }
                        if (d.polygon.style.top = f + "px", a.rtl) d.polygon.style.left = getAbsoluteLeft(d.obj) + d.obj.offsetWidth - d.polygon.offsetWidth + a.selectPolygonOffsetLeft + "px";
                        else {
                            var i = document.body.scrollLeft,
                                j = i + (window.innerWidth || document.body.clientWidth),
                                k = getAbsoluteLeft(d.obj) + a.selectPolygonOffsetLeft;
                            k + d.polygon.offsetWidth > j && (k = getAbsoluteLeft(d.arw) + d.arw.offsetWidth - d.polygon.offsetWidth), d.polygon.style.left = k + "px"
                        }
                        d.polygon.style.visibility = "visible", d.polygon._ie6cover && (d.polygon._ie6cover.style.left = d.polygon.style.left, d.polygon._ie6cover.style.top = d.polygon.style.top, d.polygon._ie6cover.style.width = d.polygon.offsetWidth + "px", d.polygon._ie6cover.style.height = d.polygon.offsetHeight + "px", d.polygon._ie6cover.style.display = "")
                    }
                    return !1
                }
            }, this.arw.onclick = function(a) {
                a = a || event, a.cancelBubble = !0
            }, this.arw[a._isIPad ? "ontouchend" : "onmouseup"] = function(a) {
                a = a || event, a.cancelBubble = !0
            }, this.openAll === !0 && (this.obj.onclick = this.arw.onclick, this.obj.onmousedown = this.arw.onmousedown, this.obj.onmouseup = this.arw.onmouseup, a._isIPad) && (this.obj.ontouchstart = this.arw.ontouchstart, this.obj.ontouchend = this.arw.ontouchend), this.obj.iddPrefix = a.idPrefix, this._listOptions = {}, this._fixMaxOpenHeight = function(b) {
                var c = "auto",
                    e = !1;
                if (null !== b) {
                    var f, g = 0;
                    for (f in this._listOptions) g++;
                    g > b ? (this._ph = 22 * b, c = this._ph + "px") : e = !0
                }
                this.polygon.style.width = "auto", this.polygon.style.height = "auto", e || null == d.maxOpen || (this.polygon.style.width = this.p_tbl.offsetWidth + a._sbw + "px", this.polygon.style.height = c)
            }, this._separatorButtonSelectObject = function(a, b, c) {
                return this.obj = {}, this.obj.tr = document.createElement("TR"), this.obj.tr.className = "tr_sep", this.obj.tr.onselectstart = function(a) {
                    return a = a || event, a.returnValue = !1
                }, this.obj.td = document.createElement("TD"), this.obj.td.colSpan = "2", this.obj.td.className = "td_btn_sep", this.obj.td.onselectstart = function(a) {
                    return a = a || event, a.returnValue = !1
                }, isNaN(c) ? c = d.p_tbody.childNodes.length + 1 : c < 1 && (c = 1), c > d.p_tbody.childNodes.length ? d.p_tbody.appendChild(this.obj.tr) : d.p_tbody.insertBefore(this.obj.tr, d.p_tbody.childNodes[c - 1]), this.obj.tr.appendChild(this.obj.td), this.obj.sep = document.createElement("DIV"), this.obj.sep.className = "btn_sep", this.obj.sep.onselectstart = function(a) {
                    return a = a || event, a.returnValue = !1
                }, this.obj.td.appendChild(this.obj.sep), d._listOptions[a] = this.obj, this
            }, this._buttonButtonSelectObject = function(b, c, e) {
                this.obj = {}, this.obj.tr = document.createElement("TR"), this.obj.tr.en = "false" != c.enabled && "true" != c.disabled, this.obj.tr.extAction = c.action || null, this.obj.tr._selected = null != c.selected, this.obj.tr.className = "tr_btn" + (this.obj.tr.en ? this.obj.tr._selected && d.renderSelect ? " tr_btn_selected" : "" : " tr_btn_disabled"), this.obj.tr.onselectstart = function(a) {
                    return a = a || event, a.returnValue = !1
                }, this.obj.tr.idd = String(b), c.userdata && (this.obj.userData = c.userdata), isNaN(e) ? e = d.p_tbody.childNodes.length + 1 : e < 1 && (e = 1), e > d.p_tbody.childNodes.length ? d.p_tbody.appendChild(this.obj.tr) : d.p_tbody.insertBefore(this.obj.tr, d.p_tbody.childNodes[e - 1]), this.obj.td_a = document.createElement("TD"), this.obj.td_a.className = "td_btn_img", this.obj.td_a.onselectstart = function(a) {
                    return a = a || event, a.returnValue = !1
                }, this.obj.td_b = document.createElement("TD"), this.obj.td_b.className = "td_btn_txt", this.obj.td_b.onselectstart = function(a) {
                    return a = a || event, a.returnValue = !1
                }, a.rtl ? (this.obj.tr.appendChild(this.obj.td_b), this.obj.tr.appendChild(this.obj.td_a)) : (this.obj.tr.appendChild(this.obj.td_a), this.obj.tr.appendChild(this.obj.td_b)), null != c.img && (this.obj.td_a.innerHTML = "<img class='btn_sel_img' src='" + a.imagePath + c.img + "' border='0'>", this.obj.tr._img = c.img);
                var f = null != c.text ? c.text : c.itemText || "";
                return this.obj.td_b.innerHTML = "<div class='btn_sel_text'>" + f + "</div>", this.obj.tr[a._isIPad ? "ontouchstart" : "onmouseover"] = function() {
                    !this.en || this._selected && d.renderSelect || (this.className = "tr_btn tr_btn_over")
                }, this.obj.tr.onmouseout = function() {
                    this.en && (this._selected && d.renderSelect ? String(this.className).search("tr_btn_selected") == -1 && (this.className = "tr_btn tr_btn_selected") : this.className = "tr_btn")
                }, this.obj.tr[a._isIPad ? "ontouchend" : "onclick"] = function(b) {
                    if (b = b || event, b.cancelBubble = !0, this.en) {
                        d.setListOptionSelected(this.idd.replace(a.idPrefix, "")), d.obj.renderAs = "dhx_toolbar_btn def", d.obj.className = d.obj.renderAs, d.arw.className = String(d.obj.renderAs).replace("btn", "arw"), d.polygon.style.display = "none", d.polygon._ie6cover && (d.polygon._ie6cover.style.display = "none"), "dhx_terrace" == a.skin && a._improveTerraceButtonSelect(d.id, !0), a.anyUsed = "none";
                        var c = this.idd.replace(a.idPrefix, "");
                        if (this.extAction) try {
                            window[this.extAction](c)
                        } catch (a) {}
                        a.callEvent("onClick", [c])
                    }
                }, d._listOptions[b] = this.obj, this
            }, this.polygon = document.createElement("DIV"), this.polygon.dir = "ltr", this.polygon.style.display = "none", this.polygon.style.zIndex = 101, this.polygon.className = "dhx_toolbar_poly_" + a.iconSize + "_" + a.skin + (a.rtl ? " rtl" : ""), this.polygon.onselectstart = function(a) {
                a = a || event, a.returnValue = !1
            }, this.polygon.onmousedown = function(a) {
                a = a || event, a.cancelBubble = !0
            }, this.polygon.style.overflowY = "auto", a._isIPad && (this.polygon.ontouchstart = function(a) {
                return a = a || event, a.returnValue = !1, a.cancelBubble = !0, !1
            }), this.p_tbl = document.createElement("TABLE"), this.p_tbl.className = "buttons_cont", this.p_tbl.cellSpacing = "0", this.p_tbl.cellPadding = "0", this.p_tbl.border = "0", this.polygon.appendChild(this.p_tbl), this.p_tbody = document.createElement("TBODY"), this.p_tbl.appendChild(this.p_tbody), c.items)
            for (var e = 0; e < c.items.length; e++) {
                var f = "_" + (c.items[e].type || "") + "ButtonSelectObject";
                "function" == typeof this[f] && new this[f](c.items[e].id || a._genStr(24), c.items[e])
            }
        return document.body.appendChild(this.polygon), a._isIE6 && (this.polygon._ie6cover = document.createElement("IFRAME"), this.polygon._ie6cover.frameBorder = 0, this.polygon._ie6cover.style.position = "absolute", this.polygon._ie6cover.style.border = "none", this.polygon._ie6cover.style.backgroundColor = "#000000", this.polygon._ie6cover.style.filter = "alpha(opacity=100)", this.polygon._ie6cover.style.display = "none", this.polygon._ie6cover.setAttribute("src", "javascript:false;"), document.body.appendChild(this.polygon._ie6cover)), this.setWidth = function(a) {
            this.obj.style.width = a - this.arw.offsetWidth + "px", this.polygon.style.width = this.obj.offsetWidth + this.arw.offsetWidth - 2 + "px", this.p_tbl.style.width = this.polygon.style.width
        }, this.enableItem = function() {
            a._enableItem(this)
        }, this.disableItem = function() {
            a._disableItem(this)
        }, this.isEnabled = function() {
            return this.state
        }, this.showItem = function() {
            this.obj.style.display = "", this.arw.style.display = ""
        }, this.hideItem = function() {
            this.obj.style.display = "none", this.arw.style.display = "none"
        }, this.isVisible = function() {
            return "" == this.obj.style.display
        }, this.setItemText = function(b) {
            a._setItemText(this, b)
        }, this.getItemText = function() {
            return a._getItemText(this)
        }, this.setItemImage = function(b) {
            a._setItemImage(this, b, !0)
        }, this.clearItemImage = function() {
            a._clearItemImage(this, !0)
        }, this.setItemImageDis = function(b) {
            a._setItemImage(this, b, !1)
        }, this.clearItemImageDis = function() {
            a._clearItemImage(this, !1)
        }, this.setItemToolTip = function(a) {
            this.obj.title = a, this.arw.title = a
        }, this.getItemToolTip = function() {
            return this.obj.title
        }, this.addListOption = function(a, b, c, d, e) {
            if ("button" == c || "separator" == c) {
                var f = {
                    id: a,
                    type: c,
                    text: d,
                    img: e
                };
                new this["_" + c + "ButtonSelectObject"](a, f, b)
            }
        }, this.removeListOption = function(a) {
            if (this._isListButton(a, !0)) {
                var b = this._listOptions[a];
                if (null != b.td_a && null != b.td_b) {
                    for (b.td_a.onselectstart = null, b.td_b.onselectstart = null; b.td_a.childNodes.length > 0;) b.td_a.removeChild(b.td_a.childNodes[0]);
                    for (; b.td_b.childNodes.length > 0;) b.td_b.removeChild(b.td_b.childNodes[0]);
                    for (b.tr.onselectstart = null, b.tr.onmouseover = null, b.tr.onmouseout = null, b.tr.onclick = null; b.tr.childNodes.length > 0;) b.tr.removeChild(b.tr.childNodes[0]);
                    b.tr.parentNode.removeChild(b.tr), b.td_a = null, b.td_b = null
                } else {
                    for (b.sep.onselectstart = null, b.td.onselectstart = null, b.tr.onselectstart = null; b.td.childNodes.length > 0;) b.td.removeChild(b.td.childNodes[0]);
                    for (; b.tr.childNodes.length > 0;) b.tr.removeChild(b.tr.childNodes[0]);
                    b.tr.parentNode.removeChild(b.tr), b.sep = null, b.td = null
                }
                b = b.tr = null, this._listOptions[a] = null;
                try {
                    delete this._listOptions[a]
                } catch (a) {}
            }
        }, this.showListOption = function(a) {
            this._isListButton(a, !0) && (this._listOptions[a].tr.style.display = "")
        }, this.hideListOption = function(a) {
            this._isListButton(a, !0) && (this._listOptions[a].tr.style.display = "none")
        }, this.isListOptionVisible = function(a) {
            return this._isListButton(a, !0) ? "none" != this._listOptions[a].tr.style.display : void 0
        }, this.enableListOption = function(b) {
            this._isListButton(b) && (this._listOptions[b].tr.en = !0, this._listOptions[b].tr.className = "tr_btn" + (this._listOptions[b].tr._selected && a.renderSelect ? " tr_btn_selected" : ""))
        }, this.disableListOption = function(a) {
            this._isListButton(a) && (this._listOptions[a].tr.en = !1, this._listOptions[a].tr.className = "tr_btn tr_btn_disabled")
        }, this.isListOptionEnabled = function(a) {
            return this._isListButton(a) ? this._listOptions[a].tr.en : void 0
        }, this.setListOptionPosition = function(a, b) {
            if (this._listOptions[a] && this.getListOptionPosition(a) != b && !isNaN(b)) {
                b < 1 && (b = 1);
                var c = this._listOptions[a].tr;
                this.p_tbody.removeChild(c), b > this.p_tbody.childNodes.length ? this.p_tbody.appendChild(c) : this.p_tbody.insertBefore(c, this.p_tbody.childNodes[b - 1]), c = null
            }
        }, this.getListOptionPosition = function(a) {
            var b = -1;
            if (!this._listOptions[a]) return b;
            for (var c = 0; c < this.p_tbody.childNodes.length; c++) this.p_tbody.childNodes[c] == this._listOptions[a].tr && (b = c + 1);
            return b
        }, this.setListOptionImage = function(b, c) {
            if (this._isListButton(b)) {
                var d = this._listOptions[b].tr.childNodes[a.rtl ? 1 : 0];
                if (d.childNodes.length > 0) d.childNodes[0].src = a.imagePath + c;
                else {
                    var e = document.createElement("IMG");
                    e.className = "btn_sel_img", e.src = a.imagePath + c, d.appendChild(e)
                }
                d = null
            }
        }, this.getListOptionImage = function(b) {
            if (this._isListButton(b)) {
                var c = this._listOptions[b].tr.childNodes[a.rtl ? 1 : 0],
                    d = null;
                return c.childNodes.length > 0 && (d = c.childNodes[0].src), c = null, d
            }
        }, this.clearListOptionImage = function(b) {
            if (this._isListButton(b)) {
                for (var c = this._listOptions[b].tr.childNodes[a.rtl ? 1 : 0]; c.childNodes.length > 0;) c.removeChild(c.childNodes[0]);
                c = null
            }
        }, this.setListOptionText = function(b, c) {
            this._isListButton(b) && (this._listOptions[b].tr.childNodes[a.rtl ? 0 : 1].childNodes[0].innerHTML = c)
        }, this.getListOptionText = function(b) {
            return this._isListButton(b) ? this._listOptions[b].tr.childNodes[a.rtl ? 0 : 1].childNodes[0].innerHTML : void 0
        }, this.setListOptionToolTip = function(a, b) {
            this._isListButton(a) && (this._listOptions[a].tr.title = b)
        }, this.getListOptionToolTip = function(a) {
            return this._isListButton(a) ? this._listOptions[a].tr.title : void 0
        }, this.forEachListOption = function(a) {
            for (var b in this._listOptions) a(b)
        }, this.getAllListOptions = function() {
            var a, b = [];
            for (a in this._listOptions) b[b.length] = a;
            return b
        }, this.setListOptionSelected = function(a) {
            for (var b in this._listOptions) {
                var c = this._listOptions[b];
                null != c.td_a && null != c.td_b && c.tr.en && (b == a ? (c.tr._selected = !0, c.tr.className = "tr_btn" + (this.renderSelect ? " tr_btn_selected" : ""), "select" == this.mode && (c.tr._img ? this.setItemImage(c.tr._img) : this.clearItemImage(), this.setItemText(this.getListOptionText(a)))) : (c.tr._selected = !1, c.tr.className = "tr_btn")), c = null
            }
        }, this.getListOptionSelected = function() {
            var a, b = null;
            for (a in this._listOptions) 1 == this._listOptions[a].tr._selected && (b = a);
            return b
        }, this._isListButton = function(a, b) {
            return null != this._listOptions[a] && !(!b && "tr_sep" == this._listOptions[a].tr.className)
        }, this.setMaxOpen = function(a) {
            this._ph = null, "number" == typeof a ? (this.maxOpen = a, this._maxOpenTest()) : this.maxOpen = null
        }, c.width && this.setWidth(c.width), "select" == this.mode && "undefined" != typeof c.selected && this.setListOptionSelected(c.selected), this
    }, dhtmlXToolbarObject.prototype._buttonInputObject = function(a, b, c) {
        this.id = a.idPrefix + b, this.obj = document.createElement("DIV"), this.obj.className = "dhx_toolbar_btn def", this.obj.style.display = null != c.hidden ? "none" : "", this.obj.idd = String(b), this.obj.w = null != c.width ? c.width : 100, this.obj.title = null != c.title ? c.title : "", this.obj.innerHTML = "<input class='inp' type='text' style='-moz-user-select:text;width:" + this.obj.w + "px;'" + (null != c.value ? " value='" + c.value + "'" : "") + ">";
        var d = a,
            e = this;
        return this.obj.childNodes[0].onkeydown = function(a) {
            a = a || event, 13 == a.keyCode && d.callEvent("onEnter", [e.obj.idd, this.value])
        }, a.base.appendChild(this.obj), this.enableItem = function() {
            this.obj.childNodes[0].disabled = !1
        }, this.disableItem = function() {
            this.obj.childNodes[0].disabled = !0
        }, this.isEnabled = function() {
            return !this.obj.childNodes[0].disabled
        }, this.showItem = function() {
            this.obj.style.display = ""
        }, this.hideItem = function() {
            this.obj.style.display = "none"
        }, this.isVisible = function() {
            return "none" != this.obj.style.display
        }, this.setValue = function(a) {
            this.obj.childNodes[0].value = a
        }, this.getValue = function() {
            return this.obj.childNodes[0].value
        }, this.setWidth = function(a) {
            this.obj.w = a, this.obj.childNodes[0].style.width = this.obj.w + "px"
        }, this.getWidth = function() {
            return this.obj.w
        }, this.setItemToolTip = function(a) {
            this.obj.title = a
        }, this.getItemToolTip = function() {
            return this.obj.title
        }, this.getInput = function() {
            return this.obj.firstChild
        }, this
    }, dhtmlXToolbarObject.prototype._buttonTwoStateObject = function(a, b, c) {
        this.id = a.idPrefix + b, this.state = null == c.enabled, this.imgEn = null != c.img ? c.img : "", this.imgDis = null != c.imgdis ? c.imgdis : "", this.img = this.state ? "" != this.imgEn ? this.imgEn : "" : "" != this.imgDis ? this.imgDis : "", this.obj = document.createElement("DIV"), this.obj.pressed = null != c.selected, this.obj.extAction = c.action || null, this.obj.className = "dhx_toolbar_btn " + (this.obj.pressed ? "pres" + (this.state ? "" : "_dis") : this.state ? "def" : "dis"), this.obj.style.display = null != c.hidden ? "none" : "", this.obj.renderAs = this.obj.className, this.obj.idd = String(b), this.obj.title = c.title || "", this.obj.pressed && (this.obj.renderAs = "dhx_toolbar_btn over"), this.obj.innerHTML = a._rtlParseBtn("" != this.img ? "<img src='" + a.imagePath + this.img + "'>" : "", null != c.text ? "<div>" + c.text + "</div>" : ""), a.base.appendChild(this.obj);
        var d = this;
        return this.obj.onselectstart = function(a) {
            a = a || event, a.returnValue = !1
        }, this.obj.onmouseover = function() {
            this._doOnMouseOver()
        }, this.obj.onmouseout = function() {
            this._doOnMouseOut()
        }, this.obj._doOnMouseOver = function() {
            0 != d.state && "none" == a.anyUsed && (this.renderAs = this.pressed ? "dhx_toolbar_btn over" : this.className = "dhx_toolbar_btn over")
        }, this.obj._doOnMouseOut = function() {
            0 != d.state && "none" == a.anyUsed && (this.renderAs = this.pressed ? "dhx_toolbar_btn def" : this.className = "dhx_toolbar_btn def")
        }, this.obj[a._isIPad ? "ontouchstart" : "onmousedown"] = function() {
            if ((!a.checkEvent("onBeforeStateChange") || a.callEvent("onBeforeStateChange", [this.idd.replace(a.idPrefix, ""), this.pressed])) && 0 != d.state && "none" == a.anyUsed) {
                this.className = (this.pressed = !this.pressed) ? "dhx_toolbar_btn pres" : this.renderAs;
                var b = this.idd.replace(a.idPrefix, "");
                if (this.extAction) try {
                    window[this.extAction](b, this.pressed)
                } catch (a) {}
                return a.callEvent("onStateChange", [b, this.pressed]), !1
            }
        }, this.setItemState = function(b, c) {
            if (this.obj.pressed != b && (1 == b ? (this.obj.pressed = !0, this.obj.className = "dhx_toolbar_btn pres" + (this.state ? "" : "_dis"), this.obj.renderAs = "dhx_toolbar_btn over") : (this.obj.pressed = !1, this.obj.className = "dhx_toolbar_btn " + (this.state ? "def" : "dis"), this.obj.renderAs = this.obj.className), 1 == c)) {
                var d = this.obj.idd.replace(a.idPrefix, "");
                if (this.obj.extAction) try {
                    window[this.obj.extAction](d, this.obj.pressed)
                } catch (a) {}
                a.callEvent("onStateChange", [d, this.obj.pressed])
            }
        }, this.getItemState = function() {
            return this.obj.pressed
        }, this.enableItem = function() {
            a._enableItem(this)
        }, this.disableItem = function() {
            a._disableItem(this)
        }, this.isEnabled = function() {
            return this.state
        }, this.showItem = function() {
            this.obj.style.display = ""
        }, this.hideItem = function() {
            this.obj.style.display = "none"
        }, this.isVisible = function() {
            return "" == this.obj.style.display
        }, this.setItemText = function(b) {
            a._setItemText(this, b)
        }, this.getItemText = function() {
            return a._getItemText(this)
        }, this.setItemImage = function(b) {
            a._setItemImage(this, b, !0)
        }, this.clearItemImage = function() {
            a._clearItemImage(this, !0)
        }, this.setItemImageDis = function(b) {
            a._setItemImage(this, b, !1)
        }, this.clearItemImageDis = function() {
            a._clearItemImage(this, !1)
        }, this.setItemToolTip = function(a) {
            this.obj.title = a
        }, this.getItemToolTip = function() {
            return this.obj.title
        }, this
    }, dhtmlXToolbarObject.prototype._sliderObject = function(a, b, c) {
        this.id = a.idPrefix + b, this.state = null == c.enabled || "true" == c.enabled, this.obj = document.createElement("DIV"), this.obj.className = "dhx_toolbar_btn " + (this.state ? "def" : "dis"), this.obj.style.display = null != c.hidden ? "none" : "", this.obj.onselectstart = function(a) {
            a = a || event, a.returnValue = !1
        }, this.obj.idd = String(b), this.obj.len = null != c.length ? Number(c.length) : 50, this.obj.innerHTML = "<div>" + (c.textMin || "") + "</div><div class='sl_bg_l'></div><div class='sl_bg_m' style='width:" + this.obj.len + "px;'></div><div class='sl_bg_r'></div><div>" + (c.textMax || "") + "</div>", a.base.appendChild(this.obj);
        var d = this;
        this.pen = document.createElement("DIV"), this.pen.className = "sl_pen", this.obj.appendChild(this.pen);
        var e = this.pen;
        this.label = document.createElement("DIV"), this.label.dir = "ltr", this.label.className = "dhx_toolbar_slider_label_" + a.skin + (a.rtl ? "_rtl" : ""), this.label.style.display = "none", this.label.tip = c.toolTip || "%v", document.body.appendChild(this.label);
        var f = this.label;
        return this.pen.valueMin = null != c.valueMin ? Number(c.valueMin) : 0, this.pen.valueMax = null != c.valueMax ? Number(c.valueMax) : 100, this.pen.valueMin > this.pen.valueMax && (this.pen.valueMin = this.pen.valueMax), this.pen.valueNow = null != c.valueNow ? Number(c.valueNow) : this.pen.valueMax, this.pen.valueNow > this.pen.valueMax && (this.pen.valueNow = this.pen.valueMax), this.pen.valueNow < this.pen.valueMin && (this.pen.valueNow = this.pen.valueMin), this.pen._detectLimits = function() {
            this.minX = d.obj.childNodes[1].offsetLeft - 4, this.maxX = d.obj.childNodes[3].offsetLeft - this.offsetWidth + 1
        }, this.pen._detectLimits(), this.pen._definePos = function() {
            this.nowX = Math.round((this.valueNow - this.valueMin) * (this.maxX - this.minX) / (this.valueMax - this.valueMin) + this.minX), this.style.left = this.nowX + "px", this.newNowX = this.nowX
        }, this.pen._definePos(), this.pen.initXY = 0, this.pen.allowMove = !1, this.pen[a._isIPad ? "ontouchstart" : "onmousedown"] = function(b) {
            0 != d.state && (b = b || event, this.initXY = a._isIPad ? b.touches[0].clientX : b.clientX, this.newValueNow = this.valueNow, this.allowMove = !0, this.className = "sl_pen over", "" != f.tip) && (f.style.visibility = "hidden", f.style.display = "", f.innerHTML = f.tip.replace("%v", this.valueNow), f.style.left = Math.round(getAbsoluteLeft(this) + this.offsetWidth / 2 - f.offsetWidth / 2) + "px", f.style.top = getAbsoluteTop(this) - f.offsetHeight - 3 + "px", f.style.visibility = "")
        }, this.pen._doOnMouseMoveStart = function(b) {
            if (b = b || event, e.allowMove) {
                var c = a._isIPad ? b.touches[0].clientX : b.clientX,
                    d = c - e.initXY;
                if (!(c < getAbsoluteLeft(e) + Math.round(e.offsetWidth / 2) && e.nowX == e.minX || c > getAbsoluteLeft(e) + Math.round(e.offsetWidth / 2) && e.nowX == e.maxX)) return e.newNowX = e.nowX + d, e.newNowX < e.minX && (e.newNowX = e.minX), e.newNowX > e.maxX && (e.newNowX = e.maxX), e.nowX = e.newNowX, e.style.left = e.nowX + "px", e.initXY = c, e.newValueNow = Math.round((e.valueMax - e.valueMin) * (e.newNowX - e.minX) / (e.maxX - e.minX) + e.valueMin), "" != f.tip && (f.innerHTML = f.tip.replace(/%v/gi, e.newValueNow), f.style.left = Math.round(getAbsoluteLeft(e) + e.offsetWidth / 2 - f.offsetWidth / 2) + "px", f.style.top = getAbsoluteTop(e) - f.offsetHeight - 3 + "px"), b.cancelBubble = !0, b.returnValue = !1
            }
        }, this.pen._doOnMouseMoveEnd = function() {
            e.allowMove && (e.className = "sl_pen", e.allowMove = !1, e.nowX = e.newNowX, e.valueNow = e.newValueNow, "" != f.tip && (f.style.display = "none"), a.callEvent("onValueChange", [d.obj.idd.replace(a.idPrefix, ""), e.valueNow]))
        }, a._isIPad ? (document.addEventListener("touchmove", e._doOnMouseMoveStart, !1), document.addEventListener("touchend", e._doOnMouseMoveEnd, !1)) : "undefined" != typeof window.addEventListener ? (window.addEventListener("mousemove", e._doOnMouseMoveStart, !1), window.addEventListener("mouseup", e._doOnMouseMoveEnd, !1)) : (document.body.attachEvent("onmousemove", e._doOnMouseMoveStart), document.body.attachEvent("onmouseup", e._doOnMouseMoveEnd)), this.enableItem = function() {
            this.state || (this.state = !0, this.obj.className = "dhx_toolbar_btn def")
        }, this.disableItem = function() {
            this.state && (this.state = !1, this.obj.className = "dhx_toolbar_btn dis")
        }, this.isEnabled = function() {
            return this.state
        }, this.showItem = function() {
            this.obj.style.display = ""
        }, this.hideItem = function() {
            this.obj.style.display = "none"
        }, this.isVisible = function() {
            return "" == this.obj.style.display
        }, this.setValue = function(b, c) {
            b = Number(b), b < this.pen.valueMin && (b = this.pen.valueMin), b > this.pen.valueMax && (b = this.pen.valueMax), this.pen.valueNow = b, this.pen._definePos(), 1 == c && a.callEvent("onValueChange", [this.obj.idd.replace(a.idPrefix, ""), this.pen.valueNow])
        }, this.getValue = function() {
            return this.pen.valueNow
        }, this.setMinValue = function(a, b) {
            a = Number(a), a > this.pen.valueMax || (this.obj.childNodes[0].innerHTML = b, this.obj.childNodes[0].style.display = b.length > 0 ? "" : "none", this.pen.valueMin = a, this.pen.valueNow < this.pen.valueMin && (this.pen.valueNow = this.pen.valueMin), this.pen._detectLimits(), this.pen._definePos())
        }, this.setMaxValue = function(a, b) {
            a = Number(a), a < this.pen.valueMin || (this.obj.childNodes[4].innerHTML = b, this.obj.childNodes[4].style.display = b.length > 0 ? "" : "none", this.pen.valueMax = a, this.pen.valueNow > this.pen.valueMax && (this.pen.valueNow = this.pen.valueMax), this.pen._detectLimits(), this.pen._definePos())
        }, this.getMinValue = function() {
            var a = this.obj.childNodes[0].innerHTML,
                b = this.pen.valueMin;
            return [b, a]
        }, this.getMaxValue = function() {
            var a = this.obj.childNodes[4].innerHTML,
                b = this.pen.valueMax;
            return [b, a]
        }, this.setItemToolTipTemplate = function(a) {
            this.label.tip = a
        }, this.getItemToolTipTemplate = function() {
            return this.label.tip
        }, this
    }, dhtmlXToolbarObject.prototype.unload = function() {
        for (this._isIPad ? document.removeEventListener("touchstart", this._doOnClick, !1) : "function" == typeof window.addEventListener ? window.removeEventListener("mousedown", this._doOnClick, !1) : document.body.detachEvent("onmousedown", this._doOnClick), this._doOnClick = null, this.clearAll(), this.objPull = null, this._xmlLoader && (this._xmlLoader.destructor(), this._xmlLoader = null); this.base.childNodes.length > 0;) this.base.removeChild(this.base.childNodes[0]);
        for (this.cont.removeChild(this.base), this.base = null; this.cont.childNodes.length > 0;) this.cont.removeChild(this.cont.childNodes[0]);
        this.cont.className = "", this.cont = null, this.detachAllEvents(), this.items = this.setMaxOpen = this.getUserData = this.setUserData = this.unload = this.getListOptionSelected = this.setListOptionSelected = this.getAllListOptions = this.forEachListOption = this.clearListOptionImage = this.getListOptionImage = this.setListOptionImage = this.getListOptionToolTip = this.setListOptionToolTip = this.getListOptionText = this.setListOptionText = this.getListOptionPosition = this.setListOptionPosition = this.isListOptionEnabled = this.disableListOption = this.enableListOption = this.isListOptionVisible = this.hideListOption = this.showListOption = this.removeListOption = this.addListOption = this.removeItem = this.setPosition = this.getPosition = this.getWidth = this.setWidth = this.getMaxValue = this.setMaxValue = this.getMinValue = this.setMinValue = this.getValue = this.setValue = this.getItemToolTipTemplate = this.setItemToolTipTemplate = this.getItemState = this.setItemState = this.clearItemImageDis = this.clearItemImage = this.setItemImageDis = this.setItemImage = this.getItemToolTip = this.setItemToolTip = this.getItemText = this.setItemText = this.isEnabled = this.disableItem = this.enableItem = this.isVisible = this.hideItem = this.showItem = this.forEachItem = this.addInput = this.addSlider = this.addSeparator = this.addButtonTwoState = this.addButtonSelect = this.addText = this.addButton = this.getParentId = this.inArray = this.getTypeExt = this.getType = this.removeSpacer = this.addSpacer = this.clearAll = this.detachAllEvents = this.detachEvent = this.eventCatcher = this.checkEvent = this.callEvent = this.attachEvent = this.loadXMLString = this.loadXML = this.setIconPath = this.setIconsPath = this.setSkin = this.setAlign = this._removeItem = this._autoDetectVisibleArea = this._sliderObject = this._buttonTwoStateObject = this._buttonInputObject = this._buttonSelectObject = this._buttonObject = this._textObject = this._separatorObject = this._getIdByPosition = this._setPosition = this._getPosition = this._addItem = this._genStr = this._addItemToStorage = this._doOnLoad = this._xmlParser = this._disableItem = this._enableItem = this._getItemText = this._setItemText = this._clearItemImage = this._setItemImage = this._addImgObj = this._getObj = this._sbw = this.setRTL = this._rtlParseBtn = this._rtl = this.skin = this.selectPolygonOffsetTop = this.selectPolygonOffsetLeft = this.rootTypes = this.imagePath = this.idPrefix = this.anyUsed = this.align = this._isWebToolbar = this._isIE6 = this.tY2 = this.tY1 = this.tX2 = this.tX1 = null
    }, dhtmlXToolbarObject.prototype._autoDetectVisibleArea = function() {
        this.tX1 = document.body.scrollLeft, this.tX2 = this.tX1 + (window.innerWidth || document.body.clientWidth), this.tY1 = Math.max((_isIE ? document.documentElement : document.getElementsByTagName("html")[0]).scrollTop, document.body.scrollTop), this.tY2 = this.tY1 + (_isIE ? Math.max(document.documentElement.clientHeight || 0, document.documentElement.offsetHeight || 0, document.body.clientHeight || 0) : window.innerHeight)
    }, dhtmlXToolbarObject.prototype.setUserData = function(a, b, c) {
        if (null != this.objPull[this.idPrefix + a]) {
            var d = this.objPull[this.idPrefix + a];
            null == d.userData && (d.userData = {}), d.userData[b] = c
        }
    }, dhtmlXToolbarObject.prototype.getUserData = function(a, b) {
        return null == this.objPull[this.idPrefix + a] ? null : null == this.objPull[this.idPrefix + a].userData ? null : null == this.objPull[this.idPrefix + a].userData[b] ? null : this.objPull[this.idPrefix + a].userData[b]
    }, dhtmlXToolbarObject.prototype._isListOptionExists = function(a, b) {
        if (null == this.objPull[this.idPrefix + a]) return !1;
        var c = this.objPull[this.idPrefix + a];
        return "buttonSelect" == c.type && null != c._listOptions[b]
    }, dhtmlXToolbarObject.prototype.setListOptionUserData = function(a, b, c, d) {
        if (this._isListOptionExists(a, b)) {
            var e = this.objPull[this.idPrefix + a]._listOptions[b];
            null == e.userData && (e.userData = {}), e.userData[c] = d
        }
    }, dhtmlXToolbarObject.prototype.getListOptionUserData = function(a, b, c) {
        if (!this._isListOptionExists(a, b)) return null;
        var d = this.objPull[this.idPrefix + a]._listOptions[b];
        return d.userData && d.userData[c] ? d.userData[c] : null
    },
    function() {
        dhtmlx.extend_api("dhtmlXToolbarObject", {
            _init: function(a) {
                return [a.parent, a.skin]
            },
            icon_path: "setIconsPath",
            xml: "loadXML",
            items: "items",
            align: "setAlign",
            rtl: "setRTL",
            skin: "setSkin"
        }, {
            items: function(a) {
                for (var b = 0; b < a.length; b++) {
                    var c = a[b];
                    "button" == c.type && this.addButton(c.id, null, c.text, c.img, c.img_disabled), "separator" == c.type && this.addSeparator(c.id, null), "text" == c.type && this.addText(c.id, null, c.text), "buttonSelect" == c.type && this.addButtonSelect(c.id, null, c.text, c.options, c.img, c.img_disabled, c.renderSelect, c.openAll, c.maxOpen), "buttonTwoState" == c.type && this.addButtonTwoState(c.id, null, c.text, c.img, c.img_disabled), "buttonInput" == c.type && this.addInput(c.id, null, c.text), "slider" == c.type && this.addSlider(c.id, null, c.length, c.value_min, c.value_max, c.value_now, c.text_min, c.text_max, c.tip_template), c.width && this.setWidth(c.id, c.width), c.disabled && this.disableItem(c.id), c.tooltip && this.setItemToolTip(c.id, c.tooltip), c.pressed === !0 && this.setItemState(c.id, !0)
                }
            }
        })
    }(), xmlPointer.prototype = {
        text: function() {
            if (!_isFF) return this.d.xml;
            var a = new XMLSerializer;
            return a.serializeToString(this.d)
        },
        get: function(a) {
            return this.d.getAttribute(a)
        },
        exists: function() {
            return !!this.d
        },
        content: function() {
            return this.d.firstChild ? this.d.firstChild.data : ""
        },
        each: function(a, b, c, d) {
            var e = this.d.childNodes,
                f = new xmlPointer;
            if (e.length)
                for (d = d || 0; d < e.length && (e[d].tagName != a || (f.d = e[d], b.apply(c, [f, d]) != -1)); d++);
        },
        get_all: function() {
            for (var a = {}, b = this.d.attributes, c = 0; c < b.length; c++) a[b[c].name] = b[c].value;
            return a
        },
        sub: function(a) {
            var b = this.d.childNodes,
                c = new xmlPointer;
            if (b.length)
                for (var d = 0; d < b.length; d++)
                    if (b[d].tagName == a) return c.d = b[d], c
        },
        up: function() {
            return new xmlPointer(this.d.parentNode)
        },
        set: function(a, b) {
            this.d.setAttribute(a, b)
        },
        clone: function() {
            return new xmlPointer(this.d)
        },
        sub_exists: function(a) {
            var b = this.d.childNodes;
            if (b.length)
                for (var c = 0; c < b.length; c++)
                    if (b[c].tagName == a) return !0;
            return !1
        },
        through: function(a, b, c, d, e) {
            var f = this.d.childNodes;
            if (f.length)
                for (var g = 0; g < f.length; g++) {
                    if (f[g].tagName == a && null != f[g].getAttribute(b) && "" != f[g].getAttribute(b) && (!c || f[g].getAttribute(b) == c)) {
                        var h = new xmlPointer(f[g]);
                        d.apply(e, [h, g])
                    }
                    var i = this.d;
                    this.d = f[g], this.through(a, b, c, d, e), this.d = i
                }
        }
    }, dhtmlXTreeObject.prototype.setDataMode = function(a) {
        this._datamode = a
    }, dhtmlXTreeObject.prototype._doContClick = function(a, b) {
        if (!b && 2 != a.button) return this._acMenu && (this._acMenu.hideContextMenu ? this._acMenu.hideContextMenu() : this.cMenu._contextEnd()), !0;
        for (var c = _isIE ? a.srcElement : a.target; c && "BODY" != c.tagName && !c.parentObject;) c = c.parentNode;
        if (!c || !c.parentObject) return !0;
        var d = c.parentObject;
        if (this.callEvent("onRightClick", [d.id, a]) || ((a.srcElement || a.target).oncontextmenu = function(a) {
                return (a || event).cancelBubble = !0, !1
            }), this._acMenu = d.cMenu || this.cMenu) {
            if (!this.callEvent("onBeforeContextMenu", [d.id])) return !0;
            if (_isMacOS || ((a.srcElement || a.target).oncontextmenu = function(a) {
                    return (a || event).cancelBubble = !0, !1
                }), this._acMenu.showContextMenu) {
                var e = window.document.documentElement,
                    f = window.document.body,
                    g = [e.scrollLeft || f.scrollLeft, e.scrollTop || f.scrollTop];
                if (_isIE) var h = a.clientX + g[0],
                    i = a.clientY + g[1];
                else h = a.pageX, i = a.pageY;
                this._acMenu.showContextMenu(h - 1, i - 1), this.contextID = d.id, a.cancelBubble = !0, this._acMenu._skip_hide = !0
            } else c.contextMenuId = d.id, c.contextMenu = this._acMenu, c.a = this._acMenu._contextStart, c.a(c, a), c.a = null;
            return !1
        }
        return !0
    }, dhtmlXTreeObject.prototype.enableIEImageFix = function(a) {
        a ? (this._getImg = function() {
            var a = document.createElement("DIV");
            return a.innerHTML = "&nbsp;", a.className = "dhx_bg_img_fix", a
        }, this._setSrc = function(a, b) {
            a.style.backgroundImage = "url(" + b + ")"
        }, this._getSrc = function(a) {
            var b = a.style.backgroundImage;
            return b.substr(4, b.length - 5).replace(/(^")|("$)/g, "")
        }) : (this._getImg = function(a) {
            return document.createElement(a == this.rootId ? "div" : "img")
        }, this._setSrc = function(a, b) {
            a.src = b
        }, this._getSrc = function(a) {
            return a.src
        })
    }, dhtmlXTreeObject.prototype.destructor = function() {
        for (var a in this._idpull) {
            var b = this._idpull[a];
            b && (b.parentObject = null, b.treeNod = null, b.childNodes = null, b.span = null, b.tr.nodem = null, b.tr = null, b.htmlNode.objBelong = null, b.htmlNode = null, this._idpull[a] = null)
        }
        this.parentObject.innerHTML = "", this.XMLLoader && this.XMLLoader.destructor(), this.allTree.onselectstart = null, this.allTree.oncontextmenu = null, this.allTree.onmousedown = null;
        for (a in this) this[a] = null
    }, cObject.prototype = {}, cObject.prototype.clone = function() {
        function a() {}
        return a.prototype = this, new a
    }, dhtmlXTreeObject.prototype._globalIdStorageAdd = function(a, b) {
        return this._globalIdStorageFind(a, 1, 1) ? (a = a + "_" + (new Date).valueOf(), this._globalIdStorageAdd(a, b)) : (this._idpull[a] = b, this._pullSize++, a)
    }, dhtmlXTreeObject.prototype._globalIdStorageSub = function(a) {
        this._idpull[a] && (this._unselectItem(this._idpull[a]), this._idpull[a] = null, this._pullSize--), this._locker && this._locker[a] && (this._locker[a] = !1)
    }, dhtmlXTreeObject.prototype._globalIdStorageFind = function(a, b, c, d) {
        var e = this._idpull[a];
        if (e) {
            if (e.unParsed && !c && this.reParse(e, 0), this._srnd && !e.htmlNode && this._buildSRND(e, c), d && this._edsbpsA)
                for (var f = 0; f < this._edsbpsA.length; f++)
                    if (this._edsbpsA[f][2] == a) return dhtmlxError.throwError("getItem", "Requested item still in parsing process.", a), null;
            return e
        }
        return this.slowParse && 0 != a && !b ? this.preParse(a) : null
    }, dhtmlXTreeObject.prototype._getSubItemsXML = function(a) {
        var b = [];
        return a.each("item", function(a) {
            b.push(a.get("id"))
        }, this), b.join(this.dlmtr)
    }, dhtmlXTreeObject.prototype.enableSmartXMLParsing = function(a) {
        this.slowParse = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.findXML = function() {}, dhtmlXTreeObject.prototype._getAllCheckedXML = function(a, b, c) {
        var d = [];
        return 2 == c && a.through("item", "checked", -1, function(a) {
            d.push(a.get("id"))
        }, this), 1 == c && a.through("item", "id", null, function(a) {
            a.get("checked") && a.get("checked") != -1 && d.push(a.get("id"))
        }, this), 0 == c && a.through("item", "id", null, function(a) {
            (!a.get("checked") || 0 == a.get("checked")) && d.push(a.get("id"))
        }, this), d.length ? b + (b ? this.dlmtr : "") + d.join(this.dlmtr) : b ? b : ""
    }, dhtmlXTreeObject.prototype._setSubCheckedXML = function(a, b) {
        var c = a ? "1" : "";
        b.through("item", "id", null, function(a) {
            (!a.get("disabled") || 0 == a.get("disabled")) && a.set("checked", c)
        }, this)
    }, dhtmlXTreeObject.prototype._getAllScraggyItemsXML = function(a) {
        var b = [],
            c = function(a) {
                a.sub_exists("item") ? a.each("item", c, this) : b.push(a.get("id"))
            };
        return c(a), b.join(",")
    }, dhtmlXTreeObject.prototype._getAllFatItemsXML = function(a) {
        var b = [],
            c = function(a) {
                a.sub_exists("item") && (b.push(a.get("id")), a.each("item", c, this))
            };
        return c(a), b.join(",")
    }, dhtmlXTreeObject.prototype._getAllSubItemsXML = function(a, b, c) {
        return b = [], c.through("item", "id", null, function(a) {
            b.push(a.get("id"))
        }, this), b.join(",")
    }, dhtmlXTreeObject.prototype.reParse = function(a) {
        var b = this;
        this.parsCount || b.callEvent("onXLS", [b, a.id]), this.xmlstate = 1;
        var c = a.unParsed;
        a.unParsed = 0, this.XMLloadingWarning = 1;
        var d = this.parsingOn,
            e = this.waitUpdateXML,
            f = this.parsedArray;
        this.parsedArray = [], this.waitUpdateXML = !1, this.parsingOn = a.id, this.parsedArray = [], this.setCheckList = "", this._parse(c, a.id, 2);
        for (var g = this.setCheckList.split(this.dlmtr), h = 0; h < this.parsedArray.length; h++) a.htmlNode.childNodes[0].appendChild(this.parsedArray[h]);
        c.get("order") && "none" != c.get("order") && this._reorderBranch(a, c.get("order"), !0), this.oldsmcheck = this.smcheck, this.smcheck = !1;
        for (var i = 0; i < g.length; i++) g[i] && this.setCheck(g[i], 1);
        return this.smcheck = this.oldsmcheck, this.parsingOn = d, this.waitUpdateXML = e, this.parsedArray = f, this.XMLloadingWarning = 0, this._redrawFrom(this, a), this._srnd && !a._sready && this.prepareSR(a.id), this.xmlstate = 0, !0
    }, dhtmlXTreeObject.prototype.preParse = function(a) {
        if (!a || !this._p) return null;
        var b = !1;
        if (this._p.clone().through("item", "id", a, function(a) {
                return this._globalIdStorageFind(a.up().get("id")), b = !0
            }, this), b) {
            var c = this._globalIdStorageFind(a, !0, !1);
            c || dhtmlxError.throwError("getItem", "The item " + a + " not operable. Seems you have non-unique|incorrect IDs in tree's XML.", a)
        }
        return c
    }, dhtmlXTreeObject.prototype._escape = function(a) {
        switch (this.utfesc) {
            case "none":
                return a;
            case "utf8":
                return encodeURIComponent(a);
            default:
                return escape(a)
        }
    }, dhtmlXTreeObject.prototype._drawNewTr = function(a) {
        var b = document.createElement("tr"),
            c = document.createElement("td"),
            d = document.createElement("td");
        return c.appendChild(document.createTextNode(" ")), d.colSpan = 3, d.appendChild(a), b.appendChild(c), b.appendChild(d), b
    }, dhtmlXTreeObject.prototype.loadXMLString = function(a, b) {
        var c = this;
        this.parsCount || this.callEvent("onXLS", [c, null]), this.xmlstate = 1, b && (this.XMLLoader.waitCall = b), this.XMLLoader.loadXMLString(a)
    }, dhtmlXTreeObject.prototype.loadXML = function(a, b) {
        if (this._datamode && "xml" != this._datamode) return this["load" + this._datamode.toUpperCase()](a, b);
        var c = this;
        this.parsCount || this.callEvent("onXLS", [c, this._ld_id]), this._ld_id = null, this.xmlstate = 1, this.XMLLoader = new dtmlXMLLoaderObject(this._parseXMLTree, this, !0, this.no_cashe), b && (this.XMLLoader.waitCall = b), this.XMLLoader.loadXML(a)
    }, dhtmlXTreeObject.prototype._attachChildNode = function(a, b, c, d, e, f, g, h, i, j, k) {
        j && j.parentObject && (a = j.parentObject), 0 == a.XMLload && this.XMLsource && !this.XMLloadingWarning && (a.XMLload = 1, this._loadDynXML(a.id));
        var l = a.childsCount,
            m = a.childNodes;
        if (k && k.tr.previousSibling && (k.tr.previousSibling.previousSibling ? j = k.tr.previousSibling.nodem : h = h.replace("TOP", "") + ",TOP"), j) {
            var n, o;
            for (n = 0; n < l; n++)
                if (m[n] == j) {
                    for (o = l; o != n; o--) m[1 + o] = m[o];
                    break
                }
            n++, l = n
        }
        if (h)
            for (var p = h.split(","), q = 0; q < p.length; q++) switch (p[q]) {
                case "TOP":
                    for (a.childsCount > 0 && (j = {}, j.tr = a.childNodes[0].tr.previousSibling), a._has_top = !0, n = l; n > 0; n--) m[n] = m[n - 1];
                    l = 0
            }
        var r;
        (r = this._idpull[b]) && r.span == -1 || (r = m[l] = new dhtmlXTreeItemObject(b, c, a, this, d, 1), b = m[l].id, a.childsCount++), r.htmlNode || (r.label = c, r.htmlNode = this._createItem(this.checkBoxOff ? 1 : 0, r), r.htmlNode.objBelong = r), e && (r.images[0] = e), f && (r.images[1] = f), g && (r.images[2] = g);
        var s = this._drawNewTr(r.htmlNode);
        if ((this.XMLloadingWarning || this._hAdI) && (r.htmlNode.parentNode.parentNode.style.display = "none"), j && j.tr && j.tr.nextSibling ? a.htmlNode.childNodes[0].insertBefore(s, j.tr.nextSibling) : this.parsingOn == a.id ? this.parsedArray[this.parsedArray.length] = s : a.htmlNode.childNodes[0].appendChild(s), j && !j.span && (j = null), this.XMLsource && (r.XMLload = i && 0 != i ? 0 : 1), r.tr = s, s.nodem = r, 0 == a.itemId && (s.childNodes[0].className = "hiddenRow"), (a._r_logic || this._frbtr) && this._setSrc(r.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0], this.imPath + this.radioArray[0]), h)
            for (p = h.split(","), q = 0; q < p.length; q++) switch (p[q]) {
                case "SELECT":
                    this.selectItem(b, !1);
                    break;
                case "CALL":
                    this.selectItem(b, !0);
                    break;
                case "CHILD":
                    r.XMLload = 0;
                    break;
                case "CHECKED":
                    this.XMLloadingWarning ? this.setCheckList += this.dlmtr + b : this.setCheck(b, 1);
                    break;
                case "HCHECKED":
                    this._setCheck(r, "unsure");
                    break;
                case "OPEN":
                    r.openMe = 1
            }
        if (!this.XMLloadingWarning && (this._getOpenState(a) < 0 && !this._hAdI && this.openItem(a.id), j && (this._correctPlus(j), this._correctLine(j)), this._correctPlus(a), this._correctLine(a), this._correctPlus(r), a.childsCount >= 2 && (this._correctPlus(m[a.childsCount - 2]), this._correctLine(m[a.childsCount - 2])), 2 != a.childsCount && this._correctPlus(m[0]), this.tscheck && this._correctCheckStates(a), this._onradh))
            if (1 == this.xmlstate) {
                var t = this.onXLE;
                this.onXLE = function(a) {
                    this._onradh(b), t && t(a)
                }
            } else this._onradh(b);
        return r
    }, dhtmlXTreeObject.prototype.enableContextMenu = function(a) {
        a && (this.cMenu = a)
    }, dhtmlXTreeObject.prototype.setItemContextMenu = function(a, b) {
        for (var c = a.toString().split(this.dlmtr), d = 0; d < c.length; d++) {
            var e = this._globalIdStorageFind(c[d]);
            e && (e.cMenu = b)
        }
    }, dhtmlXTreeObject.prototype.insertNewItem = function(a, b, c, d, e, f, g, h, i) {
        var j = this._globalIdStorageFind(a);
        if (!j) return -1;
        var k = this._attachChildNode(j, b, c, d, e, f, g, h, i);
        return this._idpull[this.rootId].XMLload || (this._idpull[this.rootId].XMLload = 1), !this.XMLloadingWarning && this.childCalc && this._fixChildCountLabel(j), k
    }, dhtmlXTreeObject.prototype.insertNewChild = function(a, b, c, d, e, f, g, h, i) {
        return this.insertNewItem(a, b, c, d, e, f, g, h, i)
    }, dhtmlXTreeObject.prototype._parseXMLTree = function(a, b, c, d, e) {
        var f = new xmlPointer(e.getXMLTopNode("tree"));
        a._parse(f), a._p = f
    }, dhtmlXTreeObject.prototype._parseItem = function(a, b, c, d) {
        var e;
        if (!this._srnd || this._idpull[e = a.get("id")] && this._idpull[e].span) {
            var f = a.get_all();
            if ("object" != typeof this.waitUpdateXML || this.waitUpdateXML[f.id]) {
                null !== f.text && "undefined" != typeof f.text || (f.text = a.sub("itemtext"), f.text && (f.text = f.text.content()));
                var g = [];
                if (f.select && g.push("SELECT"), f.top && g.push("TOP"), f.call && (this.nodeAskingCall = f.id), f.checked == -1 ? g.push("HCHECKED") : f.checked && g.push("CHECKED"), f.open && g.push("OPEN"), this.waitUpdateXML)
                    if (this._globalIdStorageFind(f.id)) var h = this.updateItem(f.id, f.text, f.im0, f.im1, f.im2, f.checked, f.child);
                    else 0 == this.npl ? g.push("TOP") : c = b.childNodes[this.npl], h = this._attachChildNode(b, f.id, f.text, 0, f.im0, f.im1, f.im2, g.join(","), f.child, 0, c), f.id = h.id, c = null;
                else h = this._attachChildNode(b, f.id, f.text, 0, f.im0, f.im1, f.im2, g.join(","), f.child, d || 0, c);
                if (f.tooltip && (h.span.parentNode.parentNode.title = f.tooltip), f.style && (h.span.style.cssText ? h.span.style.cssText += ";" + f.style : h.span.setAttribute("style", h.span.getAttribute("style") + "; " + f.style)), f.radio && (h._r_logic = !0), f.nocheckbox) {
                    var i = h.span.parentNode.previousSibling.previousSibling;
                    i.style.display = "none", h.nocheckbox = !0
                }
                f.disabled && (null != f.checked && this._setCheck(h, f.checked), this.disableCheckbox(h, 1)), h._acc = f.child || 0, this.parserExtension && this.parserExtension._parseExtension.call(this, a, f, b ? b.id : 0), this.setItemColor(h, f.aCol, f.sCol), "1" == f.locked && this.lockItem(h.id, !0, !0), (f.imwidth || f.imheight) && this.setIconSize(f.imwidth, f.imheight, h), ("0" == f.closeable || "1" == f.closeable) && this.setItemCloseable(h, f.closeable);
                var j = "";
                f.topoffset && this.setItemTopOffset(h, f.topoffset), this.slowParse && "object" != typeof this.waitUpdateXML ? (!h.childsCount && a.sub_exists("item") && (h.unParsed = a.clone()), a.each("userdata", function(a) {
                    this.setUserData(f.id, a.get("name"), a.content())
                }, this)) : a.sub_exists("item") && (j = this._parse(a, f.id, 1)), "" != j && (this.nodeAskingCall = j), a.each("userdata", function(b) {
                    this.setUserData(a.get("id"), b.get("name"), b.content())
                }, this)
            } else this._parse(a, f.id, 1)
        } else this._addItemSRND(b.id, e, a)
    }, dhtmlXTreeObject.prototype._parse = function(a, b, c, d) {
        if (this._srnd && !this.parentObject.offsetHeight) {
            var e = this;
            return window.setTimeout(function() {
                e._parse(a, b, c, d)
            }, 100)
        }
        if (a.exists()) {
            if (this.skipLock = !0, !b) {
                var b = a.get("id"),
                    f = a.get("dhx_security");
                f && (dhtmlx.security_key = f), a.get("radio") && (this.htmlNode._r_logic = !0), this.parsingOn = b, this.parsedArray = [], this.nodeAskingCall = this.setCheckList = ""
            }
            var g = this._globalIdStorageFind(b);
            if (!g) return dhtmlxError.throwError("DataStructure", "XML refers to not existing parent");
            this.parsCount = this.parsCount ? this.parsCount + 1 : 1, this.XMLloadingWarning = 1;
            var h = (!g.childsCount || d || this._edsbps || g._has_top, 0);
            if (this.npl = 0, a.each("item", function(d, e) {
                    return g.XMLload = 1, this._parseItem(d, g, 0, h), this._edsbps && this.npl == this._edsbpsC ? (this._distributedStart(a, e + 1, b, c, g.childsCount), -1) : void this.npl++
                }, this, d), !c) {
                if (a.each("userdata", function(b) {
                        this.setUserData(a.get("id"), b.get("name"), b.content())
                    }, this), g.XMLload = 1, this.waitUpdateXML) {
                    this.waitUpdateXML = !1;
                    for (var i = g.childsCount - 1; i >= 0; i--) g.childNodes[i]._dmark && this.deleteItem(g.childNodes[i].id)
                }
                for (var i = (this._globalIdStorageFind(this.parsingOn), 0); i < this.parsedArray.length; i++) g.htmlNode.childNodes[0].appendChild(this.parsedArray[i]);
                this.parsedArray = [], this.lastLoadedXMLId = b, this.XMLloadingWarning = 0;
                for (var j = this.setCheckList.split(this.dlmtr), k = 0; k < j.length; k++) j[k] && this.setCheck(j[k], 1);
                this.XMLsource && this.tscheck && this.smcheck && g.id != this.rootId && (0 === g.checkstate ? this._setSubChecked(0, g) : 1 === g.checkstate && this._setSubChecked(1, g)), this._redrawFrom(this, null, d), a.get("order") && "none" != a.get("order") && this._reorderBranch(g, a.get("order"), !0), "" != this.nodeAskingCall && this.callEvent("onClick", [this.nodeAskingCall, this.getSelectedItemId()]), this._branchUpdate && this._branchUpdateNext(a)
            }
            if (1 == this.parsCount) {
                if (this.parsingOn = null, this._srnd && g.id != this.rootId && (this.prepareSR(g.id), this.XMLsource && this.openItem(g.id)), a.through("item", "open", null, function(a) {
                        this.openItem(a.get("id"))
                    }, this), !this._edsbps || !this._edsbpsA.length) {
                    var l = this;
                    window.setTimeout(function() {
                        l.callEvent("onXLE", [l, b])
                    }, 1), this.xmlstate = 0
                }
                this.skipLock = !1
            }
            return this.parsCount--, l = this, this._edsbps && window.setTimeout(function() {
                l._distributedStep(b)
            }, this._edsbpsD), !c && this.onXLE && this.onXLE(this, b), this.nodeAskingCall
        }
    }, dhtmlXTreeObject.prototype._branchUpdateNext = function(a) {
        a.each("item", function(a) {
            var b = a.get("id");
            this._idpull[b] && !this._idpull[b].XMLload || (this._branchUpdate++, this.smartRefreshItem(a.get("id"), a))
        }, this), this._branchUpdate--
    }, dhtmlXTreeObject.prototype.checkUserData = function(a, b) {
        if (1 == a.nodeType && "userdata" == a.tagName) {
            var c = a.getAttribute("name");
            c && a.childNodes[0] && this.setUserData(b, c, a.childNodes[0].data)
        }
    }, dhtmlXTreeObject.prototype._redrawFrom = function(a, b, c, d) {
        if (b) e = b;
        else {
            var e = a._globalIdStorageFind(a.lastLoadedXMLId);
            if (a.lastLoadedXMLId = -1, !e) return 0
        }
        for (var f = 0, g = c ? c - 1 : 0; g < e.childsCount; g++)
            if (this._branchUpdate && 1 != this._getOpenState(e) || b && 1 != d || (e.childNodes[g].htmlNode.parentNode.parentNode.style.display = ""), 1 == e.childNodes[g].openMe && (this._openItem(e.childNodes[g]), e.childNodes[g].openMe = 0), a._redrawFrom(a, e.childNodes[g]), null != this.childCalc) {
                if ((e.childNodes[g].unParsed || !e.childNodes[g].XMLload && this.XMLsource) && (e.childNodes[g].span.innerHTML = e.childNodes[g]._acc ? e.childNodes[g].label + this.htmlcA + e.childNodes[g]._acc + this.htmlcB : e.childNodes[g].label), e.childNodes[g].childNodes.length && this.childCalc) {
                    if (1 == this.childCalc && (e.childNodes[g].span.innerHTML = e.childNodes[g].label + this.htmlcA + e.childNodes[g].childsCount + this.htmlcB), 2 == this.childCalc) {
                        var h = e.childNodes[g].childsCount - (e.childNodes[g].pureChilds || 0);
                        h && (e.childNodes[g].span.innerHTML = e.childNodes[g].label + this.htmlcA + h + this.htmlcB), e.pureChilds ? e.pureChilds++ : e.pureChilds = 1
                    }
                    3 == this.childCalc && (e.childNodes[g].span.innerHTML = e.childNodes[g].label + this.htmlcA + e.childNodes[g]._acc + this.htmlcB), 4 == this.childCalc && (h = e.childNodes[g]._acc) && (e.childNodes[g].span.innerHTML = e.childNodes[g].label + this.htmlcA + h + this.htmlcB)
                } else 4 == this.childCalc && f++;
                f += e.childNodes[g]._acc, 3 == this.childCalc && f++
            }
        e.unParsed || !e.XMLload && this.XMLsource || (e._acc = f), a._correctLine(e), a._correctPlus(e), this.childCalc && !b && a._fixChildCountLabel(e)
    }, dhtmlXTreeObject.prototype._createSelf = function() {
        var a = document.createElement("div");
        return a.className = "containerTableStyle", a.style.width = this.width, a.style.height = this.height, this.parentObject.appendChild(a), a
    }, dhtmlXTreeObject.prototype._xcloseAll = function(a) {
        if (!a.unParsed) {
            if (this.rootId != a.id) {
                if (!a.htmlNode) return;
                for (var b = a.htmlNode.childNodes[0].childNodes, c = b.length, d = 1; d < c; d++) b[d].style.display = "none";
                this._correctPlus(a)
            }
            for (d = 0; d < a.childsCount; d++) a.childNodes[d].childsCount && this._xcloseAll(a.childNodes[d])
        }
    }, dhtmlXTreeObject.prototype._xopenAll = function(a) {
        this._HideShow(a, 2);
        for (var b = 0; b < a.childsCount; b++) this._xopenAll(a.childNodes[b])
    }, dhtmlXTreeObject.prototype._correctPlus = function(a) {
        if (a.htmlNode) {
            var b = a.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,
                c = a.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],
                d = this.lineArray;
            if (this.XMLsource && !a.XMLload) {
                if (d = this.plusArray, this._setSrc(c, this.iconURL + a.images[2]), this._txtimg) return b.innerHTML = "[+]"
            } else if (a.childsCount || a.unParsed) {
                if (a.htmlNode.childNodes[0].childNodes[1] && "none" != a.htmlNode.childNodes[0].childNodes[1].style.display) {
                    if (a.wsign || (d = this.minusArray), this._setSrc(c, this.iconURL + a.images[1]), this._txtimg) return b.innerHTML = "[-]"
                } else if (a.wsign || (d = this.plusArray), this._setSrc(c, this.iconURL + a.images[2]), this._txtimg) return b.innerHTML = "[+]"
            } else this._setSrc(c, this.iconURL + a.images[0]);
            var e = 2;
            a.treeNod.treeLinesOn ? (a.parentObject && (e = this._getCountStatus(a.id, a.parentObject)), this._setSrc(b, this.imPath + d[e])) : this._setSrc(b, this.imPath + d[3])
        }
    }, dhtmlXTreeObject.prototype._correctLine = function(a) {
        if (a.htmlNode) {
            var b = a.parentObject;
            if (b)
                if (0 != this._getLineStatus(a.id, b) && this.treeLinesOn)
                    for (c = 1; c <= a.childsCount && a.htmlNode.childNodes[0].childNodes[c]; c++) a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage = "url(" + this.imPath + this.lineArray[5] + ")", a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat = "repeat-y";
                else
                    for (var c = 1; c <= a.childsCount && a.htmlNode.childNodes[0].childNodes[c]; c++) a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage = "", a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat = ""
        }
    }, dhtmlXTreeObject.prototype._getCountStatus = function(a, b) {
        return b.childsCount <= 1 ? b.id == this.rootId ? 4 : 0 : b.childNodes[0].id == a ? b.id == this.rootId ? 2 : 1 : b.childNodes[b.childsCount - 1].id == a ? 0 : 1
    }, dhtmlXTreeObject.prototype._getLineStatus = function(a, b) {
        return b.childNodes[b.childsCount - 1].id == a ? 0 : 1
    }, dhtmlXTreeObject.prototype._HideShow = function(a, b) {
        if (this.XMLsource && !a.XMLload) 1 != b && (a.XMLload = 1, this._loadDynXML(a.id));
        else {
            a.unParsed && this.reParse(a);
            var c = a.htmlNode.childNodes[0].childNodes,
                d = c.length;
            if (d > 1) {
                "none" == c[1].style.display && 1 != b || 2 == b ? nodestyle = "" : (this.allTree.childNodes[0].border = "1", this.allTree.childNodes[0].border = "0", nodestyle = "none");
                for (var e = 1; e < d; e++) c[e].style.display = nodestyle
            }
            this._correctPlus(a)
        }
    }, dhtmlXTreeObject.prototype._getOpenState = function(a) {
        if (!a.htmlNode) return 0;
        var b = a.htmlNode.childNodes[0].childNodes;
        return b.length <= 1 ? 0 : "none" != b[1].style.display ? 1 : -1
    }, dhtmlXTreeObject.prototype.onRowClick2 = function() {
        var a = this.parentObject.treeNod;
        return !!a.callEvent("onDblClick", [this.parentObject.id, a]) && (this.parentObject.closeble && "0" != this.parentObject.closeble ? a._HideShow(this.parentObject) : a._HideShow(this.parentObject, 2), a.checkEvent("onOpenEnd") && (a.xmlstate ? (a._oie_onXLE.push(a.onXLE), a.onXLE = a._epnFHe) : a.callEvent("onOpenEnd", [this.parentObject.id, a._getOpenState(this.parentObject)])), !1)
    }, dhtmlXTreeObject.prototype.onRowClick = function() {
        var a = this.parentObject.treeNod;
        return a.callEvent("onOpenStart", [this.parentObject.id, a._getOpenState(this.parentObject)]) ? (this.parentObject.closeble && "0" != this.parentObject.closeble ? a._HideShow(this.parentObject) : a._HideShow(this.parentObject, 2),
            void(a.checkEvent("onOpenEnd") && (a.xmlstate ? (a._oie_onXLE.push(a.onXLE), a.onXLE = a._epnFHe) : a.callEvent("onOpenEnd", [this.parentObject.id, a._getOpenState(this.parentObject)])))) : 0
    }, dhtmlXTreeObject.prototype._epnFHe = function(a, b, c) {
        b != this.rootId && this.callEvent("onOpenEnd", [b, a.getOpenState(b)]), a.onXLE = a._oie_onXLE.pop(), c || a._oie_onXLE.length || !a.onXLE || a.onXLE(a, b)
    }, dhtmlXTreeObject.prototype.onRowClickDown = function(a) {
        var a = a || window.event,
            b = this.parentObject.treeNod;
        b._selectItem(this.parentObject, a)
    }, dhtmlXTreeObject.prototype.getSelectedItemId = function() {
        for (var a = [], b = 0; b < this._selected.length; b++) a[b] = this._selected[b].id;
        return a.join(this.dlmtr)
    }, dhtmlXTreeObject.prototype._selectItem = function(a, b) {
        if (this.checkEvent("onSelect") && (this._onSSCFold = this.getSelectedItemId()), (!this._amsel || !b || !b.ctrlKey && !b.metaKey && !b.shiftKey) && this._unselectItems(), a.i_sel && this._amsel && b && (b.ctrlKey || b.metaKey)) this._unselectItem(a);
        else if (!(a.i_sel || this._amselS && 0 != this._selected.length && this._selected[0].parentObject != a.parentObject))
            if (this._amsel && b && b.shiftKey && 0 != this._selected.length && this._selected[this._selected.length - 1].parentObject == a.parentObject) {
                var c = this._getIndex(this._selected[this._selected.length - 1]),
                    d = this._getIndex(a);
                if (d < c) var e = c,
                    c = d,
                    d = e;
                for (var f = c; f <= d; f++) a.parentObject.childNodes[f].i_sel || this._markItem(a.parentObject.childNodes[f])
            } else this._markItem(a);
        if (this.checkEvent("onSelect")) {
            var g = this.getSelectedItemId();
            g != this._onSSCFold && this.callEvent("onSelect", [g])
        }
    }, dhtmlXTreeObject.prototype._markItem = function(a) {
        a.scolor && (a.span.style.color = a.scolor), a.span.className = "selectedTreeRow", a.i_sel = !0, this._selected[this._selected.length] = a
    }, dhtmlXTreeObject.prototype.getIndexById = function(a) {
        var b = this._globalIdStorageFind(a);
        return b ? this._getIndex(b) : null
    }, dhtmlXTreeObject.prototype._getIndex = function(a) {
        for (var b = a.parentObject, c = 0; c < b.childsCount; c++)
            if (b.childNodes[c] == a) return c
    }, dhtmlXTreeObject.prototype._unselectItem = function(a) {
        if (a && a.i_sel) {
            a.span.className = "standartTreeRow", a.acolor && (a.span.style.color = a.acolor), a.i_sel = !1;
            for (var b = 0; b < this._selected.length; b++)
                if (!this._selected[b].i_sel) {
                    this._selected.splice(b, 1);
                    break
                }
        }
    }, dhtmlXTreeObject.prototype._unselectItems = function() {
        for (var a = 0; a < this._selected.length; a++) {
            var b = this._selected[a];
            b.span.className = "standartTreeRow", b.acolor && (b.span.style.color = b.acolor), b.i_sel = !1
        }
        this._selected = []
    }, dhtmlXTreeObject.prototype.onRowSelect = function(a, b, c) {
        var a = a || window.event,
            d = this.parentObject;
        b && (d = b.parentObject);
        var e = d.treeNod,
            f = e.getSelectedItemId();
        (!a || !a.skipUnSel) && e._selectItem(d, a), c || (d.actionHandler ? d.actionHandler(d.id, f) : e.callEvent("onClick", [d.id, f]))
    }, dhtmlXTreeObject.prototype._correctCheckStates = function(a) {
        if (this.tscheck && a && a.id != this.rootId) {
            var b = a.childNodes,
                c = 0,
                d = 0;
            if (0 != a.childsCount) {
                for (var e = 0; e < a.childsCount; e++)
                    if (!b[e].dscheck)
                        if (0 == b[e].checkstate) c = 1;
                        else {
                            if (1 != b[e].checkstate) {
                                d = c = 1;
                                break
                            }
                            d = 1
                        }
                c && d ? this._setCheck(a, "unsure") : c ? this._setCheck(a, !1) : this._setCheck(a, !0), this._correctCheckStates(a.parentObject)
            }
        }
    }, dhtmlXTreeObject.prototype.onCheckBoxClick = function() {
        if (this.treeNod.callEvent("onBeforeCheck", [this.parentObject.id, this.parentObject.checkstate])) return !!this.parentObject.dscheck || (this.treeNod.tscheck ? 1 == this.parentObject.checkstate ? this.treeNod._setSubChecked(!1, this.parentObject) : this.treeNod._setSubChecked(!0, this.parentObject) : 1 == this.parentObject.checkstate ? this.treeNod._setCheck(this.parentObject, !1) : this.treeNod._setCheck(this.parentObject, !0), this.treeNod._correctCheckStates(this.parentObject.parentObject), this.treeNod.callEvent("onCheck", [this.parentObject.id, this.parentObject.checkstate]))
    }, dhtmlXTreeObject.prototype._createItem = function(a, b, c) {
        var d = document.createElement("table");
        d.cellSpacing = 0, d.cellPadding = 0, d.border = 0, this.hfMode && (d.style.tableLayout = "fixed"), d.style.margin = 0, d.style.padding = 0;
        var e = document.createElement("tbody"),
            f = document.createElement("tr"),
            g = document.createElement("td");
        if (g.className = "standartTreeImage", this._txtimg) {
            var h = document.createElement("div");
            g.appendChild(h), h.className = "dhx_tree_textSign"
        } else h = this._getImg(b.id), h.border = "0", "IMG" == h.tagName && (h.align = "absmiddle"), g.appendChild(h), h.style.padding = 0, h.style.margin = 0, h.style.width = this.def_line_img_x, h.style.height = this.def_line_img_y;
        var i = document.createElement("td"),
            j = this._getImg(this.cBROf ? this.rootId : b.id);
        j.checked = 0, this._setSrc(j, this.imPath + this.checkArray[0]), j.style.width = "16px", j.style.height = "16px", a || (i.style.display = "none"), i.appendChild(j), this.cBROf || "IMG" != j.tagName || (j.align = "absmiddle"), j.onclick = this.onCheckBoxClick, j.treeNod = this, j.parentObject = b, i.width = window._KHTMLrv ? "16px" : "20px";
        var k = document.createElement("td");
        k.className = "standartTreeImage";
        var l = this._getImg(this.timgen ? b.id : this.rootId);
        l.onmousedown = this._preventNsDrag, l.ondragstart = this._preventNsDrag, l.border = "0", this._aimgs && (l.parentObject = b, "IMG" == l.tagName && (l.align = "absmiddle"), l.onclick = this.onRowSelect), c || this._setSrc(l, this.iconURL + this.imageArray[0]), k.appendChild(l), l.style.padding = 0, l.style.margin = 0, this.timgen ? (k.style.width = l.style.width = this.def_img_x, l.style.height = this.def_img_y) : (l.style.width = "0px", l.style.height = "0px", (_isOpera || window._KHTMLrv) && (k.style.display = "none"));
        var m = document.createElement("td");
        return m.className = "standartTreeRow", b.span = document.createElement("span"), b.span.className = "standartTreeRow", this.mlitems ? (b.span.style.width = this.mlitems, b.span.style.display = "block") : m.noWrap = !0, _isIE && _isIE > 7 ? m.style.width = "999999px" : window._KHTMLrv || (m.style.width = "100%"), b.span.innerHTML = b.label, m.appendChild(b.span), m.parentObject = b, g.parentObject = b, m.onclick = this.onRowSelect, g.onclick = this.onRowClick, m.ondblclick = this.onRowClick2, this.ettip && (f.title = b.label), this.dragAndDropOff && (this._aimgs && (this.dragger.addDraggableItem(k, this), k.parentObject = b), this.dragger.addDraggableItem(m, this)), b.span.style.paddingLeft = "5px", b.span.style.paddingRight = "5px", m.style.verticalAlign = "", m.style.fontSize = "10pt", m.style.cursor = this.style_pointer, f.appendChild(g), f.appendChild(i), f.appendChild(k), f.appendChild(m), e.appendChild(f), d.appendChild(e), (this.ehlt || this.checkEvent("onMouseIn") || this.checkEvent("onMouseOut")) && (f.onmousemove = this._itemMouseIn, f[_isIE ? "onmouseleave" : "onmouseout"] = this._itemMouseOut), d
    }, dhtmlXTreeObject.prototype.setImagePath = function(a) {
        this.iconURL = this.imPath = a
    }, dhtmlXTreeObject.prototype.setIconPath = function(a) {
        this.iconURL = a
    };
dhtmlXTreeObject.prototype._getLeafCount = function(a) {
    for (var b = 0, c = 0; c < a.childsCount; c++) 0 == a.childNodes[c].childsCount && b++;
    return b
};
dhtmlXTreeObject.prototype._getChildCounterValue = function(a) {
        var b = this._globalIdStorageFind(a);
        if (!b) return 0;
        if (b.unParsed || !b.XMLload && this.XMLsource) return b._acc;
        switch (this.childCalc) {
            case 1:
                return b.childsCount;
            case 2:
                return this._getLeafCount(b);
            case 3:
                return b._acc;
            case 4:
                return b._acc
        }
    }, dhtmlXTreeObject.prototype._fixChildCountLabel = function(a) {
        if (null != this.childCalc)
            if (a.unParsed || !a.XMLload && this.XMLsource) a.span.innerHTML = a._acc ? a.label + this.htmlcA + a._acc + this.htmlcB : a.label;
            else switch (this.childCalc) {
                case 1:
                    a.span.innerHTML = 0 != a.childsCount ? a.label + this.htmlcA + a.childsCount + this.htmlcB : a.label;
                    break;
                case 2:
                    var b = this._getLeafCount(a);
                    a.span.innerHTML = 0 != b ? a.label + this.htmlcA + b + this.htmlcB : a.label;
                    break;
                case 3:
                    if (0 != a.childsCount) {
                        for (var c = 0, d = 0; d < a.childsCount; d++) a.childNodes[d]._acc || (a.childNodes[d]._acc = 0), c += 1 * a.childNodes[d]._acc;
                        c += 1 * a.childsCount, a.span.innerHTML = a.label + this.htmlcA + c + this.htmlcB, a._acc = c
                    } else a.span.innerHTML = a.label, a._acc = 0;
                    a.parentObject && a.parentObject != this.htmlNode && this._fixChildCountLabel(a.parentObject);
                    break;
                case 4:
                    if (0 != a.childsCount) {
                        for (d = c = 0; d < a.childsCount; d++) a.childNodes[d]._acc || (a.childNodes[d]._acc = 1), c += 1 * a.childNodes[d]._acc;
                        a.span.innerHTML = a.label + this.htmlcA + c + this.htmlcB, a._acc = c
                    } else a.span.innerHTML = a.label, a._acc = 1;
                    a.parentObject && a.parentObject != this.htmlNode && this._fixChildCountLabel(a.parentObject)
            }
    }, dhtmlXTreeObject.prototype.setChildCalcMode = function(a) {
        switch (a) {
            case "child":
                this.childCalc = 1;
                break;
            case "leafs":
                this.childCalc = 2;
                break;
            case "childrec":
                this.childCalc = 3;
                break;
            case "leafsrec":
                this.childCalc = 4;
                break;
            case "disabled":
                this.childCalc = null;
                break;
            default:
                this.childCalc = 4
        }
    }, dhtmlXTreeObject.prototype.setChildCalcHTML = function(a, b) {
        this.htmlcA = a, this.htmlcB = b
    }, dhtmlXTreeObject.prototype.setOnRightClickHandler = function(a) {
        this.attachEvent("onRightClick", a)
    }, dhtmlXTreeObject.prototype.setOnClickHandler = function(a) {
        this.attachEvent("onClick", a)
    }, dhtmlXTreeObject.prototype.setOnSelectStateChange = function(a) {
        this.attachEvent("onSelect", a)
    }, dhtmlXTreeObject.prototype.setXMLAutoLoading = function(a) {
        this.XMLsource = a
    }, dhtmlXTreeObject.prototype.setOnCheckHandler = function(a) {
        this.attachEvent("onCheck", a)
    }, dhtmlXTreeObject.prototype.setOnOpenHandler = function(a) {
        this.attachEvent("onOpenStart", a)
    }, dhtmlXTreeObject.prototype.setOnOpenStartHandler = function(a) {
        this.attachEvent("onOpenStart", a)
    }, dhtmlXTreeObject.prototype.setOnOpenEndHandler = function(a) {
        this.attachEvent("onOpenEnd", a)
    }, dhtmlXTreeObject.prototype.setOnDblClickHandler = function(a) {
        this.attachEvent("onDblClick", a)
    }, dhtmlXTreeObject.prototype.openAllItems = function(a) {
        var b = this._globalIdStorageFind(a);
        return b ? void this._xopenAll(b) : 0
    }, dhtmlXTreeObject.prototype.getOpenState = function(a) {
        var b = this._globalIdStorageFind(a);
        return b ? this._getOpenState(b) : ""
    }, dhtmlXTreeObject.prototype.closeAllItems = function(a) {
        a === window.undefined && (a = this.rootId);
        var b = this._globalIdStorageFind(a);
        return b ? (this._xcloseAll(b), this.allTree.childNodes[0].border = "1", void(this.allTree.childNodes[0].border = "0")) : 0
    }, dhtmlXTreeObject.prototype.setUserData = function(a, b, c) {
        var d = this._globalIdStorageFind(a, 0, !0);
        d && ("hint" == b && (d.htmlNode.childNodes[0].childNodes[0].title = c), "undefined" == typeof d.userData["t_" + b] && (d._userdatalist ? d._userdatalist += "," + b : d._userdatalist = b), d.userData["t_" + b] = c)
    }, dhtmlXTreeObject.prototype.getUserData = function(a, b) {
        var c = this._globalIdStorageFind(a, 0, !0);
        return c ? c.userData["t_" + b] : void 0
    }, dhtmlXTreeObject.prototype.getItemColor = function(a) {
        var b = this._globalIdStorageFind(a);
        if (!b) return 0;
        var c = {};
        return b.acolor && (c.acolor = b.acolor), b.scolor && (c.scolor = b.scolor), c
    }, dhtmlXTreeObject.prototype.setItemColor = function(a, b, c) {
        var d = a && a.span ? a : this._globalIdStorageFind(a);
        return d ? (d.i_sel ? c && (d.span.style.color = c) : b && (d.span.style.color = b), c && (d.scolor = c), void(b && (d.acolor = b))) : 0
    }, dhtmlXTreeObject.prototype.getItemText = function(a) {
        var b = this._globalIdStorageFind(a);
        return b ? b.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML : 0
    }, dhtmlXTreeObject.prototype.getParentId = function(a) {
        var b = this._globalIdStorageFind(a);
        return b && b.parentObject ? b.parentObject.id : ""
    }, dhtmlXTreeObject.prototype.changeItemId = function(a, b) {
        if (a != b) {
            var c = this._globalIdStorageFind(a);
            if (!c) return 0;
            c.id = b, c.span.contextMenuId = b, this._idpull[b] = this._idpull[a], delete this._idpull[a]
        }
    }, dhtmlXTreeObject.prototype.doCut = function() {
        this.nodeCut && this.clearCut(), this.nodeCut = [].concat(this._selected);
        for (var a = 0; a < this.nodeCut.length; a++) {
            var b = this.nodeCut[a];
            b._cimgs = [], b._cimgs[0] = b.images[0], b._cimgs[1] = b.images[1], b._cimgs[2] = b.images[2], b.images[0] = b.images[1] = b.images[2] = this.cutImage, this._correctPlus(b)
        }
    }, dhtmlXTreeObject.prototype.doPaste = function(a) {
        var b = this._globalIdStorageFind(a);
        if (!b) return 0;
        for (var c = 0; c < this.nodeCut.length; c++) this._checkPNodes(b, this.nodeCut[c]) || this._moveNode(this.nodeCut[c], b);
        this.clearCut()
    }, dhtmlXTreeObject.prototype.clearCut = function() {
        for (var a = 0; a < this.nodeCut.length; a++) {
            var b = this.nodeCut[a];
            b.images[0] = b._cimgs[0], b.images[1] = b._cimgs[1], b.images[2] = b._cimgs[2], this._correctPlus(b)
        }
        this.nodeCut = []
    }, dhtmlXTreeObject.prototype._moveNode = function(a, b) {
        var c = this.dadmodec;
        if (1 == c) {
            var d = b;
            if (this.dadmodefix < 0) {
                for (;;) {
                    if (d = this._getPrevNode(d), d == -1) {
                        d = this.htmlNode;
                        break
                    }
                    if (0 == d.tr || "" == d.tr.style.display || !d.parentObject) break
                }
                var e = d,
                    f = b
            } else d.tr && d.tr.nextSibling && d.tr.nextSibling.nodem && !this._getOpenState(d) ? d = d.tr.nextSibling.nodem : (d = this._getNextNode(d), d == -1 && (d = this.htmlNode)), f = d, e = b;
            return this._getNodeLevel(e, 0) > this._getNodeLevel(f, 0) ? this.dropLower ? f.id != this.rootId ? this._moveNodeTo(a, f.parentObject, f) : this._moveNodeTo(a, this.htmlNode, null) : this._moveNodeTo(a, e.parentObject) : this._moveNodeTo(a, f.parentObject, f)
        }
        return this._moveNodeTo(a, b)
    }, dhtmlXTreeObject.prototype._fixNodesCollection = function(a, b) {
        var c = 0,
            d = a.childNodes,
            e = a.childsCount - 1;
        if (b != d[e]) {
            for (var f = 0; f < e; f++) d[f] == d[e] && (d[f] = d[f + 1], d[f + 1] = d[e]);
            for (f = 0; f < e + 1; f++)
                if (c) {
                    var g = d[f];
                    d[f] = c, c = g
                } else d[f] == b && (c = d[f], d[f] = d[e])
        }
    }, dhtmlXTreeObject.prototype._recreateBranch = function(a, b, c, d) {
        var e, f = "";
        if (c) {
            for (e = 0; e < b.childsCount && b.childNodes[e] != c; e++);
            0 != e ? c = b.childNodes[e - 1] : (f = "TOP", c = "")
        }
        var g = this._onradh;
        this._onradh = null;
        var h = this._attachChildNode(b, a.id, a.label, 0, a.images[0], a.images[1], a.images[2], f, 0, c);
        if (h._userdatalist = a._userdatalist, h.userData = a.userData.clone(), a._attrs) {
            h._attrs = {};
            for (var i in a._attrs) h._attrs[i] = a._attrs[i]
        }
        for (h.XMLload = a.XMLload, g && (this._onradh = g, this._onradh(h.id)), a.treeNod.dpcpy ? a.treeNod._globalIdStorageFind(a.id) : h.unParsed = a.unParsed, this._correctPlus(h), e = 0; e < a.childsCount; e++) this._recreateBranch(a.childNodes[e], h, 0, 1);
        return !d && this.childCalc && this._redrawFrom(this, b), h
    }, dhtmlXTreeObject.prototype._moveNodeTo = function(a, b, c) {
        if (a.treeNod._nonTrivialNode) return a.treeNod._nonTrivialNode(this, b, c, a);
        if (this._checkPNodes(b, a)) return !1;
        var d = b.mytype ? a.treeNod.lWin != b.lWin : a.treeNod.lWin != b.treeNod.lWin;
        if (!this.callEvent("onDrag", [a.id, b.id, c ? c.id : null, a.treeNod, b.treeNod])) return !1;
        0 == b.XMLload && this.XMLsource && (b.XMLload = 1, this._loadDynXML(b.id)), this.openItem(b.id);
        var e = a.treeNod,
            f = a.parentObject.childsCount,
            g = a.parentObject;
        if (d || e.dpcpy) {
            var h = a.id,
                a = this._recreateBranch(a, b, c);
            e.dpcpy || e.deleteItem(h)
        } else {
            var i = b.childsCount,
                j = b.childNodes;
            0 == i && (b._open = !0), e._unselectItem(a), j[i] = a, a.treeNod = b.treeNod, b.childsCount++;
            var k = this._drawNewTr(j[i].htmlNode);
            c ? (b.htmlNode.childNodes[0].insertBefore(k, c.tr), this._fixNodesCollection(b, c), j = b.childNodes) : (b.htmlNode.childNodes[0].appendChild(k), 1 == this.dadmode && this._fixNodesCollection(b, c))
        }
        if (!e.dpcpy && !d) {
            var l = a.tr;
            if (document.all && navigator.appVersion.search(/MSIE\ 5\.0/gi) != -1 ? window.setTimeout(function() {
                    l.parentNode.removeChild(l)
                }, 250) : a.parentObject.htmlNode.childNodes[0].removeChild(a.tr), c && b == a.parentObject) g.childNodes[g.childsCount - 1] = 0;
            else
                for (var m = 0; m < g.childsCount; m++)
                    if (g.childNodes[m].id == a.id) {
                        g.childNodes[m] = 0;
                        break
                    }
            e._compressChildList(g.childsCount, g.childNodes), g.childsCount--
        }
        if (!d && !e.dpcpy) {
            if (a.tr = k, k.nodem = a, a.parentObject = b, e != b.treeNod) {
                if (a.treeNod._registerBranch(a, e)) return;
                this._clearStyles(a), this._redrawFrom(this, a.parentObject), this._onradh && this._onradh(a.id)
            }
            this._correctPlus(b), this._correctLine(b), this._correctLine(a), this._correctPlus(a), c ? this._correctPlus(c) : b.childsCount >= 2 && (this._correctPlus(j[b.childsCount - 2]), this._correctLine(j[b.childsCount - 2])), this._correctPlus(j[b.childsCount - 1]), this.tscheck && this._correctCheckStates(b), e.tscheck && e._correctCheckStates(g)
        }
        return f > 1 && (e._correctPlus(g.childNodes[f - 2]), e._correctLine(g.childNodes[f - 2])), e._correctPlus(g), e._correctLine(g), this._fixChildCountLabel(b), e._fixChildCountLabel(g), this.callEvent("onDrop", [a.id, b.id, c ? c.id : null, e, b.treeNod]), a.id
    }, dhtmlXTreeObject.prototype._clearStyles = function(a) {
        if (a.htmlNode) {
            var b = a.htmlNode.childNodes[0].childNodes[0].childNodes[1],
                c = b.nextSibling.nextSibling;
            a.span.innerHTML = a.label, a.i_sel = !1, a._aimgs && this.dragger.removeDraggableItem(b.nextSibling), this.checkBoxOff ? (b.childNodes[0].style.display = "", b.childNodes[0].onclick = this.onCheckBoxClick, this._setSrc(b.childNodes[0], this.imPath + this.checkArray[a.checkstate])) : b.childNodes[0].style.display = "none", b.childNodes[0].treeNod = this, this.dragger.removeDraggableItem(c), this.dragAndDropOff && this.dragger.addDraggableItem(c, this), this._aimgs && this.dragger.addDraggableItem(b.nextSibling, this), c.childNodes[0].className = "standartTreeRow", c.onclick = this.onRowSelect, c.ondblclick = this.onRowClick2, b.previousSibling.onclick = this.onRowClick, this._correctLine(a), this._correctPlus(a);
            for (var d = 0; d < a.childsCount; d++) this._clearStyles(a.childNodes[d])
        }
    }, dhtmlXTreeObject.prototype._registerBranch = function(a, b) {
        b && b._globalIdStorageSub(a.id), a.id = this._globalIdStorageAdd(a.id, a), a.treeNod = this;
        for (var c = 0; c < a.childsCount; c++) this._registerBranch(a.childNodes[c], b);
        return 0
    }, dhtmlXTreeObject.prototype.enableThreeStateCheckboxes = function(a) {
        this.tscheck = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.setOnMouseInHandler = function(a) {
        this.ehlt = !0, this.attachEvent("onMouseIn", a)
    }, dhtmlXTreeObject.prototype.setOnMouseOutHandler = function(a) {
        this.ehlt = !0, this.attachEvent("onMouseOut", a)
    }, dhtmlXTreeObject.prototype.enableMercyDrag = function(a) {
        this.dpcpy = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.enableTreeImages = function(a) {
        this.timgen = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.enableFixedMode = function(a) {
        this.hfMode = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.enableCheckBoxes = function(a, b) {
        this.checkBoxOff = convertStringToBoolean(a), this.cBROf = !(this.checkBoxOff || convertStringToBoolean(b))
    }, dhtmlXTreeObject.prototype.setStdImages = function(a, b, c) {
        this.imageArray[0] = a, this.imageArray[1] = b, this.imageArray[2] = c
    }, dhtmlXTreeObject.prototype.enableTreeLines = function(a) {
        this.treeLinesOn = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.setImageArrays = function(a, b, c, d, e, f) {
        switch (a) {
            case "plus":
                this.plusArray[0] = b, this.plusArray[1] = c, this.plusArray[2] = d, this.plusArray[3] = e, this.plusArray[4] = f;
                break;
            case "minus":
                this.minusArray[0] = b, this.minusArray[1] = c, this.minusArray[2] = d, this.minusArray[3] = e, this.minusArray[4] = f
        }
    }, dhtmlXTreeObject.prototype.openItem = function(a) {
        this.skipLock = !0;
        var b = this._globalIdStorageFind(a);
        return b ? this._openItem(b) : 0
    }, dhtmlXTreeObject.prototype._openItem = function(a) {
        var b = this._getOpenState(a);
        if (b < 0 || this.XMLsource && !a.XMLload) {
            if (!this.callEvent("onOpenStart", [a.id, b])) return 0;
            this._HideShow(a, 2), this.checkEvent("onOpenEnd") && (this.onXLE == this._epnFHe && this._epnFHe(this, a.id, !0), this.xmlstate && this.XMLsource ? (this._oie_onXLE.push(this.onXLE), this.onXLE = this._epnFHe) : this.callEvent("onOpenEnd", [a.id, this._getOpenState(a)]))
        } else this._srnd && this._HideShow(a, 2);
        a.parentObject && !this._skip_open_parent && this._openItem(a.parentObject)
    }, dhtmlXTreeObject.prototype.closeItem = function(a) {
        if (this.rootId == a) return 0;
        this.skipLock = !0;
        var b = this._globalIdStorageFind(a);
        return b ? (b.closeble && this._HideShow(b, 1), void(this.skipLock = !1)) : 0
    }, dhtmlXTreeObject.prototype.getLevel = function(a) {
        var b = this._globalIdStorageFind(a);
        return b ? this._getNodeLevel(b, 0) : 0
    }, dhtmlXTreeObject.prototype.setItemCloseable = function(a, b) {
        var b = convertStringToBoolean(b),
            c = a && a.span ? a : this._globalIdStorageFind(a);
        return c ? void(c.closeble = b) : 0
    }, dhtmlXTreeObject.prototype._getNodeLevel = function(a, b) {
        return a.parentObject ? this._getNodeLevel(a.parentObject, b + 1) : b
    }, dhtmlXTreeObject.prototype.hasChildren = function(a) {
        var b = this._globalIdStorageFind(a);
        return b ? !(!this.XMLsource || b.XMLload) || b.childsCount : 0
    }, dhtmlXTreeObject.prototype._getLeafCount = function(a) {
        for (var b = 0, c = 0; c < a.childsCount; c++) 0 == a.childNodes[c].childsCount && b++;
        return b
    }, dhtmlXTreeObject.prototype.setItemText = function(a, b, c) {
        var d = this._globalIdStorageFind(a);
        return d ? (d.label = b, d.span.innerHTML = b, this.childCalc && this._fixChildCountLabel(d), void(d.span.parentNode.parentNode.title = c || "")) : 0
    }, dhtmlXTreeObject.prototype.getItemTooltip = function(a) {
        var b = this._globalIdStorageFind(a);
        return b ? b.span.parentNode.parentNode._dhx_title || b.span.parentNode.parentNode.title || "" : ""
    }, dhtmlXTreeObject.prototype.refreshItem = function(a) {
        a || (a = this.rootId), this._globalIdStorageFind(a), this.deleteChildItems(a), this._loadDynXML(a)
    }, dhtmlXTreeObject.prototype.setItemImage2 = function(a, b, c, d) {
        var e = this._globalIdStorageFind(a);
        return e ? (e.images[1] = c, e.images[2] = d, e.images[0] = b, void this._correctPlus(e)) : 0
    }, dhtmlXTreeObject.prototype.setItemImage = function(a, b, c) {
        var d = this._globalIdStorageFind(a);
        return d ? (c ? (d.images[1] = b, d.images[2] = c) : d.images[0] = b, void this._correctPlus(d)) : 0
    }, dhtmlXTreeObject.prototype.getSubItems = function(a) {
        var b = this._globalIdStorageFind(a, 0, 1);
        if (!b) return 0;
        if (b.unParsed) return this._getSubItemsXML(b.unParsed);
        var c = "";
        for (i = 0; i < b.childsCount; i++) c ? c += this.dlmtr + b.childNodes[i].id : c = "" + b.childNodes[i].id;
        return c
    }, dhtmlXTreeObject.prototype._getAllScraggyItems = function(a) {
        for (var b = "", c = 0; c < a.childsCount; c++)
            if (a.childNodes[c].unParsed || a.childNodes[c].childsCount > 0) {
                var d = a.childNodes[c].unParsed ? this._getAllScraggyItemsXML(a.childNodes[c].unParsed, 1) : this._getAllScraggyItems(a.childNodes[c]);
                d && (b ? b += this.dlmtr + d : b = d)
            } else b ? b += this.dlmtr + a.childNodes[c].id : b = "" + a.childNodes[c].id;
        return b
    }, dhtmlXTreeObject.prototype._getAllFatItems = function(a) {
        for (var b = "", c = 0; c < a.childsCount; c++)
            if (a.childNodes[c].unParsed || a.childNodes[c].childsCount > 0) {
                b ? b += this.dlmtr + a.childNodes[c].id : b = "" + a.childNodes[c].id;
                var d = a.childNodes[c].unParsed ? this._getAllFatItemsXML(a.childNodes[c].unParsed, 1) : this._getAllFatItems(a.childNodes[c]);
                d && (b += this.dlmtr + d)
            }
        return b
    }, dhtmlXTreeObject.prototype._getAllSubItems = function(a, b, c) {
        var d = c ? c : this._globalIdStorageFind(a);
        if (!d) return 0;
        for (var b = "", e = 0; e < d.childsCount; e++) {
            b ? b += this.dlmtr + d.childNodes[e].id : b = "" + d.childNodes[e].id;
            var f = this._getAllSubItems(0, b, d.childNodes[e]);
            f && (b += this.dlmtr + f)
        }
        return d.unParsed && (b = this._getAllSubItemsXML(a, b, d.unParsed)), b
    }, dhtmlXTreeObject.prototype.selectItem = function(a, b, c) {
        var b = convertStringToBoolean(b),
            d = this._globalIdStorageFind(a);
        if (!d || !d.parentObject) return 0;
        this.XMLloadingWarning ? d.parentObject.openMe = 1 : this._openItem(d.parentObject);
        var e = null;
        c && (e = {
            ctrlKey: !0
        }, d.i_sel) && (e.skipUnSel = !0), b ? this.onRowSelect(e, d.htmlNode.childNodes[0].childNodes[0].childNodes[3], !1) : this.onRowSelect(e, d.htmlNode.childNodes[0].childNodes[0].childNodes[3], !0)
    }, dhtmlXTreeObject.prototype.getSelectedItemText = function() {
        for (var a = [], b = 0; b < this._selected.length; b++) a[b] = this._selected[b].span.innerHTML;
        return a.join(this.dlmtr)
    }, dhtmlXTreeObject.prototype._compressChildList = function(a, b) {
        a--;
        for (var c = 0; c < a; c++) 0 == b[c] && (b[c] = b[c + 1], b[c + 1] = 0)
    }, dhtmlXTreeObject.prototype._deleteNode = function(a, b, c) {
        if (!b || !b.parentObject) return 0;
        var d = 0,
            e = 0;
        b.tr.nextSibling && (d = b.tr.nextSibling.nodem), b.tr.previousSibling && (e = b.tr.previousSibling.nodem);
        for (var f = b.parentObject, g = f.childsCount, h = f.childNodes, i = 0; i < g; i++)
            if (h[i].id == a) {
                c || f.htmlNode.childNodes[0].removeChild(h[i].tr), h[i] = 0;
                break
            }
        this._compressChildList(g, h), c || f.childsCount--, d && (this._correctPlus(d), this._correctLine(d)), e && (this._correctPlus(e), this._correctLine(e)), this.tscheck && this._correctCheckStates(f), c || this._globalIdStorageRecSub(b)
    }, dhtmlXTreeObject.prototype.setCheck = function(a, b) {
        var c = this._globalIdStorageFind(a, 0, 1);
        c && ("unsure" === b ? this._setCheck(c, b) : (b = convertStringToBoolean(b), this.tscheck && this.smcheck ? this._setSubChecked(b, c) : this._setCheck(c, b)), this.smcheck && this._correctCheckStates(c.parentObject))
    }, dhtmlXTreeObject.prototype._setCheck = function(a, b) {
        if (a) {
            if ((a.parentObject._r_logic || this._frbtr) && b)
                if (this._frbtrs) this._frbtrL && this.setCheck(this._frbtrL.id, 0), this._frbtrL = a;
                else
                    for (var c = 0; c < a.parentObject.childsCount; c++) this._setCheck(a.parentObject.childNodes[c], 0);
            var d = a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];
            a.checkstate = "unsure" == b ? 2 : b ? 1 : 0, a.dscheck && (a.checkstate = a.dscheck), this._setSrc(d, this.imPath + (a.parentObject._r_logic || this._frbtr ? this.radioArray : this.checkArray)[a.checkstate])
        }
    }, dhtmlXTreeObject.prototype.setSubChecked = function(a, b) {
        var c = this._globalIdStorageFind(a);
        this._setSubChecked(b, c), this._correctCheckStates(c.parentObject)
    }, dhtmlXTreeObject.prototype._setSubChecked = function(a, b) {
        if (a = convertStringToBoolean(a), b) {
            if ((b.parentObject._r_logic || this._frbtr) && a)
                for (var c = 0; c < b.parentObject.childsCount; c++) this._setSubChecked(0, b.parentObject.childNodes[c]);
            if (b.unParsed && this._setSubCheckedXML(a, b.unParsed), b._r_logic || this._frbtr) this._setSubChecked(a, b.childNodes[0]);
            else
                for (c = 0; c < b.childsCount; c++) this._setSubChecked(a, b.childNodes[c]);
            var d = b.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];
            b.checkstate = a ? 1 : 0, b.dscheck && (b.checkstate = b.dscheck), this._setSrc(d, this.imPath + (b.parentObject._r_logic || this._frbtr ? this.radioArray : this.checkArray)[b.checkstate])
        }
    }, dhtmlXTreeObject.prototype.isItemChecked = function(a) {
        var b = this._globalIdStorageFind(a);
        return b ? b.checkstate : void 0
    }, dhtmlXTreeObject.prototype.deleteChildItems = function(a) {
        var b = this._globalIdStorageFind(a);
        if (b)
            for (var c = b.childsCount, d = 0; d < c; d++) this._deleteNode(b.childNodes[0].id, b.childNodes[0])
    }, dhtmlXTreeObject.prototype.deleteItem = function(a, b) {
        if (!this._onrdlh || this._onrdlh(a)) {
            var c = this._deleteItem(a, b);
            c && this._fixChildCountLabel(c)
        }
        this.allTree.childNodes[0].border = "1", this.allTree.childNodes[0].border = "0"
    }, dhtmlXTreeObject.prototype._deleteItem = function(a, b, c) {
        var b = convertStringToBoolean(b),
            d = this._globalIdStorageFind(a);
        if (d) {
            var e = this.getParentId(a),
                f = d.parentObject;
            return this._deleteNode(a, d, c), this._editCell && this._editCell.id == a && (this._editCell = null), this._correctPlus(f), this._correctLine(f), b && e != this.rootId && this.selectItem(e, 1), f
        }
    }, dhtmlXTreeObject.prototype._globalIdStorageRecSub = function(a) {
        for (var b = 0; b < a.childsCount; b++) this._globalIdStorageRecSub(a.childNodes[b]), this._globalIdStorageSub(a.childNodes[b].id);
        this._globalIdStorageSub(a.id);
        var c = a;
        c.span = null, c.tr.nodem = null, c.tr = null, c.htmlNode = null
    }, dhtmlXTreeObject.prototype.insertNewNext = function(a, b, c, d, e, f, g, h, i) {
        var j = this._globalIdStorageFind(a);
        if (!j || !j.parentObject) return 0;
        var k = this._attachChildNode(0, b, c, d, e, f, g, h, i, j);
        return !this.XMLloadingWarning && this.childCalc && this._fixChildCountLabel(j.parentObject), k
    }, dhtmlXTreeObject.prototype.getItemIdByIndex = function(a, b) {
        var c = this._globalIdStorageFind(a);
        return !c || b >= c.childsCount ? null : c.childNodes[b].id
    }, dhtmlXTreeObject.prototype.getChildItemIdByIndex = function(a, b) {
        var c = this._globalIdStorageFind(a);
        return !c || b >= c.childsCount ? null : c.childNodes[b].id
    }, dhtmlXTreeObject.prototype.setDragHandler = function(a) {
        this.attachEvent("onDrag", a)
    }, dhtmlXTreeObject.prototype._clearMove = function() {
        this._lastMark && (this._lastMark.className = this._lastMark.className.replace(/dragAndDropRow/g, ""), this._lastMark = null), this.selectionBar.style.display = "none", this.allTree.className = this.allTree.className.replace(" selectionBox", "")
    }, dhtmlXTreeObject.prototype.enableDragAndDrop = function(a, b) {
        "temporary_disabled" == a ? (this.dADTempOff = !1, a = !0) : this.dADTempOff = !0, (this.dragAndDropOff = convertStringToBoolean(a)) && this.dragger.addDragLanding(this.allTree, this), arguments.length > 1 && (this._ddronr = !convertStringToBoolean(b))
    }, dhtmlXTreeObject.prototype._setMove = function(a, b, c) {
        if (a.parentObject.span) {
            var d = getAbsoluteTop(a),
                e = getAbsoluteTop(this.allTree) - this.allTree.scrollTop;
            if (this.dadmodec = this.dadmode, this.dadmodefix = 0, 2 == this.dadmode) {
                var f = c - d + (document.body.scrollTop || document.documentElement.scrollTop) - 2 - a.offsetHeight / 2;
                Math.abs(f) - a.offsetHeight / 6 > 0 ? (this.dadmodec = 1, f < 0 && (this.dadmodefix = 0 - a.offsetHeight)) : this.dadmodec = 0
            }
            if (0 == this.dadmodec) {
                var g = a.parentObject.span;
                g.className += " dragAndDropRow", this._lastMark = g
            } else this._clearMove(), this.selectionBar.style.top = d - e + ((parseInt(a.parentObject.span.parentNode.previousSibling.childNodes[0].style.height) || 18) - 1) + this.dadmodefix + "px", this.selectionBar.style.left = "5px", this.allTree.offsetWidth > 20 && (this.selectionBar.style.width = this.allTree.offsetWidth - (_isFF ? 30 : 25) + "px"), this.selectionBar.style.display = "";
            this._autoScroll(null, d, e)
        }
    }, dhtmlXTreeObject.prototype._autoScroll = function(a, b, c) {
        this.autoScroll && (a && (b = getAbsoluteTop(a), c = getAbsoluteTop(this.allTree) - this.allTree.scrollTop), b - c - parseInt(this.allTree.scrollTop) > parseInt(this.allTree.offsetHeight) - 50 && (this.allTree.scrollTop = parseInt(this.allTree.scrollTop) + 20), b - c < parseInt(this.allTree.scrollTop) + 30 && (this.allTree.scrollTop = parseInt(this.allTree.scrollTop) - 20))
    }, dhtmlXTreeObject.prototype._createDragNode = function(a, b) {
        if (!this.dADTempOff) return null;
        var c = a.parentObject;
        if (!this.callEvent("onBeforeDrag", [c.id, b])) return null;
        c.i_sel || this._selectItem(c, b), this._checkMSelectionLogic();
        var d = document.createElement("div"),
            e = [];
        if (this._itim_dg)
            for (var f = 0; f < this._selected.length; f++) e[f] = "<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='" + this._getSrc(this._selected[f].span.parentNode.previousSibling.childNodes[0]) + "'></td><td>" + this._selected[f].span.innerHTML + "</td></tr></table>";
        else e = this.getSelectedItemText().split(this.dlmtr);
        return d.innerHTML = e.join(""), d.style.position = "absolute", d.className = "dragSpanDiv", this._dragged = [].concat(this._selected), d
    }, dhtmlXTreeObject.prototype._focusNode = function(a) {
        var b = getAbsoluteTop(a.htmlNode) - getAbsoluteTop(this.allTree);
        (b > this.allTree.offsetHeight - 30 || b < 0) && (this.allTree.scrollTop = b + this.allTree.scrollTop)
    }, dhtmlXTreeObject.prototype._preventNsDrag = function(a) {
        return a && a.preventDefault && a.preventDefault(), !1
    }, dhtmlXTreeObject.prototype._drag = function(a, b, c) {
        this._autoOpenTimer && clearTimeout(this._autoOpenTimer), c.parentObject || (c = this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0], this.dadmodec = 0), this._clearMove();
        var d = a.parentObject.treeNod;
        if (d && d._clearMove && d._clearMove(""), !this.dragMove || this.dragMove())
            for (var e = d && d._clearMove && d._dragged ? d._dragged : Array(a.parentObject), f = c.parentObject, g = 0; g < e.length; g++) {
                var h = this._moveNode(e[g], f);
                this.dadmodec && h !== !1 && (f = this._globalIdStorageFind(h, !0, !0)), h && !this._sADnD && this.selectItem(h, 0, 1)
            }
        d && (d._dragged = [])
    }, dhtmlXTreeObject.prototype._dragIn = function(a, b, c, d) {
        if (!this.dADTempOff) return 0;
        var e = b.parentObject,
            f = a.parentObject;
        if (f || !this._ddronr) {
            if (!this.callEvent("onDragIn", [e.id, f ? f.id : null, e.treeNod, this])) return f && this._autoScroll(a), 0;
            if (f) {
                if (null == e.childNodes) return this._setMove(a, c, d), a;
                for (var g = e.treeNod, h = 0; h < g._dragged.length; h++)
                    if (this._checkPNodes(f, g._dragged[h])) return this._autoScroll(a), 0;
                this.selectionBar.parentNode.removeChild(this.selectionBar), f.span.parentNode.appendChild(this.selectionBar), this._setMove(a, c, d), this._getOpenState(f) <= 0 && (this._autoOpenId = f.id, this._autoOpenTimer = window.setTimeout(new callerFunction(this._autoOpenItem, this), 1e3))
            } else this.allTree.className += " selectionBox";
            return a
        }
    }, dhtmlXTreeObject.prototype._autoOpenItem = function(a, b) {
        b.openItem(b._autoOpenId)
    }, dhtmlXTreeObject.prototype._dragOut = function() {
        this._clearMove(), this._autoOpenTimer && clearTimeout(this._autoOpenTimer)
    }, dhtmlXTreeObject.prototype._getNextNode = function(a, b) {
        return !b && a.childsCount ? a.childNodes[0] : a == this.htmlNode ? -1 : a.tr && a.tr.nextSibling && a.tr.nextSibling.nodem ? a.tr.nextSibling.nodem : this._getNextNode(a.parentObject, !0)
    }, dhtmlXTreeObject.prototype._lastChild = function(a) {
        return a.childsCount ? this._lastChild(a.childNodes[a.childsCount - 1]) : a
    }, dhtmlXTreeObject.prototype._getPrevNode = function(a) {
        return a.tr && a.tr.previousSibling && a.tr.previousSibling.nodem ? this._lastChild(a.tr.previousSibling.nodem) : a.parentObject ? a.parentObject : -1
    }, dhtmlXTreeObject.prototype.findItem = function(a, b, c) {
        var d = this._findNodeByLabel(a, b, c ? this.htmlNode : null);
        return d ? (this.selectItem(d.id, !0), this._focusNode(d), d.id) : null
    }, dhtmlXTreeObject.prototype.findItemIdByLabel = function(a, b, c) {
        var d = this._findNodeByLabel(a, b, c ? this.htmlNode : null);
        return d ? d.id : null
    }, dhtmlXTreeObject.prototype.findStrInXML = function(a, b, c) {
        if (!a.childNodes && a.item) return this.findStrInJSON(a, b, c);
        if (!a.childNodes) return !1;
        for (var d = 0; d < a.childNodes.length; d++)
            if (1 == a.childNodes[d].nodeType) {
                var e = a.childNodes[d].getAttribute(b);
                if (e || "itemtext" != a.childNodes[d].tagName || (e = a.childNodes[d].firstChild.data),
                    e && e.toLowerCase().search(c) != -1) return !0;
                if (this.findStrInXML(a.childNodes[d], b, c)) return !0
            }
        return !1
    }, dhtmlXTreeObject.prototype.findStrInJSON = function(a, b, c) {
        for (var d = 0; d < a.item.length; d++) {
            var e = a.item[d].text;
            if (e && e.toLowerCase().search(c) != -1) return !0;
            if (a.item[d].item && this.findStrInJSON(a.item[d], b, c)) return !0
        }
        return !1
    }, dhtmlXTreeObject.prototype._findNodeByLabel = function(a, b, c) {
        a = a.replace(/^( )+/, "").replace(/( )+$/, ""), a = RegExp(a.replace(/([\?\*\+\\\[\]\(\)]{1})/gi, "\\$1").replace(/ /gi, ".*"), "gi"), c || (c = this._selected[0]) || (c = this.htmlNode);
        var d = c;
        if (b) {
            var e = this._getPrevNode(d);
            e == -1 && (e = this._lastChild(this.htmlNode)), e.unParsed && this.findStrInXML(e.unParsed.d, "text", a) ? (this.reParse(e), c = this._getPrevNode(d)) : c = e, c == -1 && (c = this._lastChild(this.htmlNode))
        } else c.unParsed && this.findStrInXML(c.unParsed.d, "text", a) && this.reParse(c), c = this._getNextNode(d), c == -1 && (c = this.htmlNode.childNodes[0]);
        for (; c && c != d;) {
            if (c.label && c.label.search(a) != -1) return c;
            if (b) e = this._getPrevNode(c), e == -1 && (e = this._lastChild(this.htmlNode)), e.unParsed && this.findStrInXML(e.unParsed.d, "text", a) ? (this.reParse(e), c = this._getPrevNode(c)) : c = e, c == -1 && (c = this._lastChild(this.htmlNode));
            else {
                if (c == -1) {
                    if (d == this.htmlNode) break;
                    c = this.htmlNode.childNodes[0]
                }
                c.unParsed && this.findStrInXML(c.unParsed.d, "text", a) && this.reParse(c), c = this._getNextNode(c), c == -1 && (c = this.htmlNode)
            }
        }
        return null
    }, dhtmlXTreeObject.prototype.moveItem = function(a, b, c, d) {
        var e = this._globalIdStorageFind(a);
        if (!e) return 0;
        var f = null;
        switch (b) {
            case "right":
                alert("Not supported yet");
                break;
            case "item_child":
                var g = (d || this)._globalIdStorageFind(c);
                if (!g) return 0;
                f = (d || this)._moveNodeTo(e, g, 0);
                break;
            case "item_sibling":
                if (g = (d || this)._globalIdStorageFind(c), !g) return 0;
                f = (d || this)._moveNodeTo(e, g.parentObject, g);
                break;
            case "item_sibling_next":
                if (g = (d || this)._globalIdStorageFind(c), !g) return 0;
                f = g.tr && g.tr.nextSibling && g.tr.nextSibling.nodem ? (d || this)._moveNodeTo(e, g.parentObject, g.tr.nextSibling.nodem) : (d || this)._moveNodeTo(e, g.parentObject);
                break;
            case "left":
                e.parentObject.parentObject && (f = this._moveNodeTo(e, e.parentObject.parentObject, e.parentObject));
                break;
            case "up":
                var h = this._getPrevNode(e);
                if (h == -1 || !h.parentObject) return null;
                f = this._moveNodeTo(e, h.parentObject, h);
                break;
            case "up_strict":
                h = this._getIndex(e), 0 != h && (f = this._moveNodeTo(e, e.parentObject, e.parentObject.childNodes[h - 1]));
                break;
            case "down_strict":
                var h = this._getIndex(e),
                    i = e.parentObject.childsCount - 2;
                h == i ? f = this._moveNodeTo(e, e.parentObject) : h < i && (f = this._moveNodeTo(e, e.parentObject, e.parentObject.childNodes[h + 2]));
                break;
            case "down":
                if (h = this._getNextNode(this._lastChild(e)), h == -1 || !h.parentObject) return;
                if (h.parentObject == e.parentObject && (h = this._getNextNode(h)), h == -1) f = this._moveNodeTo(e, e.parentObject);
                else {
                    if (h == -1 || !h.parentObject) return;
                    f = this._moveNodeTo(e, h.parentObject, h)
                }
        }
        return _isIE && _isIE < 8 && (this.allTree.childNodes[0].border = "1", this.allTree.childNodes[0].border = "0"), f
    }, dhtmlXTreeObject.prototype.setDragBehavior = function(a, b) {
        switch (this._sADnD = !convertStringToBoolean(b), a) {
            case "child":
                this.dadmode = 0;
                break;
            case "sibling":
                this.dadmode = 1;
                break;
            case "complex":
                this.dadmode = 2
        }
    }, dhtmlXTreeObject.prototype._loadDynXML = function(a, b) {
        var b = b || this.XMLsource,
            c = (new Date).valueOf();
        this._ld_id = a, "function" == this.xmlalb ? b && b(this._escape(a)) : "name" == this.xmlalb ? this.loadXML(b + this._escape(a)) : "xmlname" == this.xmlalb ? this.loadXML(b + this._escape(a) + ".xml?uid=" + c) : this.loadXML(b + getUrlSymbol(b) + "uid=" + c + "&id=" + this._escape(a))
    }, dhtmlXTreeObject.prototype.enableMultiselection = function(a, b) {
        this._amsel = convertStringToBoolean(a), this._amselS = convertStringToBoolean(b)
    }, dhtmlXTreeObject.prototype._checkMSelectionLogic = function() {
        for (var a = [], b = 0; b < this._selected.length; b++)
            for (var c = 0; c < this._selected.length; c++) b != c && this._checkPNodes(this._selected[c], this._selected[b]) && (a[a.length] = this._selected[c]);
        for (b = 0; b < a.length; b++) this._unselectItem(a[b])
    }, dhtmlXTreeObject.prototype._checkPNodes = function(a, b) {
        return !this._dcheckf && (b == a ? 1 : a.parentObject ? this._checkPNodes(a.parentObject, b) : 0)
    }, dhtmlXTreeObject.prototype.disableDropCheck = function(a) {
        this._dcheckf = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.enableDistributedParsing = function(a, b, c) {
        this._edsbps = convertStringToBoolean(a), this._edsbpsA = [], this._edsbpsC = b || 10, this._edsbpsD = c || 250
    }, dhtmlXTreeObject.prototype.getDistributedParsingState = function() {
        return !(!this._edsbpsA || !this._edsbpsA.length)
    }, dhtmlXTreeObject.prototype.getItemParsingState = function(a) {
        var b = this._globalIdStorageFind(a, !0, !0);
        if (!b) return 0;
        if (this._edsbpsA)
            for (var c = 0; c < this._edsbpsA.length; c++)
                if (this._edsbpsA[c][2] == a) return -1;
        return 1
    }, dhtmlXTreeObject.prototype._distributedStart = function(a, b, c, d, e) {
        this._edsbpsA || (this._edsbpsA = []), this._edsbpsA[this._edsbpsA.length] = [a, b, c, d, e]
    }, dhtmlXTreeObject.prototype._distributedStep = function(a) {
        var b = this;
        if (this._edsbpsA && this._edsbpsA.length) {
            var c = this._edsbpsA[0];
            this.parsedArray = [], this._parse(c[0], c[2], c[3], c[1]);
            var d = this._globalIdStorageFind(c[2]);
            this._redrawFrom(this, d, c[4], this._getOpenState(d));
            for (var e = this.setCheckList.split(this.dlmtr), f = 0; f < e.length; f++) e[f] && this.setCheck(e[f], 1);
            this._edsbpsA = [].concat(this._edsbpsA.slice(1)), this._edsbpsA.length || (window.setTimeout(function() {
                b.onXLE && b.onXLE(b, a), b.callEvent("onXLE", [b, a])
            }, 1), b.xmlstate = 0)
        } else b.XMLloadingWarning = 0
    }, dhtmlXTreeObject.prototype.enableTextSigns = function(a) {
        this._txtimg = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.preventIECaching = function(a) {
        this.no_cashe = convertStringToBoolean(a), this.XMLLoader.rSeed = this.no_cashe
    }, dhtmlXTreeObject.prototype.preventIECashing = dhtmlXTreeObject.prototype.preventIECaching, dhtmlXTreeObject.prototype.disableCheckbox = function(a, b) {
        var c = "object" != typeof a ? this._globalIdStorageFind(a, 0, 1) : a;
        c && (c.dscheck = convertStringToBoolean(b) ? (c.checkstate || 0) % 3 + 3 : c.checkstate > 2 ? c.checkstate - 3 : c.checkstate, this._setCheck(c), c.dscheck < 3) && (c.dscheck = !1)
    }, dhtmlXTreeObject.prototype.smartRefreshBranch = function(a, b) {
        this._branchUpdate = 1, this.smartRefreshItem(a, b)
    }, dhtmlXTreeObject.prototype.smartRefreshItem = function(a, b) {
        for (var c = this._globalIdStorageFind(a), d = 0; d < c.childsCount; d++) c.childNodes[d]._dmark = !0;
        this.waitUpdateXML = !0, b && b.exists ? this._parse(b, a) : this._loadDynXML(a, b)
    }, dhtmlXTreeObject.prototype.refreshItems = function(a, b) {
        var c = a.toString().split(this.dlmtr);
        this.waitUpdateXML = [];
        for (var d = 0; d < c.length; d++) this.waitUpdateXML[c[d]] = !0;
        this.loadXML((b || this.XMLsource) + getUrlSymbol(b || this.XMLsource) + "ids=" + this._escape(a))
    }, dhtmlXTreeObject.prototype.updateItem = function(a, b, c, d, e, f, g) {
        var h = this._globalIdStorageFind(a);
        return h.userData = new cObject, b && (h.label = b), h.images = [c || this.imageArray[0], d || this.imageArray[1], e || this.imageArray[2]], this.setItemText(a, b), f && this._setCheck(h, !0), "1" != g || this.hasChildren(a) || (h.XMLload = 0), this._correctPlus(h), h._dmark = !1, h
    }, dhtmlXTreeObject.prototype.setDropHandler = function(a) {
        this.attachEvent("onDrop", a)
    }, dhtmlXTreeObject.prototype.setOnLoadingStart = function(a) {
        this.attachEvent("onXLS", a)
    }, dhtmlXTreeObject.prototype.setOnLoadingEnd = function(a) {
        this.attachEvent("onXLE", a)
    }, dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour = function(a) {
        this.xmlalb = a
    }, dhtmlXTreeObject.prototype.enableSmartCheckboxes = function(a) {
        this.smcheck = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.getXMLState = function() {
        return 1 == this.xmlstate
    }, dhtmlXTreeObject.prototype.setItemTopOffset = function(a, b) {
        var c;
        c = "object" != typeof a ? this._globalIdStorageFind(a) : a;
        var d = c.span.parentNode.parentNode;
        c.span.style.paddingBottom = "1px";
        for (var e = 0; e < d.childNodes.length; e++) {
            if (0 != e) _isIE ? (d.childNodes[e].style.height = "18px", d.childNodes[e].style.paddingTop = parseInt(b) + "px") : d.childNodes[e].style.height = 18 + parseInt(b) + "px";
            else {
                var f = d.childNodes[e].firstChild;
                "DIV" != d.childNodes[e].firstChild.tagName && (f = document.createElement("DIV"), d.childNodes[e].insertBefore(f, d.childNodes[e].firstChild)), f.style.height = parseInt(b) + "px", c.parentObject.id == this.rootId && c.parentObject.childNodes[0] == c || !this.treeLinesOn || (f.style.backgroundImage = "url(" + this.imPath + this.lineArray[5] + ")"), f.innerHTML = "&nbsp;", f.style.overflow = "hidden", 0 == parseInt(b) && d.childNodes[e].removeChild(f)
            }
            _isIE || (d.childNodes[e].style.verticalAlign = "bottom"), _isIE && (this.allTree.childNodes[0].border = "1", this.allTree.childNodes[0].border = "0")
        }
    }, dhtmlXTreeObject.prototype.setIconSize = function(a, b, c) {
        if (c) {
            var d = c && c.span ? c : this._globalIdStorageFind(c);
            if (!d) return 0;
            var e = d.span.parentNode.previousSibling.childNodes[0];
            a && (e.style.width = a, window._KHTMLrv) && (e.parentNode.style.width = a), b && (e.style.height = b, window._KHTMLrv) && (e.parentNode.style.height = b)
        } else this.def_img_x = a, this.def_img_y = b
    }, dhtmlXTreeObject.prototype.getItemImage = function(a, b, c) {
        var d = this._globalIdStorageFind(a);
        if (!d) return "";
        var e = d.images[b || 0];
        return c && (e = this.iconURL + e), e
    }, dhtmlXTreeObject.prototype.enableRadioButtons = function(a, b) {
        if (1 == arguments.length) this._frbtr = convertStringToBoolean(a), this.checkBoxOff = this.checkBoxOff || this._frbtr;
        else {
            var c = this._globalIdStorageFind(a);
            if (!c) return "";
            if ((b = convertStringToBoolean(b)) && !c._r_logic) {
                c._r_logic = !0;
                for (var d = 0; d < c.childsCount; d++) this._setCheck(c.childNodes[d], c.childNodes[d].checkstate)
            }
            if (!b && c._r_logic)
                for (c._r_logic = !1, d = 0; d < c.childsCount; d++) this._setCheck(c.childNodes[d], c.childNodes[d].checkstate)
        }
    }, dhtmlXTreeObject.prototype.enableSingleRadioMode = function(a) {
        this._frbtrs = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.openOnItemAdded = function(a) {
        this._hAdI = !convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.openOnItemAdding = function(a) {
        this._hAdI = !convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.enableMultiLineItems = function(a) {
        this.mlitems = a === !0 ? "100%" : a
    }, dhtmlXTreeObject.prototype.enableAutoTooltips = function(a) {
        this.ettip = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.clearSelection = function(a) {
        a ? this._unselectItem(this._globalIdStorageFind(a)) : this._unselectItems()
    }, dhtmlXTreeObject.prototype.showItemSign = function(a, b) {
        var c = this._globalIdStorageFind(a);
        return c ? (c.span.parentNode.previousSibling.previousSibling.previousSibling, convertStringToBoolean(b) ? (c.closeble = !0, c.wsign = !1) : (this._openItem(c), c.closeble = !1, c.wsign = !0), this._correctPlus(c), void 0) : 0
    }, dhtmlXTreeObject.prototype.showItemCheckbox = function(a, b) {
        if (!a)
            for (var c in this._idpull) this.showItemCheckbox(this._idpull[c], b);
        if ("object" != typeof a && (a = this._globalIdStorageFind(a, 0, 0)), !a) return 0;
        a.nocheckbox = !convertStringToBoolean(b);
        var d = a.span.parentNode.previousSibling.previousSibling.childNodes[0];
        d.parentNode.style.display = a.nocheckbox ? "none" : ""
    }, dhtmlXTreeObject.prototype.setListDelimeter = function(a) {
        this.dlmtr = a
    }, dhtmlXTreeObject.prototype.setEscapingMode = function(a) {
        this.utfesc = a
    }, dhtmlXTreeObject.prototype.enableHighlighting = function(a) {
        this.ehlt = !0, this.ehlta = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype._itemMouseOut = function() {
        var a = this.childNodes[3].parentObject,
            b = a.treeNod;
        b.callEvent("onMouseOut", [a.id]), a.id == b._l_onMSI && (b._l_onMSI = null), b.ehlta && (a.span.className = a.span.className.replace("_lor", ""))
    }, dhtmlXTreeObject.prototype._itemMouseIn = function() {
        var a = this.childNodes[3].parentObject,
            b = a.treeNod;
        b._l_onMSI != a.id && b.callEvent("onMouseIn", [a.id]), b._l_onMSI = a.id, b.ehlta && (a.span.className = a.span.className.replace("_lor", ""), a.span.className = a.span.className.replace(/((standart|selected)TreeRow)/, "$1_lor"))
    }, dhtmlXTreeObject.prototype.enableActiveImages = function(a) {
        this._aimgs = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.focusItem = function(a) {
        var b = this._globalIdStorageFind(a);
        return b ? void this._focusNode(b) : 0
    }, dhtmlXTreeObject.prototype.getAllSubItems = function(a) {
        return this._getAllSubItems(a)
    }, dhtmlXTreeObject.prototype.getAllChildless = function() {
        return this._getAllScraggyItems(this.htmlNode)
    }, dhtmlXTreeObject.prototype.getAllLeafs = dhtmlXTreeObject.prototype.getAllChildless, dhtmlXTreeObject.prototype._getAllScraggyItems = function(a) {
        for (var b = "", c = 0; c < a.childsCount; c++)
            if (a.childNodes[c].unParsed || a.childNodes[c].childsCount > 0) {
                var d = a.childNodes[c].unParsed ? this._getAllScraggyItemsXML(a.childNodes[c].unParsed, 1) : this._getAllScraggyItems(a.childNodes[c]);
                d && (b ? b += this.dlmtr + d : b = d)
            } else b ? b += this.dlmtr + a.childNodes[c].id : b = "" + a.childNodes[c].id;
        return b
    }, dhtmlXTreeObject.prototype._getAllFatItems = function(a) {
        for (var b = "", c = 0; c < a.childsCount; c++)
            if (a.childNodes[c].unParsed || a.childNodes[c].childsCount > 0) {
                b ? b += this.dlmtr + a.childNodes[c].id : b = "" + a.childNodes[c].id;
                var d = a.childNodes[c].unParsed ? this._getAllFatItemsXML(a.childNodes[c].unParsed, 1) : this._getAllFatItems(a.childNodes[c]);
                d && (b += this.dlmtr + d)
            }
        return b
    }, dhtmlXTreeObject.prototype.getAllItemsWithKids = function() {
        return this._getAllFatItems(this.htmlNode)
    }, dhtmlXTreeObject.prototype.getAllFatItems = dhtmlXTreeObject.prototype.getAllItemsWithKids, dhtmlXTreeObject.prototype.getAllChecked = function() {
        return this._getAllChecked("", "", 1)
    }, dhtmlXTreeObject.prototype.getAllUnchecked = function(a) {
        return a && (a = this._globalIdStorageFind(a)), this._getAllChecked(a, "", 0)
    }, dhtmlXTreeObject.prototype.getAllPartiallyChecked = function() {
        return this._getAllChecked("", "", 2)
    }, dhtmlXTreeObject.prototype.getAllCheckedBranches = function() {
        var a = [this._getAllChecked("", "", 1)],
            b = this._getAllChecked("", "", 2);
        return b && a.push(b), a.join(this.dlmtr)
    }, dhtmlXTreeObject.prototype._getAllChecked = function(a, b, c) {
        a || (a = this.htmlNode), a.checkstate == c && (a.nocheckbox || (b ? b += this.dlmtr + a.id : b = "" + a.id));
        for (var d = a.childsCount, e = 0; e < d; e++) b = this._getAllChecked(a.childNodes[e], b, c);
        return a.unParsed && (b = this._getAllCheckedXML(a.unParsed, b, c)), b ? b : ""
    }, dhtmlXTreeObject.prototype.setItemStyle = function(a, b, c) {
        var c = c || !1,
            d = this._globalIdStorageFind(a);
        return d ? void(d.span.style.cssText ? d.span.style.cssText = c ? b : d.span.style.cssText + ";" + b : d.span.setAttribute("style", d.span.getAttribute("style") + "; " + b)) : 0
    }, dhtmlXTreeObject.prototype.enableImageDrag = function(a) {
        this._itim_dg = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.setOnDragIn = function(a) {
        this.attachEvent("onDragIn", a)
    }, dhtmlXTreeObject.prototype.enableDragAndDropScrolling = function(a) {
        this.autoScroll = convertStringToBoolean(a)
    }, dhtmlXTreeObject.prototype.setSkin = function(a) {
        var b = this.parentObject.className.replace(/dhxtree_[^ ]*/gi, "");
        this.parentObject.className = b + " dhxtree_" + a, "dhx_terrace" == a && this.enableTreeLines(!1)
    },
    function() {
        dhtmlx.extend_api("dhtmlXTreeObject", {
            _init: function(a) {
                return [a.parent, a.width || "100%", a.height || "100%", a.root_id || 0]
            },
            auto_save_selection: "enableAutoSavingSelected",
            auto_tooltip: "enableAutoTooltips",
            checkbox: "enableCheckBoxes",
            checkbox_3_state: "enableThreeStateCheckboxes",
            checkbox_smart: "enableSmartCheckboxes",
            context_menu: "enableContextMenu",
            distributed_parsing: "enableDistributedParsing",
            drag: "enableDragAndDrop",
            drag_copy: "enableMercyDrag",
            drag_image: "enableImageDrag",
            drag_scroll: "enableDragAndDropScrolling",
            editor: "enableItemEditor",
            hover: "enableHighlighting",
            images: "enableTreeImages",
            image_fix: "enableIEImageFix",
            image_path: "setImagePath",
            lines: "enableTreeLines",
            loading_item: "enableLoadingItem",
            multiline: "enableMultiLineItems",
            multiselect: "enableMultiselection",
            navigation: "enableKeyboardNavigation",
            radio: "enableRadioButtons",
            radio_single: "enableSingleRadioMode",
            rtl: "enableRTL",
            search: "enableKeySearch",
            smart_parsing: "enableSmartXMLParsing",
            smart_rendering: "enableSmartRendering",
            text_icons: "enableTextSigns",
            xml: "loadXML",
            skin: "setSkin"
        }, {})
    }(), dhtmlXTreeObject.prototype._dp_init = function(a) {
        a.attachEvent("insertCallback", function(a, b, c) {
            var d = this._loader.doXPath(".//item", a),
                e = d[0].getAttribute("text");
            this.obj.insertNewItem(c, b, e, 0, 0, 0, 0, "CHILD")
        }), a.attachEvent("updateCallback", function(a, b, c) {
            var d = this._loader.doXPath(".//item", a),
                e = d[0].getAttribute("text");
            this.obj.setItemText(b, e), this.obj.getParentId(b) != c && this.obj.moveItem(b, "item_child", c), this.setUpdated(b, !0, "updated")
        }), a.attachEvent("deleteCallback", function(a, b) {
            this.obj.setUserData(b, this.action_param, "true_deleted"), this.obj.deleteItem(b, !1)
        }), a._methods = ["setItemStyle", "", "changeItemId", "deleteItem"], this.attachEvent("onEdit", function(b, c) {
            return 3 == b && a.setUpdated(c, !0), !0
        }), this.attachEvent("onDrop", function(b, c, d, e, f) {
            e == f && a.setUpdated(b, !0)
        }), this._onrdlh = function(b) {
            var c = a.getState(b);
            return "inserted" == c ? (a.set_invalid(b, !1), a.setUpdated(b, !1), !0) : "true_deleted" == c ? (a.setUpdated(b, !1), !0) : (a.setUpdated(b, !0, "deleted"), !1)
        }, this._onradh = function(b) {
            a.setUpdated(b, !0, "inserted")
        }, a._getRowData = function(a) {
            for (var b = {}, c = this.obj._globalIdStorageFind(a), d = c.parentObject, e = 0, e = 0; e < d.childsCount && d.childNodes[e] != c; e++);
            for (b.tr_id = c.id, b.tr_pid = d.id, b.tr_order = e, b.tr_text = c.span.innerHTML, d = (c._userdatalist || "").split(","), e = 0; e < d.length; e++) b[d[e]] = c.userData["t_" + d[e]];
            return b
        }
    }, dhtmlXTreeObject.prototype.parserExtension = {
        _parseExtension: function(a, b) {
            this._idpull[b.id]._attrs = b
        }
    }, dhtmlXTreeObject.prototype.getAttribute = function(a, b) {
        this._globalIdStorageFind(a);
        var c = this._idpull[a]._attrs;
        return c ? c[b] : window.undefined
    }, dhtmlXTreeObject.prototype.setAttribute = function(a, b, c) {
        this._globalIdStorageFind(a);
        var d = this._idpull[a]._attrs || {};
        d[b] = c, this._idpull[a]._attrs = d
    }, dhtmlXTreeObject.prototype.makeDraggable = function(a, b) {
        "object" != typeof a && (a = document.getElementById(a)), dragger = new dhtmlDragAndDropObject, dropper = new dhx_dragSomethingInTree, dragger.addDraggableItem(a, dropper), a.dragLanding = null, a.ondragstart = dropper._preventNsDrag, a.onselectstart = new Function("return false;"), a.parentObject = {}, a.parentObject.img = a, a.parentObject.treeNod = dropper, dropper._customDrop = b
    }, dhtmlXTreeObject.prototype.makeDragable = dhtmlXTreeObject.prototype.makeDraggable, dhtmlXTreeObject.prototype.makeAllDraggable = function(a) {
        for (var b = document.getElementsByTagName("div"), c = 0; c < b.length; c++) b[c].getAttribute("dragInDhtmlXTree") && this.makeDragable(b[c], a)
    }, dhtmlXTreeObject.prototype.enableItemEditor = function(a) {
        this._eItEd = convertStringToBoolean(a), this._eItEdFlag || (this._edn_dblclick = this._edn_click_IE = !0, this._ie_aFunc = this.aFunc, this._ie_dblclickFuncHandler = this.dblclickFuncHandler, this.setOnDblClickHandler(function(a, b) {
            return this._edn_dblclick && this._editItem(a, b), !0
        }), this.setOnClickHandler(function(a, b) {
            return this._stopEditItem(a, b), this.ed_hist_clcik == a && this._edn_click_IE && this._editItem(a, b), this.ed_hist_clcik = a, !0
        }), this._eItEdFlag = !0)
    }, dhtmlXTreeObject.prototype.setOnEditHandler = function(a) {
        this.attachEvent("onEdit", a)
    }, dhtmlXTreeObject.prototype.setEditStartAction = function(a, b) {
        this._edn_click_IE = convertStringToBoolean(a), this._edn_dblclick = convertStringToBoolean(b)
    }, dhtmlXTreeObject.prototype._stopEdit = function(a, b) {
        if (this._editCell && (this.dADTempOff = this.dADTempOffEd, this._editCell.id != a)) {
            var c = !0;
            b ? (c = !1, this.callEvent("onEditCancel", [this._editCell.id, this._editCell._oldValue])) : c = this.callEvent("onEdit", [2, this._editCell.id, this, this._editCell.span.childNodes[0].value]), c === !0 ? c = this._editCell.span.childNodes[0].value : c === !1 && (c = this._editCell._oldValue);
            var d = c != this._editCell._oldValue;
            this._editCell.span.innerHTML = c, this._editCell.label = this._editCell.span.innerHTML;
            var e = this._editCell.i_sel ? "selectedTreeRow" : "standartTreeRow";
            this._editCell.span.className = e, this._editCell.span.parentNode.className = "standartTreeRow", this._editCell.span.style.paddingRight = this._editCell.span.style.paddingLeft = "5px", this._editCell.span.onclick = this._editCell.span.ondblclick = function() {};
            var f = this._editCell.id;
            this.childCalc && this._fixChildCountLabel(this._editCell), this._editCell = null, b || this.callEvent("onEdit", [3, f, this, d]), this._enblkbrd && (this.parentObject.lastChild.focus(), this.parentObject.lastChild.focus())
        }
    }, dhtmlXTreeObject.prototype._stopEditItem = function(a) {
        this._stopEdit(a)
    }, dhtmlXTreeObject.prototype.stopEdit = function(a) {
        this._editCell && this._stopEdit(this._editCell.id + "_non", a)
    }, dhtmlXTreeObject.prototype.editItem = function(a) {
        this._editItem(a, this)
    }, dhtmlXTreeObject.prototype._editItem = function(a) {
        if (this._eItEd) {
            this._stopEdit();
            var b = this._globalIdStorageFind(a);
            if (b) {
                var c = this.callEvent("onEdit", [0, a, this, b.span.innerHTML]);
                if (c === !0) c = "undefined" != typeof b.span.innerText ? b.span.innerText : b.span.textContent;
                else if (c === !1) return;
                this.dADTempOffEd = this.dADTempOff, this.dADTempOff = !1, this._editCell = b, b._oldValue = c, b.span.innerHTML = "<input type='text' class='intreeeditRow' />", b.span.style.paddingRight = b.span.style.paddingLeft = "0px", b.span.onclick = b.span.ondblclick = function(a) {
                    (a || event).cancelBubble = !0
                }, b.span.childNodes[0].value = c, b.span.childNodes[0].onselectstart = function(a) {
                    return (a || event).cancelBubble = !0
                }, b.span.childNodes[0].onmousedown = function(a) {
                    return (a || event).cancelBubble = !0
                }, b.span.childNodes[0].focus(), b.span.childNodes[0].focus(), b.span.onclick = function(a) {
                    return (a || event).cancelBubble = !0, !1
                }, b.span.className = "", b.span.parentNode.className = "";
                var d = this;
                b.span.childNodes[0].onkeydown = function(a) {
                    a || (a = window.event), 13 == a.keyCode ? (a.cancelBubble = !0, d._stopEdit(window.undefined)) : 27 == a.keyCode && d._stopEdit(window.undefined, !0), (a || event).cancelBubble = !0
                }, this.callEvent("onEdit", [1, a, this])
            }
        }
    }, jsonPointer.prototype = {
        text: function() {
            var a = function(a) {
                    for (var c = [], d = 0; d < a.length; d++) c.push("{" + b(a[d]) + "}");
                    return c.join(",")
                },
                b = function(c) {
                    var d, e = [];
                    for (d in c) "object" == typeof c[d] ? d.length ? e.push('"' + d + '":[' + a(c[d]) + "]") : e.push('"' + d + '":{' + b(c[d]) + "}") : e.push('"' + d + '":"' + c[d] + '"');
                    return e.join(",")
                };
            return "{" + b(this.d) + "}"
        },
        get: function(a) {
            return this.d[a]
        },
        exists: function() {
            return !!this.d
        },
        content: function() {
            return this.d.content
        },
        each: function(a, b, c) {
            var d = this.d[a],
                e = new jsonPointer;
            if (d)
                for (var f = 0; f < d.length; f++) e.d = d[f], b.apply(c, [e, f])
        },
        get_all: function() {
            return this.d
        },
        sub: function(a) {
            return new jsonPointer(this.d[a], this.d)
        },
        sub_exists: function(a) {
            return !!this.d[a]
        },
        each_x: function(a, b, c, d, e) {
            var f = this.d[a],
                g = new jsonPointer(0, this.d);
            if (f)
                for (e = e || 0; e < f.length && (!f[e][b] || (g.d = f[e], c.apply(d, [g, e]) != -1)); e++);
        },
        up: function() {
            return new jsonPointer(this.dp, this.d)
        },
        set: function(a, b) {
            this.d[a] = b
        },
        clone: function() {
            return new jsonPointer(this.d, this.dp)
        },
        through: function(a, b, c, d, e) {
            var f = this.d[a];
            if (f.length)
                for (var g = 0; g < f.length; g++) {
                    if (null != f[g][b] && "" != f[g][b] && (!c || f[g][b] == c)) {
                        var h = new jsonPointer(f[g], this.d);
                        d.apply(e, [h, g])
                    }
                    var i = this.d;
                    this.d = f[g], this.sub_exists(a) && this.through(a, b, c, d, e), this.d = i
                }
        }
    }, dhtmlXTreeObject.prototype.loadJSArrayFile = function(a, b) {
        this.parsCount || this.callEvent("onXLS", [this, this._ld_id]), this._ld_id = null, this.xmlstate = 1;
        var c = this;
        this.XMLLoader = new dtmlXMLLoaderObject(function(a, b, f, g, h) {
            eval("var z=" + h.xmlDoc.responseText), c.loadJSArray(z)
        }, this, !0, this.no_cashe), b && (this.XMLLoader.waitCall = b), this.XMLLoader.loadXML(a)
    }, dhtmlXTreeObject.prototype.loadCSV = function(a, b) {
        this.parsCount || this.callEvent("onXLS", [this, this._ld_id]), this._ld_id = null, this.xmlstate = 1;
        var c = this;
        this.XMLLoader = new dtmlXMLLoaderObject(function(a, b, d, e, f) {
            c.loadCSVString(f.xmlDoc.responseText)
        }, this, !0, this.no_cashe), b && (this.XMLLoader.waitCall = b), this.XMLLoader.loadXML(a)
    }, dhtmlXTreeObject.prototype.loadJSArray = function(a, b) {
        for (var c = [], d = 0; d < a.length; d++) c[a[d][1]] || (c[a[d][1]] = []), c[a[d][1]].push({
            id: a[d][0],
            text: a[d][2]
        });
        var e = {
                id: this.rootId
            },
            f = function(a, b) {
                if (c[a.id]) {
                    a.item = c[a.id];
                    for (var d = 0; d < a.item.length; d++) b(a.item[d], b)
                }
            };
        f(e, f), this.loadJSONObject(e, b)
    }, dhtmlXTreeObject.prototype.loadCSVString = function(a, b) {
        for (var c = [], d = a.split("\n"), e = 0; e < d.length; e++) {
            var f = d[e].split(",");
            c[f[1]] || (c[f[1]] = []), c[f[1]].push({
                id: f[0],
                text: f[2]
            })
        }
        var g = {
                id: this.rootId
            },
            h = function(a, b) {
                if (c[a.id]) {
                    a.item = c[a.id];
                    for (var d = 0; d < a.item.length; d++) b(a.item[d], b)
                }
            };
        h(g, h), this.loadJSONObject(g, b)
    }, dhtmlXTreeObject.prototype.loadJSONObject = function(a, b) {
        this.parsCount || this.callEvent("onXLS", [this, null]), this.xmlstate = 1;
        var c = new jsonPointer(a);
        this._parse(c), this._p = c, b && b()
    }, dhtmlXTreeObject.prototype.loadJSON = function(a, b) {
        this.parsCount || this.callEvent("onXLS", [this, this._ld_id]), this._ld_id = null, this.xmlstate = 1;
        var c = this;
        this.XMLLoader = new dtmlXMLLoaderObject(function(a, b, f, g, h) {
            try {
                eval("var t=" + h.xmlDoc.responseText)
            } catch (a) {
                return void dhtmlxError.throwError("LoadXML", "Incorrect JSON", [h.xmlDoc, this])
            }
            var j = new jsonPointer(t);
            c._parse(j), c._p = j
        }, this, !0, this.no_cashe), b && (this.XMLLoader.waitCall = b), this.XMLLoader.loadXML(a)
    }, dhtmlXTreeObject.prototype.serializeTreeToJSON = function() {
        for (var a = ['{"id":"' + this.rootId + '", "item":['], b = [], c = 0; c < this.htmlNode.childsCount; c++) b.push(this._serializeItemJSON(this.htmlNode.childNodes[c]));
        return a.push(b.join(",")), a.push("]}"), a.join("")
    }, dhtmlXTreeObject.prototype._serializeItemJSON = function(a) {
        var b = [];
        if (a.unParsed) return a.unParsed.text();
        var c = this._selected.length ? this._selected[0].id : "",
            d = a.span.innerHTML,
            d = d.replace(/\"/g, '\\"', d);
        if (this._xfullXML ? b.push('{ "id":"' + a.id + '", ' + (1 == this._getOpenState(a) ? ' "open":"1", ' : "") + (c == a.id ? ' "select":"1",' : "") + ' "text":"' + d + '", "im0":"' + a.images[0] + '", "im1":"' + a.images[1] + '", "im2":"' + a.images[2] + '" ' + (a.acolor ? ', "aCol":"' + a.acolor + '" ' : "") + (a.scolor ? ', "sCol":"' + a.scolor + '" ' : "") + (1 == a.checkstate ? ', "checked":"1" ' : 2 == a.checkstate ? ', "checked":"-1"' : "") + (a.closeable ? ', "closeable":"1" ' : "") + (this.XMLsource && 0 == a.XMLload ? ', "child":"1" ' : "")) : b.push('{ "id":"' + a.id + '", ' + (1 == this._getOpenState(a) ? ' "open":"1", ' : "") + (c == a.id ? ' "select":"1",' : "") + ' "text":"' + d + '"' + (this.XMLsource && 0 == a.XMLload ? ', "child":"1" ' : "")), this._xuserData && a._userdatalist) {
            b.push(', "userdata":[');
            for (var e = a._userdatalist.split(","), f = [], g = 0; g < e.length; g++) f.push('{ "name":"' + e[g] + '" , "content":"' + a.userData["t_" + e[g]] + '" }');
            b.push(f.join(",")), b.push("]")
        }
        if (a.childsCount) {
            for (b.push(', "item":['), f = [], g = 0; g < a.childsCount; g++) f.push(this._serializeItemJSON(a.childNodes[g]));
            b.push(f.join(",")), b.push("]\n")
        }
        return b.push("}\n"), b.join("")
    }, dhtmlXTreeObject.prototype.enableKeyboardNavigation = function(a) {
        if (this._enblkbrd = convertStringToBoolean(a)) {
            if (_isFF) {
                var b = window.getComputedStyle(this.parentObject, null).position;
                "absolute" != b && "relative" != b && (this.parentObject.style.position = "relative")
            }
            this._navKeys = [
                ["up", 38],
                ["down", 40],
                ["open", 39],
                ["close", 37],
                ["call", 13],
                ["edit", 113]
            ];
            var c = this,
                b = document.createElement("INPUT");
            b.className = "a_dhx_hidden_input", b.autocomplete = "off", window._KHTMLrv && (b.style.color = "white"), this.parentObject.appendChild(b), this.parentObject[_isOpera ? "onkeypress" : "onkeydown"] = function(a) {
                if (c.callEvent("onKeyPress", [(a || window.event).keyCode, a || window.event])) return c._onKeyDown(a || window.event)
            }, this.parentObject.onclick = function() {
                (_isFF || _isIE) && b.select(), (window._KHTMLrv || _isOpera) && b.focus()
            }
        } else this.parentObject.onkeydown = null
    }, dhtmlXTreeObject.prototype._onKeyDown = function(a) {
        if (window.globalActiveDHTMLGridObject && globalActiveDHTMLGridObject.isActive) return !0;
        for (var b = 0; b < this._navKeys.length; b++)
            if (this._navKeys[b][1] == a.keyCode) return this["_onkey_" + this._navKeys[b][0]].apply(this, [this.getSelectedItemId()]), a.preventDefault && a.preventDefault(), (a || event).cancelBubble = !0, !1;
        return !this._textSearch || this._searchItemByKey(a)
    }, dhtmlXTreeObject.prototype._onkey_up = function(a) {
        var b = this._globalIdStorageFind(a);
        if (b) {
            var c = this._getPrevVisibleNode(b);
            c.id != this.rootId && (this.focusItem(c.id), this.selectItem(c.id, !1))
        }
    }, dhtmlXTreeObject.prototype._onkey_down = function(a) {
        var b = this._globalIdStorageFind(a);
        if (b) {
            var c = this._getNextVisibleNode(b);
            c.id != this.rootId && (this.focusItem(c.id), this.selectItem(c.id, !1))
        }
    }, dhtmlXTreeObject.prototype._onkey_open = function(a) {
        this.openItem(a)
    }, dhtmlXTreeObject.prototype._onkey_close = function(a) {
        this.closeItem(a)
    }, dhtmlXTreeObject.prototype._onkey_call = function(a) {
        this.stopEdit ? (this.stopEdit(), this.parentObject.lastChild.focus(), this.parentObject.lastChild.focus(), this.selectItem(a, !0)) : this.selectItem(this.getSelectedItemId(), !0)
    }, dhtmlXTreeObject.prototype._onkey_edit = function(a) {
        this.editItem && this.editItem(a)
    }, dhtmlXTreeObject.prototype._getNextVisibleNode = function(a, b) {
        return !b && this._getOpenState(a) > 0 ? a.childNodes[0] : a.tr && a.tr.nextSibling && a.tr.nextSibling.nodem ? a.tr.nextSibling.nodem : a.parentObject ? this._getNextVisibleNode(a.parentObject, 1) : a
    }, dhtmlXTreeObject.prototype._getPrevVisibleNode = function(a) {
        return a.tr && a.tr.previousSibling && a.tr.previousSibling.nodem ? this._lastVisibleChild(a.tr.previousSibling.nodem) : a.parentObject ? a.parentObject : a
    }, dhtmlXTreeObject.prototype._lastVisibleChild = function(a) {
        return this._getOpenState(a) > 0 ? this._lastVisibleChild(a.childNodes[a.childsCount - 1]) : a
    }, dhtmlXTreeObject.prototype._searchItemByKey = function(a) {
        if (8 == a.keyCode) return this._textSearchString = "", !0;
        var b = String.fromCharCode(a.keyCode).toUpperCase();
        return !b.match(/[A-Z,a-z,0-9\ ]/) || (this._textSearchString += b, this._textSearchInProgress = !0, (this.getSelectedItemText() || "").match(RegExp("^" + this._textSearchString, "i")) || this.findItem("^" + this._textSearchString, 0), this._textSearchInProgress = !1, a.preventDefault && a.preventDefault(), (a || event).cancelBubble = !0, !1)
    }, dhtmlXTreeObject.prototype.assignKeys = function(a) {
        this._navKeys = a
    }, dhtmlXTreeObject.prototype.enableKeySearch = function(a) {
        if (this._textSearch = convertStringToBoolean(a)) {
            this._textSearchString = "";
            var b = this;
            this._markItem2 = this._markItem, this._markItem = function(a) {
                b._textSearchInProgress || (b._textSearchString = ""), b._markItem2(a)
            }
        }
    }, dhtmlXTreeObject.prototype.enableLoadingItem = function(a) {
        this.attachEvent("onXLS", this._showFakeItem), this.attachEvent("onXLE", this._hideFakeItem), this._tfi_text = a || "Loading..."
    }, dhtmlXTreeObject.prototype._showFakeItem = function(a, b) {
        if (null !== b && !this._globalIdStorageFind("fake_load_xml_" + b)) {
            var c = this.XMLsource;
            this.XMLsource = null, this.insertNewItem(b, "fake_load_xml_" + b, this._tfi_text), this.XMLsource = c
        }
    }, dhtmlXTreeObject.prototype._hideFakeItem = function(a, b) {
        null !== b && this.deleteItem("fake_load_xml_" + b)
    }, dhtmlXTreeObject.prototype.isLocked = function(a) {
        return this._locker || this._init_lock(), 1 == this._locker[a]
    };
dhtmlXTreeObject.prototype._lockItem = function(a, b, c) {
    if (this._locker || this._init_lock(), b) {
        if (1 == this._locker[a.id]) return;
        this._locker[a.id] = !0, a.bIm0 = a.images[0], a.bIm1 = a.images[1], a.bIm2 = a.images[2], a.images[0] = this.lico0, a.images[1] = this.lico1, a.images[2] = this.lico2;
        var d = a.span.parentNode,
            e = d.previousSibling;
        this.dragger.removeDraggableItem(d), this.dragger.removeDraggableItem(e)
    } else {
        if (1 != this._locker[a.id]) return;
        this._locker[a.id] = !1, a.images[0] = a.bIm0, a.images[1] = a.bIm1, a.images[2] = a.bIm2, d = a.span.parentNode, e = d.previousSibling, this.dragger.addDraggableItem(d, this), this.dragger.addDraggableItem(e, this)
    }
    c || this._correctPlus(a)
};
dhtmlXTreeObject.prototype.lockItem = function(a, b) {
        this._locker || this._init_lock(), this._lockOn = !1;
        var c = this._globalIdStorageFind(a);
        this._lockOn = !0, this._lockItem(c, convertStringToBoolean(b))
    }, dhtmlXTreeObject.prototype.setLockedIcons = function(a, b, c) {
        this._locker || this._init_lock(), this.lico0 = a, this.lico1 = b, this.lico2 = c
    }, dhtmlXTreeObject.prototype._init_lock = function() {
        this._locker = [], this._locker_count = "0", this._lockOn = !0, this._globalIdStorageFindA = this._globalIdStorageFind, this._globalIdStorageFind = this._lockIdFind, this._serializeItem && (this._serializeItemA = this._serializeItem, this._serializeItem = this._serializeLockItem, this._serializeTreeA = this.serializeTree, this.serializeTree = this._serializeLockTree), this.setLockedIcons(this.imageArray[0], this.imageArray[1], this.imageArray[2])
    }, dhtmlXTreeObject.prototype._lockIdFind = function(a, b, c) {
        return this.skipLock || c || 1 != this._lockOn || 1 != this._locker[a] ? this._globalIdStorageFindA(a, b, c) : null
    }, dhtmlXTreeObject.prototype._serializeLockItem = function(a) {
        return 1 == this._locker[a.id] ? "" : this._serializeItemA(a)
    }, dhtmlXTreeObject.prototype._serializeLockTree = function() {
        var a = this._serializeTreeA();
        return a.replace(/<item[^>]+locked\=\"1\"[^>]+\/>/g, "")
    }, dhtmlXTreeObject.prototype._moveNodeToA = dhtmlXTreeObject.prototype._moveNodeTo, dhtmlXTreeObject.prototype._moveNodeTo = function(a, b, c) {
        return (!b.treeNod.isLocked || !b.treeNod.isLocked(b.id)) && this._moveNodeToA(a, b, c)
    }, dhtmlXTreeObject.prototype.lockTree = function(a) {
        convertStringToBoolean(a) ? this._initTreeLocker() : this._TreeLocker && (this._TreeLocker.parentNode.removeChild(this._TreeLocker), this._TreeLocker = null)
    }, dhtmlXTreeObject.prototype._initTreeLocker = function() {
        if (!this._TreeLocker) {
            this.parentObject.style.overflow = "hidden", "absolute" != this.parentObject.style.position && (this.parentObject.style.position = "relative");
            var a = document.createElement("div");
            a.style.position = "absolute", a.style.left = "0px", a.style.top = "0px", a.className = "dhx_tree_opacity", a.style.width = this.allTree.offsetWidth + "px", a.style.backgroundColor = "#FFFFFF", a.style.height = this.allTree.offsetHeight + "px", this._TreeLocker = a, this.parentObject.appendChild(this._TreeLocker)
        }
    }, dhtmlXTreeObject.prototype.enableRTL = function(a) {
        var b = convertStringToBoolean(a);
        (b && !this.rtlMode || !b && this.rtlMode) && (this.rtlMode = b, this._switchToRTL(this.rtlMode))
    }, dhtmlXTreeObject.prototype._switchToRTL = function(a) {
        a ? (this.allTree.className = this._ltr_line = this.lineArray, this._ltr_min = this.minusArray, this._ltr_plus = this.plusArray, this.lineArray = "line2_rtl.gif,line3_rtl.gif,line4_rtl.gif,blank.gif,blank.gif,line1_rtl.gif".split(","), this.minusArray = ["minus2_rtl.gif", "minus3_rtl.gif", "minus4_rtl.gif", "minus.gif", "minus5_rtl.gif"], this.plusArray = ["plus2_rtl.gif", "plus3_rtl.gif", "plus4_rtl.gif", "plus.gif", "plus5_rtl.gif"], this.allTree.className = "containerTableStyleRTL") : (this.allTree.className = "containerTableStyle", this.lineArray = this._ltr_line, this.minusArray = this._ltr_min, this.plusArray = this._ltr_plus), this.htmlNode.childsCount && this._redrawFrom(this, this.htmlNode)
    }, dhtmlXTreeObject.prototype.sortTree = function(a, b, c) {
        var d = this._globalIdStorageFind(a);
        return !!d && void this._reorderBranch(d, "asc" == b.toString().toLowerCase(), convertStringToBoolean(c))
    }, dhtmlXTreeObject.prototype.setCustomSortFunction = function(a) {
        this._csfunca = a
    }, dhtmlXTreeObject.prototype._reorderBranch = function(a, b, c) {
        var d = [],
            e = a.childsCount;
        if (e) {
            for (var f = a.childNodes[0].tr.parentNode, g = 0; g < e; g++) d[g] = a.childNodes[g], f.removeChild(d[g].tr);
            var h = this;
            for (1 == b ? this._csfunca ? d.sort(function(a, b) {
                    return h._csfunca(a.id, b.id)
                }) : d.sort(function(a, b) {
                    return a.span.innerHTML.toUpperCase() > b.span.innerHTML.toUpperCase() ? 1 : a.span.innerHTML.toUpperCase() == b.span.innerHTML.toUpperCase() ? 0 : -1
                }) : this._csfunca ? d.sort(function(a, b) {
                    return h._csfunca(b.id, a.id)
                }) : d.sort(function(a, b) {
                    return a.span.innerHTML.toUpperCase() < b.span.innerHTML.toUpperCase() ? 1 : a.span.innerHTML.toUpperCase() == b.span.innerHTML.toUpperCase() ? 0 : -1
                }), g = 0; g < e; g++) f.appendChild(d[g].tr), a.childNodes[g] = d[g], c && d[g].unParsed ? d[g].unParsed.set("order", b ? 1 : -1) : c && d[g].childsCount && this._reorderBranch(d[g], b, c);
            for (g = 0; g < e; g++) this._correctPlus(d[g]), this._correctLine(d[g])
        }
    }, dhtmlXTreeObject.prototype._reorderXMLBranch = function(a) {
        var b = a.getAttribute("order");
        if ("none" != b) {
            var c = 1 == b,
                d = a.childNodes.length;
            if (d) {
                for (var e = [], f = 0, g = 0; g < d; g++) 1 == a.childNodes[g].nodeType && (e[f] = a.childNodes[g], f++);
                for (g = d - 1; 0 != g; g--) a.removeChild(a.childNodes[g]);
                for (c ? e.sort(function(a, b) {
                        return a.getAttribute("text") > b.getAttribute("text") ? 1 : a.getAttribute("text") == b.getAttribute("text") ? 0 : -1
                    }) : e.sort(function(a, b) {
                        return a.getAttribute("text") < b.getAttribute("text") ? 1 : a.getAttribute("text") == b.getAttribute("text") ? 0 : -1
                    }), g = 0; g < f; g++) e[g].setAttribute("order", b), a.appendChild(e[g]);
                a.setAttribute("order", "none")
            }
        }
    }, dhtmlXTreeObject.prototype.enableSmartRendering = function() {
        this.enableSmartXMLParsing(!0), this._srnd = !0, this.itemHeight = 18;
        var a = this;
        this.allTree.onscroll = function() {
            a._srndT || (a._srndT = window.setTimeout(function() {
                a._srndT = null, a._renderState()
            }, 300))
        }, this.attachEvent("onXLE", function() {
            a._renderState()
        }), this._singleTimeSRND()
    }, dhtmlXTreeObject.prototype._renderState = function() {
        this._idpull[this.rootId]._sready || this.prepareSR(this.rootId, !0);
        var a = this.allTree.scrollTop,
            b = (Math.floor(a / this.itemHeight), Math.ceil(this.allTree.offsetHeight / this.itemHeight));
        this._group_render = !0, this._getItemByPos(a, this.itemHeight, b, null, !1, this._renderItemSRND), this._group_render = !1
    }, dhtmlXTreeObject.prototype._renderItemSRND = function(a, b) {
        if (!a.span) {
            a.span = -1;
            for (var c = a.parentObject.htmlNode.childNodes[0].childNodes, d = b * this.itemHeight, e = null, f = 1; f < c.length; f++) {
                var e = c[f],
                    g = e.nodem ? this.itemHeight : e.offsetHeight || parseInt(e.childNodes[1].firstChild.style.height);
                if (d -= g, d < 0) {
                    if (d != -1) {
                        var h = e.childNodes[1].firstChild;
                        if (h.style.height = parseInt(h.style.height) - (g - Math.abs(d) + this.itemHeight) + "px", Math.abs(d) != g) {
                            var i = this._drawNewHolder(d + g, !0);
                            e.parentNode.insertBefore(i, e)
                        }
                        e.tr = {
                            nextSibling: e
                        };
                        break
                    }
                    d++
                }
            }
            if (h && "0px" != h.style.height && !e.offsetHeight) {
                var j = this._hAdI;
                this._hAdI = !0
            }
            this._parseItem(a._sxml, a.parentObject, null, e), h && "0px" != h.style.height && !e.offsetHeight && (this._hAdI = j), a.unParsed && this._correctPlus(a), h && "0px" == h.style.height && e.parentNode.removeChild(e)
        }
    }, dhtmlXTreeObject.prototype._buildSRND = function(a, b) {
        a.parentObject && this._globalIdStorageFind(a.parentObject.id), this._idpull[this.rootId]._sready || this.prepareSR(this.rootId, !0), this._renderItemSRND(a, this._getIndex(a)), a.unParsed && !b && this.reParse(a, 0), a.prepareSR || this.prepareSR(a.id)
    }, dhtmlXTreeObject.prototype._getIndex = function(a) {
        for (var b = 0; b < a.parentObject.childsCount; b++)
            if (a.parentObject.childNodes[b] == a) return b
    }, dhtmlXTreeObject.prototype.prepareSR = function(a, b) {
        if (a = this._idpull[a], !a._sready) {
            var c = this._drawNewHolder(this.itemHeight * a.childsCount, b);
            a.htmlNode.childNodes[0].appendChild(c), a._sready = !0
        }
    }, dhtmlXTreeObject.prototype._drawNewHolder = function(a, b) {
        var c = document.createElement("TR"),
            d = document.createElement("TD"),
            e = document.createElement("TD"),
            f = document.createElement("DIV");
        return f.innerHTML = "&nbsp;", d.appendChild(f), c.appendChild(e), c.appendChild(d), b || (c.style.display = "none"), f.style.height = a + "px", c
    }, dhtmlXTreeObject.prototype._getNextNodeSR = function(a, b) {
        return !b && a.childsCount ? a.childNodes[0] : a == this.htmlNode ? -1 : a.tr && a.tr.nextSibling && a.tr.nextSibling.nodem ? a.tr.nextSibling.nodem : this._getNextNode(a.parentObject, !0)
    }, dhtmlXTreeObject.prototype._getItemByPos = function(a, b, c, d, e, f) {
        d || (this._pos_c = a, d = this._idpull[this.rootId]);
        for (var g = 0; g < d.childsCount && (this._pos_c -= b, this._pos_c <= 0 && (e = !0), e && (f.apply(this, [d.childNodes[g], g]), c--), !(c < 0)) && !(d.childNodes[g]._open && (c = this._getItemByPos(null, b, c, d.childNodes[g], e, f), c < 0)); g++);
        return c
    }, dhtmlXTreeObject.prototype._addItemSRND = function(a, b, c) {
        var d = this._idpull[a],
            e = d.childsCount,
            f = d.childNodes;
        f[e] = new dhtmlXTreeItemObject(b, "", d, this, null, 1), itemId = f[e].id, f[e]._sxml = c.clone(), d.childsCount++
    }, dhtmlXTreeObject.prototype._singleTimeSRND = function() {
        this._redrawFrom = function() {};
        var a = dhtmlXTreeItemObject;
        this._singleTimeSRND = function() {}, window.dhtmlXTreeItemObject = function(b, c, d, e, f, g) {
            return e._srnd ? (this.scolor = this.acolor = this.htmlNode = "", this.span = this.dragMove = this.dragSpan = this.tempDOMU = this.tempDOMM = this.childsCount = this.tr = 0, this.closeble = 1, this.childNodes = [], this.userData = new cObject, this.checkstate = 0, this.treeNod = e, this.label = c, this.parentObject = d, this.actionHandler = f, this.images = [e.imageArray[0], e.imageArray[1], e.imageArray[2]], this.id = e._globalIdStorageAdd(b, this), b == e.rootId && (this.htmlNode = this.treeNod.checkBoxOff ? this.treeNod._createItem(1, this, g) : this.treeNod._createItem(0, this, g), this.htmlNode.objBelong = this), this) : a.call(this, b, c, d, e, f, g)
        }, this.setCheckSR = this.setCheck, this.setCheck = function(a, b) {
            return this._globalIdStorageFind(a), this.setCheckSR(a, b)
        }, this._get_srnd_p = function(a) {
            for (var b = []; a != this.rootId;) {
                for (var c = this.getParentId(a), d = 0; d < this._idpull[c].childsCount; d++)
                    if (this._idpull[c].childNodes[d].id == a) {
                        b.push([c, d]);
                        break
                    }
                a = c
            }
            return b.reverse(), b
        }, this._get_srnd_p_last = function(a, b, c) {
            for (var b = b || [], d = 0;;) {
                var e = this._idpull[a];
                if (e._sxml && this.findStrInXML(e._sxml.d, "text", c) && this._globalIdStorageFind(e.id), d = e.childsCount, !d) break;
                b.push([a, d - 1]), a = e.childNodes[d - 1].id
            }
            return b
        }, this._get_prev_srnd = function(a, b) {
            var c;
            if (!a.length) return a.push.apply(a, this._get_srnd_p_last(this.rootId, null, b)), c = a[a.length - 1], this._idpull[c[0]].childNodes[c[1]];
            if (c = a[a.length - 1], c[1]) {
                c[1]--;
                var d = this._idpull[c[0]].childNodes[c[1]];
                this._get_srnd_p_last(d.id, a, b)
            } else if (a.pop(), !a.length) return this._get_prev_srnd(a, b);
            return c = a[a.length - 1], this._idpull[c[0]].childNodes[c[1]]
        }, this._get_next_srnd = function(a, b) {
            if (!a.length) return a.push([this.rootId, 0]), this._idpull[this.rootId].childNodes[0];
            var c = a[a.length - 1],
                d = this._idpull[c[0]].childNodes[c[1]];
            return d.childsCount && !b ? (a.push([d.id, 0]), d.childNodes[0]) : (c[1]++, (d = this._idpull[c[0]].childNodes[c[1]]) ? d : (a.pop(), a.length ? this._get_next_srnd(a, !0) : this.htmlNode))
        }, this._findNodeByLabel = function(a, b, c) {
            a = a.replace(/^( )+/, "").replace(/( )+$/, ""), a = RegExp(a.replace(/([\*\+\\\[\]\(\)]{1})/gi, "\\$1").replace(/ /gi, ".*"), "gi"), c || (c = this._selected[0]) || (c = this.htmlNode);
            for (var d = c, e = this._get_srnd_p(d.id); c = b ? this._get_prev_srnd(e, a) : this._get_next_srnd(e);) {
                if (c.label) {
                    if (c.label.search(a) != -1) return c
                } else if (c._sxml) {
                    if (c._sxml.get("text").search(a) != -1) return c;
                    this.findStrInXML(c._sxml.d, "text", a) && this._globalIdStorageFind(c.id)
                }
                if (c.unParsed && this.findStrInXML(c.unParsed.d, "text", a) && this.reParse(c), d.id == c.id) break;
                if (b && 1 == e.length && 0 == e[0][1]) break
            }
            return null
        }, this.deleteChildItems = function(a) {
            this.rootId == a && (this._selected = [], this._idpull = {}, this._p = this._pos_c = this._pullSize = null, this.allTree.removeChild(this.htmlNode.htmlNode), this.htmlNode = new dhtmlXTreeItemObject(this.rootId, "", 0, this), this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display = "none", this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className = "hiddenRow", this.allTree.insertBefore(this.htmlNode.htmlNode, this.selectionBar), _isFF) && (this.allTree.childNodes[0].width = "100%", this.allTree.childNodes[0].style.overflow = "hidden")
        }, this._HideShow = function(a, b) {
            if (this.XMLsource && !a.XMLload) 1 != b && (a.XMLload = 1, this._loadDynXML(a.id));
            else if (a.span || this._buildSRND(a), a.unParsed && (this.reParse(a), this.prepareSR(a.id)), 0 != a.childsCount) {
                var c = a.htmlNode.childNodes[0].childNodes,
                    d = c.length;
                if (d > 1) {
                    if ("none" == c[1].style.display && 1 != b || 2 == b) e = "", a._open = !0;
                    else {
                        this.allTree.childNodes[0].border = "1", this.allTree.childNodes[0].border = "0";
                        var e = "none";
                        a._open = !1
                    }
                    for (var f = 1; f < d; f++) c[f].style.display = e;
                    this._renderState()
                }
                this._correctPlus(a)
            }
        }
    }, window.addEventListener ? window.addEventListener("load", dhx_init_trees, !1) : window.attachEvent && window.attachEvent("onload", dhx_init_trees), dhtmlXTreeObject.prototype._serEnts = [
        ["&", "&amp;"],
        ["<", "&lt;"],
        [">", "&gt;"]
    ], dhtmlXTreeObject.prototype.registerXMLEntity = function(a, b) {
        this._serEnts[this._serEnts.length] = [a, b, RegExp(a, "g")]
    }, dhtmlXTreeObject.prototype.setSerializationLevel = function(a, b, c, d, e) {
        this._xuserData = convertStringToBoolean(a), this._xfullXML = convertStringToBoolean(b), this._dtd = e, this._xescapeEntities = convertStringToBoolean(c), convertStringToBoolean(d) && (this._apreUC = "<![CDATA[", this._apstUC = "]]>");
        for (var f = 0; f < this._serEnts.length; f++) this._serEnts[f][2] = RegExp(this._serEnts[f][0], "g")
    }, dhtmlXTreeObject.prototype.serializeTree = function() {
        this.stopEdit && this.stopEdit(), this._apreUC = this._apreUC || "", this._apstUC = this._apstUC || "";
        var a = '<?xml version="1.0"?>';
        if (this._dtd && (a += '<!DOCTYPE tree SYSTEM "' + this._dtd + '">'), a += '<tree id="' + this.rootId + '">', this._xuserData && this._idpull[this.rootId]._userdatalist)
            for (var b = this._idpull[this.rootId]._userdatalist.split(","), c = 0; c < b.length; c++) a += '<userdata name="' + b[c] + '">' + this._apreUC + this._idpull[this.rootId].userData["t_" + b[c]] + this._apstUC + "</userdata>";
        for (c = 0; c < this.htmlNode.childsCount; c++) a += this._serializeItem(this.htmlNode.childNodes[c]);
        return a += "</tree>"
    }, dhtmlXTreeObject.prototype._serializeItem = function(a) {
        if (a.unParsed) {
            if (document.all) return a.unParsed.d.xml;
            var b = new XMLSerializer;
            return b.serializeToString(a.unParsed.d)
        }
        var c = "",
            d = this._selected.length ? this._selected[0].id : '"',
            e = a.span.innerHTML;
        if (this._xescapeEntities)
            for (var f = 0; f < this._serEnts.length; f++) e = e.replace(this._serEnts[f][2], this._serEnts[f][1]);
        if (c = this._xfullXML ? '<item id="' + a.id + '" ' + (1 == this._getOpenState(a) ? ' open="1" ' : "") + (d == a.id ? ' select="1"' : "") + ' text="' + e + '" im0="' + a.images[0] + '" im1="' + a.images[1] + '" im2="' + a.images[2] + '" ' + (a.acolor ? 'aCol="' + a.acolor + '" ' : "") + (a.scolor ? 'sCol="' + a.scolor + '" ' : "") + (1 == a.checkstate ? 'checked="1" ' : 2 == a.checkstate ? 'checked="-1"' : "") + (a.closeable ? 'closeable="1" ' : "") + (this.XMLsource && 0 == a.XMLload ? ' child="1" ' : "") + ">" : '<item id="' + a.id + '" ' + (1 == this._getOpenState(a) ? ' open="1" ' : "") + (d == a.id ? ' select="1"' : "") + ' text="' + e + '"' + (this.XMLsource && 0 == a.XMLload ? ' child="1" ' : "") + ">", this._xuserData && a._userdatalist)
            for (var g = a._userdatalist.split(","), f = 0; f < g.length; f++) c += '<userdata name="' + g[f] + '">' + this._apreUC + a.userData["t_" + g[f]] + this._apstUC + "</userdata>";
        for (f = 0; f < a.childsCount; f++) c += this._serializeItem(a.childNodes[f]);
        return c += "</item>"
    }, dhtmlXTreeObject.prototype.saveSelectedItem = function(a, b) {
        a = a || "", this.setCookie("treeStateSelected" + a, this.getSelectedItemId(), b)
    }, dhtmlXTreeObject.prototype.restoreSelectedItem = function(a) {
        var a = a || "",
            b = this.getCookie("treeStateSelected" + a);
        this.selectItem(b, !1)
    }, dhtmlXTreeObject.prototype.enableAutoSavingSelected = function(a, b) {
        (this.assMode = convertStringToBoolean(a)) && !this.oldOnSelect && (this.oldOnSelect = this.onRowSelect, this.onRowSelect = function(a, b, c) {
            b || (b = this), b.parentObject.treeNod.oldOnSelect(a, b, c), b.parentObject.treeNod.assMode && b.parentObject.treeNod.saveSelectedItem(b.parentObject.treeNod.assCookieName)
        }), this.assCookieName = b
    }, dhtmlXTreeObject.prototype.saveState = function(a, b) {
        var c = this._escape(this.serializeTree()),
            d = 4e3;
        if (c.length > d) {
            if (navigator.appName.indexOf("Microsoft") != -1) return !1;
            this.setCookie("treeStatex" + a, Math.ceil(c.length / d));
            for (var e = 0; e < Math.ceil(c.length / d); e++) this.setCookie("treeStatex" + a + "x" + e, c.substr(e * d, d), b)
        } else this.setCookie("treeStatex" + a, c, b);
        return c = this.getCookie("treeStatex" + a), !!c || (this.setCookie("treeStatex" + a, "", b), !1)
    }, dhtmlXTreeObject.prototype.loadState = function(a) {
        var b = this.getCookie("treeStatex" + a);
        if (!b) return !1;
        if (b.length) {
            if (b.toString().length < 4) {
                for (var c = "", d = 0; d < b; d++) c += this.getCookie("treeStatex" + a + "x" + d);
                b = c
            }
            this.loadXMLString("utf8" == this.utfesc ? decodeURI(b) : unescape(b))
        }
        return !0
    }, dhtmlXTreeObject.prototype.setCookie = function(a, b, c) {
        var d = a + "=" + b + (c ? "; " + c : "");
        document.cookie = d
    }, dhtmlXTreeObject.prototype.getCookie = function(a) {
        var b = a + "=";
        if (document.cookie.length > 0) {
            var c = document.cookie.indexOf(b);
            if (c != -1) {
                c += b.length;
                var d = document.cookie.indexOf(";", c);
                return d == -1 && (d = document.cookie.length), document.cookie.substring(c, d)
            }
        }
    }, dhtmlXTreeObject.prototype.saveOpenStates = function(a, b) {
        for (var c = [], d = 0; d < this.htmlNode.childsCount; d++) c = c.concat(this._collectOpenStates(this.htmlNode.childNodes[d]));
        c = c.join(this.dlmtr), this.setCookie("treeOpenStatex" + a, c, b)
    }, dhtmlXTreeObject.prototype.loadOpenStates = function(a) {
        for (var b = 0; b < this.htmlNode.childsCount; b++) this._xcloseAll(this.htmlNode.childNodes[b]);
        this.allTree.childNodes[0].border = "1", this.allTree.childNodes[0].border = "0";
        var c = getCookie("treeOpenStatex" + a);
        if (c)
            for (var d = c.split(this.dlmtr), b = 0; b < d.length; b++) {
                var e = this._globalIdStorageFind(d[b]);
                if (e) {
                    if (this.XMLsource && !e.XMLload && e.id != this.rootId) return void this._delayedLoad(e, "loadOpenStates('" + a + "')");
                    this.openItem(d[b])
                }
            }
        this.callEvent("onAllOpenDynamic", [])
    }, dhtmlXTreeObject.prototype._delayedLoad = function(a, b) {
        this.afterLoadMethod = b, this.onLoadReserve = this.onXLE, this.onXLE = this._delayedLoadStep2, this._loadDynXML(a.id)
    }, dhtmlXTreeObject.prototype._delayedLoadStep2 = function(a) {
        a.onXLE = a.onLoadReserve, window.setTimeout(function() {
            dhtmlx.temp = a, eval("dhtmlx.temp." + a.afterLoadMethod)
        }, 100), a.onXLE && a.onXLE(a), a.callEvent("onXLE", [a])
    }, dhtmlXTreeObject.prototype._collectOpenStates = function(a) {
        var b = [];
        if (1 == this._getOpenState(a)) {
            b.push(a.id);
            for (var c = 0; c < a.childsCount; c++) b = b.concat(this._collectOpenStates(a.childNodes[c]))
        }
        return b
    }, dhtmlXTreeObject.prototype.openAllItemsDynamic = function(a) {
        this.ClosedElem = [], this.G_node = null;
        var b = this._globalIdStorageFind(a || this.rootId);
        b.id != this.rootId && 0 != this.getOpenState(b.id) && this.openItem(a), this._openAllNodeChilds(b, 0), this.ClosedElem.length > 0 && (this.onLoadReserve = this.onXLE, this.onXLE = this._loadAndOpen, this._loadAndOpen(this))
    }, dhtmlXTreeObject.prototype._openAllNodeChilds = function(a) {
        (0 == a.XMLload || a.unParsed) && this.ClosedElem.push(a);
        for (var b = 0; b < a.childsCount; b++) this._getOpenState(a.childNodes[b]) < 0 && this._HideShow(a.childNodes[b], 2), a.childNodes[b].childsCount > 0 && this._openAllNodeChilds(a.childNodes[b]), (0 == a.childNodes[b].XMLload || a.childNodes[b].unParsed) && this.ClosedElem.push(a.childNodes[b])
    }, dhtmlXTreeObject.prototype._loadAndOpen = function(a) {
        a.G_node && (a._openItem(a.G_node), a._openAllNodeChilds(a.G_node), a.G_node = null), a.ClosedElem.length > 0 && (a.G_node = a.ClosedElem.shift()), a.G_node ? a.G_node.unParsed ? a.reParse(a.G_node) : window.setTimeout(function() {
            a._loadDynXML(a.G_node.id)
        }, 100) : (a.onXLE = a.onLoadReserve, a.onXLE && a.onXLE(a), a.callEvent("onAllOpenDynamic", [a]))
    }, dhtmlXTreeObject.prototype.openItemsDynamic = function(a, b) {
        this.onXLE != this._stepOpen && (this._opnItmsDnmcFlg = convertStringToBoolean(b), this.onLoadReserve = this.onXLE, this.onXLE = this._stepOpen, this.ClosedElem = a.split(",").reverse(), this._stepOpen(this))
    }, dhtmlXTreeObject.prototype._stepOpen = function(a) {
        if (a.ClosedElem.length) {
            a.G_node = a.ClosedElem.pop(), a.skipLock = !0;
            var b = a._globalIdStorageFind(a.G_node);
            b && (0 === b.XMLload ? a.openItem(a.G_node) : (a.openItem(a.G_node), a._stepOpen(a))), a.skipLock = !1
        } else a.onXLE = a.onLoadReserve, a._opnItmsDnmcFlg && a.selectItem(a.G_node, !0), a.onXLE && arguments[1] && a.onXLE.apply(a, arguments), a.callEvent("onOpenDynamicEnd", [])
    }, dhtmlXGridObject.prototype._updateTGRState = function(a) {
        a.update && 0 != a.id && (this.rowsAr[a.id].imgTag && (this.rowsAr[a.id].imgTag.src = this.imgURL + a.state + ".gif"), a.update = !1)
    }, dhtmlXGridObject.prototype.doExpand = function(a) {
        this.editStop();
        var b = a.parentNode.parentNode.parentNode,
            c = this._h2.get[b.idd];
        this.callEvent("onOpen", [b.idd, "plus" == c.state ? -1 : 1]) && ("plus" == c.state ? this.expandKids(b) : "minus" == c.state && !c._closeable && this.collapseKids(b))
    }, dhtmlXGridObject.prototype._getOpenLenght = function(a, b) {
        var c = this._h2.get[a].childs;
        b += c.length;
        for (var d = 0; d < c.length; d++) c[d].childs.length && "minus" == c[d].state && (b += this._getOpenLenght(c[d].id, 0));
        return b
    }, dhtmlXGridObject.prototype.collapseKids = function(a) {
        var b = this._h2.get[a.idd];
        if ("minus" == b.state && this.callEvent("onOpenStart", [a.idd, 1])) {
            var c = a.rowIndex;
            if (c < 0 && (c = this.rowsCol._dhx_find(a) + 1), this._h2.change(b.id, "state", "plus"), this._updateTGRState(b), this._srnd || this.pagingOn) this._h2_to_buff(), this._renderSort();
            else {
                for (var d = this._getOpenLenght(this.rowsCol[c - 1].idd, 0), e = 0; e < d; e++) this.rowsCol[c + e].parentNode.removeChild(this.rowsCol[c + e]);
                this.rowsCol.splice(c, d)
            }
            this.callEvent("onGridReconstructed", []), this.setSizes(), this._h2_to_buff(), this.callEvent("onOpenEnd", [a.idd, -1])
        }
    }, dhtmlXGridObject.prototype._massInsert = function(a, b, c) {
        var d = [],
            e = _isKHTML ? this.obj : this.obj.rows[0].parentNode;
        if (this._h2_to_buff(), this._srnd || this.pagingOn) return this._renderSort();
        for (var f = this._getOpenLenght(a.id, 0), g = 0; g < f; g++) {
            var h = this.render_row(c + g);
            b ? b.parentNode.insertBefore(h, b) : e.appendChild(h), d.push(h)
        }
        return this.rowsCol = dhtmlxArray(this.rowsCol.slice(0, c).concat(d).concat(this.rowsCol.slice(c))), a.childs.length + d.length
    }, dhtmlXGridObject.prototype.expandKids = function(a, b) {
        var c = this._h2.get[a.idd];
        if ((c.childs.length || c._xml_await) && "plus" == c.state && (c._loading || b || this.callEvent("onOpenStart", [c.id, -1]))) {
            var d = this.getRowIndex(c.id) + 1;
            c.childs.length ? (c._loading = !1, this._h2.change(c.id, "state", "minus"), this._updateTGRState(c), this._massInsert(c, this.rowsCol[d], d), this.callEvent("onGridReconstructed", [])) : c._xml_await && (c._loading = !0, this.callEvent("onDynXLS", [c.id]) && this.load(this.kidsXmlFile + "" + (this.kidsXmlFile.indexOf("?") != -1 ? "&" : "?") + "id=" + c.id, this._data_type)), this.setSizes(), c._loading || this.callEvent("onOpenEnd", [c.id, 1]), this._fixAlterCss()
        }
    }, dhtmlXGridObject.prototype.kidsXmlFile = "", dhtmlXGridObject.prototype.sortTreeRows = function(a, b, c) {
        var d = "getValue";
        this.cells5({
            parentNode: {
                grid: this
            }
        }, this.getColType(a)).getDate && (d = "getDate", b = "str"), this.forEachRow(function(c) {
            var e = this._h2.get[c];
            if (e) {
                var f = this._get_cell_value(e.buff, a, d);
                "int" == b ? (e._sort = parseFloat(f), e._sort = isNaN(e._sort) ? -99999999999999 : e._sort) : e._sort = f
            }
        });
        var e = this,
            f = 1,
            g = -1;
        "des" == c && (f = -1, g = 1);
        var h = null;
        "cus" == b && (h = function(b, d) {
            return e._customSorts[a](b._sort, d._sort, c, b.id, d.id)
        }), "str" == b && (h = function(a, b) {
            return a._sort < b._sort ? g : a._sort == b._sort ? 0 : f
        }), "int" == b && (h = function(a, b) {
            return a._sort < b._sort ? g : a._sort == b._sort ? 0 : f
        }), "date" == b && (h = function(a, b) {
            return (Date.parse(new Date(a._sort || "01/01/1900")) - Date.parse(new Date(b._sort || "01/01/1900"))) * f
        }), this._sortTreeRows(h, 0), this._renderSort(0, !0), this.callEvent("onGridReconstructed", [])
    }, dhtmlXGridObject.prototype._sortTreeRows = function(a, b) {
        var c = this._h2.get[b].childs;
        this.rowsCol.stablesort ? this.rowsCol.stablesort.call(c, a) : c.sort(a);
        for (var d = 0; d < c.length; d++) c[d].childs.length && this._sortTreeRows(a, c[d].id), c[d].index = d
    }, dhtmlXGridObject.prototype._renderSort = function() {
        this._h2_to_buff();
        var a = this.objBox.scrollTop;
        this._reset_view(), this.objBox.scrollTop = a
    }, dhtmlXGridObject.prototype._fixAlterCssTGR = function() {
        this._realfake || this._h2.forEachChild(0, function(a) {
            if ("TR" == a.buff.tagName) {
                var b = (this._cssSP ? a.level % 2 : a.index % 2) ? this._cssUnEven : this._cssEven;
                this.rowsAr[a.id].className = b + (this._cssSU ? " " + b + "_" + a.level : "") + " " + (this.rowsAr[a.id]._css || "") + (this.rowsAr[a.id].className.indexOf("rowselected") != -1 ? " rowselected" : "")
            }
        }, this)
    }, dhtmlXGridObject.prototype.moveRowUDTG = function(a, b) {
        var c = this._h2.get[a],
            d = c.parent.childs[c.index + b];
        if (d && d.parent == c.parent) {
            var e = [c.state, d.state];
            this.collapseKids(this.rowsAr[c.id]), this.collapseKids(this.rowsAr[d.id]);
            var f = this.rowsCol._dhx_find(this.rowsAr[a]),
                g = this.rowsBuffer._dhx_find(this.rowsAr[a]),
                h = this.obj.rows[0].parentNode.removeChild(this.rowsCol[f]),
                i = this.rowsCol[f + (1 == b ? 2 : b)];
            i ? i.parentNode.insertBefore(h, i) : this.obj.rows[0].parentNode.appendChild(h), this.rowsCol._dhx_swapItems(f, f + b), this.rowsBuffer._dhx_swapItems(g, g + b), this._h2.swap(d, c), "minus" == e[0] && this.expandKids(this.rowsAr[c.id]), "minus" == e[1] && this.expandKids(this.rowsAr[d.id]), this._fixAlterCss(Math.min(f, f + b))
        }
    }, eXcell_tree.prototype = new eXcell, eXcell_tree.prototype.setValueA = function(a) {
        this.cell.parentNode.valTag.innerHTML = a, this.grid.callEvent("onCellChanged", [this.cell.parentNode.idd, this.cell._cellIndex, a])
    }, eXcell_tree.prototype.setValue = function(a) {
        if (this.cell.parentNode.imgTag) return this.setLabel(a);
        if (null == this.grid._tgc.imgURL || this.grid._tgc.imgURL != this.grid.imgURL) {
            var b = {};
            b.spacer = "<img src='" + this.grid.imgURL + "blank.gif'  align='absmiddle' class='space'>", b.imst = "<img src='" + this.grid.imgURL, b.imsti = "<img src='" + (this.grid.iconURL || this.grid.imgURL), b.imact = "' align='absmiddle'  onclick='this." + (_isKHTML ? "" : "parentNode.") + "parentNode.parentNode.parentNode.parentNode.grid.doExpand(this);event.cancelBubble=true;'>", b.plus = b.imst + "plus.gif" + b.imact, b.minus = b.imst + "minus.gif" + b.imact, b.blank = b.imst + "blank.gif" + b.imact, b.start = "<div class='treegrid_cell' style='overflow:hidden; white-space : nowrap; height:" + (_isIE ? 20 : 18) + "px;'>", b.itemim = "' align='absmiddle' " + (this.grid._img_height ? ' height="' + this.grid._img_height + '"' : "") + (this.grid._img_width ? ' width="' + this.grid._img_width + '"' : "") + " ><span " + (_isFF || _isOpera ? "style='position:relative; top:2px;'" : "") + "id='nodeval'>", b.close = "</span></div>", this.grid._tgc = b
        }
        var b = this.grid._tgc,
            c = this.cell.parentNode.idd,
            d = this.grid._h2.get[c];
        (this.grid.kidsXmlFile || this.grid._slowParse) && (d.has_kids = d.has_kids || this.cell.parentNode._attrs.xmlkids && "minus" != d.state, d._xml_await = !!d.has_kids), d.image = d.image || this.cell._attrs.image || "leaf.gif", d.label = a;
        for (var e = [b.start], f = 0; f < d.level; f++) e.push(b.spacer);
        d.has_kids ? (e.push(b.plus), d.state = "plus") : e.push(b.imst + d.state + ".gif" + b.imact), e.push(b.imsti), e.push(d.image), e.push(b.itemim), e.push(d.label), e.push(b.close), this.cell.innerHTML = e.join(""), this.cell._treeCell = !0, this.cell.parentNode.imgTag = this.cell.childNodes[0].childNodes[d.level], this.cell.parentNode.valTag = this.cell.childNodes[0].childNodes[d.level + 2], _isKHTML && (this.cell.vAlign = "top"), 0 != d.parent.id && "plus" == d.parent.state && (this.grid._updateTGRState(d.parent, !1), this.cell.parentNode._skipInsert = !0), this.grid.callEvent("onCellChanged", [c, this.cell._cellIndex, a])
    }, dhtmlXGridObject.prototype._process_tree_xml = function(a, b, c) {
        this._parsing = !0;
        var d = !1;
        b || (this.render_row = this.render_row_tree, d = !0, b = a.getXMLTopNode(this.xml.top), c = b.getAttribute("parent") || 0, "0" == c && (c = 0), this._h2 || (this._h2 = new dhtmlxHierarchy), this._fake && (this._fake._h2 = this._h2));
        var e = a.doXPath(this.xml.row, b);
        this._open = this._open || [];
        for (var f = 0; f < e.length; f++) {
            var g = e[f].getAttribute("id");
            g || (g = this.uid(), e[f].setAttribute("id", g));
            var h = this._h2.add(g, c);
            h.buff = {
                idd: g,
                data: e[f],
                _parser: this._process_xml_row,
                _locator: this._get_xml_data
            }, e[f].getAttribute("open") && (h.state = "minus", this._open.push(g)), this.rowsAr[g] = h.buff, this._process_tree_xml(a, e[f], g)
        }
        if (d) {
            for (e.length ? 0 != c && !this._srnd && this._h2.change(c, "state", "minus") : this._h2.change(c, "state", dhtmlXGridObject._emptyLineImg), f = 0; f < this._open.length; f++) {
                var i = this._h2.get[this._open[f]];
                i.childs.length || (i.state = dhtmlXGridObject._emptyLineImg)
            }
            if (this._updateTGRState(this._h2.get[c]), this._h2_to_buff(), 0 != c && this._srnd ? this.openItem(c) : this.pagingOn ? this._renderSort() : this.render_dataset(), this.kidsXmlFile)
                for (f = 0; f < this._open.length; f++) i = this._h2.get[this._open[f]], i._xml_await && this.expandKids({
                    idd: i.id
                });
            this._open = [], this._slowParse === !1 && this.forEachRow(function(a) {
                this.render_row_tree(0, a)
            }), this._parsing = !1, 0 != c && !this._srnd && this.callEvent("onOpenEnd", [c, 1])
        }
        return a.xmlDoc.responseXML ? a.xmlDoc.responseXML : a.xmlDoc
    }, dhtmlXGridObject.prototype._h2_to_buff = function(a) {
        a || (a = this._h2.get[0], this.rowsBuffer = new dhtmlxArray, !this._fake || this._realfake) || (this._fake.rowsBuffer = this.rowsBuffer);
        for (var b = 0; b < a.childs.length; b++) this.rowsBuffer.push(a.childs[b].buff), "minus" == a.childs[b].state && this._h2_to_buff(a.childs[b])
    }, dhtmlXGridObject.prototype.render_row_tree = function(a, b) {
        if (b) var c = this._h2.get[b],
            c = c ? c.buff : c;
        else c = this.rowsBuffer[a];
        if (!c) return -1;
        if (c._parser) {
            if (this.rowsAr[c.idd] && "TR" == this.rowsAr[c.idd].tagName) return this._h2.get[c.idd].buff = this.rowsBuffer[a] = this.rowsAr[c.idd];
            var d = this._prepareRow(c.idd);
            return this.rowsAr[c.idd] = d, b || (this.rowsBuffer[a] = d), this._h2.get[c.idd].buff = d, c._parser.call(this, d, c.data), this._postRowProcessing(d), d
        }
        return c
    }, dhtmlXGridObject.prototype._removeTrGrRow = function(a, b) {
        if (b) this._h2.forEachChild(b.id, function(a) {
            this._removeTrGrRow(null, a), delete this.rowsAr[a.id]
        }, this);
        else {
            var c = this.getRowIndex(a.idd),
                b = this._h2.get[a.idd];
            if (c != -1 && c !== this.undefined) {
                var d = 1;
                b && "minus" == b.state && (d += this._getOpenLenght(b.id, 0));
                for (var e = 0; e < d; e++) this.rowsCol[e + c] && this.rowsCol[e + c].parentNode.removeChild(this.rowsCol[e + c]);
                if (this._fake) {
                    for (e = 0; e < d; e++) this._fake.rowsCol[e + c] && this._fake.rowsCol[e + c].parentNode.removeChild(this._fake.rowsCol[e + c]);
                    d > 1 && this._fake.rowsCol.splice(c + 1, d - 1)
                }
                this.rowsCol.splice(c, d), this.rowsBuffer.splice(c, d)
            }
            b && (this._removeTrGrRow(null, b), delete this.rowsAr[b.id], 1 == b.parent.childs.length && (this._h2.change(b.parent.id, "state", dhtmlXGridObject._emptyLineImg), this._updateTGRState(b.parent)), this._h2.remove(b.id))
        }
    }, dhtmlXGridObject.prototype.openItem = function(a) {
        var b = this._h2.get[a || 0],
            c = this.getRowById(a || 0);
        c && (b.parent && 0 != b.parent.id && this.openItem(b.parent.id), this.expandKids(c))
    }, dhtmlXGridObject.prototype._addRowClassic = dhtmlXGridObject.prototype.addRow, dhtmlXGridObject.prototype.addRow = function(a, b, c, d, e, f) {
        if (!this._h2) return this._addRowClassic(a, b, c);
        var d = d || 0;
        this.cellType._dhx_find("tree"), "string" == typeof b && (b = b.split(this.delim));
        var g = this._h2.get[a];
        return g || (0 == d ? c = this.rowsBuffer.length : (c = this.getRowIndex(d) + 1, "minus" == this._h2.get[d].state ? c += this._getOpenLenght(d, 0) : this._skipInsert = !0)), g = g || this._h2.add(a, d), g.image = e, g.has_kids = f, g.buff = this._addRowClassic(a, b, c)
    }, dhtmlXGridObject.prototype.addRowBefore = function(a, b, c, d, e) {
        var f = this.rowsAr[c];
        if (f) {
            if (!this._h2) return this.addRow(a, b, this.getRowIndex(c));
            var g = this._h2.get[c].parent.id,
                h = this.getRowIndex(c);
            return h == -1 && (this._skipInsert = !0), this._h2.addBefore(a, g, c), this.addRow(a, b, h, this._h2.get[c].parent.id, d, e)
        }
    }, dhtmlXGridObject.prototype.addRowAfter = function(a, b, c, d, e) {
        var f = this.rowsAr[c];
        if (f) {
            if (!this._h2) return this.addRow(a, b, this.getRowIndex(c) + 1);
            var g = this._h2.get[c].parent.id,
                h = this.getRowIndex(c);
            return h == -1 && (this._skipInsert = !0), "minus" == this._h2.get[c].state ? h += this._getOpenLenght(c, 0) + 1 : h++, this._h2.addAfter(a, g, c), this.addRow(a, b, h, g, d, e)
        }
    }, dhtmlXGridObject.prototype.enableSmartXMLParsing = function(a) {
        this._slowParse = convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype._copyTreeGridRowContent = function(a, b, c) {
        var d = this.cellType._dhx_find("tree");
        for (i = 0; i < a.cells.length; i++) i != d ? this.cells(c, i).setValue(this.cells(b, i).getValue()) : this.cells(c, i).setValueA(this.cells(b, i).getValue())
    }, dhtmlXGridObject.prototype.closeItem = function(a) {
        var b = this.getRowById(a);
        b && this.collapseKids(b)
    }, dhtmlXGridObject.prototype.deleteChildItems = function(a) {
        var b = this._h2.get[a];
        if (b)
            for (; b.childs.length;) this.deleteRow(b.childs[0].id)
    }, dhtmlXGridObject.prototype.getAllSubItems = function(a) {
        var b = [],
            c = this._h2.get[a || 0];
        if (c)
            for (var d = 0; d < c.childs.length; d++) b.push(c.childs[d].id), c.childs[d].childs.length && (b = b.concat(this.getAllSubItems(c.childs[d].id).split(this.delim)));
        return b.join(this.delim)
    }, dhtmlXGridObject.prototype.getChildItemIdByIndex = function(a, b) {
        var c = this._h2.get[a || 0];
        return c && c.childs[b] ? c.childs[b].id : null
    }, dhtmlXGridObject.prototype.getItemText = function(a) {
        return this.cells(a, this.cellType._dhx_find("tree")).getLabel()
    }, dhtmlXGridObject.prototype.getOpenState = function(a) {
        var b = this._h2.get[a || 0];
        if (b) return "minus" == b.state
    }, dhtmlXGridObject.prototype.getParentId = function(a) {
        var b = this._h2.get[a || 0];
        return b && b.parent ? b.parent.id : null
    }, dhtmlXGridObject.prototype.getSubItems = function(a) {
        var b = [],
            c = this._h2.get[a || 0];
        if (c)
            for (var d = 0; d < c.childs.length; d++) b.push(c.childs[d].id);
        return b.join(this.delim)
    }, dhtmlXGridObject.prototype.expandAll = function(a) {
        this._renderAllExpand(a || 0), this._h2_to_buff(), this._reset_view(), this.setSizes(), this.callEvent("onGridReconstructed", []), this._redrawLines && this._redrawLines()
    }, dhtmlXGridObject.prototype._renderAllExpand = function(a) {
        for (var b = this._h2.get[a].childs, c = 0; c < b.length; c++) b[c].childs.length && (this._h2.change(b[c].id, "state", "minus"), this._updateTGRState(b[c]), this._renderAllExpand(b[c].id))
    }, dhtmlXGridObject.prototype.collapseAll = function(a) {
        this._h2.forEachChild(a || 0, function(a) {
            a && "minus" == a.state && (a.state = "plus", a.update = !0, this._updateTGRState(a))
        }, this), this._h2_to_buff(), this._reset_view(), this.setSizes(), this.callEvent("onGridReconstructed", []), this._redrawLines && this._redrawLines()
    }, dhtmlXGridObject.prototype.hasChildren = function(a) {
        var b = this._h2.get[a];
        return b && b.childs.length ? b.childs.length : b._xml_await ? -1 : 0
    }, dhtmlXGridObject.prototype.setItemCloseable = function(a, b) {
        var c = this._h2.get[a];
        c && (c._closeable = !convertStringToBoolean(b))
    }, dhtmlXGridObject.prototype.setItemText = function(a, b) {
        return this.cells(a, this.cellType._dhx_find("tree")).setLabel(b)
    }, dhtmlXGridObject.prototype.setItemImage = function(a, b) {
        this._h2.get[a].image = b, this.rowsAr[a].imgTag.nextSibling.src = (this.iconURL || "") + b
    }, dhtmlXGridObject.prototype.getItemImage = function(a) {
        return this.getRowById(a), this._h2.get[a].image
    }, dhtmlXGridObject.prototype.setImageSize = function(a, b) {
        this._img_width = a, this._img_height = b
    }, dhtmlXGridObject.prototype._getRowImage = function(a) {
        return this._h2.get[a.idd].image;
    }, dhtmlXGridObject.prototype.setOnOpenStartHandler = function(a) {
        this.attachEvent("onOpenStart", a)
    }, dhtmlXGridObject.prototype.setOnOpenEndHandler = function(a) {
        this.attachEvent("onOpenEnd", a)
    }, dhtmlXGridObject.prototype.enableTreeCellEdit = function(a) {
        this._edtc = !convertStringToBoolean(a)
    }, dhtmlXGridObject.prototype.getLevel = function(a) {
        var b = this._h2.get[a || 0];
        return b ? b.level : -1
    }, dhtmlXGridObject.prototype._fixHiddenRowsAllTG = function(a, b) {
        for (i in this.rowsAr) this.rowsAr[i] && this.rowsAr[i].childNodes && (this.rowsAr[i].childNodes[a].style.display = b)
    }, dhtmlXGridObject._emptyLineImg = "blank", dhtmlXGridObject.prototype._updateLine = function(a, b) {
        if (b = b || this.rowsAr[a.id]) {
            var c = b.imgTag;
            if (c) {
                if ("blank" == a.state) return c.src = this.imgURL + "blank.gif";
                var d = 1,
                    d = 0 == a.index && 0 == a.level ? a.parent.childs.length - 1 > a.index ? 3 : 1 : a.parent.childs.length - 1 > a.index ? 3 : 2;
                c.src = this.imgURL + a.state + d + ".gif"
            }
        }
    }, dhtmlXGridObject.prototype._updateParentLine = function(a, b) {
        if (b = b || this.rowsAr[a.id]) {
            var c = b.imgTag;
            if (c)
                for (var d = a.level; d > 0 && 0 != a.id; d--) c = c.previousSibling, a = a.parent, c.src = a.parent.childs.length - 1 > a.index ? this.imgURL + "line1.gif" : this.imgURL + "blank.gif"
        }
    }, dhtmlXGridObject.prototype._renderSortA = dhtmlXGridObject.prototype._renderSort, dhtmlXGridObject.prototype._renderSort = function() {
        this._renderSortA.apply(this, arguments), this._redrawLines(0)
    }, dhtmlXGridObject.prototype._redrawLines = function(a) {
        this._tgle && this._h2.forEachChild(a || 0, function(a) {
            this._updateLine(a), this._updateParentLine(a)
        }, this)
    }, dhtmlXGridObject.prototype.enableTreeGridLines = function() {
        dhtmlXGridObject._emptyLineImg = "line", this._updateTGRState = function(a, b) {
            !b && a.update && 0 != a.id && (this._tgle && this._updateLine(a, this.rowsAr[a.id]), a.update = !1)
        }, this._tgle = !0, this.attachEvent("onXLE", function(a, b, c) {
            this._redrawLines(c)
        }), this.attachEvent("onOpenEnd", function(a) {
            this._redrawLines(a)
        }), this.attachEvent("onRowAdded", function(a) {
            var b = this._h2.get[a];
            this._updateLine(b), this._updateParentLine(b), b.index < b.parent.childs.length - 1 ? (b = b.parent.childs[b.index + 1], this._updateLine(b), this._updateParentLine(b)) : 0 != b.index && (b = b.parent.childs[b.index - 1], this._updateLine(b), this._updateParentLine(b), b.childs.length && this._h2.forEachChild(b.id, function(a) {
                this._updateParentLine(a)
            }, this))
        }), this.attachEvent("onOpen", function(a, b) {
            if (b)
                for (var c = this._h2.get[a], d = 0; d < c.childs.length; d++) this._updateParentLine(c.childs[d]);
            return !0
        }), this.attachEvent("onBeforeRowDeleted", function(a) {
            var b = this,
                c = this._h2.get[a],
                d = null;
            return 0 != c.index && (d = c.parent.childs[c.index - 1]), c = c.parent, window.setTimeout(function() {
                (c = b._h2.get[c.id]) && (b._updateLine(c), b._updateParentLine(c), d && (b._updateLine(d), "minus" == d.state && b._h2.forEachChild(d.id, function(a) {
                    b._updateParentLine(a)
                }, b)))
            }, 1), !0
        })
    }, dhtmlXGridObject.prototype.setFiltrationLevel = function(a, b, c) {
        this._tr_strfltr = a, this._tr_fltr_c = b, this._tr_fltr_d = c, this.refreshFilters()
    }, dhtmlXGridObject.prototype.filterTreeBy = function(a, b, c) {
        var d = this._h2;
        if ("undefined" == typeof this._tr_strfltr && (this._tr_strfltr = -1), this._f_rowsBuffer ? !c && (this._h2 = this._f_rowsBuffer, this._fake) && (this._fake._h2 = this._h2) : this._f_rowsBuffer = this._h2, this.dma(!0), this._fbf = {}, "object" == typeof a)
            for (var e = 0; e < b.length; e++) this._filterTreeA(a[e], b[e]);
        else this._filterTreeA(a, b);
        this._fbf = null, this.dma(!1), this._fix_filtered_images(this._h2, d), this._renderSort(), this.callEvent("onGridReconstructed", [])
    }, dhtmlXGridObject.prototype._filterTreeA = function(a, b) {
        if ("" != b) {
            var c = !0;
            "function" == typeof b ? c = !1 : b = (b || "").toString().toLowerCase();
            var d, e = function(a, b, c) {
                    var d = c.get[a.parent.id];
                    return d || (d = e(a.parent, b, c)), c = g.get[a.id], c || (c = {
                        id: a.id,
                        childs: [],
                        level: a.level,
                        parent: d,
                        index: d.childs.length,
                        image: a.image,
                        state: a.state,
                        buff: a.buff,
                        has_kids: a.has_kids,
                        _xml_await: a._xml_await
                    }, d.childs.push(c), g.get[c.id] = c), c
                },
                f = this._fbf,
                g = new dhtmlxHierarchy,
                h = this._tr_strfltr,
                i = this,
                j = function(a) {
                    for (var b = 0; b < a.childs.length; b++) i.temp(a.childs[b])
                };
            switch (h.toString()) {
                case "-2":
                    d = function(a) {
                        return !f[a.id] && (j(a), !0)
                    };
                    break;
                case "-1":
                    d = function(a) {
                        return !a.childs.length
                    };
                    break;
                default:
                    d = function(a) {
                        return h == a.level
                    }
            }
            this.temp = function(i) {
                return 0 != i.id && d(i) ? (c ? this._get_cell_value(i.buff, a).toString().toLowerCase().indexOf(b) != -1 : b(this._get_cell_value(i.buff, a), i.id)) ? (e(i, this._h2, g), i.childs && h != -2 && this._h2.forEachChild(i.id, function(a) {
                    e(a, this._h2, g)
                }, this), !0) : (f[i.id] = !0, this._tr_fltr_c && e(i.parent, this._h2, g), !1) : (this._tr_fltr_d && this._tr_strfltr > i.level && 0 != i.id && e(i, this._h2, g), void j(i))
            }, this.temp(this._h2.get[0]), this._h2 = g, this._fake && (this._fake._h2 = this._h2)
        }
    }, dhtmlXGridObject.prototype._fix_filtered_images = function(a, b) {
        a.forEachChild(0, function(a) {
            if (a.childs.length || a.has_kids) {
                if ("TR" == a.buff.tagName) {
                    var c = b.get[a.id];
                    c && c.state != dhtmlXGridObject._emptyLineImg && (a.state = c.state), a.update = !0, this._updateTGRState(a)
                }
            } else a.state != dhtmlXGridObject._emptyLineImg && (a.state = dhtmlXGridObject._emptyLineImg, a.update = !0, this._updateTGRState(a))
        }, this)
    }, dhtmlXGridObject.prototype.collectTreeValues = function(a) {
        "undefined" == typeof this._tr_strfltr && (this._tr_strfltr = -1), this.dma(!0), this._build_m_order();
        var a = this._m_order ? this._m_order[a] : a,
            b = {},
            c = [],
            d = this._f_rowsBuffer || this._h2;
        d.forEachChild(0, function(c) {
            if (this._tr_strfltr == -2 || this._tr_strfltr == -1 && !c.childs.length || this._tr_strfltr == c.level) {
                var d = this._get_cell_value(c.buff, a);
                d && (b[d] = !0)
            }
        }, this), this.dma(!1);
        var e, f = this.combos[a];
        for (e in b) b[e] === !0 && c.push(f ? f.get(e) || e : e);
        return c.sort()
    }, dhtmlXGridObject.prototype._in_header_stat_tree_total = function(a, b, c) {
        var d = function() {
            var a = 0;
            this._build_m_order();
            var c = this._m_order ? this._m_order[b] : b;
            return this._h2.forEachChild(0, function(b) {
                var d = parseFloat(this._get_cell_value(b.buff || this.rowsAr[b.id], c));
                a += isNaN(d) ? 0 : d
            }, this), this._maskArr[b] ? this._aplNF(a, b) : Math.round(100 * a) / 100
        };
        this._stat_in_header(a, d, b, c, c)
    }, dhtmlXGridObject.prototype._in_header_stat_tree_total_leaf = function(a, b, c) {
        var d = function() {
            var a = 0;
            this._build_m_order();
            var c = this._m_order ? this._m_order[b] : b;
            return this._h2.forEachChild(0, function(b) {
                if (!b.childs.length) {
                    var d = parseFloat(this._get_cell_value(b.buff || this.rowsAr[b.id], c));
                    a += isNaN(d) ? 0 : d
                }
            }, this), this._maskArr[b] ? this._aplNF(a, b) : Math.round(100 * a) / 100
        };
        this._stat_in_header(a, d, b, c, c)
    }, dhtmlXGridObject.prototype._in_header_stat_tree_multi_total = function(a, b, c) {
        var d = c[1].split(":");
        c[1] = "";
        var e = function() {
            var a = 0;
            return this._h2.forEachChild(0, function(b) {
                var c = parseFloat(this._get_cell_value(b.buff || this.rowsAr[b.id], d[0])) * parseFloat(this._get_cell_value(b.buff || this.rowsAr[b.id], d[1]));
                a += isNaN(c) ? 0 : c
            }, this), this._maskArr[b] ? this._aplNF(a, b) : Math.round(100 * a) / 100
        };
        this._stat_in_header(a, e, b, c, c)
    }, dhtmlXGridObject.prototype._in_header_stat_tree_multi_total_leaf = function(a, b, c) {
        var d = c[1].split(":");
        c[1] = "";
        var e = function() {
            var a = 0;
            return this._h2.forEachChild(0, function(b) {
                if (!b.childs.length) {
                    var c = parseFloat(this._get_cell_value(b.buff || this.rowsAr[b.id], d[0])) * parseFloat(this._get_cell_value(b.buff || this.rowsAr[b.id], d[1]));
                    a += isNaN(c) ? 0 : c
                }
            }, this), this._maskArr[b] ? this._aplNF(a, b) : Math.round(100 * a) / 100
        };
        this._stat_in_header(a, e, b, c, c)
    }, dhtmlXGridObject.prototype._in_header_stat_tree_max = function(a, b, c) {
        var d = function() {
            var a = -999999999;
            this._build_m_order();
            var c = this._m_order ? this._m_order[b] : b;
            return 0 == this.getRowsNum() ? "" : (this._h2.forEachChild(0, function(b) {
                var d = parseFloat(this._get_cell_value(b.buff || this.rowsAr[b.id], c));
                isNaN(d) || (a = Math.max(a, d))
            }, this), this._maskArr[b] ? this._aplNF(a, b) : a)
        };
        this._stat_in_header(a, d, b, c)
    }, dhtmlXGridObject.prototype._in_header_stat_tree_min = function(a, b, c) {
        var d = function() {
            var a = 999999999;
            this._build_m_order();
            var c = this._m_order ? this._m_order[b] : b;
            return 0 == this.getRowsNum() ? "" : (this._h2.forEachChild(0, function(b) {
                var d = parseFloat(this._get_cell_value(b.buff || this.rowsAr[b.id], c));
                isNaN(d) || (a = Math.min(a, d))
            }, this), this._maskArr[b] ? this._aplNF(a, b) : a)
        };
        this._stat_in_header(a, d, b, c)
    }, dhtmlXGridObject.prototype._in_header_stat_tree_average = function(a, b, c) {
        var d = function() {
            var a = 0,
                c = 0;
            this._build_m_order();
            var d = this._m_order ? this._m_order[b] : b;
            return this._h2.forEachChild(0, function(b) {
                var e = parseFloat(this._get_cell_value(b.buff || this.rowsAr[b.id], d));
                a += isNaN(e) ? 0 : e, c++
            }, this), this._maskArr[b] ? this._aplNF(a, b) : Math.round(a / c * 100) / 100
        };
        this._stat_in_header(a, d, b, c)
    }, dhtmlXGridObject.prototype._in_header_stat_tree_max_leaf = function(a, b, c) {
        var d = function() {
            var a = -999999999;
            this._build_m_order();
            var c = this._m_order ? this._m_order[b] : b;
            return 0 == this.getRowsNum() ? "" : (this._h2.forEachChild(0, function(b) {
                if (!b.childs.length) {
                    var d = parseFloat(this._get_cell_value(b.buff || this.rowsAr[b.id], c));
                    isNaN(d) || (a = Math.max(a, d))
                }
            }, this), this._maskArr[b] ? this._aplNF(a, b) : a)
        };
        this._stat_in_header(a, d, b, c)
    }, dhtmlXGridObject.prototype._in_header_stat_tree_min_leaf = function(a, b, c) {
        var d = function() {
            var a = 999999999;
            this._build_m_order();
            var c = this._m_order ? this._m_order[b] : b;
            return 0 == this.getRowsNum() ? "" : (this._h2.forEachChild(0, function(b) {
                if (!b.childs.length) {
                    var d = parseFloat(this._get_cell_value(b.buff || this.rowsAr[b.id], c));
                    isNaN(d) || (a = Math.min(a, d))
                }
            }, this), this._maskArr[b] ? this._aplNF(a, b) : a)
        };
        this._stat_in_header(a, d, b, c)
    }, dhtmlXGridObject.prototype._in_header_stat_tree_average_leaf = function(a, b, c) {
        var d = function() {
            var a = 0,
                c = 0;
            this._build_m_order();
            var d = this._m_order ? this._m_order[b] : b;
            return this._h2.forEachChild(0, function(b) {
                if (!b.childs.length) {
                    var e = parseFloat(this._get_cell_value(b.buff || this.rowsAr[b.id], d));
                    a += isNaN(e) ? 0 : e, c++
                }
            }, this), this._maskArr[b] ? this._aplNF(a, b) : Math.round(a / c * 100) / 100
        };
        this._stat_in_header(a, d, b, c)
    }, dhtmlXGridObject.prototype._in_header_stat_tree_count = function(a, b, c) {
        var d = function() {
            var a = 0;
            return this._h2.forEachChild(0, function() {
                a++
            }, this), a
        };
        this._stat_in_header(a, d, b, c)
    }, dhtmlXGridObject.prototype._in_header_stat_tree_count_leaf = function(a, b, c) {
        var d = function() {
            var a = 0;
            return this._h2.forEachChild(0, function(b) {
                b.childs.length || a++
            }, this), a
        };
        this._stat_in_header(a, d, b, c)
    }, dhtmlXGridObject.prototype._stat_in_header = function(a, b, c, d) {
        var e = function() {
            this.dma(!0), a.innerHTML = (d[0] ? d[0] : "") + b.call(this) + (d[1] ? d[1] : ""), this.dma(!1), this.callEvent("onStatReady", [])
        };
        this._stat_events || (this._stat_events = [], this.attachEvent("onClearAll", function() {
            if (!this.hdr.rows[1]) {
                for (var a = 0; a < this._stat_events.length; a++)
                    for (var b = 0; b < 4; b++) this.detachEvent(this._stat_events[a][b]);
                this._stat_events = []
            }
        })), this._stat_events.push([this.attachEvent("onGridReconstructed", e), this.attachEvent("onXLE", e), this.attachEvent("onFilterEnd", e), this.attachEvent("onEditCell", function(a, b, d) {
            return 2 == a && d == c && e.call(this), !0
        })]), a.innerHTML = ""
    }, dhtmlXGridObject.prototype._build_m_order = function() {
        if (this._c_order) {
            this._m_order = [];
            for (var a = 0; a < this._c_order.length; a++) this._m_order[this._c_order[a]] = a
        }
    }, dhtmlXWindows.prototype._dhx_Engine = function() {
        this._engineEnabled = !0, this._engineName = "dhx", this._engineSkinParams = {
            dhx_blue: {
                hh: 21,
                lbw: 2,
                rbw: 2,
                lch: 2,
                lcw: 14,
                rch: 14,
                rcw: 14,
                bbh: 2,
                mnh: 23,
                tbh: 25,
                sbh: 20,
                noh_t: null,
                noh_h: null
            },
            dhx_black: {
                hh: 21,
                lbw: 2,
                rbw: 2,
                lch: 2,
                lcw: 14,
                rch: 14,
                rcw: 14,
                bbh: 2,
                mnh: 23,
                tbh: 25,
                sbh: 20,
                noh_t: null,
                noh_h: null
            },
            dhx_skyblue: {
                hh: 29,
                lbw: 2,
                rbw: 2,
                lch: 2,
                lcw: 14,
                rch: 14,
                rcw: 14,
                bbh: 2,
                mnh: 23,
                tbh: 25,
                sbh: 20,
                noh_t: 5,
                noh_h: -10
            },
            dhx_web: {
                hh: 27,
                lbw: 5,
                rbw: 5,
                lch: 5,
                lcw: 14,
                rch: 14,
                rcw: 14,
                bbh: 5,
                mnh: 23,
                tbh: 25,
                sbh: 20,
                noh_t: 5,
                noh_h: -10
            },
            dhx_terrace: {
                hh: 37,
                lbw: 5,
                rbw: 5,
                lch: 5,
                lcw: 14,
                rch: 14,
                rcw: 14,
                bbh: 5,
                mnh: 23,
                tbh: 25,
                sbh: 20,
                noh_t: 5,
                noh_h: -10
            }
        }, this._isIE6 = !1, _isIE && (this._isIE6 = null == window.XMLHttpRequest), this._engineSetWindowBody = function(a) {
            a.innerHTML = "<div iswin='1' class='dhtmlx_wins_body_outer' style='position: relative;'>" + (this._isIE6 ? "<iframe src='javascript:false;' frameborder='0' class='dhtmlx_wins_ie6_cover_fix' onload='this.contentWindow.document.body.style.overflow=\"hidden\";'></iframe>" : "") + "<div class='dhtmlx_wins_icon'></div><div class='dhtmlx_wins_progress'></div><div class='dhtmlx_wins_title'>dhtmlxWindow</div><div class='dhtmlx_wins_btns'><div class='dhtmlx_wins_btns_button dhtmlx_button_sticked_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_stick_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_help_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_park_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_minmax2_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_minmax1_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_close_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_dock_default'></div></div><div class='dhtmlx_wins_body_inner'></div><div winResT='yes' class='dhtmlx_wins_resizer_t' style='display:none;'></div><div winResL='yes' class='dhtmlx_wins_resizer_l'></div><div winResR='yes' class='dhtmlx_wins_resizer_r'></div><div winResB='yes' class='dhtmlx_wins_resizer_b'></div><div class='white_line'></div><div class='white_line2'></div></div>", a.dhxContGlobal = new dhtmlXContainer(a), "dhx_skyblue" == this.skin && (a.dhxContGlobal.obj._offsetWidth = -10, a.dhxContGlobal.obj._offsetHeight = -5, a.dhxContGlobal.obj._offsetLeft = 5, a.dhxContGlobal.obj._offsetHeightSaved = a.dhxContGlobal.obj._offsetHeight), "dhx_web" == this.skin && (a.dhxContGlobal.obj._offsetWidth = -10, a.dhxContGlobal.obj._offsetHeight = -5, a.dhxContGlobal.obj._offsetLeft = 5, a.dhxContGlobal.obj._offsetHeightSaved = a.dhxContGlobal.obj._offsetHeight), a.skin = this.skin, a.dhxContGlobal.setContent(a.childNodes[0].childNodes[this._isIE6 ? 5 : 4]);
            var b = a.coverBlocker();
            b.onselectstart = function(a) {
                a = a || event, a.returnValue = !1, a.cancelBubble = !0
            }, b = null, this.iframeMode && (a.ifr = document.createElement("IFRAME"), a.ifr.style.position = "absolute", a.ifr.style.left = a.style.left, a.ifr.style.top = a.style.top, a.ifr.style.width = a.style.width, a.ifr.style.height = a.style.height, a.ifr.style.zIndex = a.style.zIndex - 1, a.ifr.style.backgroundColor = "white", a.ifr.frameBorder = 0, a.ifr.setAttribute("src", "javascript:false;"), a.parentNode.appendChild(a.ifr))
        }, this._engineDiableOnSelectInWindow = function(a, b) {
            var c = [];
            c[0] = a.childNodes[0].childNodes[this._isIE6 ? 1 : 0], c[1] = a.childNodes[0].childNodes[this._isIE6 ? 2 : 1], c[2] = a.childNodes[0].childNodes[this._isIE6 ? 3 : 2], c[3] = a.childNodes[0].childNodes[this._isIE6 ? 4 : 3], c[4] = a.childNodes[0].childNodes[this._isIE6 ? 6 : 5], c[5] = a.childNodes[0].childNodes[this._isIE6 ? 7 : 6], c[6] = a.childNodes[0].childNodes[this._isIE6 ? 8 : 7], c[7] = a.childNodes[0].childNodes[this._isIE6 ? 9 : 8];
            for (var d = 0; d < c.length; d++) c[d].onselectstart = b ? function(a) {
                return a = a || event, a.returnValue = !1
            } : null, c[d] = null;
            c = null
        }, this._engineGetWindowHeader = function(a) {
            return a.childNodes[0].idd = a.idd, a.childNodes[0]
        }, this._engineRedrawWindowSize = function(a) {
            a.style.width = String(a.w).search("%") == -1 ? a.w + "px" : a.w, a.style.height = String(a.h).search("%") == -1 ? a.h + "px" : a.h;
            var b = a.childNodes[0];
            if (b.style.width = a.clientWidth + "px", b.style.height = a.clientHeight + "px", b.offsetWidth > a.clientWidth && (b.style.width = 2 * a.clientWidth - b.offsetWidth + "px"), b.offsetHeight > a.clientHeight) {
                var c = 2 * a.clientHeight - b.offsetHeight;
                c < 0 && (c = 0), b.style.height = c + "px"
            }
            var d = 1 == a._noHeader ? a._hdrSize : this._engineSkinParams[this.skin].hh;
            this.iframeMode && a.ifr && (a.ifr.style.width = a.style.width, a.ifr.style.height = a.style.height), this._engineRedrawWindowTitle(a), a.adjustContent(b, d)
        }, this._engineRedrawWindowPos = function(a) {
            !a._isFullScreened && (a.style.left = a.x + "px", a.style.top = a.y + "px", this.iframeMode && a.ifr) && (a.ifr.style.top = a.style.top, a.ifr.style.left = a.style.left)
        }, this._engineFixWindowPosInViewport = function(a) {
            var b = 1 == a._noHeader ? a._hdrSize : this._engineSkinParams[this.skin].hh;
            a._keepInViewport ? (a.x < 0 && (a.x = 0), a.x + a.w > this.vp.offsetWidth && (a.x = this.vp.offsetWidth - a.w), a.y + a.h > this.vp.offsetHeight && (a.y = this.vp.offsetHeight - a.h), a.y < 0 && (a.y = 0)) : (a.y + b > this.vp.offsetHeight && (a.y = this.vp.offsetHeight - b), a.y < 0 && (a.y = 0), a.x + a.w - 10 < 0 && (a.x = 10 - a.w), a.x > this.vp.offsetWidth - 10 && (a.x = this.vp.offsetWidth - 10))
        }, this._engineCheckHeaderMouseDown = function(a, b) {
            if (this._isIPad) {
                var c = b.touches[0].clientX,
                    d = b.touches[0].clientY,
                    e = b.target || b.srcElement;
                return e == a.childNodes[0] || e == a.childNodes[0].childNodes[0] || e == a.childNodes[0].childNodes[2] || e == a.childNodes[0].childNodes[3]
            }
            c = _isIE || _isOpera ? b.offsetX : b.layerX, d = _isIE || _isOpera ? b.offsetY : b.layerY, e = b.target || b.srcElement;
            var f = 1 == a._noHeader ? a._hdrSize : this._engineSkinParams[this.skin].hh;
            return d <= f && (e == a.childNodes[0] || e == a.childNodes[0].childNodes[this._isIE6 ? 1 : 0] || e == a.childNodes[0].childNodes[this._isIE6 ? 3 : 2] || e == a.childNodes[0].childNodes[this._isIE6 ? 4 : 3])
        }, this._engineGetWindowContent = function() {
            alert("_engineGetWindowContent")
        }, this._engineGetWindowButton = function(a, b) {
            for (var b = String(b).toLowerCase(), c = null, d = "dhtmlx_button_" + b + "_", e = 0; e < a.childNodes[0].childNodes[this._isIE6 ? 4 : 3].childNodes.length; e++) {
                var f = a.childNodes[0].childNodes[this._isIE6 ? 4 : 3].childNodes[e];
                String(f.className).search(d) != -1 && (c = f), f = null
            }
            return c
        }, this._engineAddUserButton = function(a, b, c) {
            isNaN(c) && (c = 0);
            var d = document.createElement("DIV");
            d.className = "dhtmlx_wins_btns_button dhtmlx_button_" + b + "_default";
            var e = a.childNodes[0].childNodes[this._isIE6 ? 4 : 3],
                c = e.childNodes.length - c;
            return c < 0 && (c = 0), c >= e.childNodes.length ? e.appendChild(d) : e.insertBefore(d, e.childNodes[c]), this._engineRedrawWindowTitle(a), d
        }, this._engineGetWindowParkedHeight = function() {
            return this._engineSkinParams[this.skin].hh + 1
        }, this._engineDoOnWindowParkDown = function(a) {
            a.childNodes[0].childNodes[this._isIE6 ? 6 : 5].style.display = 1 == a._noHeader ? "" : "none", a.childNodes[0].childNodes[this._isIE6 ? 7 : 6].style.display = "", a.childNodes[0].childNodes[this._isIE6 ? 8 : 7].style.display = "", a.childNodes[0].childNodes[this._isIE6 ? 9 : 8].style.display = ""
        }, this._engineDoOnWindowParkUp = function(a) {
            a.childNodes[0].childNodes[this._isIE6 ? 6 : 5].style.display = "none", a.childNodes[0].childNodes[this._isIE6 ? 7 : 6].style.display = "none", a.childNodes[0].childNodes[this._isIE6 ? 8 : 7].style.display = "none", a.childNodes[0].childNodes[this._isIE6 ? 9 : 8].style.display = "none"
        }, this._engineUpdateWindowIcon = function(a, b) {
            a.childNodes[0].childNodes[this._isIE6 ? 1 : 0].style.backgroundImage = "url('" + b + "')"
        }, this._engineAllowWindowResize = function(a, b, c, d) {
            if (b.getAttribute) {
                var e = this._engineSkinParams[this.skin],
                    f = 1 == a._noHeader ? a._hdrSize : this._engineSkinParams[this.skin].hh;
                return null != b.getAttribute("winResL") && "yes" == b.getAttribute("winResL") && d >= f ? d >= a.h - e.lch ? "corner_left" : d <= e.lch && 1 == a._noHeader ? "corner_up_left" : "border_left" : null != b.getAttribute("winResR") && "yes" == b.getAttribute("winResR") && d >= f ? d >= a.h - e.rch ? "corner_right" : d <= e.rch && 1 == a._noHeader ? "corner_up_right" : "border_right" : null != b.getAttribute("winResT") && "yes" == b.getAttribute("winResT") && 1 == a._noHeader ? c <= e.lcw ? "corner_up_left" : c >= a.w - e.rcw ? "corner_up_right" : "border_top" : null != b.getAttribute("winResB") && "yes" == b.getAttribute("winResB") ? c <= e.lcw ? "corner_left" : c >= a.w - e.rcw ? "corner_right" : "border_bottom" : null
            }
        }, this._engineAdjustWindowToContent = function(a, b, c) {
            var d = b + a.w - a.vs[a.av].dhxcont.clientWidth,
                e = c + a.h - a.vs[a.av].dhxcont.clientHeight;
            a.setDimension(d, e)
        }, this._engineRedrawSkin = function() {
            this.vp.className = (this.vp == document.body && this.vp._css ? this.vp._css + " " : "") + "dhtmlx_winviewport dhtmlx_skin_" + this.skin + (this._r ? " dhx_wins_rtl" : "");
            var a, b = this._engineSkinParams[this.skin];
            for (a in this.wins) "dhx_skyblue" == this.skin ? (this.wins[a].dhxContGlobal.obj._offsetTop = this.wins[a]._noHeader ? b.noh_t : null, this.wins[a].dhxContGlobal.obj._offsetWidth = -10, this.wins[a].dhxContGlobal.obj._offsetHeight = this.wins[a]._noHeader ? b.noh_h : -5, this.wins[a].dhxContGlobal.obj._offsetLeft = 5, this.wins[a].dhxContGlobal.obj._offsetHeightSaved = -5) : (this.wins[a].dhxContGlobal.obj._offsetWidth = null, this.wins[a].dhxContGlobal.obj._offsetHeight = null, this.wins[a].dhxContGlobal.obj._offsetLeft = null, this.wins[a].dhxContGlobal.obj._offsetTop = null, this.wins[a].dhxContGlobal.obj._offsetHeightSaved = null), this.wins[a].skin = this.skin, this._restoreWindowIcons(this.wins[a]), this._engineRedrawWindowSize(this.wins[a])
        }, this._engineSwitchWindowProgress = function(a, b) {
            1 == b ? (a.childNodes[0].childNodes[this._isIE6 ? 1 : 0].style.display = "none", a.childNodes[0].childNodes[this._isIE6 ? 2 : 1].style.display = "") : (a.childNodes[0].childNodes[this._isIE6 ? 2 : 1].style.display = "none", a.childNodes[0].childNodes[this._isIE6 ? 1 : 0].style.display = "")
        }, this._engineSwitchWindowHeader = function(a, b) {
            if (a._noHeader || (a._noHeader = !1), b == a._noHeader) {
                a._noHeader = 1 != b, a._hdrSize = 0, a.childNodes[0].childNodes[this._isIE6 ? 5 : 4].className = "dhtmlx_wins_body_inner" + (a._noHeader ? " dhtmlx_wins_no_header" : ""), a.childNodes[0].childNodes[this._isIE6 ? 6 : 5].style.display = a._noHeader ? "" : "none", a.childNodes[0].childNodes[this._isIE6 ? 1 : 0].style.display = a._noHeader ? "none" : "", a.childNodes[0].childNodes[this._isIE6 ? 3 : 2].style.display = a._noHeader ? "none" : "", a.childNodes[0].childNodes[this._isIE6 ? 4 : 3].style.display = a._noHeader ? "none" : "";
                var c = this._engineSkinParams[this.skin];
                a._noHeader ? (a.dhxContGlobal.obj._offsetHeightSaved = a.dhxContGlobal.obj._offsetHeight, a.dhxContGlobal.obj._offsetHeight = c.noh_h, a.dhxContGlobal.obj._offsetTop = c.noh_t) : (a.dhxContGlobal.obj._offsetHeight = a.dhxContGlobal.obj._offsetHeightSaved, a.dhxContGlobal.obj._offsetTop = null), this._engineRedrawWindowSize(a)
            }
        }, this._engineGetWindowHeaderState = function(a) {
            return !!a._noHeader
        }, this._engineGetWindowLabel = function(a) {
            return a.childNodes[0].childNodes[this._isIE6 ? 3 : 2]
        }, this._engineRedrawWindowTitle = function(a) {
            if (a._noHeader !== !0) {
                var b = a.childNodes[0].childNodes[this._isIE6 ? 1 : 0].offsetWidth,
                    c = a.childNodes[0].childNodes[this._isIE6 ? 4 : 3].offsetWidth,
                    d = a.offsetWidth - b - c - 24;
                d < 0 ? d = "100%" : d += "px", a.childNodes[0].childNodes[this._isIE6 ? 3 : 2].style.width = d
            }
        }
    }, dhtmlXWindows.prototype.i18n = {
        dhxcontaler: "dhtmlxcontainer.js is missed on the page",
        noenginealert: "No dhtmlxWindows engine was found.",
        stick: "Stick",
        unstick: "Unstick",
        help: "Help",
        parkdown: "Park Down",
        parkup: "Park Up",
        maximize: "Maximize",
        restore: "Restore",
        close: "Close",
        dock: "Dock"
    },
    function() {
        dhtmlx.extend_api("dhtmlXWindows", {
            _init: function() {
                return []
            },
            _patch: function(b) {
                b.old_createWindow = b.createWindow, b.createWindow = function(b) {
                    if (arguments.length > 1) return this.old_createWindow.apply(this, arguments);
                    var c = this.old_createWindow(b.id, b.x || b.left, b.y || b.top, b.width, b.height);
                    c.allowMoveA = function(a) {
                        a ? this.allowMove() : this.denyMove()
                    }, c.allowParkA = function(a) {
                        a ? this.allowPark() : this.denyPark()
                    }, c.allowResizeA = function(a) {
                        a ? this.allowResize() : this.denyResize()
                    };
                    for (var d in b) a[d] ? c[a[d]](b[d]) : 0 == d.indexOf("on") && c.attachEvent(d, b[d]);
                    return c
                }
            },
            animation: "setEffect",
            image_path: "setImagePath",
            skin: "setSkin",
            viewport: "_viewport",
            wins: "_wins"
        }, {
            _viewport: function(a) {
                a.object ? (this.enableAutoViewport(!1), this.attachViewportTo(a.object)) : (this.enableAutoViewport(!1), this.setViewport(a.left, a.top, a.width, a.height, a.parent))
            },
            _wins: function(a) {
                for (var b = 0; b < a.length; b++) {
                    var c = a[b];
                    this.createWindow(c.id, c.left, c.top, c.width, c.height), c.text && this.window(c.id).setText(c.text), c.keep_in_viewport && this.window(c.id).keepInViewport(!0), c.deny_resize && this.window(c.id).denyResize(), c.deny_park && this.window(c.id).denyPark(), c.deny_move && this.window(c.id).denyMove()
                }
            }
        });
        var a = {
            move: "allowMoveA",
            park: "allowParkA",
            resize: "allowResizeA",
            center: "center",
            modal: "setModal",
            caption: "setText",
            header: "showHeader"
        }
    }(), window.dhtmlx || (dhtmlx = {}), dhtmlx.version = "3.0", dhtmlx.codebase = "./", dhtmlx.copy = function(a) {
        var b = dhtmlx.copy.hb;
        return b.prototype = a, new b
    }, dhtmlx.copy.hb = function() {}, dhtmlx.extend = function(a, b) {
        for (var c in b) a[c] = b[c];
        return b.p && a.p(), a
    }, dhtmlx.proto_extend = function() {
        for (var a = arguments, b = a[0], c = [], d = a.length - 1; d > 0; d--) {
            "function" == typeof a[d] && (a[d] = a[d].prototype);
            for (var e in a[d]) "_init" == e ? c.push(a[d][e]) : b[e] || (b[e] = a[d][e])
        }
        a[0].p && c.push(a[0].p), b.p = function() {
            for (var a = 0; a < c.length; a++) c[a].apply(this, arguments)
        }, b.base = a[1];
        var f = function(a) {
            this.p(a), this.J && this.J(a, this.defaults)
        };
        return f.prototype = b, b = a = null, f
    }, dhtmlx.bind = function(a, b) {
        return function() {
            return a.apply(b, arguments)
        }
    }, dhtmlx.require = function(a) {
        dhtmlx.A[a] || (dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase + a).responseText), dhtmlx.A[a] = !0)
    }, dhtmlx.A = {}, dhtmlx.exec = function(a) {
        window.execScript ? window.execScript(a) : window.eval(a)
    }, dhtmlx.methodPush = function(a, b) {
        return function() {
            var c = !1;
            return c = a[b].apply(a, arguments)
        }
    }, dhtmlx.isNotDefined = function(a) {
        return "undefined" == typeof a
    }, dhtmlx.delay = function(a, b, c, d) {
        setTimeout(function() {
            var d = a.apply(b, c);
            return a = b = c = null, d
        }, d || 1)
    }, dhtmlx.uid = function() {
        return this.W || (this.W = (new Date).valueOf()), this.W++, this.W
    }, dhtmlx.toNode = function(a) {
        return "string" == typeof a ? document.getElementById(a) : a
    }, dhtmlx.toArray = function(a) {
        return dhtmlx.extend(a || [], dhtmlx.PowerArray)
    }, dhtmlx.toFunctor = function(a) {
        return "string" == typeof a ? eval(a) : a
    }, dhtmlx.q = {}, dhtmlx.event = function(a, b, c, d) {
        var a = dhtmlx.toNode(a),
            e = dhtmlx.uid();
        return dhtmlx.q[e] = [a, b, c], d && (c = dhtmlx.bind(c, d)), a.addEventListener ? a.addEventListener(b, c, !1) : a.attachEvent && a.attachEvent("on" + b, c), e
    }, dhtmlx.eventRemove = function(a) {
        if (a) {
            var b = dhtmlx.q[a];
            b[0].removeEventListener ? b[0].removeEventListener(b[1], b[2], !1) : b[0].detachEvent && b[0].detachEvent("on" + b[1], b[2]), delete this.q[a]
        }
    }, dhtmlx.EventSystem = {
        p: function() {
            this.q = {}, this.ba = {}, this.U = {}
        },
        block: function() {
            this.q.ka = !0
        },
        unblock: function() {
            this.q.ka = !1
        },
        mapEvent: function(a) {
            dhtmlx.extend(this.U, a)
        },
        callEvent: function(a, b) {
            if (this.q.ka) return !0;
            var a = a.toLowerCase(),
                c = this.q[a.toLowerCase()],
                d = !0;
            if (c)
                for (var e = 0; e < c.length; e++) c[e].apply(this, b || []) === !1 && (d = !1);
            return this.U[a] && !this.U[a].callEvent(a, b) && (d = !1), d
        },
        attachEvent: function(a, b, c) {
            var a = a.toLowerCase(),
                c = c || dhtmlx.uid(),
                b = dhtmlx.toFunctor(b),
                d = this.q[a] || dhtmlx.toArray();
            return d.push(b), this.q[a] = d, this.ba[c] = {
                f: b,
                t: a
            }, c
        },
        detachEvent: function(a) {
            if (this.ba[a]) {
                var b = this.ba[a].t,
                    c = this.ba[a].f,
                    d = this.q[b];
                d.remove(c), delete this.ba[a]
            }
        }
    }, dhtmlx.PowerArray = {
        removeAt: function(a, b) {
            a >= 0 && this.splice(a, b || 1)
        },
        remove: function(a) {
            this.removeAt(this.find(a))
        },
        insertAt: function(a, b) {
            if (b || 0 === b) {
                var c = this.splice(b, this.length - b);
                this[b] = a, this.push.apply(this, c)
            } else this.push(a)
        },
        find: function(a) {
            for (i = 0; i < this.length; i++)
                if (a == this[i]) return i;
            return -1
        },
        each: function(a, b) {
            for (var c = 0; c < this.length; c++) a.call(b || this, this[c])
        },
        map: function(a, b) {
            for (var c = 0; c < this.length; c++) this[c] = a.call(b || this, this[c]);
            return this
        }
    }, dhtmlx.env = {}, navigator.userAgent.indexOf("Opera") != -1 ? dhtmlx.Bd = !0 : (dhtmlx.z = !!document.all, dhtmlx.hc = !document.all, dhtmlx.Cd = navigator.userAgent.indexOf("KHTML") != -1, navigator.appVersion.indexOf("MSIE 8.0") != -1 && "BackCompat" != document.compatMode && (dhtmlx.z = 8), navigator.appVersion.indexOf("MSIE 9.0") != -1 && "BackCompat" != document.compatMode && (dhtmlx.z = 9)), dhtmlx.env = {},
    function() {
        dhtmlx.env.transform = !1, dhtmlx.env.transition = !1;
        for (var a = {
                names: ["transform", "transition"],
                transform: ["transform", "WebkitTransform", "MozTransform", "oTransform", "msTransform"],
                transition: ["transition", "WebkitTransition", "MozTransition", "oTransition"]
            }, b = document.createElement("DIV"), c = 0; c < a.names.length; c++)
            for (; p = a[a.names[c]].pop();) "undefined" != typeof b.style[p] && (dhtmlx.env[a.names[c]] = !0)
    }(), dhtmlx.env.transform_prefix = function() {
        var a;
        return dhtmlx.Bd ? a = "-o-" : (a = "", dhtmlx.hc && (a = "-moz-"), dhtmlx.Cd && (a = "-webkit-")), a
    }(), dhtmlx.env.svg = function() {
        return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1")
    }(), dhtmlx.zIndex = {
        drag: 1e4
    }, dhtmlx.html = {
        create: function(a, b, c) {
            var d, b = b || {},
                e = document.createElement(a);
            for (d in b) e.setAttribute(d, b[d]);
            return b.style && (e.style.cssText = b.style), b.class && (e.className = b.class), c && (e.innerHTML = c), e
        },
        getValue: function(a) {
            return a = dhtmlx.toNode(a), a ? dhtmlx.isNotDefined(a.value) ? a.innerHTML : a.value : ""
        },
        remove: function(a) {
            if (a instanceof Array)
                for (var b = 0; b < a.length; b++) this.remove(a[b]);
            else a && a.parentNode && a.parentNode.removeChild(a)
        },
        insertBefore: function(a, b, c) {
            a && (b ? b.parentNode.insertBefore(a, b) : c.appendChild(a))
        },
        locate: function(a, b) {
            for (var a = a || event, c = a.target || a.srcElement; c;) {
                if (c.getAttribute) {
                    var d = c.getAttribute(b);
                    if (d) return d
                }
                c = c.parentNode
            }
            return null
        },
        offset: function(a) {
            if (a.getBoundingClientRect) {
                var b = a.getBoundingClientRect(),
                    c = document.body,
                    d = document.documentElement,
                    e = window.pageYOffset || d.scrollTop || c.scrollTop,
                    f = window.pageXOffset || d.scrollLeft || c.scrollLeft,
                    g = d.clientTop || c.clientTop || 0,
                    h = d.clientLeft || c.clientLeft || 0,
                    i = b.top + e - g,
                    j = b.left + f - h;
                return {
                    y: Math.round(i),
                    x: Math.round(j)
                }
            }
            for (j = i = 0; a;) i += parseInt(a.offsetTop, 10), j += parseInt(a.offsetLeft, 10), a = a.offsetParent;
            return {
                y: i,
                x: j
            }
        },
        pos: function(a) {
            if (a = a || event, a.pageX || a.pageY) return {
                x: a.pageX,
                y: a.pageY
            };
            var b = dhtmlx.z && "BackCompat" != document.compatMode ? document.documentElement : document.body;
            return {
                x: a.clientX + b.scrollLeft - b.clientLeft,
                y: a.clientY + b.scrollTop - b.clientTop
            }
        },
        preventEvent: function(a) {
            a && a.preventDefault && a.preventDefault(), dhtmlx.html.stopEvent(a)
        },
        stopEvent: function(a) {
            return (a || event).cancelBubble = !0, !1
        },
        addCss: function(a, b) {
            a.className += " " + b
        },
        removeCss: function(a, b) {
            a.className = a.className.replace(RegExp(b, "g"), "")
        }
    },
    function() {
        var a = document.getElementsByTagName("SCRIPT");
        a.length && (a = (a[a.length - 1].getAttribute("src") || "").split("/"), a.splice(a.length - 1, 1), dhtmlx.codebase = a.slice(0, a.length).join("/") + "/")
    }(), dhtmlx.ui || (dhtmlx.ui = {}), dhtmlx.Template = {
        Va: {},
        empty: function() {
            return ""
        },
        setter: function(a) {
            return dhtmlx.Template.fromHTML(a)
        },
        obj_setter: function(a) {
            var b = dhtmlx.Template.setter(a),
                c = this;
            return function() {
                return b.apply(c, arguments)
            }
        },
        fromHTML: function(a) {
            return "function" == typeof a ? a : this.Va[a] ? this.Va[a] : (a = (a || "").toString(), a = a.replace(/[\r\n]+/g, "\\n"), a = a.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g, '"+(obj.$1?"$2":"$3")+"'), a = a.replace(/\{common\.([^}\(]*)\}/g, '"+common.$1+"'), a = a.replace(/\{common\.([^\}\(]*)\(\)\}/g, '"+(common.$1?common.$1(obj):"")+"'), a = a.replace(/\{obj\.([^}]*)\}/g, '"+obj.$1+"'), a = a.replace(/#([a-z0-9_]+)#/gi, '"+obj.$1+"'), a = a.replace(/\{obj\}/g, '"+obj+"'), a = a.replace(/\{-obj/g, "{obj"), a = a.replace(/\{-common/g, "{common"), a = 'return "' + a + '";', this.Va[a] = Function("obj", "common", a))
        }
    }, dhtmlx.Type = {
        add: function(a, b) {
            !a.types && a.prototype.types && (a = a.prototype);
            var c = b.name || "default";
            return this.Cb(b), this.Cb(b, "edit"), this.Cb(b, "loading"), a.types[c] = dhtmlx.extend(dhtmlx.extend({}, a.types[c] || this.Qc), b), c
        },
        Qc: {
            css: "default",
            template: function() {
                return ""
            },
            template_edit: function() {
                return ""
            },
            template_loading: function() {
                return "..."
            },
            width: 150,
            height: 80,
            margin: 5,
            padding: 0
        },
        Cb: function(a, b) {
            var b = "template" + (b ? "_" + b : ""),
                c = a[b];
            if (c && "string" == typeof c) {
                if (c.indexOf("->") != -1) switch (c = c.split("->"), c[0]) {
                    case "html":
                        c = dhtmlx.html.getValue(c[1]).replace(/\"/g, '\\"');
                        break;
                    case "http":
                        c = (new dhtmlx.ajax).sync().get(c[1], {
                            uid: (new Date).valueOf()
                        }).responseText
                }
                a[b] = dhtmlx.Template.fromHTML(c)
            }
        }
    }, dhtmlx.Settings = {
        p: function() {
            this.e = this.config = {}
        },
        define: function(a, b) {
            return "object" == typeof a ? this.ea(a) : this.na(a, b)
        },
        na: function(a, b) {
            var c = this[a + "_setter"];
            return this.e[a] = c ? c.call(this, b) : b
        },
        ea: function(a) {
            if (a)
                for (var b in a) this.na(b, a[b])
        },
        J: function(a, b) {
            var c = dhtmlx.extend({}, b);
            "object" == typeof a && !a.tagName && dhtmlx.extend(c, a), this.ea(c)
        },
        N: function(a, b) {
            for (var c in b) switch (typeof a[c]) {
                case "object":
                    a[c] = this.N(a[c] || {}, b[c]);
                    break;
                case "undefined":
                    a[c] = b[c]
            }
            return a
        },
        sb: function(a, b, c) {
            "object" != typeof a || a.tagName || (a = a.container), this.g = this.$view = dhtmlx.toNode(a), !this.g && c && (this.g = c(a)), this.g.className += " " + b, this.g.onselectstart = function() {
                return !1
            }, this.j = this.g
        },
        Yd: function(a) {
            return "object" == typeof a ? this.type_setter(a) : (this.type = dhtmlx.extend({}, this.types[a]), void this.customize())
        },
        customize: function(a) {
            a && dhtmlx.extend(this.type, a), this.type.kc = dhtmlx.Template.fromHTML(this.template_item_start(this.type)), this.type.jc = this.template_item_end(this.type), this.render()
        },
        type_setter: function(a) {
            return this.Yd("object" == typeof a ? dhtmlx.Type.add(this, a) : a), a
        },
        template_setter: function(a) {
            return this.type_setter({
                template: a
            })
        },
        css_setter: function(a) {
            return this.g.className += " " + a,
                a
        }
    }, dhtmlx.Destruction = {
        p: function() {
            dhtmlx.destructors.push(this)
        },
        destructor: function() {
            this.destructor = function() {}, this.P = this.n = null, this.B && document.body.appendChild(this.B), this.B = null, this.g && (this.g.innerHTML = "", this.g.n = null), this.data = this.g = this.j = null, this.q = this.ba = {}
        }
    }, dhtmlx.destructors = [], dhtmlx.event(window, "unload", function() {
        if (dhtmlx.destructors) {
            for (var a = 0; a < dhtmlx.destructors.length; a++) dhtmlx.destructors[a].destructor();
            dhtmlx.destructors = []
        }
        for (var b in dhtmlx.q) {
            var c = dhtmlx.q[b];
            c[0].removeEventListener ? c[0].removeEventListener(c[1], c[2], !1) : c[0].detachEvent && c[0].detachEvent("on" + c[1], c[2]), delete dhtmlx.q[b]
        }
    }), dhtmlx.ui.pager = function(a) {
        this.name = "Pager", dhtmlx.extend(this, dhtmlx.Settings), this.sb(a, "dhx_pager"), dhtmlx.extend(this, dhtmlx.EventSystem), dhtmlx.extend(this, dhtmlx.SingleRender), dhtmlx.extend(this, dhtmlx.MouseEvents), this.J(a, {
            size: 10,
            page: -1,
            group: 5,
            count: 0,
            type: "default"
        }), this.data = this.e, this.refresh()
    }, dhtmlx.ui.pager.prototype = {
        w: "dhx_p_id",
        on_click: {
            dhx_pager_item: function(a, b) {
                this.select(b)
            }
        },
        select: function(a) {
            switch (a) {
                case "next":
                    a = this.e.page + 1;
                    break;
                case "prev":
                    a = this.e.page - 1;
                    break;
                case "first":
                    a = 0;
                    break;
                case "last":
                    a = this.e.limit - 1
            }
            a < 0 && (a = 0), a >= this.data.limit && (a = this.data.limit - 1), this.callEvent("onBeforePageChange", [this.e.page, a]) && (this.data.page = 1 * a, this.refresh(), this.callEvent("onAfterPageChange", [a]))
        },
        types: {
            default: {
                template: dhtmlx.Template.fromHTML("{common.pages()}"),
                pages: function(a) {
                    var b = "";
                    if (a.page == -1) return "";
                    a.min = a.page - Math.round((a.group - 1) / 2), a.max = a.min + a.group - 1, a.min < 0 && (a.max += a.min * -1, a.min = 0), a.max >= a.limit && (a.min -= Math.min(a.min, a.max - a.limit + 1), a.max = a.limit - 1);
                    for (var c = a.min || 0; c <= a.max; c++) b += this.button({
                        id: c,
                        index: c + 1,
                        selected: c == a.page ? "_selected" : ""
                    });
                    return b
                },
                page: function(a) {
                    return a.page + 1
                },
                first: function() {
                    return this.button({
                        id: "first",
                        index: " &lt;&lt; ",
                        selected: ""
                    })
                },
                last: function() {
                    return this.button({
                        id: "last",
                        index: " &gt;&gt; ",
                        selected: ""
                    })
                },
                prev: function() {
                    return this.button({
                        id: "prev",
                        index: "&lt;",
                        selected: ""
                    })
                },
                next: function() {
                    return this.button({
                        id: "next",
                        index: "&gt;",
                        selected: ""
                    })
                },
                button: dhtmlx.Template.fromHTML("<div dhx_p_id='{obj.id}' class='dhx_pager_item{obj.selected}'>{obj.index}</div>")
            }
        },
        refresh: function() {
            var a = this.e;
            a.limit = Math.ceil(a.count / a.size), a.limit && a.limit != a.old_limit && (a.page = Math.min(a.limit - 1, a.page));
            var b = a.page;
            (b != -1 && b != a.old_page || a.limit != a.old_limit) && (this.render(), this.callEvent("onRefresh", []), a.old_limit = a.limit, a.old_page = a.page)
        },
        template_item_start: dhtmlx.Template.fromHTML("<div>"),
        template_item_end: dhtmlx.Template.fromHTML("</div>")
    }, dhtmlx.SingleRender = {
        p: function() {},
        fa: function(a) {
            return this.type.kc(a, this.type) + this.type.template(a, this.type) + this.type.jc
        },
        render: function() {
            this.callEvent && !this.callEvent("onBeforeRender", [this.data]) || (this.data && (this.j.innerHTML = this.fa(this.data)), this.callEvent && this.callEvent("onAfterRender", []))
        }
    }, dhtmlx.ui.Tooltip = function(a) {
        this.name = "Tooltip", this.version = "3.0", "string" == typeof a && (a = {
            template: a
        }), dhtmlx.extend(this, dhtmlx.Settings), dhtmlx.extend(this, dhtmlx.SingleRender), this.J(a, {
            type: "default",
            dy: 0,
            dx: 20
        }), this.j = this.g = document.createElement("DIV"), this.g.className = "dhx_tooltip", dhtmlx.html.insertBefore(this.g, document.body.firstChild)
    }, dhtmlx.ui.Tooltip.prototype = {
        show: function(a, b) {
            this.Ob || (this.data != a && (this.data = a, this.render(a)), this.g.style.top = b.y + this.e.dy + "px", this.g.style.left = b.x + this.e.dx + "px", this.g.style.display = "block")
        },
        hide: function() {
            this.data = null, this.g.style.display = "none"
        },
        disable: function() {
            this.Ob = !0
        },
        enable: function() {
            this.Ob = !1
        },
        types: {
            default: dhtmlx.Template.fromHTML("{obj.id}")
        },
        template_item_start: dhtmlx.Template.empty,
        template_item_end: dhtmlx.Template.empty
    }, dhtmlx.AutoTooltip = {
        tooltip_setter: function(a) {
            var b = new dhtmlx.ui.Tooltip(a);
            return this.attachEvent("onMouseMove", function(a, c) {
                b.show(this.get(a), dhtmlx.html.pos(c))
            }), this.attachEvent("onMouseOut", function() {
                b.hide()
            }), this.attachEvent("onMouseMoving", function() {
                b.hide()
            }), b
        }
    }, dhtmlx.compat = function(a, b) {
        dhtmlx.compat[a] && dhtmlx.compat[a](b)
    },
    function() {
        if (!window.dhtmlxError) {
            var a = function() {};
            window.dhtmlxError = {
                catchError: a,
                throwError: a
            }, window.convertStringToBoolean = function(a) {
                return !!a
            }, window.dhtmlxEventable = function(a) {
                dhtmlx.extend(a, dhtmlx.EventSystem)
            };
            var b = {
                getXMLTopNode: function() {},
                doXPath: function(a) {
                    return dhtmlx.DataDriver.xml.xpath(this.xml, a)
                },
                xmlDoc: {
                    responseXML: !0
                }
            };
            dhtmlx.compat.dataProcessor = function(a) {
                var c = "_sendData",
                    d = "_in_progress",
                    e = "_tMode",
                    f = "_waitMode";
                a[c] = function(a, c) {
                    if (a) {
                        if (c && (this[d][c] = (new Date).valueOf()), !this.callEvent("onBeforeDataSending", c ? [c, this.getState(c)] : [])) return !1;
                        var g = this,
                            h = this.serverProcessor;
                        "POST" != this[e] ? dhtmlx.ajax().get(h + (h.indexOf("?") != -1 ? "&" : "?") + this.serialize(a, c), "", function(a, c) {
                            b.xml = dhtmlx.DataDriver.xml.checkResponse(a, c), g.afterUpdate(g, null, null, null, b)
                        }) : dhtmlx.ajax().post(h, this.serialize(a, c), function(a, c) {
                            b.xml = dhtmlx.DataDriver.xml.checkResponse(a, c), g.afterUpdate(g, null, null, null, b)
                        }), this[f]++
                    }
                }
            }
        }
    }(), dhtmlx.DataProcessor = {
        Sc: function(a) {
            var b = "_methods";
            a[b] = ["setItemStyle", "", "changeId", "remove"], this.attachEvent("onAfterAdd", function(b) {
                a.setUpdated(b, !0, "inserted")
            }), this.data.attachEvent("onStoreLoad", dhtmlx.bind(function(a, b) {
                a.getUserData && a.getUserData(b, this.ha)
            }, this)), this.attachEvent("onBeforeDelete", function(b) {
                if (a.me) return !0;
                var c = a.getState(b);
                return "inserted" == c ? (a.setUpdated(b, !1), !0) : "deleted" != c && ("true_deleted" == c || (a.setUpdated(b, !0, "deleted"), !1))
            }), this.attachEvent("onAfterEditStop", function(b) {
                a.setUpdated(b, !0, "updated")
            }), this.attachEvent("onBindUpdate", function(b) {
                window.setTimeout(function() {
                    a.setUpdated(b.id, !0, "updated")
                }, 1)
            }), b = "_getRowData", a[b] = function(a) {
                var b, c = this.obj.data.get(a),
                    d = {};
                for (b in c) 0 !== b.indexOf("_") && (d[b] = c[b]);
                return d
            }, b = "_clearUpdateFlag", a[b] = function() {}, this.ha = {}, a.attachEvent("insertCallback", this.Qb), a.attachEvent("updateCallback", this.Qb), a.attachEvent("deleteCallback", function(a, b) {
                this.obj.setUserData(b, this.action_param, "true_deleted"), this.obj.remove(b)
            }), dhtmlx.compat("dataProcessor", a)
        },
        Qb: function(a, b) {
            this.obj.data.set(b, dhtmlx.DataDriver.xml.getDetails(a.firstChild)), this.obj.data.refresh(b)
        },
        setItemStyle: function(a, b) {
            var c = this.C(a);
            c && (c.style.cssText += ";" + b)
        },
        changeId: function(a, b) {
            this.data.changeId(a, b), this.refresh()
        },
        setUserData: function(a, b, c) {
            a ? this.data.get(a)[b] = c : this.ha[b] = c
        },
        getUserData: function(a, b) {
            return a ? this.data.get(a)[b] : this.ha[b]
        }
    },
    function() {
        var a = "_dp_init";
        dhtmlx.DataProcessor[a] = dhtmlx.DataProcessor.Sc
    }(), dhtmlx.compat.dnd = function() {
        if (window.dhtmlDragAndDropObject) {
            var a = "_dragged",
                b = dhtmlDragAndDropObject.prototype.checkLanding;
            dhtmlDragAndDropObject.prototype.checkLanding = function(a, c, d) {
                if (b.apply(this, arguments), !d) {
                    var e = dhtmlx.DragControl.F = dhtmlx.DragControl.F || {};
                    e.from || (e.from = this.dragStartObject), dhtmlx.DragControl.Ba(a, c, !0)
                }
            };
            var c = dhtmlDragAndDropObject.prototype.stopDrag;
            dhtmlDragAndDropObject.prototype.stopDrag = function(a, b, e) {
                !e && dhtmlx.DragControl.s && (dhtmlx.DragControl.D = d.dragStartNode, dhtmlx.DragControl.Qa(a, !0)), c.apply(this, arguments)
            };
            var d = new dhtmlDragAndDropObject,
                e = dhtmlx.DragControl.Ab;
            dhtmlx.DragControl.Ab = function() {
                e.apply(this, arguments);
                var b = dhtmlx.DragControl.F;
                if (b) {
                    for (var c = [], f = [], g = 0; g < b.source.length; g++) c[g] = {
                        idd: b.source[g]
                    }, f.push(b.source[g]);
                    d.dragStartNode = {
                        parentNode: {},
                        parentObject: {
                            idd: c,
                            id: 1 == f.length ? f[0] : f,
                            treeNod: {
                                object: b.from
                            }
                        }
                    }, d.dragStartNode.parentObject.treeNod[a] = c, d.dragStartObject = b.from
                }
            };
            var f = dhtmlx.DragControl.Ba;
            dhtmlx.DragControl.Ba = function(a, b, c) {
                f.apply(this, arguments), !this.s && !c && (a = d.checkLanding(a, b, !0))
            };
            var g = dhtmlx.DragControl.Qa;
            dhtmlx.DragControl.Qa = function(a, b) {
                g.apply(this, arguments), d.lastLanding && !b && d.stopDrag(a, !1, !0)
            };
            var h = dhtmlx.DragControl.getMaster;
            dhtmlx.DragControl.getMaster = function(b) {
                var c = null;
                if (b && (c = h.apply(this, arguments)), !c) {
                    for (var c = d.dragStartObject, e = [], f = c[a], g = 0; g < f.length; g++) e.push(f[g].idd || f[g].id);
                    dhtmlx.DragControl.F.source = e
                }
                return c
            }
        }
    }, dhtmlx.DataMove = {
        p: function() {},
        copy: function(a, b, c, d) {
            var e = this.get(a);
            if (e) return c && (e = c.externalData(e)), c = c || this, c.add(c.externalData(e, d), b)
        },
        move: function(a, b, c, d) {
            if (a instanceof Array)
                for (var e = 0; e < a.length; e++) {
                    var f = (c || this).indexById(this.move(a[e], b, c, dhtmlx.uid()));
                    a[e + 1] && (b = f + (this.indexById(a[e + 1]) < f ? 0 : 1))
                } else if (nid = a, !(b < 0)) {
                    var g = this.get(a);
                    if (g) return c && c != this ? (nid = c.add(c.externalData(g, d), b), this.remove(a)) : this.data.move(this.indexById(a), b), nid
                }
        },
        moveUp: function(a, b) {
            return this.move(a, this.indexById(a) - (b || 1))
        },
        moveDown: function(a, b) {
            return this.moveUp(a, (b || 1) * -1)
        },
        moveTop: function(a) {
            return this.move(a, 0)
        },
        moveBottom: function(a) {
            return this.move(a, this.data.dataCount() - 1)
        },
        externalData: function(a, b) {
            var c = dhtmlx.extend({}, a);
            return c.id = b || dhtmlx.uid(), c.$selected = c.$template = null, c
        }
    }, dhtmlx.DragControl = {
        G: dhtmlx.toArray(["dummy"]),
        addDrop: function(a, b, c) {
            a = dhtmlx.toNode(a), a.dhx_drop = this.ac(b), c && (a.dhx_master = !0)
        },
        ac: function(a) {
            var a = a || dhtmlx.DragControl,
                b = this.G.find(a);
            return b < 0 && (b = this.G.length, this.G.push(a)), b
        },
        addDrag: function(a, b) {
            a = dhtmlx.toNode(a), a.dhx_drag = this.ac(b), dhtmlx.event(a, "mousedown", this.Od, a)
        },
        Od: function(a) {
            return dhtmlx.DragControl.D && (dhtmlx.DragControl.Ja(), dhtmlx.DragControl.destroyDrag()), dhtmlx.DragControl.D = this, dhtmlx.DragControl.yc = {
                x: a.pageX,
                y: a.pageY
            }, dhtmlx.DragControl.oa = dhtmlx.event(document.body, "mousemove", dhtmlx.DragControl.Ab), dhtmlx.DragControl.pa = dhtmlx.event(document.body, "mouseup", dhtmlx.DragControl.Ja), dhtmlx.DragControl.Nb = dhtmlx.event(this, "scroll", dhtmlx.DragControl.Ja), a.cancelBubble = !0, !1
        },
        Ja: function() {
            dhtmlx.DragControl.oa = dhtmlx.eventRemove(dhtmlx.DragControl.oa), dhtmlx.DragControl.pa = dhtmlx.eventRemove(dhtmlx.DragControl.pa), dhtmlx.DragControl.Nb = dhtmlx.eventRemove(dhtmlx.DragControl.Nb)
        },
        Ab: function(a) {
            var b = {
                x: a.pageX,
                y: a.pageY
            };
            Math.abs(b.x - dhtmlx.DragControl.yc.x) < 5 && Math.abs(b.y - dhtmlx.DragControl.yc.y) < 5 || (dhtmlx.DragControl.Ja(), !dhtmlx.DragControl.createDrag(a)) || (dhtmlx.DragControl.sendSignal("start"), dhtmlx.DragControl.oa = dhtmlx.event(document.body, "mousemove", dhtmlx.DragControl.mc), dhtmlx.DragControl.pa = dhtmlx.event(document.body, "mouseup", dhtmlx.DragControl.Qa), dhtmlx.DragControl.mc(a))
        },
        Qa: function(a) {
            dhtmlx.DragControl.oa = dhtmlx.eventRemove(dhtmlx.DragControl.oa), dhtmlx.DragControl.pa = dhtmlx.eventRemove(dhtmlx.DragControl.pa), dhtmlx.DragControl.s && (dhtmlx.DragControl.onDrop(dhtmlx.DragControl.D, dhtmlx.DragControl.s, this.T, a), dhtmlx.DragControl.onDragOut(dhtmlx.DragControl.D, dhtmlx.DragControl.s, null, a)), dhtmlx.DragControl.destroyDrag(), dhtmlx.DragControl.sendSignal("stop")
        },
        mc: function(a) {
            var b = dhtmlx.html.pos(a);
            return dhtmlx.DragControl.B.style.top = b.y + dhtmlx.DragControl.top + "px", dhtmlx.DragControl.B.style.left = b.x + dhtmlx.DragControl.left + "px", dhtmlx.DragControl.wc ? dhtmlx.DragControl.wc = !1 : dhtmlx.DragControl.Ba(a.srcElement || a.target, a), a.cancelBubble = !0, !1
        },
        Ba: function(a, b) {
            for (; a && "BODY" != a.tagName;) {
                if (a.dhx_drop) return this.s && (this.s != a || a.dhx_master) && this.onDragOut(this.D, this.s, a, b), void(this.s && this.s == a && !a.dhx_master || (this.s = null, (this.T = this.onDragIn(dhtmlx.DragControl.D, a, b)) && (this.s = a)));
                a = a.parentNode
            }
            this.s && (this.s = this.T = this.onDragOut(this.D, this.s, null, b))
        },
        sendSignal: function(a) {
            dhtmlx.DragControl.active = "start" == a
        },
        getMaster: function(a) {
            return this.G[a.dhx_drag || a.dhx_drop]
        },
        getContext: function() {
            return this.F
        },
        createDrag: function(a) {
            var b, c = dhtmlx.DragControl.D,
                d = this.G[c.dhx_drag];
            if (d.onDragCreate) b = d.onDragCreate(c, a), b.style.position = "absolute", b.style.zIndex = dhtmlx.zIndex.drag, b.onmousemove = dhtmlx.DragControl.xc;
            else {
                var e = dhtmlx.DragControl.onDrag(c, a);
                if (!e) return !1;
                b = document.createElement("DIV"), b.innerHTML = e, b.className = "dhx_drag_zone", b.onmousemove = dhtmlx.DragControl.xc, document.body.appendChild(b)
            }
            return dhtmlx.DragControl.B = b, !0
        },
        xc: function() {
            dhtmlx.DragControl.wc = !0
        },
        destroyDrag: function() {
            var a = dhtmlx.DragControl.D,
                b = this.G[a.dhx_drag];
            b && b.onDragDestroy ? b.onDragDestroy(a, dhtmlx.DragControl.B) : dhtmlx.html.remove(dhtmlx.DragControl.B), dhtmlx.DragControl.T = dhtmlx.DragControl.D = dhtmlx.DragControl.s = dhtmlx.DragControl.B = null
        },
        top: 5,
        left: 5,
        onDragIn: function(a, b, c) {
            var d = this.G[b.dhx_drop];
            return d.onDragIn && d != this ? d.onDragIn(a, b, c) : (b.className += " dhx_drop_zone", b)
        },
        onDragOut: function(a, b, c, d) {
            var e = this.G[b.dhx_drop];
            return e.onDragOut && e != this ? e.onDragOut(a, b, c, d) : (b.className = b.className.replace("dhx_drop_zone", ""), null)
        },
        onDrop: function(a, b, c, d) {
            var e = this.G[b.dhx_drop];
            return dhtmlx.DragControl.F.from = dhtmlx.DragControl.getMaster(a), e.onDrop && e != this ? e.onDrop(a, b, c, d) : void b.appendChild(a)
        },
        onDrag: function(a, b) {
            var c = this.G[a.dhx_drag];
            return c.onDrag && c != this ? c.onDrag(a, b) : (dhtmlx.DragControl.F = {
                source: a,
                from: a
            }, "<div style='" + a.style.cssText + "'>" + a.innerHTML + "</div>")
        }
    }, dhtmlx.DragItem = {
        p: function() {
            !this.e || this.e.drag ? dhtmlx.DragItem.gc(this) : this.e && (this.drag_setter = function(a) {
                return a && (this.gc(this), delete this.drag_setter), a
            }), this.dragMarker && (this.attachEvent("onBeforeDragIn", this.dragMarker), this.attachEvent("onDragOut", this.dragMarker))
        },
        gc: function(a) {
            dhtmlx.DragControl.addDrop(a.g, a, !0), dhtmlx.DragControl.addDrag(a.g, a)
        },
        onDragIn: function(a, b, c) {
            var d = this.locate(c) || null,
                e = dhtmlx.DragControl.F,
                f = dhtmlx.DragControl.getMaster(a),
                g = this.C(d) || this.g;
            return g == dhtmlx.DragControl.T ? g : (e.target = d, e.to = f, this.callEvent("onBeforeDragIn", [e, c]) ? (dhtmlx.html.addCss(g, "dhx_drag_over"), g) : e.id = null)
        },
        onDragOut: function(a, b, c, d) {
            var e = this.locate(d) || null;
            c != this.j && (e = null);
            var f = this.C(e) || (c ? dhtmlx.DragControl.getMaster(c).g : window.undefined);
            if (f == dhtmlx.DragControl.T) return null;
            var g = dhtmlx.DragControl.F;
            return dhtmlx.html.removeCss(dhtmlx.DragControl.T, "dhx_drag_over"), g.target = g.to = null, this.callEvent("onDragOut", [g, d]), null
        },
        onDrop: function(a, b, c, d) {
            var e = dhtmlx.DragControl.F;
            e.to = this, e.index = e.target ? this.indexById(e.target) : this.dataCount(), e.new_id = dhtmlx.uid(), this.callEvent("onBeforeDrop", [e, d]) && (e.from == e.to ? this.move(e.source, e.index) : e.from && e.from.move(e.source, e.index, e.to, e.new_id), this.callEvent("onAfterDrop", [e, d]))
        },
        onDrag: function(a, b) {
            var c = this.locate(b),
                d = [c];
            if (c) {
                if (this.getSelected) {
                    var e = this.getSelected();
                    dhtmlx.PowerArray.find.call(e, c) != -1 && (d = e)
                }
                var f = dhtmlx.DragControl.F = {
                    source: d,
                    start: c
                };
                if (f.from = this, this.callEvent("onBeforeDrag", [f, b])) return f.html || this.fa(this.get(c))
            }
            return null
        }
    }, dhtmlx.EditAbility = {
        p: function() {
            this.sa = this.K = null, this.attachEvent("onEditKeyPress", function(a, b, c) {
                13 != a || c ? 27 == a && this.stopEdit(!0) : this.stopEdit()
            }), this.attachEvent("onBeforeRender", function() {
                this.stopEdit()
            })
        },
        isEdit: function() {
            return this.K
        },
        edit: function(a) {
            if (this.stopEdit(!1, a) && this.callEvent("onBeforeEditStart", [a])) {
                var b = this.data.get(a);
                b.$template || (b.$template = "edit", this.data.refresh(a), this.K = a, this.Xd(a), this.sa(!0, b), this.callEvent("onAfterEditStart", [a]))
            }
        },
        stopEdit: function(a, b) {
            if (!this.K) return !0;
            if (this.K == b) return !1;
            var c = {};
            if (a ? c = null : this.sa(!1, c), !this.callEvent("onBeforeEditStop", [this.K, c])) return !1;
            var d = this.data.get(this.K);
            d.$template = null, a || this.sa(!1, d);
            var e = this.K;
            return this.sa = this.K = null, this.data.refresh(e), this.callEvent("onAfterEditStop", [e, c]), !0
        },
        Xd: function(a) {
            var b = this.C(a),
                c = "",
                d = "",
                e = [];
            if (b) {
                for (var f = b.getElementsByTagName("*"), g = "", h = 0; h < f.length; h++) 1 == f[h].nodeType && (g = f[h].getAttribute("bind")) && (c += "els[" + e.length + "].value=" + g + ";", d += g + "=els[" + e.length + "].value;", e.push(f[h]), f[h].className += " dhx_allow_selection", f[h].onselectstart = this.Hc);
                f = null
            }
            c = Function("obj", "els", c), d = Function("obj", "els", d), this.sa = function(a, b) {
                a ? (c(b, e), e.length && e[0].select && e[0].select()) : d(b, e)
            }
        },
        Hc: function(a) {
            return (a || event).cancelBubble = !0
        }
    }, dhtmlx.KeyEvents = {
        p: function() {
            dhtmlx.event(this.g, "keypress", this.Kd, this)
        },
        Kd: function(a) {
            var a = a || event,
                b = a.which || a.keyCode;
            this.callEvent(this.K ? "onEditKeyPress" : "onKeyPress", [b, a.ctrlKey, a.shiftKey, a])
        }
    }, dhtmlx.MouseEvents = {
        p: function() {
            this.on_click && (dhtmlx.event(this.g, "click", this.Hd, this), dhtmlx.event(this.g, "contextmenu", this.Id, this)), this.on_dblclick && dhtmlx.event(this.g, "dblclick", this.Jd, this), this.on_mouse_move && (dhtmlx.event(this.g, "mousemove", this.oc, this), dhtmlx.event(this.g, dhtmlx.z ? "mouseleave" : "mouseout", this.oc, this))
        },
        Hd: function(a) {
            return this.pb(a, this.on_click, "ItemClick")
        },
        Jd: function(a) {
            return this.pb(a, this.on_dblclick, "ItemDblClick")
        },
        Id: function(a) {
            var b = dhtmlx.html.locate(a, this.w);
            if (b && !this.callEvent("onBeforeContextMenu", [b, a])) return dhtmlx.html.preventEvent(a)
        },
        oc: function(a) {
            dhtmlx.z && (a = document.createEventObject(event)), this.lc && window.clearTimeout(this.lc), this.callEvent("onMouseMoving", [a]), this.lc = window.setTimeout(dhtmlx.bind(function() {
                "mousemove" == a.type ? this.Ld(a) : this.Md(a)
            }, this), 500)
        },
        Ld: function(a) {
            this.pb(a, this.on_mouse_move, "MouseMove") || this.callEvent("onMouseOut", [a || event])
        },
        Md: function(a) {
            this.callEvent("onMouseOut", [a || event])
        },
        pb: function(a, b, c) {
            for (var a = a || event, d = a.target || a.srcElement, e = "", f = null, g = !1; d && d.parentNode;) {
                if (!g && d.getAttribute && (f = d.getAttribute(this.w))) {
                    if (d.getAttribute("userdata") && this.callEvent("onLocateData", [f, d]), !this.callEvent("on" + c, [f, a, d])) return;
                    g = !0
                }
                if ((e = d.className) && (e = e.split(" "), e = e[0] || e[1], b[e])) return b[e].call(this, a, f || dhtmlx.html.locate(a, this.w), d);
                d = d.parentNode
            }
            return g
        }
    }, dhtmlx.SelectionModel = {
        p: function() {
            this.l = dhtmlx.toArray(), this.data.attachEvent("onStoreUpdated", dhtmlx.bind(this.Pc, this)), this.data.attachEvent("onStoreLoad", dhtmlx.bind(this.Oc, this)), this.data.attachEvent("onAfterFilter", dhtmlx.bind(this.Nc, this)), this.data.attachEvent("onIdChange", dhtmlx.bind(this.yd, this))
        },
        yd: function(a, b) {
            for (var c = this.l.length - 1; c >= 0; c--) this.l[c] == a && (this.l[c] = b)
        },
        Nc: function() {
            for (var a = this.l.length - 1; a >= 0; a--) {
                if (this.data.indexById(this.l[a]) < 0) var b = this.l[a];
                var c = this.item(b);
                c && delete c.$selected, this.l.splice(a, 1), this.callEvent("onSelectChange", [b])
            }
        },
        Pc: function(a, b, c) {
            "delete" == c ? this.l.remove(a) : this.data.dataCount() || this.data.h || (this.l = dhtmlx.toArray())
        },
        Oc: function() {
            this.e.select && this.data.each(function(a) {
                a.$selected && this.select(a.id)
            }, this)
        },
        Na: function(a, b, c) {
            return !(!c && !this.callEvent("onBeforeSelect", [a, b]) || (this.data.item(a).$selected = b, c ? c.push(a) : (b ? this.l.push(a) : this.l.remove(a), this.ub(a)), 0))
        },
        select: function(a, b, c) {
            if (!a) return this.selectAll();
            if (a instanceof Array)
                for (var d = 0; d < a.length; d++) this.select(a[d], b, c);
            else if (this.data.exists(a)) {
                if (c && this.l.length) return this.selectAll(this.l[this.l.length - 1], a);
                b || 1 == this.l.length && this.l[0] == a || (this.vc = !0, this.unselectAll(), this.vc = !1), this.isSelected(a) ? b && this.unselect(a) : this.Na(a, !0) && this.callEvent("onAfterSelect", [a])
            }
        },
        unselect: function(a) {
            return a ? void(this.isSelected(a) && this.Na(a, !1)) : this.unselectAll()
        },
        selectAll: function(a, b) {
            var c, d = [];
            c = a || b ? this.data.getRange(a || null, b || null) : this.data.getRange(), c.each(function(a) {
                var b = this.data.item(a.id);
                return b.$selected || (this.l.push(a.id), this.Na(a.id, !0, d)), a.id
            }, this), this.ub(d)
        },
        unselectAll: function() {
            var a = [];
            this.l.each(function(b) {
                this.Na(b, !1, a)
            }, this), this.l = dhtmlx.toArray(), this.ub(a)
        },
        isSelected: function(a) {
            return this.l.find(a) != -1
        },
        getSelected: function(a) {
            switch (this.l.length) {
                case 0:
                    return a ? [] : "";
                case 1:
                    return a ? [this.l[0]] : this.l[0];
                default:
                    return [].concat(this.l)
            }
        },
        Dd: function(a) {
            return a.length > 100 || a.length > this.data.dataCount / 2
        },
        ub: function(a) {
            if ("object" != typeof a && (a = [a]), a.length) {
                if (this.Dd(a)) this.data.refresh();
                else
                    for (var b = 0; b < a.length; b++) this.render(a[b], this.data.item(a[b]), "update");
                this.vc || this.callEvent("onSelectChange", [a])
            }
        }
    }, dhtmlx.RenderStack = {
        p: function() {
            this.B = document.createElement("DIV")
        },
        fa: function(a) {
            return this.callEvent("onItemRender", [a]), this.type.kc(a, this.type) + (a.$template ? this.type["template_" + a.$template] : this.type.template)(a, this.type) + this.type.jc
        },
        Db: function(a) {
            return this.B.innerHTML = this.fa(a), this.B.firstChild
        },
        C: function(a) {
            if (this.n) return this.n[a];
            this.n = {};
            for (var b = this.j.childNodes, c = 0; c < b.length; c++) {
                var d = b[c].getAttribute(this.w);
                d && (this.n[d] = b[c])
            }
            return this.C(a)
        },
        locate: function(a) {
            return dhtmlx.html.locate(a, this.w)
        },
        show: function(a) {
            var b = this.C(a);
            b && (this.j.scrollTop = b.offsetTop - this.j.offsetTop)
        },
        render: function(a, b, c) {
            if (a) {
                var d = this.C(a);
                switch (c) {
                    case "update":
                        if (!d) return;
                        var e = this.n[a] = this.Db(b);
                        dhtmlx.html.insertBefore(e, d), dhtmlx.html.remove(d);
                        break;
                    case "delete":
                        if (!d) return;
                        dhtmlx.html.remove(d), delete this.n[a];
                        break;
                    case "add":
                        e = this.n[a] = this.Db(b), dhtmlx.html.insertBefore(e, this.C(this.data.next(a)), this.j);
                        break;
                    case "move":
                        this.render(a, b, "delete"), this.render(a, b, "add")
                }
            } else this.callEvent("onBeforeRender", [this.data]) && (this.j.innerHTML = this.data.getRange().map(this.fa, this).join(""), this.n = null);
            this.callEvent("onAfterRender", [])
        },
        pager_setter: function(a) {
            this.attachEvent("onBeforeRender", function() {
                var a = this.e.pager.e;
                return a.page != -1 && (this.data.min = a.page * a.size, this.data.max = (a.page + 1) * a.size - 1, !0)
            });
            var b = new dhtmlx.ui.pager(a),
                c = dhtmlx.bind(function() {
                    this.data.refresh()
                }, this);
            return b.attachEvent("onRefresh", c), this.data.attachEvent("onStoreUpdated", function() {
                var a = this.dataCount();
                a != b.e.count && (b.e.count = a, b.e.page == -1 && (b.e.page = 0), b.refresh())
            }), b
        },
        height_setter: function(a) {
            return "auto" == a && (this.attachEvent("onAfterRender", this.Kb), dhtmlx.event(window, "resize", dhtmlx.bind(this.Kb, this))), a
        },
        Kb: function() {
            this.j.style.overflow = "hidden", this.j.style.height = "1px";
            var a = this.j.scrollHeight;
            if (this.j.style.height = a + "px", dhtmlx.hc) {
                var b = this.j.scrollHeight;
                b != a && (this.j.style.height = b + "px")
            }
            this.g.style.height = this.j.style.height
        },
        ib: function() {
            var a = this.type,
                b = (a.border || 0) + 2 * (a.padding || 0) + 2 * (a.margin || 0);
            return {
                x: a.width + b,
                y: a.height + b
            }
        },
        x_count_setter: function(a) {
            var b = this.ib(),
                c = dhtmlx.$customScroll ? 0 : 18;
            return this.j.style.width = b.x * a + ("auto" != this.e.height ? c : 0) + "px", a
        },
        y_count_setter: function(a) {
            var b = this.ib();
            return this.j.style.height = b.y * a + "px", a
        }
    }, dhtmlx.VirtualRenderStack = {
        p: function() {
            this.n = {}, this.j.style.overflowY = "scroll", dhtmlx.event(this.j, "scroll", dhtmlx.bind(this.xb, this)), dhtmlx.event(window, "resize", dhtmlx.bind(function() {
                this.render()
            }, this)), this.data.ga = [], this.data.getIndexRange = this.rd
        },
        C: function(a) {
            return this.n[a]
        },
        show: function(a) {
            range = this.mb();
            var b = this.data.indexById(a),
                c = Math.floor(b / range.fb) * range.Sa;
            this.j.scrollTop = c
        },
        rd: function(a, b) {
            0 !== b && (b = Math.min(b || 1 / 0, this.dataCount() - 1));
            for (var c = dhtmlx.toArray(), d = a || 0; d <= b; d++) {
                var e = this.item(this.order[d]);
                this.order.length > d && (e ? "loading" == e.$template && this.ga.push(this.order[d]) : (this.order[d] = dhtmlx.uid(), e = {
                    id: this.order[d],
                    $template: "loading"
                }, this.ga.push(this.order[d])), c.push(e))
            }
            return c
        },
        render: function(a, b, c) {
            if (a) {
                var d = this.C(a);
                switch (c) {
                    case "update":
                        if (!d) break;
                        var e = this.n[a] = this.Db(b);
                        dhtmlx.html.insertBefore(e, d), dhtmlx.html.remove(d);
                        break;
                    default:
                        this.Vd()
                }
            } else this.callEvent("onBeforeRender", [this.data]) && (this.n = {}, this.xb(null, !0), this.Bc = !1, this.callEvent("onAfterRender", []))
        },
        Vd: function() {
            this.Bc || (this.Bc = !0, window.setTimeout(dhtmlx.bind(function() {
                this.render()
            }, this), 1))
        },
        ab: function(a) {
            var b = document.createElement("DIV");
            return b.style.cssText = "height:" + a + "px; width:100%; overflow:hidden;", b
        },
        xb: function(a, b) {
            this.data.ga = [];
            var c = this.mb();
            this.j.firstChild && !b || (this.j.innerHTML = "", this.j.appendChild(this.ab(c.Ed)), this.P = [this.j.firstChild]);
            for (var d = Math.max(c.r, 0), e = this.data.max || 0 === this.data.max ? this.data.max : 1 / 0; d <= c.nb;) {
                for (; this.P[d] && this.P[d].ld && d <= c.nb;) d++;
                if (d > c.nb) break;
                for (var f = d; !this.P[f];) f--;
                var g = this.P[f],
                    h = d * c.fb + (this.data.min || 0);
                if (h > e) break;
                var i = Math.min(h + c.fb - 1, e),
                    j = this.ab(c.Sa),
                    k = this.data.getIndexRange(h, i);
                if (!k.length) break;
                j.innerHTML = k.map(this.fa, this).join("");
                for (var l = 0; l < k.length; l++) this.n[this.data.idByIndex(h + l)] = j.childNodes[l];
                var m = parseInt(g.style.height, 10),
                    n = (d - f) * c.Sa,
                    o = m - n - c.Sa;
                if (dhtmlx.html.insertBefore(j, n ? g.nextSibling : g, this.j), this.P[d] = j, j.ld = !0, n <= 0 && o > 0) g.style.height = o + "px", this.P[d + 1] = g;
                else if (n < 0 ? dhtmlx.html.remove(g) : g.style.height = n + "px", o > 0) {
                    var p = this.P[d + 1] = this.ab(o);
                    dhtmlx.html.insertBefore(p, j.nextSibling, this.j)
                }
                d++
            }
            if (this.data.ga.length) {
                var q = this.indexById(this.data.ga[0]),
                    r = this.indexById(this.data.ga.pop()) + 1;
                if (r > q) {
                    if (!this.callEvent("onDataRequest", [q, r - q])) return !1;
                    this.data.feed.call(this, q, r - q)
                }
            }
            if (dhtmlx.z) {
                var s = this.mb();
                s.r != c.r && this.xb()
            }
        },
        mb: function() {
            var a = dhtmlx.$customScroll ? 0 : 18,
                b = this.j.scrollTop,
                c = Math.max(this.j.scrollWidth, this.j.offsetWidth) - a,
                d = this.j.offsetHeight,
                e = (this.type, this.ib()),
                f = Math.floor(c / e.x) || 1,
                g = Math.floor(b / e.y),
                h = Math.ceil((d + b) / e.y) - 1,
                i = this.data.max ? this.data.max - this.data.min : this.data.dataCount(),
                j = Math.ceil(i / f) * e.y;
            return {
                r: g,
                nb: h,
                oe: b,
                Ed: j,
                Sa: e.y,
                fb: f
            }
        }
    }, dhtmlx.ajax = function(a, b, c) {
        if (0 !== arguments.length) {
            var d = new dhtmlx.ajax;
            c && (d.master = c), d.get(a, null, b)
        }
        return this.getXHR ? this : new dhtmlx.ajax
    }, dhtmlx.ajax.prototype = {
        getXHR: function() {
            return dhtmlx.z ? new ActiveXObject("Microsoft.xmlHTTP") : new XMLHttpRequest
        },
        send: function(a, b, c) {
            var d = this.getXHR();
            if ("function" == typeof c && (c = [c]), "object" == typeof b) {
                var e, f = [];
                for (e in b) {
                    var g = b[e];
                    null !== g && g !== dhtmlx.undefined || (g = ""), f.push(e + "=" + encodeURIComponent(g))
                }
                b = f.join("&")
            }
            b && !this.post && (a = a + (a.indexOf("?") != -1 ? "&" : "?") + b, b = null), d.open(this.post ? "POST" : "GET", a, !this.Bb), this.post && d.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            var h = this;
            return d.onreadystatechange = function() {
                if (!d.readyState || 4 == d.readyState) {
                    if (c && h)
                        for (var a = 0; a < c.length; a++) c[a] && c[a].call(h.master || h, d.responseText, d.responseXML, d);
                    c = h = h.master = null
                }
            }, d.send(b || null), d
        },
        get: function(a, b, c) {
            return this.post = !1, this.send(a, b, c)
        },
        post: function(a, b, c) {
            return this.post = !0, this.send(a, b, c)
        },
        sync: function() {
            return this.Bb = !0, this
        }
    }, dhtmlx.AtomDataLoader = {
        p: function(a) {
            this.data = {}, a && (this.e.datatype = a.datatype || "json", this.ge.push(this.ob))
        },
        ob: function() {
            this.wa = !0, this.e.url && this.url_setter(this.e.url), this.e.data && this.data_setter(this.e.data)
        },
        url_setter: function(a) {
            return this.wa ? (this.load(a, this.e.datatype), a) : a
        },
        data_setter: function(a) {
            return this.wa ? (this.parse(a, this.e.datatype), !0) : a
        },
        load: function(a, b, c) {
            this.callEvent("onXLS", []), "string" == typeof b ? (this.data.driver = dhtmlx.DataDriver[b], b = c) : this.data.driver = dhtmlx.DataDriver.xml, dhtmlx.ajax(a, [this.V, b], this)
        },
        parse: function(a, b) {
            this.callEvent("onXLS", []), this.data.driver = dhtmlx.DataDriver[b || "xml"], this.V(a, null)
        },
        V: function(a, b) {
            var c = this.data.driver,
                d = c.getRecords(c.toObject(a, b))[0];
            this.data = c ? c.getDetails(d) : a, this.callEvent("onXLE", [])
        },
        la: function(a) {
            if (!this.e.dataFeed || this.ca || !a) return !0;
            var b = this.e.dataFeed;
            return "function" == typeof b ? b.call(this, a.id || a, a) : (b = b + (b.indexOf("?") == -1 ? "?" : "&") + "action=get&id=" + encodeURIComponent(a.id || a), this.callEvent("onXLS", []), dhtmlx.ajax(b, function(a) {
                this.ca = !0, this.setValues(dhtmlx.DataDriver.json.toObject(a)[0]), this.ca = !1, this.callEvent("onXLE", [])
            }, this), !1)
        }
    }, dhtmlx.DataDriver = {}, dhtmlx.DataDriver.json = {
        toObject: function(a) {
            return a || (a = "[]"), "string" == typeof a ? (eval("dhtmlx.temp=" + a), dhtmlx.temp) : a
        },
        getRecords: function(a) {
            return !a || a instanceof Array ? a : [a]
        },
        getDetails: function(a) {
            return a
        },
        getInfo: function(a) {
            return {
                v: a.total_count || 0,
                r: a.pos || 0,
                M: a.dhx_security
            }
        }
    }, dhtmlx.DataDriver.json_ext = {
        toObject: function(a) {
            if (a || (a = "[]"), "string" == typeof a) {
                var b;
                eval("temp=" + a), dhtmlx.temp = [];
                for (var c = b.header, d = 0; d < b.data.length; d++) {
                    for (var e = {}, f = 0; f < c.length; f++) "undefined" != typeof b.data[d][f] && (e[c[f]] = b.data[d][f]);
                    dhtmlx.temp.push(e)
                }
                return dhtmlx.temp
            }
            return a
        },
        getRecords: function(a) {
            return !a || a instanceof Array ? a : [a]
        },
        getDetails: function(a) {
            return a
        },
        getInfo: function(a) {
            return {
                v: a.total_count || 0,
                r: a.pos || 0
            }
        }
    }, dhtmlx.DataDriver.html = {
        toObject: function(a) {
            if ("string" == typeof a) {
                var b = null;
                return a.indexOf("<") == -1 && (b = dhtmlx.toNode(a)), b || (b = document.createElement("DIV"), b.innerHTML = a), b.getElementsByTagName(this.tag)
            }
            return a
        },
        getRecords: function(a) {
            return a.tagName ? a.childNodes : a
        },
        getDetails: function(a) {
            return dhtmlx.DataDriver.xml.tagToObject(a)
        },
        getInfo: function() {
            return {
                v: 0,
                r: 0
            }
        },
        tag: "LI"
    }, dhtmlx.DataDriver.jsarray = {
        toObject: function(a) {
            return "string" == typeof a ? (eval("dhtmlx.temp=" + a), dhtmlx.temp) : a
        },
        getRecords: function(a) {
            return a
        },
        getDetails: function(a) {
            for (var b = {}, c = 0; c < a.length; c++) b["data" + c] = a[c];
            return b
        },
        getInfo: function() {
            return {
                v: 0,
                r: 0
            }
        }
    }, dhtmlx.DataDriver.csv = {
        toObject: function(a) {
            return a
        },
        getRecords: function(a) {
            return a.split(this.row)
        },
        getDetails: function(a) {
            for (var a = this.stringToArray(a), b = {}, c = 0; c < a.length; c++) b["data" + c] = a[c];
            return b
        },
        getInfo: function() {
            return {
                v: 0,
                r: 0
            }
        },
        stringToArray: function(a) {
            for (var a = a.split(this.cell), b = 0; b < a.length; b++) a[b] = a[b].replace(/^[ \t\n\r]*(\"|)/g, "").replace(/(\"|)[ \t\n\r]*$/g, "");
            return a
        },
        row: "\n",
        cell: ","
    }, dhtmlx.DataDriver.xml = {
        toObject: function(a, b) {
            return b && (b = this.checkResponse(a, b)) ? b : "string" == typeof a ? this.fromString(a) : a
        },
        getRecords: function(a) {
            return this.xpath(a, this.records)
        },
        records: "/*/item",
        getDetails: function(a) {
            return this.tagToObject(a, {})
        },
        getInfo: function(a) {
            return {
                v: a.documentElement.getAttribute("total_count") || 0,
                r: a.documentElement.getAttribute("pos") || 0,
                M: a.documentElement.getAttribute("dhx_security")
            }
        },
        xpath: function(a, b) {
            if (window.XPathResult) {
                var c = a;
                a.nodeName.indexOf("document") == -1 && (a = a.ownerDocument);
                for (var d = [], e = a.evaluate(b, c, null, XPathResult.ANY_TYPE, null), f = e.iterateNext(); f;) d.push(f), f = e.iterateNext();
                return d
            }
            var g = !0;
            try {
                "undefined" == typeof a.selectNodes && (g = !1)
            } catch (a) {}
            if (g) return a.selectNodes(b);
            var h = b.split("/").pop();
            return a.getElementsByTagName(h)
        },
        tagToObject: function(a, b) {
            var b = b || {},
                c = !1,
                d = a.attributes;
            if (d && d.length) {
                for (var e = 0; e < d.length; e++) b[d[e].name] = d[e].value;
                c = !0
            }
            for (var f = a.childNodes, e = 0; e < f.length; e++)
                if (1 == f[e].nodeType) {
                    var g = f[e].tagName;
                    "undefined" != typeof b[g] ? (b[g] instanceof Array || (b[g] = [b[g]]), b[g].push(this.tagToObject(f[e], {}))) : b[f[e].tagName] = this.tagToObject(f[e], {}), c = !0
                }
            return c ? (b.value = this.nodeValue(a), b) : this.nodeValue(a)
        },
        nodeValue: function(a) {
            return a.firstChild ? a.firstChild.data : ""
        },
        fromString: function(a) {
            if (window.DOMParser && !dhtmlx.z) return (new DOMParser).parseFromString(a, "text/xml");
            if (window.ActiveXObject) {
                var b = new ActiveXObject("Microsoft.xmlDOM");
                return b.loadXML(a), b
            }
        },
        checkResponse: function(a, b) {
            if (b && b.firstChild && "parsererror" != b.firstChild.tagName) return b;
            var c = this.fromString(a.replace(/^[\s]+/, ""));
            return c ? c : void 0
        }
    }, dhtmlx.DataLoader = {
        p: function(a) {
            a = a || "", this.name = "DataStore", this.data = a.datastore || new dhtmlx.DataStore, this.tb = this.data.attachEvent("onStoreLoad", dhtmlx.bind(this.Xa, this))
        },
        load: function(a, b) {
            dhtmlx.AtomDataLoader.load.apply(this, arguments), this.data.feed || (this.data.feed = function(b, c) {
                return this.H ? this.H = [b, c] : (this.H = !0, void this.load(a + (a.indexOf("?") == -1 ? "?" : "&") + "posStart=" + b + "&count=" + c, function() {
                    var a = this.H;
                    this.H = !1, "object" == typeof a && this.data.feed.apply(this, a)
                }))
            })
        },
        V: function(a, b) {
            this.data.rb(this.data.driver.toObject(a, b)), this.callEvent("onXLE", []), this.tb && (this.data.detachEvent(this.tb), this.tb = null)
        },
        dataFeed_setter: function(a) {
            return this.data.attachEvent("onBeforeFilter", dhtmlx.bind(function(a, b) {
                if (this.e.dataFeed) {
                    var c = {};
                    if (a || c) {
                        if ("function" == typeof a) {
                            if (!b) return;
                            a(b, c)
                        } else c = {
                            text: b
                        };
                        this.clearAll();
                        var d = this.e.dataFeed;
                        if ("function" == typeof d) return d.call(this, b, c);
                        var e, f = [];
                        for (e in c) f.push("dhx_filter[" + e + "]=" + encodeURIComponent(c[e]));
                        return this.load(d + (d.indexOf("?") < 0 ? "?" : "&") + f.join("&"), this.e.datatype), !1
                    }
                }
            }, this)), a
        },
        Xa: function() {
            if (this.e.ready) {
                var a = dhtmlx.toFunctor(this.e.ready);
                a && a.call && a.apply(this, arguments)
            }
        }
    }, dhtmlx.DataStore = function() {
        this.name = "DataStore", dhtmlx.extend(this, dhtmlx.EventSystem), this.setDriver("xml"), this.pull = {}, this.order = dhtmlx.toArray()
    }, dhtmlx.DataStore.prototype = {
        setDriver: function(a) {
            this.driver = dhtmlx.DataDriver[a]
        },
        rb: function(a) {
            this.callEvent("onParse", [this.driver, a]), this.h && this.filter();
            var b = this.driver.getInfo(a);
            b.M && (dhtmlx.security_key = b.M);
            var c = this.driver.getRecords(a),
                d = 1 * (b.r || 0);
            0 === d && this.order[0] && (d = this.order.length);
            for (var e = 0, f = 0; f < c.length; f++) {
                var g = this.driver.getDetails(c[f]),
                    h = this.id(g);
                this.pull[h] || (this.order[e + d] = h, e++), this.pull[h] = g, this.extraParser && this.extraParser(g), this.o && (this.o.$init ? this.o.$update(g) : this.o.$update && this.o.$update(g))
            }
            for (f = 0; f < b.v; f++) this.order[f] || (h = dhtmlx.uid(), g = {
                id: h,
                $template: "loading"
            }, this.pull[h] = g, this.order[f] = h);
            this.callEvent("onStoreLoad", [this.driver, a]), this.refresh()
        },
        id: function(a) {
            return a.id || (a.id = dhtmlx.uid())
        },
        changeId: function(a, b) {
            this.pull[b] = this.pull[a], this.pull[b].id = b, this.order[this.order.find(a)] = b, this.h && (this.h[this.h.find(a)] = b), this.callEvent("onIdChange", [a, b]), this.wb && this.wb(a, b)
        },
        get: function(a) {
            return this.item(a)
        },
        set: function(a, b) {
            return this.update(a, b)
        },
        item: function(a) {
            return this.pull[a]
        },
        update: function(a, b) {
            return this.o && this.o.$update && this.o.$update(b), this.callEvent("onBeforeUpdate", [a, b]) !== !1 && (this.pull[a] = b, void this.refresh(a))
        },
        refresh: function(a) {
            this.ya || (a ? this.callEvent("onStoreUpdated", [a, this.pull[a], "update"]) : this.callEvent("onStoreUpdated", [null, null, null]))
        },
        silent: function(a) {
            this.ya = !0, a.call(this), this.ya = !1
        },
        getRange: function(a, b) {
            if (a = a ? this.indexById(a) : this.startOffset || 0, b ? b = this.indexById(b) : (b = Math.min(this.endOffset || 1 / 0, this.dataCount() - 1), b < 0 && (b = 0)), a > b) var c = b,
                b = a,
                a = c;
            return this.getIndexRange(a, b)
        },
        getIndexRange: function(a, b) {
            for (var b = Math.min(b || 1 / 0, this.dataCount() - 1), c = dhtmlx.toArray(), d = a || 0; d <= b; d++) c.push(this.item(this.order[d]));
            return c
        },
        dataCount: function() {
            return this.order.length
        },
        exists: function(a) {
            return !!this.pull[a]
        },
        move: function(a, b) {
            if (!(a < 0 || b < 0)) {
                var c = this.idByIndex(a),
                    d = this.item(c);
                this.order.removeAt(a), this.order.insertAt(c, Math.min(this.order.length, b)), this.callEvent("onStoreUpdated", [c, d, "move"])
            }
        },
        scheme: function(a) {
            this.o = a
        },
        sync: function(a, b, c) {
            "function" != typeof b && (c = b, b = null), dhtmlx.debug_bind && (this.debug_sync_master = a);
            var d = a;
            "DataStore" != a.name && (a = a.data);
            var e = dhtmlx.bind(function(d, e, f) {
                ("update" != f || b) && (d = null), d || (this.order = dhtmlx.toArray([].concat(a.order)), this.h = null, this.pull = a.pull, b && this.silent(b), this.Ia && this.Ia()), c ? c = !1 : this.refresh(d)
            }, this);
            a.attachEvent("onStoreUpdated", e), this.feed = function(a, b) {
                d.loadNext(b, a)
            }, e()
        },
        add: function(a, b) {
            if (this.o) {
                var c, a = a || {};
                for (c in this.o) a[c] = a[c] || this.o[c];
                this.o && (this.o.$init ? this.o.$update(a) : this.o.$update && this.o.$update(a))
            }
            var d = this.id(a),
                e = this.dataCount();
            if ((dhtmlx.isNotDefined(b) || b < 0) && (b = e), b > e && (b = Math.min(this.order.length, b)), this.callEvent("onBeforeAdd", [d, a, b]) === !1) return !1;
            if (this.exists(d)) return null;
            if (this.pull[d] = a, this.order.insertAt(d, b), this.h) {
                var f = this.h.length;
                !b && this.order.length && (f = 0), this.h.insertAt(d, f)
            }
            return this.callEvent("onafterAdd", [d, b]), this.callEvent("onStoreUpdated", [d, a, "add"]), d
        },
        remove: function(a) {
            if (a instanceof Array)
                for (var b = 0; b < a.length; b++) this.remove(a[b]);
            else {
                if (this.callEvent("onBeforeDelete", [a]) === !1) return !1;
                if (!this.exists(a)) return null;
                var c = this.item(a);
                this.order.remove(a), this.h && this.h.remove(a), delete this.pull[a], this.callEvent("onafterdelete", [a]), this.callEvent("onStoreUpdated", [a, c, "delete"])
            }
        },
        clearAll: function() {
            this.pull = {}, this.order = dhtmlx.toArray(), this.h = this.feed = null, this.callEvent("onClearAll", []), this.refresh()
        },
        idByIndex: function(a) {
            return this.order[a]
        },
        indexById: function(a) {
            var b = this.order.find(a);
            return b
        },
        next: function(a, b) {
            return this.order[this.indexById(a) + (b || 1)]
        },
        first: function() {
            return this.order[0]
        },
        last: function() {
            return this.order[this.order.length - 1]
        },
        previous: function(a, b) {
            return this.order[this.indexById(a) - (b || 1)]
        },
        sort: function(a, b, c) {
            var d = a;
            "function" == typeof a ? d = {
                as: a,
                dir: b
            } : "string" == typeof a && (d = {
                by: a,
                dir: b,
                as: c
            });
            var e = [d.by, d.dir, d.as];
            if (this.callEvent("onbeforesort", e)) {
                if (this.order.length) {
                    var f = dhtmlx.sort.create(d),
                        g = this.getRange(this.first(), this.last());
                    g.sort(f), this.order = g.map(function(a) {
                        return this.id(a)
                    }, this)
                }
                this.refresh(), this.callEvent("onaftersort", e)
            }
        },
        filter: function(a, b) {
            if (this.callEvent("onBeforeFilter", [a, b]) && (this.h && (this.order = this.h, delete this.h), this.order.length)) {
                if (a) {
                    var c = a,
                        b = b || "";
                    "string" == typeof a && (a = dhtmlx.Template.fromHTML(a), b = b.toString().toLowerCase(), c = function(b, c) {
                        return a(b).toLowerCase().indexOf(c) != -1
                    });
                    for (var d = dhtmlx.toArray(), e = 0; e < this.order.length; e++) {
                        var f = this.order[e];
                        c(this.item(f), b) && d.push(f)
                    }
                    this.h = this.order, this.order = d
                }
                this.refresh(), this.callEvent("onAfterFilter", [])
            }
        },
        each: function(a, b) {
            for (var c = 0; c < this.order.length; c++) a.call(b || this, this.item(this.order[c]))
        },
        provideApi: function(a, b) {
            this.debug_bind_master = a, b && this.mapEvent({
                onbeforesort: a,
                onaftersort: a,
                onbeforeadd: a,
                onafteradd: a,
                onbeforedelete: a,
                onafterdelete: a,
                onbeforeupdate: a
            });
            for (var c = "get,set,sort,add,remove,exists,idByIndex,indexById,item,update,refresh,dataCount,filter,next,previous,clearAll,first,last,serialize".split(","), d = 0; d < c.length; d++) a[c[d]] = dhtmlx.methodPush(this, c[d])
        },
        serialize: function() {
            for (var a = this.order, b = [], c = 0; c < a.length; c++) b.push(this.pull[a[c]]);
            return b
        }
    };
dhtmlx.sort = {
    create: function(a) {
        return dhtmlx.sort.dir(a.dir, dhtmlx.sort.by(a.by, a.as))
    },
    as: {
        int: function(a, b) {
            return a *= 1, b *= 1, a > b ? 1 : a < b ? -1 : 0
        },
        string_strict: function(a, b) {
            return a = a.toString(), b = b.toString(), a > b ? 1 : a < b ? -1 : 0
        },
        string: function(a, b) {
            return a = a.toString().toLowerCase(), b = b.toString().toLowerCase(), a > b ? 1 : a < b ? -1 : 0
        }
    },
    by: function(a, b) {
        return a ? ("function" != typeof b && (b = dhtmlx.sort.as[b || "string"]), a = dhtmlx.Template.fromHTML(a), function(c, d) {
            return b(a(c), a(d))
        }) : b
    },
    dir: function(a, b) {
        return "asc" == a ? b : function(a, c) {
            return b(a, c) * -1
        }
    }
};
dhtmlx.attaches || (dhtmlx.attaches = {}), dhtmlx.attaches.attachAbstract = function(a, b) {
        var c = document.createElement("DIV");
        c.id = "CustomObject_" + dhtmlx.uid(), c.style.width = "100%", c.style.height = "100%", c.cmp = "grid", document.body.appendChild(c), this.attachObject(c.id), b.container = c.id;
        var d = this.vs[this.av];
        d.grid = new window[a](b), d.gridId = c.id, d.gridObj = c, d.grid.setSizes = function() {
            this.resize ? this.resize() : this.render()
        };
        var e = "_viewRestore";
        return this.vs[this[e]()].grid
    }, dhtmlx.attaches.attachDataView = function(a) {
        return this.attachAbstract("dhtmlXDataView", a)
    }, dhtmlx.attaches.attachChart = function(a) {
        return this.attachAbstract("dhtmlXChart", a)
    }, dhtmlx.compat.layout = function() {}, dhtmlXDataView = function(a) {
        this.name = "DataView", this.version = "3.0", dhtmlx.extend(this, dhtmlx.Settings), this.sb(a, "dhx_dataview"), dhtmlx.extend(this, dhtmlx.AtomDataLoader), dhtmlx.extend(this, dhtmlx.DataLoader), dhtmlx.extend(this, dhtmlx.EventSystem), dhtmlx.extend(this, dhtmlx.RenderStack), dhtmlx.extend(this, dhtmlx.SelectionModel), dhtmlx.extend(this, dhtmlx.MouseEvents), dhtmlx.extend(this, dhtmlx.KeyEvents), dhtmlx.extend(this, dhtmlx.EditAbility), dhtmlx.extend(this, dhtmlx.DataMove), dhtmlx.extend(this, dhtmlx.DragItem), dhtmlx.extend(this, dhtmlx.DataProcessor), dhtmlx.extend(this, dhtmlx.AutoTooltip), dhtmlx.extend(this, dhtmlx.Destruction), this.data.attachEvent("onStoreUpdated", dhtmlx.bind(function() {
            this.render.apply(this, arguments)
        }, this)), this.J(a, {
            drag: !1,
            edit: !1,
            select: "multiselect",
            type: "default"
        }), "auto" != this.e.height && !this.e.renderAll && dhtmlx.extend(this, dhtmlx.VirtualRenderStack), this.data.provideApi(this, !0), dhtmlx.$customScroll && dhtmlx.CustomScroll.enable(this)
    }, dhtmlXDataView.prototype = {
        bind: function() {
            dhx.BaseBind.legacyBind.apply(this, arguments)
        },
        sync: function() {
            dhx.BaseBind.legacySync.apply(this, arguments)
        },
        dragMarker: function(a) {
            var b = this.C(a.target);
            if (this.type.drag_marker && (this.bb && (this.bb.style.backgroundImage = "", this.bb.style.backgroundRepeat = ""), b && (b.style.backgroundImage = "url(" + (dhtmlx.image_path || "") + this.type.drag_marker + ")", b.style.backgroundRepeat = "no-repeat", this.bb = b)), b && this.e.auto_scroll) {
                var c = b.offsetTop,
                    d = b.offsetHeight,
                    e = this.g.scrollTop,
                    f = this.g.offsetHeight;
                c - d >= 0 && c - .75 * d < e ? e = Math.max(c - d, 0) : c + d / .75 > e + f && (e += d), this.g.scrollTop = e
            }
            return !0
        },
        w: "dhx_f_id",
        on_click: {
            dhx_dataview_item: function(a, b) {
                this.stopEdit(!1, b) && this.e.select && ("multiselect" == this.e.select ? this.select(b, a.ctrlKey, a.shiftKey) : this.select(b))
            }
        },
        on_dblclick: {
            dhx_dataview_item: function(a, b) {
                this.e.edit && this.edit(b)
            }
        },
        on_mouse_move: {},
        types: {
            default: {
                css: "default",
                template: dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),
                template_edit: dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea style='width:100%; height:100%;' bind='obj.text'></textarea></div>"),
                template_loading: dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),
                width: 210,
                height: 115,
                margin: 0,
                padding: 10,
                border: 1
            }
        },
        template_item_start: dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_dataview_item dhx_dataview_{obj.css}_item{-obj.$selected?_selected:}' style='width:{obj.width}px; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; float:left; overflow:hidden;'>"),
        template_item_end: dhtmlx.Template.fromHTML("</div>")
    }, dhtmlx.compat("layout"), dhtmlx.Date = {
        Locale: {
            month_full: "January,February,March,April,May,June,July,August,September,October,November,December".split(","),
            month_short: "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),
            day_full: "Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),
            day_short: "Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")
        },
        date_part: function(a) {
            return a.setHours(0), a.setMinutes(0), a.setSeconds(0), a.setMilliseconds(0), a
        },
        time_part: function(a) {
            return (a.valueOf() / 1e3 - 60 * a.getTimezoneOffset()) % 86400
        },
        week_start: function(a) {
            var b = a.getDay();
            return this.config.start_on_monday && (0 === b ? b = 6 : b--), this.date_part(this.add(a, -1 * b, "day"))
        },
        month_start: function(a) {
            return a.setDate(1), this.date_part(a)
        },
        year_start: function(a) {
            return a.setMonth(0), this.month_start(a)
        },
        day_start: function(a) {
            return this.date_part(a)
        },
        add: function(a, b, c) {
            var d = new Date(a.valueOf());
            switch (c) {
                case "day":
                    d.setDate(d.getDate() + b);
                    break;
                case "week":
                    d.setDate(d.getDate() + 7 * b);
                    break;
                case "month":
                    d.setMonth(d.getMonth() + b);
                    break;
                case "year":
                    d.setYear(d.getFullYear() + b);
                    break;
                case "hour":
                    d.setHours(d.getHours() + b);
                    break;
                case "minute":
                    d.setMinutes(d.getMinutes() + b);
                    break;
                default:
                    return dhtmlx.Date["add_" + c](a, b, c)
            }
            return d
        },
        to_fixed: function(a) {
            return a < 10 ? "0" + a : a
        },
        copy: function(a) {
            return new Date(a.valueOf())
        },
        date_to_str: function(a, b) {
            return a = a.replace(/%[a-zA-Z]/g, function(a) {
                switch (a) {
                    case "%d":
                        return '"+dhtmlx.Date.to_fixed(date.getDate())+"';
                    case "%m":
                        return '"+dhtmlx.Date.to_fixed((date.getMonth()+1))+"';
                    case "%j":
                        return '"+date.getDate()+"';
                    case "%n":
                        return '"+(date.getMonth()+1)+"';
                    case "%y":
                        return '"+dhtmlx.Date.to_fixed(date.getFullYear()%100)+"';
                    case "%Y":
                        return '"+date.getFullYear()+"';
                    case "%D":
                        return '"+dhtmlx.Date.Locale.day_short[date.getDay()]+"';
                    case "%l":
                        return '"+dhtmlx.Date.Locale.day_full[date.getDay()]+"';
                    case "%M":
                        return '"+dhtmlx.Date.Locale.month_short[date.getMonth()]+"';
                    case "%F":
                        return '"+dhtmlx.Date.Locale.month_full[date.getMonth()]+"';
                    case "%h":
                        return '"+dhtmlx.Date.to_fixed((date.getHours()+11)%12+1)+"';
                    case "%g":
                        return '"+((date.getHours()+11)%12+1)+"';
                    case "%G":
                        return '"+date.getHours()+"';
                    case "%H":
                        return '"+dhtmlx.Date.to_fixed(date.getHours())+"';
                    case "%i":
                        return '"+dhtmlx.Date.to_fixed(date.getMinutes())+"';
                    case "%a":
                        return '"+(date.getHours()>11?"pm":"am")+"';
                    case "%A":
                        return '"+(date.getHours()>11?"PM":"AM")+"';
                    case "%s":
                        return '"+dhtmlx.Date.to_fixed(date.getSeconds())+"';
                    case "%W":
                        return '"+dhtmlx.Date.to_fixed(dhtmlx.Date.getISOWeek(date))+"';
                    default:
                        return a
                }
            }), b && (a = a.replace(/date\.get/g, "date.getUTC")), new Function("date", 'return "' + a + '";')
        },
        str_to_date: function(a, b) {
            for (var c = "var temp=date.split(/[^0-9a-zA-Z]+/g);", d = a.match(/%[a-zA-Z]/g), e = 0; e < d.length; e++) switch (d[e]) {
                case "%j":
                case "%d":
                    c += "set[2]=temp[" + e + "]||1;";
                    break;
                case "%n":
                case "%m":
                    c += "set[1]=(temp[" + e + "]||1)-1;";
                    break;
                case "%y":
                    c += "set[0]=temp[" + e + "]*1+(temp[" + e + "]>50?1900:2000);";
                    break;
                case "%g":
                case "%G":
                case "%h":
                case "%H":
                    c += "set[3]=temp[" + e + "]||0;";
                    break;
                case "%i":
                    c += "set[4]=temp[" + e + "]||0;";
                    break;
                case "%Y":
                    c += "set[0]=temp[" + e + "]||0;";
                    break;
                case "%a":
                case "%A":
                    c += "set[3]=set[3]%12+((temp[" + e + "]||'').toLowerCase()=='am'?0:12);";
                    break;
                case "%s":
                    c += "set[5]=temp[" + e + "]||0;"
            }
            var f = "set[0],set[1],set[2],set[3],set[4],set[5]";
            return b && (f = " Date.UTC(" + f + ")"), new Function("date", "var set=[0,0,1,0,0,0]; " + c + " return new Date(" + f + ");")
        },
        getISOWeek: function(a) {
            if (!a) return !1;
            var b = a.getDay();
            0 === b && (b = 7);
            var c = new Date(a.valueOf());
            c.setDate(a.getDate() + (4 - b));
            var d = c.getFullYear(),
                e = Math.floor((c.getTime() - new Date(d, 0, 1).getTime()) / 864e5),
                f = 1 + Math.floor(e / 7);
            return f
        },
        getUTCISOWeek: function(a) {
            return this.getISOWeek(a)
        }
    }, dhtmlx.math = {}, dhtmlx.math.ee = "0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F".split(","), dhtmlx.math.toHex = function(a, b) {
        for (a = parseInt(a, 10), str = ""; a > 0;) str = this.ee[a % 16] + str, a = Math.floor(a / 16);
        for (; str.length < b;) str = "0" + str;
        return str
    }, dhtmlx.math.hexToDec = function(a) {
        return parseInt(a, 16)
    }, dhtmlx.math.toRgb = function(a) {
        var b, c, d, e;
        return "string" != typeof a ? (b = a[0], c = a[1], d = a[2]) : a.indexOf("rgb") != -1 ? (e = a.substr(a.indexOf("(") + 1, a.lastIndexOf(")") - a.indexOf("(") - 1).split(","), b = e[0], c = e[1], d = e[2]) : ("#" == a.substr(0, 1) && (a = a.substr(1)), b = this.hexToDec(a.substr(0, 2)), c = this.hexToDec(a.substr(2, 2)), d = this.hexToDec(a.substr(4, 2))), b = parseInt(b, 10) || 0, c = parseInt(c, 10) || 0, d = parseInt(d, 10) || 0, (b < 0 || b > 255) && (b = 0), (c < 0 || c > 255) && (c = 0), (d < 0 || d > 255) && (d = 0), [b, c, d]
    }, dhtmlx.math.hsvToRgb = function(a, b, c) {
        var d, e, f, g, h, i, j, k;
        switch (d = Math.floor(a / 60) % 6, e = a / 60 - d, f = c * (1 - b), g = c * (1 - e * b), h = c * (1 - (1 - e) * b), k = j = i = 0, d) {
            case 0:
                i = c, j = h, k = f;
                break;
            case 1:
                i = g, j = c, k = f;
                break;
            case 2:
                i = f, j = c, k = h;
                break;
            case 3:
                i = f, j = g, k = c;
                break;
            case 4:
                i = h, j = f, k = c;
                break;
            case 5:
                i = c, j = f, k = g
        }
        return i = Math.floor(255 * i), j = Math.floor(255 * j), k = Math.floor(255 * k), [i, j, k]
    }, dhtmlx.math.rgbToHsv = function(a, b, c) {
        var d, e, f, g, h, i, j, k;
        return d = a / 255, e = b / 255, f = c / 255, g = Math.min(d, e, f), h = Math.max(d, e, f), j = 0, i = 0 == h ? 0 : 1 - g / h, k = h, h == g ? j = 0 : h == d && e >= f ? j = 60 * (e - f) / (h - g) + 0 : h == d && e < f ? j = 60 * (e - f) / (h - g) + 360 : h == e ? j = 60 * (f - d) / (h - g) + 120 : h == f && (j = 60 * (d - e) / (h - g) + 240), [j, i, k]
    }, dhtmlx.presets || (dhtmlx.presets = {}), dhtmlx.presets.chart = {
        simple: {
            item: {
                borderColor: "#ffffff",
                color: "#2b7100",
                shadow: !1,
                borderWidth: 2
            },
            line: {
                color: "#8ecf03",
                width: 2
            }
        },
        plot: {
            color: "#1293f8",
            item: {
                borderColor: "#636363",
                borderWidth: 1,
                color: "#ffffff",
                type: "r",
                shadow: !1
            },
            line: {
                color: "#1293f8",
                width: 2
            }
        },
        diamond: {
            color: "#b64040",
            item: {
                borderColor: "#b64040",
                color: "#b64040",
                type: "d",
                radius: 3,
                shadow: !0
            },
            line: {
                color: "#ff9000",
                width: 2
            }
        },
        point: {
            color: "#fe5916",
            disableLines: !0,
            fill: !1,
            disableItems: !1,
            item: {
                color: "#feb916",
                borderColor: "#fe5916",
                radius: 2,
                borderWidth: 1,
                type: "r"
            },
            alpha: 1
        },
        line: {
            line: {
                color: "#3399ff",
                width: 2
            },
            item: {
                color: "#ffffff",
                borderColor: "#3399ff",
                radius: 2,
                borderWidth: 2,
                type: "d"
            },
            fill: !1,
            disableItems: !1,
            disableLines: !1,
            alpha: 1
        },
        area: {
            fill: "#3399ff",
            line: {
                color: "#3399ff",
                width: 1
            },
            disableItems: !0,
            alpha: .2,
            disableLines: !1
        },
        round: {
            item: {
                radius: 3,
                borderColor: "#3f83ff",
                borderWidth: 1,
                color: "#3f83ff",
                type: "r",
                shadow: !1,
                alpha: .6
            }
        },
        square: {
            item: {
                radius: 3,
                borderColor: "#447900",
                borderWidth: 2,
                color: "#69ba00",
                type: "s",
                shadow: !1,
                alpha: 1
            }
        },
        column: {
            color: "RAINBOW",
            gradient: !1,
            width: 45,
            radius: 0,
            alpha: 1,
            border: !0
        },
        stick: {
            width: 5,
            gradient: !1,
            color: "#67b5c9",
            radius: 2,
            alpha: 1,
            border: !1
        },
        alpha: {
            color: "#b9a8f9",
            width: 70,
            gradient: "falling",
            radius: 0,
            alpha: .5,
            border: !0
        }
    }, dhtmlx.ui.Map = function(a) {
        this.name = "Map", this.w = "map_" + dhtmlx.uid(), this.M = a, this.U = []
    }, dhtmlx.ui.Map.prototype = {
        addRect: function(a, b, c) {
            this.Mb(a, "RECT", b, c)
        },
        addPoly: function(a, b, c) {
            this.Mb(a, "POLY", b, c)
        },
        Mb: function(a, b, c, d) {
            var e = "";
            4 == arguments.length && (e = "userdata='" + d + "'"), this.U.push("<area " + this.M + "='" + a + "' shape='" + b + "' coords='" + c.join() + "' " + e + "></area>")
        },
        addSector: function(a, b, c, d, e, f, g, h) {
            var i = [];
            i.push(d), i.push(Math.floor(e * g));
            for (var j = b; j < c; j += Math.PI / 18) i.push(Math.floor(d + f * Math.cos(j))), i.push(Math.floor((e + f * Math.sin(j)) * g));
            return i.push(Math.floor(d + f * Math.cos(c))), i.push(Math.floor((e + f * Math.sin(c)) * g)), i.push(d), i.push(Math.floor(e * g)), this.addPoly(a, i, h)
        },
        render: function(a) {
            var b = dhtmlx.html.create("DIV");
            b.style.cssText = "position:absolute; width:100%; height:100%; top:0px; left:0px;", a.appendChild(b);
            var c = dhtmlx.z ? "" : "src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";
            b.innerHTML = "<map id='" + this.w + "' name='" + this.w + "'>" + this.U.join("\n") + "</map><img " + c + " class='dhx_map_img' usemap='#" + this.w + "'>", a.n = b, this.U = []
        }
    }, dhtmlx.chart = {}, dhtmlx.chart.scatter = {
        pvt_render_scatter: function(a, b, c, d, e, f) {
            if (!this.e.xValue) return null;
            var g = this.aa(),
                h = this.aa("h", "xValue");
            e || (this.canvases.x = new dhtmlx.ui.Canvas(this.g, "axis_x"), this.canvases.y = new dhtmlx.ui.Canvas(this.g, "axis_y"), this.Zb(this.canvases.y.getCanvas(), b, c, d, g.min, g.max), this.Tb(this.canvases.x.getCanvas(), b, c, d, h.min, h.max));
            var g = {
                    min: this.e.yAxis.start,
                    max: this.e.yAxis.end
                },
                h = {
                    min: this.e.xAxis.start,
                    max: this.e.xAxis.end
                },
                i = this.sd(a, b, c, d, h, g);
            this.Ha = c;
            for (var j = 0; j < b.length; j++) this.dd(a, f, c, d, i, h, g, b[j], e)
        },
        sd: function(a, b, c, d, e, f) {
            var g = {};
            return g.totalHeight = d.y - c.y, g.totalWidth = d.x - c.x, this.Hb(g, e.min, e.max, g.totalWidth, "X"), this.Hb(g, f.min, f.max, g.totalHeight, "Y"), g
        },
        dd: function(a, b, c, d, e, f, g, h, i) {
            var j = this.Ib(e, d, c, f, h, "X"),
                k = this.Ib(e, c, d, g, h, "Y");
            this.Da(a, j, k, h, this.e.label.call(this, h), i, b)
        },
        Ib: function(a, b, c, d, e, f) {
            var g = this.e["X" == f ? "xValue" : "value"].call(this, e),
                h = a["valueFactor" + f],
                i = (parseFloat(g || 0) - d.min) * h,
                j = a["unit" + f],
                k = c[f.toLowerCase()] - ("X" == f ? -1 : 1) * Math.floor(j * i);
            return i < 0 && (k = c[f.toLowerCase()]), g > d.max && (k = b[f.toLowerCase()]), g < d.min && (k = c[f.toLowerCase()]), k
        },
        Hb: function(a, b, c, d, e) {
            var f = this.S(b, c),
                e = e || "";
            a["relValue" + e] = f[0], a["valueFactor" + e] = f[1], a["unit" + e] = a["relValue" + e] ? d / a["relValue" + e] : 10
        }
    }, dhtmlx.chart.radar = {
        pvt_render_radar: function(a, b, c, d, e, f) {
            this.Ud(a, b, c, d, e, f)
        },
        Ud: function(a, b, c, d, e, f) {
            if (b.length) {
                for (var g = this.jb(c, d), h = this.e.radius ? this.e.radius : g.radius, i = this.e.x ? this.e.x : g.x, j = this.e.y ? this.e.y : g.y, k = [], l = 0; l < b.length; l++) k.push(1);
                var m = this.cc(k, b.length);
                this.Ha = c, e || this.$c(m, i, j, h, b), this.ad(a, m, i, j, h, b, e, f)
            }
        },
        ad: function(a, b, c, d, e, f, g, h) {
            var i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A;
            for (k = this.e, m = k.yAxis.start, n = k.yAxis.end, A = this.S(m, n), z = (t = A[0]) ? e / t : e / 2, y = A[1], i = j = u = -Math.PI / 2, q = [], l = p = 0; l < f.length; l++) x ? w = x : (v = k.value(f[l]), w = (parseFloat(v || 0) - m) * y), r = Math.floor(z * w), v = k.value(l != f.length - 1 ? f[l + 1] : f[0]), x = (parseFloat(v || 0) - m) * y, s = Math.floor(z * x), i = j, j = l != f.length - 1 ? u + b[l] - 1e-4 : u, o = p || this.R(i, c, d, r), p = this.R(j, c, d, s), q.push(o);
            k.fill && this.kd(a, q, f), k.disableLines || this.ce(a, q, f), k.disableItems || this.bd(a, q, f, g, h), q = null
        },
        bd: function(a, b, c, d, e) {
            for (var f = 0; f < b.length; f++) this.Da(a, b[f].x, b[f].y, c[f], this.e.label.call(this, c), d, e)
        },
        kd: function(a, b, c) {
            var d, e;
            a.globalAlpha = this.e.alpha.call(this, {}), a.beginPath();
            for (var f = 0; f < b.length; f++) a.fillStyle = this.e.fill.call(this, c[f]), d = b[f], e = b[f + 1] || b[0], f || a.moveTo(d.x, d.y), a.lineTo(e.x, e.y);
            a.fill(), a.globalAlpha = 1
        },
        ce: function(a, b, c) {
            for (var d, e, f = 0; f < b.length; f++) d = b[f], e = b[f + 1] || b[0], this.m(a, d.x, d.y, e.x, e.y, this.e.line.color.call(this, c[f]), this.e.line.width)
        },
        $c: function(a, b, c, d, e) {
            var f = this.e.yAxis,
                g = this.e.xAxis,
                h = f.start,
                i = f.end,
                j = f.step,
                k = {},
                l = this.ma;
            if ("undefined" == typeof l.step || "undefined" == typeof l.start || "undefined" == typeof l.end) {
                var m = this.aa(),
                    k = this.Wa(m.min, m.max),
                    h = k.start,
                    i = k.end,
                    j = k.step;
                f.end = i, f.start = h
            }
            var n, o, p, q, r, s = [],
                t = 0,
                u = d * j / (i - h);
            j < 1 && (q = Math.min(this.da(j), h <= 0 ? 0 : this.da(h)), r = Math.pow(10, -q));
            var v = [];
            this.canvases.scale = new dhtmlx.ui.Canvas(this.g, "radar_scale");
            var w = this.canvases.scale.getCanvas();
            for (n = i; n >= h; n -= j) {
                k.fixNum && (n = parseFloat(new Number(n).toFixed(k.fixNum))), s.push(Math.floor(t * u) + .5), r && (n = Math.round(n * r) / r);
                var x = c - d + s[s.length - 1];
                if (this.canvases.scale.renderTextAt("middle", "left", b, x, f.template(n.toString()), "dhx_axis_item_y dhx_radar"), a.length < 2) return void this.Vb(w, "arc", b, c, d - s[s.length - 1], -Math.PI / 2, 3 * Math.PI / 2, n);
                var y, z = -Math.PI / 2,
                    A = z;
                for (o = 0; o < a.length; o++) n == i && v.push(A), y = z + a[o] - 1e-4, this.Vb(w, l.lineShape || "line", b, c, d - s[s.length - 1], A, y, n, o, e[n]), A = y;
                t++
            }
            for (n = 0; n < v.length; n++) p = this.R(v[n], b, c, d), g.lines.call(this, e[n], n) && this.m(w, b, c, p.x, p.y, g ? g.lineColor.call(this, e[n]) : "#cfcfcf", 1), this.cd(w, b, c, d, v[n], g ? g.template.call(this, e[n]) : "&nbsp;")
        },
        Vb: function(a, b, c, d, e, f, g, h, i) {
            var j, k;
            if (e < 0) return !1;
            j = this.R(f, c, d, e), k = this.R(g, c, d, e);
            var l = this.e.yAxis;
            l.bg && (a.beginPath(), a.moveTo(c, d), "arc" == b ? a.arc(c, d, e, f, g, !1) : (a.lineTo(j.x, j.y), a.lineTo(k.x, k.y)), a.fillStyle = l.bg(h, i), a.moveTo(c, d), a.fill(), a.closePath()), l.lines.call(this, h) && (a.lineWidth = 1, a.beginPath(), "arc" == b ? a.arc(c, d, e, f, g, !1) : (a.moveTo(j.x, j.y), a.lineTo(k.x, k.y)), a.strokeStyle = l.lineColor.call(this, h), a.stroke())
        },
        cd: function(a, b, c, d, e, f) {
            var g = this.canvases.scale.renderText(0, 0, f, "dhx_axis_radar_title", 1),
                h = g.scrollWidth,
                i = g.offsetHeight,
                j = .001,
                k = this.R(e, b, c, d + 5),
                l = 0,
                m = 0;
            (e < 0 || e > Math.PI) && (m = -i), e > Math.PI / 2 && (l = -h), Math.abs(e + Math.PI / 2) < j || Math.abs(e - Math.PI / 2) < j ? l = -h / 2 : (Math.abs(e) < j || Math.abs(e - Math.PI) < j) && (m = -i / 2), g.style.top = k.y + m + "px", g.style.left = k.x + l + "px", g.style.width = h + "px", g.style.whiteSpace = "nowrap"
        }
    }, dhtmlx.chart.area = {
        pvt_render_area: function(a, b, c, d, e, f) {
            var g, h, i, j, k, l, m, n, o;
            if (l = this.Aa(a, b, c, d, e), h = this.e, j = h.eventRadius || Math.floor(l.cellWidth / 2), b.length) {
                for (m = [], n = h.offset ? c.x + .5 * l.cellWidth : c.x, i = 0; i < b.length; i++) k = b[i], i ? n += l.cellWidth : m.push([n, d.y]), (o = this.Ea(k, c, d, l)) ? (m.push([n, o]), f.addRect(k.id, [n - j - c.x, o - j - c.y, n + j - c.x, o + j - c.y], e), h.yAxis || (g = h.offset || i != b.length - 1 ? "center" : "left", this.canvases[e].renderTextAt(!1, g, n, o - h.labelOffset, h.label(k)))) : i || m.push([n, d.y]);
                m.push([n, d.y]), m.push([m[0][0], d.y]), a.globalAlpha = this.e.alpha.call(this, b[0]), a.fillStyle = this.e.color.call(this, b[0]), a.beginPath(), this.va(a, m), a.fill(), h.border && (a.lineWidth = h.borderWidth || 1, h.borderColor ? a.strokeStyle = h.borderColor.call(this, b[0]) : this.Pa(a, a.fillStyle), a.beginPath(), this.va(a, m), a.stroke()), a.lineWidth = 1, a.globalAlpha = 1
            }
        }
    }, dhtmlx.chart.stackedArea = {
        pvt_render_stackedArea: function(a, b, c, d, e, f) {
            var g, h, i, j, k, l, m, n, o, p, q, r, s, t;
            if (p = this.Aa(a, b, c, d, e), j = this.e, n = j.eventRadius || Math.floor(p.cellWidth / 2), b.length) {
                q = [], t = [], r = j.offset ? c.x + .5 * p.cellWidth : c.x;
                var u = function(a, c) {
                        return e ? b[a].$startY ? c - d.y + b[a].$startY : 0 : c
                    },
                    v = function(a, b, c) {
                        var d = (c.y - b.y) / (c.x - b.x);
                        return d * a + b.y - d * b.x
                    };
                for (k = 0; k < b.length; k++) o = b[k], k ? r += p.cellWidth : (s = u(k, d.y), q.push([r, s])), s = u(k, this.Ea(o, c, d, p)), t.push(isNaN(s) && !k ? b[k].$startY || d.y : s), s && (q.push([r, s]), f.addRect(o.id, [r - n - c.x, s - n - c.y, r + n - c.x, s + n - c.y], e), j.yAxis || (i = !j.offset && m ? "left" : "center", this.canvases[e].renderTextAt(!1, i, r, s - j.labelOffset, j.label(o))));
                if (q.push([r, u(k - 1, d.y)]), e)
                    for (k = b.length - 2; k > 0; k--) r -= p.cellWidth, (s = b[k].$startY) && q.push([r, s]);
                for (q.push([q[0][0], q[0][1]]), a.globalAlpha = this.e.alpha.call(this, b[0]), a.fillStyle = this.e.color.call(this, b[0]), a.beginPath(), this.va(a, q), a.fill(), k = 0; k < b.length; k++) {
                    if (s = t[k], !s)
                        for (k == b.length - 1 && (s = b[k].$startY), l = k + 1; l < b.length; l++)
                            if (t[l]) {
                                g = {
                                    x: c.x,
                                    y: t[0]
                                }, h = {
                                    x: c.x + p.cellWidth * l,
                                    y: t[l]
                                }, s = v(c.x + p.cellWidth * k, g, h);
                                break
                            }
                    b[k].$startY = s
                }
            }
        }
    }, dhtmlx.chart.spline = {
        pvt_render_spline: function(a, b, c, d, e, f) {
            var g, h, i, j, k, l, m, n, o, p, q, r, s;
            if (k = this.Aa(a, b, c, d, e), g = this.e, this.Ha = c, i = [], b.length) {
                for (n = g.offset ? c.x + .5 * k.cellWidth : c.x, h = 0; h < b.length; h++)(q = this.Ea(b[h], c, d, k)) && (m = h ? k.cellWidth * h - .5 + n : n, i.push({
                    x: m,
                    y: q,
                    index: h
                }));
                for (l = this.td(i), h = 0; h < i.length; h++) {
                    if (o = i[h].x, r = i[h].y, h < i.length - 1) {
                        for (p = i[h + 1].x, s = i[h + 1].y, j = o; j < p; j++) {
                            var t = this.kb(j, o, h, l.a, l.b, l.c, l.d);
                            t < c.y && (t = c.y), t > d.y && (t = d.y);
                            var u = this.kb(j + 1, o, h, l.a, l.b, l.c, l.d);
                            u < c.y && (u = c.y), u > d.y && (u = d.y), this.m(a, j, t, j + 1, u, g.line.color(b[h]), g.line.width)
                        }
                        this.m(a, p - 1, this.kb(j, o, h, l.a, l.b, l.c, l.d), p, s, g.line.color(b[h]), g.line.width)
                    }
                    this.Da(a, o, r, b[i[h].index], g.label(b[i[h].index]), e, f)
                }
            }
        },
        td: function(a) {
            var b, c, d, e, f, g, h, i, j = [],
                k = [],
                l = a.length;
            for (b = 0; b < l - 1; b++) j[b] = a[b + 1].x - a[b].x, k[b] = (a[b + 1].y - a[b].y) / j[b];
            for (c = [], d = [], c[0] = 0, c[1] = 2 * (j[0] + j[1]), d[0] = 0, d[1] = 6 * (k[1] - k[0]), b = 2; b < l - 1; b++) c[b] = 2 * (j[b - 1] + j[b]) - j[b - 1] * j[b - 1] / c[b - 1], d[b] = 6 * (k[b] - k[b - 1]) - j[b - 1] * d[b - 1] / c[b - 1];
            for (e = [], e[l - 1] = e[0] = 0, b = l - 2; b >= 1; b--) e[b] = (d[b] - j[b] * e[b + 1]) / c[b];
            for (f = [], g = [], h = [], i = [], b = 0; b < l - 1; b++) f[b] = a[b].y, g[b] = -j[b] * e[b + 1] / 6 - j[b] * e[b] / 3 + (a[b + 1].y - a[b].y) / j[b], h[b] = e[b] / 2, i[b] = (e[b + 1] - e[b]) / (6 * j[b]);
            return {
                a: f,
                b: g,
                c: h,
                d: i
            }
        },
        kb: function(a, b, c, d, e, f, g) {
            return d[c] + (a - b) * (e[c] + (a - b) * (f[c] + (a - b) * g[c]))
        }
    }, dhtmlx.chart.barH = {
        pvt_render_barH: function(a, b, c, d, e, f) {
            var g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A;
            for (i = (d.y - c.y) / b.length, m = this.aa("h"), n = m.max, o = m.min, v = d.x - c.x, A = !!this.e.yAxis, e || this.Sb(a, b, c, d, o, n, i), A && (n = parseFloat(this.e.xAxis.end), o = parseFloat(this.e.xAxis.start)), t = this.S(o, n), r = t[0], q = t[1], x = r ? v / r : 10, A || (u = 10, x = r ? (v - u) / r : 10), h = parseInt(this.e.width, 10), h * this.k.length + 4 > i && (h = i / this.k.length - 4), g = Math.floor((i - h * this.k.length) / 2), s = "undefined" != typeof this.e.radius ? parseInt(this.e.radius, 10) : Math.round(h / 5), p = !1, (k = this.e.gradient) && "function" != typeof k ? (p = k, k = !1) : k && (k = a.createLinearGradient(c.x, c.y, d.x, c.y), this.e.gradient(k)), A || this.m(a, c.x - .5, c.y, c.x - .5, d.y, "#000000", 1), l = 0; l < b.length; l++)
                if (w = parseFloat(this.e.value(b[l] || 0)), w > n && (w = n), w -= o, w *= q, y = c.x, z = c.y + g + l * i + (h + 1) * e, w < 0 && "auto" == this.e.origin || this.e.xAxis && 0 === w && !("auto" != this.e.origin && this.e.origin > o)) this.canvases[e].renderTextAt("middle", "right", y + 10, z + h / 2 + g, this.e.label(b[l]));
                else {
                    w < 0 && "auto" != this.e.origin && this.e.origin > o && (w = 0), A || (w += u / x), j = k || this.e.color.call(this, b[l]), this.e.border && this.Rb(a, y, z, h, o, s, x, w, j), a.globalAlpha = this.e.alpha.call(this, b[l]);
                    var B = this.Wc(a, d, y, z, h, o, s, x, w, j, k, p);
                    0 != p && this.Xc(a, y, z, h, o, s, x, w, j, p), a.globalAlpha = 1, B[3] == z ? (this.canvases[e].renderTextAt("middle", "left", B[0] - 5, B[3] + Math.floor(h / 2), this.e.label(b[l])), f.addRect(b[l].id, [B[0] - c.x, B[3] - c.y, B[2] - c.x, B[3] + h - c.y], e)) : (this.canvases[e].renderTextAt("middle", !1, B[2] + 5, B[1] + Math.floor(h / 2), this.e.label(b[l])), f.addRect(b[l].id, [B[0] - c.x, z - c.y, B[2] - c.x, B[3] - c.y], e))
                }
        },
        xa: function(a, b, c, d, e, f, g, h, i) {
            var j = 0;
            if (e > f * g) var k = (e - f * g) / e,
                j = -Math.asin(k) + Math.PI / 2;
            a.moveTo(b, c + h);
            var l = b + f * g - e - (e ? 0 : h);
            e < f * g && a.lineTo(l, c + h);
            var m = c + e;
            e && e > 0 && a.arc(l, m, e - h, -Math.PI / 2 + j, 0, !1);
            var n = c + d - e - (e ? 0 : h),
                o = l + e - (e ? h : 0);
            a.lineTo(o, n), e && e > 0 && a.arc(l, n, e - h, 0, Math.PI / 2 - j, !1);
            var p = c + d - h;
            return a.lineTo(b, p), i || a.lineTo(b, c + h), [o, p]
        },
        Sb: function(a, b, c, d, e, f, g) {
            var h = 0;
            this.e.xAxis && (this.canvases.x = new dhtmlx.ui.Canvas(this.g), h = this.Tb(this.canvases.x.getCanvas(), b, c, d, e, f)), this.e.yAxis && (this.canvases.y = new dhtmlx.ui.Canvas(this.g), this.Yc(this.canvases.y.getCanvas(), b, c, d, g, h))
        },
        Yc: function(a, b, c, d, e, f) {
            if (this.e.yAxis) {
                var g, h = parseInt(f ? f : c.x, 10) - .5,
                    i = d.y + .5,
                    j = c.y;
                this.m(a, h, i, h, j, this.e.yAxis.color, 1);
                for (var k = 0; k < b.length; k++) {
                    var l = "auto" != this.e.origin && "barH" == this.e.view && parseFloat(this.e.value(b[k])) < this.e.origin;
                    g = j + e / 2 + k * e, this.canvases.y.renderTextAt("middle", !l && "left", l ? h + 5 : h - 5, g, this.e.yAxis.template(b[k]), "dhx_axis_item_y", l ? 0 : h - 10), this.e.yAxis.lines.call(this, b[k]) && this.m(a, c.x, g, d.x, g, this.e.yAxis.lineColor.call(this, b[k]), 1)
                }
                this.m(a, c.x + .5, j + .5, d.x, j + .5, this.e.yAxis.lineColor.call(this, {}), 1), this.tc(c, d)
            }
        },
        Tb: function(a, b, c, d, e, f) {
            var g, h = {},
                i = this.e.xAxis;
            if (i) {
                var j = d.y + .5,
                    k = c.x - .5,
                    l = d.x - .5,
                    m = c.x;
                if (this.m(a, k, j, l, j, i.color, 1), i.step && (g = parseFloat(i.step)), "undefined" != typeof this.Ca.step && "undefined" != typeof this.Ca.start && "undefined" != typeof this.Ca.end || (h = this.Wa(e, f), e = h.start, f = h.end, g = h.step, this.e.xAxis.end = f, this.e.xAxis.start = e, this.e.xAxis.step = g), 0 !== g) {
                    for (var n = (l - k) * g / (f - e), o = 0, p = e; p <= f; p += g) {
                        h.fixNum && (p = parseFloat(new Number(p).toFixed(h.fixNum)));
                        var q = Math.floor(k + o * n) + .5;
                        !(p == e && "auto" == this.e.origin) && i.lines.call(this, p) && this.m(a, q, j, q, c.y, this.e.xAxis.lineColor.call(this, p), 1), p == this.e.origin && (m = q + 1), this.canvases.x.renderTextAt(!1, !0, q, j + 2, i.template(p.toString()), "dhx_axis_item_x"), o++
                    }
                    return this.canvases.x.renderTextAt(!0, !1, k, d.y + this.e.padding.bottom - 3, this.e.xAxis.title, "dhx_axis_title_x", d.x - c.x), i.lines.call(this, {}) || this.m(a, k, c.y - .5, l, c.y - .5, this.e.xAxis.color, .2), m
                }
            }
        },
        Za: function(a, b, c, d, e, f, g) {
            var h = this.e.yAxis,
                i = b;
            return h && "auto" != this.e.origin && this.e.origin > g && (b += (this.e.origin - g) * e, i = b, d -= this.e.origin - g, d < 0 && (d *= -1, a.translate(b, c + f), a.rotate(Math.PI), b = .5, c = 0), b += .5), {
                value: d,
                x0: b,
                y0: c,
                start: i
            }
        },
        Wc: function(a, b, c, d, e, f, g, h, i, j, k, l) {
            a.save();
            var m = this.Za(a, c, d, i, h, e, f);
            a.fillStyle = j, a.beginPath();
            var n = this.xa(a, m.x0, m.y0, e, g, h, m.value, this.e.border ? 1 : 0);
            k && !l && a.lineTo(b.x, m.y0 + (this.e.border ? 1 : 0)), a.fill(), a.restore();
            var o = m.y0,
                p = m.y0 != d ? d : n[1],
                q = m.y0 != d ? m.start - n[0] : m.start,
                r = m.y0 != d ? m.start : n[0];
            return [q, o, r, p]
        },
        Rb: function(a, b, c, d, e, f, g, h, i) {
            a.save();
            var j = this.Za(a, b, c, h, g, d, e);
            a.beginPath(), this.Pa(a, i), a.globalAlpha = .9, this.xa(a, j.x0, j.y0, d, f, g, j.value, a.lineWidth / 2, 1), a.stroke(), a.restore()
        },
        Xc: function(a, b, c, d, e, f, g, h, i, j) {
            a.save();
            var k = this.Za(a, b, c, h, g, d, e),
                l = this.Oa(a, k.x0, k.y0 + d, k.x0 + g * k.value, k.y0, j, i, "x");
            a.fillStyle = l.gradient, a.beginPath(), this.xa(a, k.x0, k.y0 + l.offset, d - 2 * l.offset, f, g, k.value, l.offset), a.fill(), a.globalAlpha = 1, a.restore()
        }
    }, dhtmlx.chart.stackedBarH = {
        pvt_render_stackedBarH: function(a, b, c, d, e, f) {
            var g, h, i, j, k = d.x - c.x,
                l = !!this.e.yAxis,
                m = this.lb(b);
            g = m.max, h = m.min;
            var n = Math.floor((d.y - c.y) / b.length);
            e || this.Sb(a, b, c, d, h, g, n), l && (g = parseFloat(this.e.xAxis.end), h = parseFloat(this.e.xAxis.start));
            var o = this.S(h, g);
            j = o[0], i = o[1];
            var p = j ? k / j : 10;
            if (!l) var q = 10,
                p = j ? (k - q) / j : 10;
            var r = parseInt(this.e.width, 10);
            r + 4 > n && (r = n - 4);
            var s = (n - r) / 2,
                t = 0,
                u = !1,
                v = this.e.gradient;
            v && (u = !0), l || this.m(a, c.x - .5, c.y, c.x - .5, d.y, "#000000", 1);
            for (var w = 0, x = 0, y = 0; y < this.k.length; y++) y == e && (x = w), "stackedBarH" == this.k[y].view && w++;
            for (y = 0; y < b.length; y++) {
                x || (b[y].$startX = c.x);
                var z = parseFloat(this.e.value(b[y] || 0));
                z > g && (z = g), z -= h, z *= i;
                var A = c.x,
                    B = c.y + s + y * n;
                if (x ? A = b[y].$startX : b[y].$startX = A, z < 0 || this.e.yAxis && 0 === z) this.canvases.y.renderTextAt("middle", !0, A + 10, B + r / 2, this.e.label(b[y]));
                else {
                    l || (z += q / p);
                    var C = this.e.color.call(this, b[y]);
                    a.globalAlpha = this.e.alpha.call(this, b[y]), a.fillStyle = this.e.color.call(this, b[y]), a.beginPath();
                    var D = this.xa(a, A, B, r, t, p, z, this.e.border ? 1 : 0);
                    if (v && !u && a.lineTo(c.x + k, B + (this.e.border ? 1 : 0)), a.fill(), 0 != u) {
                        var E = this.Oa(a, A, B + r, A, B, u, C, "x");
                        a.fillStyle = E.gradient, a.beginPath(), D = this.xa(a, A, B, r, t, p, z, 0), a.fill()
                    }
                    this.e.border && this.Rb(a, A, B, r, h, t, p, z, C), a.globalAlpha = 1, this.canvases[e].renderTextAt("middle", !0, b[y].$startX + (D[0] - b[y].$startX) / 2 - 1, B + (D[1] - B) / 2, this.e.label(b[y])), f.addRect(b[y].id, [b[y].$startX - c.x, B - c.y, D[0] - c.x, D[1] - c.y], e), b[y].$startX = D[0]
                }
            }
        }
    }, dhtmlx.chart.stackedBar = {
        pvt_render_stackedBar: function(a, b, c, d, e, f) {
            var g, h, i, j, k = d.y - c.y,
                l = !!this.e.yAxis,
                m = !!this.e.xAxis,
                n = this.lb(b);
            g = n.max, h = n.min;
            var o = Math.floor((d.x - c.x) / b.length);
            e || this.eb(b, c, d, h, g, o), l && (g = parseFloat(this.e.yAxis.end), h = parseFloat(this.e.yAxis.start));
            var p = this.S(h, g);
            j = p[0], i = p[1];
            var q = j ? k / j : 10,
                r = parseInt(this.e.width, 10);
            r + 4 > o && (r = o - 4);
            var s = Math.floor((o - r) / 2),
                t = !!this.e.gradient && this.e.gradient;
            m || this.m(a, c.x, d.y + .5, d.x, d.y + .5, "#000000", 1);
            for (var u = 0; u < b.length; u++) {
                var v = parseFloat(this.e.value(b[u] || 0));
                if (v) {
                    e || (v -= h), v *= i;
                    var w = c.x + s + u * o,
                        x = d.y;
                    if (e ? x = b[u].$startY : b[u].$startY = x, !(x < c.y + 1))
                        if (v < 0 || this.e.yAxis && 0 === v) this.canvases.y.renderTextAt(!0, !0, w + Math.floor(r / 2), x, this.e.label(b[u]));
                        else {
                            var y = this.e.color.call(this, b[u]);
                            a.globalAlpha = this.e.alpha.call(this, b[u]), a.fillStyle = this.e.color.call(this, b[u]), a.beginPath();
                            var z = this.zb(a, w - (this.e.border ? .5 : 0), x, r + (this.e.border ? .5 : 0), q, v, 0, c.y);
                            if (a.fill(), t) {
                                a.save();
                                var A = this.Oa(a, w, x, w + r, z[1], t, y, "y");
                                a.fillStyle = A.gradient, a.beginPath(), z = this.zb(a, w + A.offset, x, r - 2 * A.offset, q, v, this.e.border ? 1 : 0, c.y), a.fill(), a.restore()
                            }
                            this.e.border && (a.save(), this.Pa(a, y), a.beginPath(), this.zb(a, w - .5, x, r + 1, q, v, 0, c.y, 1), a.stroke(), a.restore()), a.globalAlpha = 1,
                                this.canvases[e].renderTextAt(!1, !0, w + Math.floor(r / 2), z[1] + (x - z[1]) / 2 - 7, this.e.label(b[u])), f.addRect(b[u].id, [w - c.x, z[1] - c.y, z[0] - c.x, (b[u].$startY || x) - c.y], e), b[u].$startY = this.e.border ? z[1] + 1 : z[1]
                        }
                } else e && b[u].$startY || (b[u].$startY = d.y)
            }
        },
        zb: function(a, b, c, d, e, f, g, h, i) {
            a.moveTo(b, c);
            var j = c - e * f + g;
            j < h && (j = h), a.lineTo(b, j);
            var k = b + d,
                l = j;
            a.lineTo(k, l);
            var m = b + d;
            return a.lineTo(m, c), i || a.lineTo(b, c), [m, l - 2 * g]
        }
    }, dhtmlx.chart.line = {
        pvt_render_line: function(a, b, c, d, e, f) {
            var g, h, i, j, k, l, m, n, o;
            if (j = this.Aa(a, b, c, d, e), g = this.e, b.length) {
                for (k = g.offset ? c.x + .5 * j.cellWidth : c.x, i = [], h = 0; h < b.length; h++)(n = this.Ea(b[h], c, d, j)) && (l = h ? j.cellWidth * h - .5 + k : k, i.push({
                    x: l,
                    y: n,
                    index: h
                }));
                for ((new Date).valueOf(), this.Ha = c, h = 1; h <= i.length; h++) l = i[h - 1].x, n = i[h - 1].y, h < i.length && (m = i[h].x, o = i[h].y, this.m(a, l, n, m, o, g.line.color.call(this, b[h - 1]), g.line.width), g.line && g.line.shadow) && (a.globalAlpha = .3, this.m(a, l + 2, n + g.line.width + 8, m + 2, o + g.line.width + 8, "#eeeeee", g.line.width + 3), a.globalAlpha = 1), this.Da(a, l, n, b[i[h - 1].index], g.label(b[i[h - 1].index]), e, f, c)
            }
        },
        Da: function(a, b, c, d, e, f, g) {
            var h = this.e.item,
                i = parseInt(h.radius.call(this, d), 10) || 0,
                j = this.Ha;
            if (i) {
                if (a.save(), h.shadow) {
                    a.lineWidth = 1, a.strokeStyle = "#bdbdbd", a.fillStyle = "#bdbdbd";
                    for (var k = [.1, .2, .3], l = k.length - 1; l >= 0; l--) a.globalAlpha = k[l], a.strokeStyle = "#d0d0d0", a.beginPath(), this.Ra(a, b, c + 2 * i / 3, i + l + 1, h.type), a.stroke();
                    a.beginPath(), a.globalAlpha = .3, a.fillStyle = "#bdbdbd", this.Ra(a, b, c + 2 * i / 3, i + 1, h.type), a.fill()
                }
                a.restore(), a.lineWidth = h.borderWidth, a.fillStyle = h.color.call(this, d), a.strokeStyle = h.borderColor.call(this, d), a.globalAlpha = h.alpha.call(this, d), a.beginPath(), this.Ra(a, b, c, i + 1, h.type), a.fill(), a.stroke(), a.globalAlpha = 1
            }
            e && this.canvases[f].renderTextAt(!1, !0, b, c - i - this.e.labelOffset, this.e.label.call(this, d));
            var m = this.e.eventRadius || i + 1;
            g.addRect(d.id, [b - m - j.x, c - m - j.y, b + m - j.x, c + m - j.y], f)
        },
        Ra: function(a, b, c, d, e) {
            var f = [];
            if (!e || "square" != e && "s" != e)
                if (!e || "diamond" != e && "d" != e) f = !e || "triangle" != e && "t" != e ? [
                    [b, c, d, 0, 2 * Math.PI, !0]
                ] : [
                    [b, c - d],
                    [b + Math.sqrt(3) * d / 2, c + d / 2],
                    [b - Math.sqrt(3) * d / 2, c + d / 2],
                    [b, c - d]
                ];
                else var g = a.lineWidth > 1 ? a.lineWidth * Math.sqrt(2) / 4 : 0,
                    f = [
                        [b, c - d],
                        [b + d, c],
                        [b, c + d],
                        [b - d, c],
                        [b + g, c - d - g]
                    ];
            else d *= Math.sqrt(2) / 2, f = [
                [b - d - a.lineWidth / 2, c - d],
                [b + d, c - d],
                [b + d, c + d],
                [b - d, c + d],
                [b - d, c - d]
            ];
            this.va(a, f)
        },
        Ea: function(a, b, c, d) {
            var e = d.minValue,
                f = d.maxValue,
                g = d.unit,
                h = d.valueFactor,
                i = this.e.value(a),
                j = (parseFloat(i || 0) - e) * h;
            this.e.yAxis || (j += d.startValue / g);
            var k = c.y - g * j;
            return j < 0 && (k = c.y), i > f && (k = b.y), i < e && (k = c.y), k
        },
        Aa: function(a, b, c, d, e) {
            var f, g = {};
            g.totalHeight = d.y - c.y, g.cellWidth = (d.x - c.x) / (this.e.offset ? b.length : b.length - 1);
            var h = !!this.e.yAxis,
                i = this.e.view.indexOf("stacked") != -1 ? this.lb(b) : this.aa();
            g.maxValue = i.max, g.minValue = i.min, e || this.eb(b, c, d, g.minValue, g.maxValue, g.cellWidth), h && (g.maxValue = parseFloat(this.e.yAxis.end), g.minValue = parseFloat(this.e.yAxis.start));
            var j = this.S(g.minValue, g.maxValue);
            return f = j[0], g.valueFactor = j[1], g.unit = f ? g.totalHeight / f : 10, g.startValue = 0, h || (g.startValue = 10, g.unit == g.totalHeight) || (g.unit = f ? (g.totalHeight - g.startValue) / f : 10), g
        }
    }, dhtmlx.chart.bar = {
        pvt_render_bar: function(a, b, c, d, e, f) {
            var g, h, i, j, k, l, m, n, o, p, q, r, s, t = d.y - c.y;
            s = !!this.e.yAxis, r = !!this.e.xAxis, j = this.aa(), k = j.max, l = j.min, h = (d.x - c.x) / b.length, !e && ("auto" == this.e.origin || s) && this.eb(b, c, d, l, k, h), s && (k = parseFloat(this.e.yAxis.end), l = parseFloat(this.e.yAxis.start)), o = this.S(l, k), m = o[0], n = o[1], q = m ? t / m : m, !s && !("auto" != this.e.origin && r) && (p = 10, q = m ? (t - p) / m : p), !e && "auto" != this.e.origin && !s && this.e.origin > l && this.Yb(a, b, c, d, h, d.y - q * (this.e.origin - l)), g = parseInt(this.e.width, 10);
            var u = 0,
                v = 0;
            for (i = 0; i < this.k.length; i++) i == e && (v = u), "bar" == this.k[i].view && u++;
            this.k && g * u + 4 > h && (g = parseInt(h / u - 4, 10));
            var w = (h - g * u) / 2,
                x = "undefined" != typeof this.e.radius ? parseInt(this.e.radius, 10) : Math.round(g / 5),
                y = !1,
                z = this.e.gradient;
            for (z && "function" != typeof z ? (y = z, z = !1) : z && (z = a.createLinearGradient(0, d.y, 0, c.y), this.e.gradient(z)), r || this.m(a, c.x, d.y + .5, d.x, d.y + .5, "#000000", 1), i = 0; i < b.length; i++) {
                var A = parseFloat(this.e.value(b[i]) || 0);
                if (!isNaN(A)) {
                    A > k && (A = k), A -= l, A *= n;
                    var B = c.x + w + i * h + (g + 1) * v,
                        C = d.y;
                    if (A < 0 || this.e.yAxis && 0 === A && !("auto" != this.e.origin && this.e.origin > l)) this.canvases[e].renderTextAt(!0, !0, B + Math.floor(g / 2), C, this.e.label(b[i]));
                    else {
                        !s && !("auto" != this.e.origin && r) && (A += p / q);
                        var D = z || this.e.color.call(this, b[i]);
                        a.globalAlpha = this.e.alpha.call(this, b[i]);
                        var E = this.Tc(a, c, B, C, g, l, x, q, A, D, z, y);
                        y && this.Vc(a, B, C, g, l, x, q, A, D, y), this.e.border && this.Uc(a, B, C, g, l, x, q, A, D), a.globalAlpha = 1, E[0] != B ? this.canvases[e].renderTextAt(!1, !0, B + Math.floor(g / 2), E[1], this.e.label(b[i])) : this.canvases[e].renderTextAt(!0, !0, B + Math.floor(g / 2), E[3], this.e.label(b[i])), f.addRect(b[i].id, [B - c.x, E[3] - c.y, E[2] - c.x, E[1] - c.y], e)
                    }
                }
            }
        },
        $a: function(a, b, c, d, e, f, g) {
            var h = this.e.xAxis,
                i = c;
            return h && "auto" != this.e.origin && this.e.origin > g && (c -= (this.e.origin - g) * e, i = c, d -= this.e.origin - g, d < 0 && (d *= -1, a.translate(b + f, c), a.rotate(Math.PI), c = b = 0), c -= .5), {
                value: d,
                x0: b,
                y0: c,
                start: i
            }
        },
        Tc: function(a, b, c, d, e, f, g, h, i, j, k, l) {
            a.save(), a.fillStyle = j;
            var m = this.$a(a, c, d, i, h, e, f),
                n = this.yb(a, m.x0, m.y0, e, g, h, m.value, this.e.border ? 1 : 0);
            k && !l && a.lineTo(m.x0 + (this.e.border ? 1 : 0), b.y), a.fill(), a.restore();
            var o = m.x0,
                p = m.x0 != c ? c + n[0] : n[0],
                q = m.x0 != c ? m.start - n[1] - m.y0 : m.y0,
                r = m.x0 != c ? m.start - m.y0 : n[1];
            return [o, q, p, r]
        },
        Pa: function(a, b) {
            var c, d;
            d = dhtmlx.math.toRgb(b), c = dhtmlx.math.rgbToHsv(d[0], d[1], d[2]), c[2] /= 2, b = "rgb(" + dhtmlx.math.hsvToRgb(c[0], c[1], c[2]) + ")", a.strokeStyle = b, 1 == a.globalAlpha && (a.globalAlpha = .9)
        },
        Uc: function(a, b, c, d, e, f, g, h, i) {
            var j;
            a.save(), j = this.$a(a, b, c, h, g, d, e), this.Pa(a, i), this.yb(a, j.x0, j.y0, d, f, g, j.value, a.lineWidth / 2, 1), a.stroke(), a.restore()
        },
        Vc: function(a, b, c, d, e, f, g, h, i, j) {
            a.save();
            var k = this.$a(a, b, c, h, g, d, e),
                l = this.Oa(a, k.x0, k.y0, k.x0 + d, k.y0 - g * k.value + 2, j, i, "y"),
                m = this.e.border ? 1 : 0;
            a.fillStyle = l.gradient, this.yb(a, k.x0 + l.offset, k.y0, d - 2 * l.offset, f, g, k.value, l.offset + m), a.fill(), a.restore()
        },
        yb: function(a, b, c, d, e, f, g, h, i) {
            a.beginPath();
            var j = 0;
            if (e > f * g) {
                var k = (e - f * g) / e;
                k <= 1 && k >= -1 && (j = -Math.acos(k) + Math.PI / 2)
            }
            a.moveTo(b + h, c);
            var l = c - Math.floor(f * g) + e + (e ? 0 : h);
            e < f * g && a.lineTo(b + h, l);
            var m = b + e;
            e && e > 0 && a.arc(m, l, e - h, -Math.PI + j, -Math.PI / 2, !1);
            var n = b + d - e - h,
                o = l - e + (e ? h : 0);
            a.lineTo(n, o), e && e > 0 && a.arc(n, l, e - h, -Math.PI / 2, 0 - j, !1);
            var p = b + d - h;
            return a.lineTo(p, c), i || a.lineTo(b + h, c), [p, o]
        }
    }, dhtmlx.chart.pie = {
        pvt_render_pie: function(a, b, c, d, e, f) {
            this.vb(a, b, c, d, 1, f, e)
        },
        vb: function(a, b, c, d, e, f, g) {
            if (b.length) {
                var h = this.jb(c, d),
                    i = this.e.radius ? this.e.radius : h.radius;
                if (!(i < 0)) {
                    var j = this.ud(b),
                        k = this.dc(j),
                        l = this.cc(j, k),
                        m = this.e.x ? this.e.x : h.x,
                        n = this.e.y ? this.e.y : h.y;
                    1 == e && this.e.shadow && this.Cc(a, m, n, i), n /= e;
                    var o = -Math.PI / 2,
                        p = [];
                    if (a.scale(1, e), this.e.gradient) {
                        var q = 1 != e ? m + i / 3 : m,
                            r = 1 != e ? n + i / 3 : n;
                        this.Zd(a, m, n, i, q, r)
                    }
                    for (var s = 0; s < b.length; s++)
                        if (j[s]) {
                            a.strokeStyle = this.e.lineColor.call(this, b[s]), a.beginPath(), a.moveTo(m, n), p.push(o), alpha1 = -Math.PI / 2 + l[s] - 1e-4, a.arc(m, n, i, o, alpha1, !1), a.lineTo(m, n);
                            var t = this.e.color.call(this, b[s]);
                            a.fillStyle = t, a.fill(), this.e.pieInnerText && this.Wb(m, n, 5 * i / 6, o, alpha1, e, this.e.pieInnerText(b[s], k), !0), this.e.label && this.Wb(m, n, i + this.e.labelOffset, o, alpha1, e, this.e.label(b[s])), 1 != e && (this.Lb(a, m, n, o, alpha1, i, !0), a.fillStyle = "#000000", a.globalAlpha = .2, this.Lb(a, m, n, o, alpha1, i, !1), a.globalAlpha = 1, a.fillStyle = t), f.addSector(b[s].id, o, alpha1, m - c.x, n - c.y / e, i, e, g), o = alpha1
                        }
                    a.globalAlpha = .8;
                    for (var u, s = 0; s < p.length; s++) u = this.R(p[s], m, n, i), this.m(a, m, n, u.x, u.y, this.e.lineColor.call(this, b[s]), 2);
                    1 == e && (a.lineWidth = 2, a.strokeStyle = "#ffffff", a.beginPath(), a.arc(m, n, i + 1, 0, 2 * Math.PI, !1), a.stroke()), a.globalAlpha = 1, a.scale(1, 1 / e)
                }
            }
        },
        ud: function(a) {
            for (var b = [], c = 0; c < a.length; c++) b.push(parseFloat(this.e.value(a[c]) || 0));
            return b
        },
        dc: function(a) {
            for (var b = 0, c = 0; c < a.length; c++) b += a[c];
            return b
        },
        cc: function(a, b) {
            for (var c, d = [], e = 0, b = b || this.dc(a), f = 0; f < a.length; f++) c = a[f], d[f] = 2 * Math.PI * (b ? (c + e) / b : 1 / a.length), e += c;
            return d
        },
        jb: function(a, b) {
            var c = b.x - a.x,
                d = b.y - a.y,
                e = a.x + c / 2,
                f = a.y + d / 2,
                g = Math.min(c / 2, d / 2);
            return {
                x: e,
                y: f,
                radius: g
            }
        },
        Lb: function(a, b, c, d, e, f, g) {
            if (a.lineWidth = 1, d <= 0 && e >= 0 || d >= 0 && e <= Math.PI || Math.abs(d - Math.PI) > .003 && d <= Math.PI && e >= Math.PI) {
                d <= 0 && e >= 0 && (d = 0, g = !1, this.Xb(a, b, c, f, d, e)), d <= Math.PI && e >= Math.PI && (e = Math.PI, g = !1, this.Xb(a, b, c, f, d, e));
                var h = (this.e.height || Math.floor(f / 4)) / this.e.cant;
                a.beginPath(), a.arc(b, c, f, d, e, !1), a.lineTo(b + f * Math.cos(e), c + f * Math.sin(e) + h), a.arc(b, c + h, f, e, d, !0), a.lineTo(b + f * Math.cos(d), c + f * Math.sin(d)), a.fill(), g && a.stroke()
            }
        },
        Xb: function(a, b, c, d, e, f) {
            a.beginPath(), a.arc(b, c, d, e, f, !1), a.stroke()
        },
        Cc: function(a, b, c, d) {
            a.globalAlpha = .5;
            for (var e = "#c4c4c4,#c6c6c6,#cacaca,#dcdcdc,#dddddd,#e0e0e0,#eeeeee,#f5f5f5,#f8f8f8".split(","), f = e.length - 1; f > -1; f--) a.beginPath(), a.fillStyle = e[f], a.arc(b + 1, c + 1, d + f, 0, 2 * Math.PI, !0), a.fill();
            a.globalAlpha = 1
        },
        qd: function(a) {
            return a.addColorStop(0, "#ffffff"), a.addColorStop(.7, "#7a7a7a"), a.addColorStop(1, "#000000"), a
        },
        Zd: function(a, b, c, d, e, f) {
            a.beginPath();
            var g;
            "function" != typeof this.e.gradient ? (g = a.createRadialGradient(e, f, d / 4, b, c, d), g = this.qd(g)) : g = this.e.gradient(g), a.fillStyle = g, a.arc(b, c, d, 0, 2 * Math.PI, !0), a.fill(), a.globalAlpha = .7
        },
        Wb: function(a, b, c, d, e, f, g, h) {
            var i = this.canvases[0].renderText(0, 0, g, 0, 1);
            if (i) {
                var j = i.scrollWidth;
                i.style.width = j + "px", j > a && (j = a);
                var k = e - d < .2 ? 4 : 8;
                h && (k = j / 1.8);
                var l = d + (e - d) / 2;
                c -= (k - 8) / 2;
                var m = -k,
                    n = -8,
                    o = "right";
                (l >= Math.PI / 2 && l < Math.PI || l <= 3 * Math.PI / 2 && l >= Math.PI) && (m = -j - m + 1, o = "left");
                var p = 0;
                !h && f < 1 && l > 0 && l < Math.PI && (p = (this.e.height || Math.floor(c / 4)) / f);
                var q = (b + Math.floor((c + p) * Math.sin(l))) * f + n,
                    r = a + Math.floor((c + k / 2) * Math.cos(l)) + m,
                    s = e < Math.PI / 2 + .01,
                    t = d < Math.PI / 2;
                t && s ? r = Math.max(r, a + 3) : t || s ? !h && (l >= Math.PI / 2 && l < Math.PI || l <= 3 * Math.PI / 2 && l >= Math.PI) && (r += j / 3) : r = Math.min(r, a - j), i.style.top = q + "px", i.style.left = r + "px", i.style.width = j + "px", i.style.textAlign = o, i.style.whiteSpace = "nowrap"
            }
        }
    }, dhtmlx.chart.pie3D = {
        pvt_render_pie3D: function(a, b, c, d, e, f) {
            this.vb(a, b, c, d, this.e.cant, f)
        }
    }, dhtmlx.chart.donut = {
        pvt_render_donut: function(a, b, c, d, e, f) {
            if (b.length) {
                this.vb(a, b, c, d, 1, f);
                var g = this.e,
                    h = this.jb(c, d),
                    i = g.radius ? g.radius : h.radius,
                    j = g.innerRadius && g.innerRadius < i ? g.innerRadius : i / 3,
                    k = g.x ? g.x : h.x,
                    l = g.y ? g.y : h.y;
                a.fillStyle = "#ffffff", a.beginPath(), a.arc(k, l, j, 0, 2 * Math.PI, !0), a.fill()
            }
        }
    }, dhtmlx.Group = {
        p: function() {
            this.data.attachEvent("onStoreLoad", dhtmlx.bind(function() {
                this.e.group && this.group(this.e.group, !1)
            }, this)), this.attachEvent("onBeforeRender", dhtmlx.bind(function(a) {
                this.e.sort && (a.block(), a.sort(this.e.sort), a.unblock())
            }, this)), this.attachEvent("onBeforeSort", dhtmlx.bind(function() {
                this.e.sort = null
            }, this))
        },
        zd: function(a, b) {
            a.attachEvent("onClearAll", dhtmlx.bind(function() {
                this.ungroup(!1), this.block(), this.clearAll(), this.unblock()
            }, b))
        },
        sum: function(a, b) {
            var a = dhtmlx.Template.setter(a),
                b = b || this.data,
                c = 0;
            return b.each(function(b) {
                c += 1 * a(b)
            }), c
        },
        min: function(a, b) {
            var a = dhtmlx.Template.setter(a),
                b = b || this.data,
                c = 1 / 0;
            return b.each(function(b) {
                1 * a(b) < c && (c = 1 * a(b))
            }), 1 * c
        },
        max: function(a, b) {
            var a = dhtmlx.Template.setter(a),
                b = b || this.data,
                c = -(1 / 0);
            return b.each(function(b) {
                1 * a(b) > c && (c = 1 * a(b))
            }), c
        },
        be: function(a) {
            var b = function(a, b) {
                    return (a = dhtmlx.Template.setter(a))(b[0])
                },
                c = dhtmlx.Template.setter(a.by);
            a.map[c] || (a.map[c] = [c, b]);
            var d = {},
                e = [];
            this.data.each(function(a) {
                var b = c(a);
                d[b] || (e.push({
                    id: b
                }), d[b] = dhtmlx.toArray()), d[b].push(a)
            });
            for (var f in a.map) {
                var g = a.map[f][1] || b;
                "function" != typeof g && (g = this[g]);
                for (var h = 0; h < e.length; h++) e[h][f] = g.call(this, a.map[f][0], d[e[h].id])
            }
            this.nc = this.data, this.data = new dhtmlx.DataStore, this.data.provideApi(this, !0), this.zd(this.data, this), this.parse(e, "json")
        },
        group: function(a, b) {
            this.ungroup(!1), this.be(a), b !== !1 && this.render()
        },
        ungroup: function(a) {
            this.nc && (this.data = this.nc, this.data.provideApi(this, !0)), a !== !1 && this.render()
        },
        group_setter: function(a) {
            return a
        },
        sort_setter: function(a) {
            return "object" != typeof a && (a = {
                by: a
            }), this.N(a, {
                as: "string",
                dir: "asc"
            }), a
        }
    }, dhtmlx.DataDriver.dhtmlxgrid = {
        wd: "_get_cell_value",
        toObject: function(a) {
            return this.ec = a
        },
        getRecords: function(a) {
            return a.rowsBuffer
        },
        getDetails: function(a) {
            for (var b = {}, c = 0; c < this.ec.getColumnsNum(); c++) b["data" + c] = this.ec[this.wd](a, c);
            return b
        },
        getInfo: function() {
            return {
                v: 0,
                r: 0
            }
        }
    }, dhtmlx.ui.Canvas = function(a, b, c) {
        this.$ = [], this.Lc = b, this.g = a, this.pc(a, b, c)
    }, dhtmlx.ui.Canvas.prototype = {
        pc: function(a, b, c) {
            return this.u = dhtmlx.html.create("canvas", {
                width: a.offsetWidth,
                height: a.offsetHeight,
                canvas_id: b,
                style: c || ""
            }), a.appendChild(this.u), !this.u.getContext && dhtmlx.z && (dhtmlx.require("thirdparty/excanvas/excanvas.js"), G_vmlCanvasManager.init_(document), G_vmlCanvasManager.initElement(this.u)), this.u
        },
        getCanvas: function(a) {
            return (this.u || this.pc()).getContext(a || "2d")
        },
        Wd: function() {
            this.u && (this.u.setAttribute("width", this.u.parentNode.offsetWidth), this.u.setAttribute("height", this.u.parentNode.offsetHeight))
        },
        renderText: function(a, b, c, d, e) {
            if (c) {
                var f = dhtmlx.html.create("DIV", {
                    class: "dhx_canvas_text" + (d ? " " + d : ""),
                    style: "left:" + a + "px; top:" + b + "px;"
                }, c);
                return this.g.appendChild(f), this.$.push(f), e && (f.style.width = e + "px"), f
            }
        },
        renderTextAt: function(a, b, c, d, e, f, g) {
            var h = this.renderText.call(this, c, d, e, f, g);
            return h && (a && (h.style.top = "middle" == a ? parseInt(d - h.offsetHeight / 2, 10) + "px" : d - h.offsetHeight + "px"), b && (h.style.left = "left" == b ? c - h.offsetWidth + "px" : parseInt(c - h.offsetWidth / 2, 10) + "px")), h
        },
        clearCanvas: function(a) {
            var b, c = [];
            for (b = 0; b < this.$.length; b++) this.g.removeChild(this.$[b]);
            if (this.$ = [], !a && this.g.n) {
                for (c = this.bc(); c.length;) c[0].parentNode.removeChild(c[0]), c.splice(0, 1);
                c = null, this.g.n.getElementsByTagName("AREA").length || (this.g.n.parentNode.removeChild(this.g.n), this.g.n = null)
            }
            this.getCanvas().clearRect(0, 0, this.u.offsetWidth, this.u.offsetHeight)
        },
        toggleCanvas: function() {
            this.Eb("none" == this.u.style.display)
        },
        showCanvas: function() {
            this.Eb(!0)
        },
        hideCanvas: function() {
            this.Eb(!1)
        },
        Eb: function(a) {
            var b, c;
            for (c = 0; c < this.$.length; c++) this.$[c].style.display = a ? "" : "none";
            if (this.g.n)
                for (b = this.bc(), c = 0; c < b.length; c++) a ? b[c].removeAttribute("disabled") : b[c].setAttribute("disabled", "true");
            this.u.style.display = a ? "" : "none"
        },
        bc: function() {
            var a, b, c = [];
            for (a = this.g.n.getElementsByTagName("AREA"), b = 0; b < a.length; b++) a[b].getAttribute("userdata") == this.Lc && c.push(a[b]);
            return c
        }
    }, dhtmlXChart = function(a) {
        this.name = "Chart", this.version = "3.0", dhtmlx.extend(this, dhtmlx.Settings), this.sb(a, "dhx_chart"), dhtmlx.extend(this, dhtmlx.AtomDataLoader), dhtmlx.extend(this, dhtmlx.DataLoader), this.data.provideApi(this, !0), dhtmlx.extend(this, dhtmlx.EventSystem), dhtmlx.extend(this, dhtmlx.MouseEvents), dhtmlx.extend(this, dhtmlx.Destruction), dhtmlx.extend(this, dhtmlx.Group), dhtmlx.extend(this, dhtmlx.AutoTooltip);
        for (var b in dhtmlx.chart) dhtmlx.extend(this, dhtmlx.chart[b]);
        a.preset && this.definePreset(a), this.J(a, this.defaults), this.k = [this.e], this.data.attachEvent("onStoreUpdated", dhtmlx.bind(function() {
            this.render()
        }, this)), this.attachEvent("onLocateData", this.de)
    }, dhtmlXChart.prototype = {
        w: "dhx_area_id",
        on_click: {
            dhx_chart_legend_item: function(a, b, c) {
                var d = c.getAttribute("series_id");
                if (this.callEvent("onLegendClick", [a, d, c])) {
                    var e = this.e,
                        f = e.legend.values,
                        g = f && f[d].toggle || e.legend.toggle;
                    "undefined" != typeof d && this.k.length > 1 && g && (c.className.indexOf("hidden") != -1 ? this.showSeries(d) : this.hideSeries(d))
                }
            }
        },
        on_dblclick: {},
        on_mouse_move: {},
        bind: function() {
            dhx.BaseBind.legacyBind.apply(this, arguments)
        },
        sync: function() {
            dhx.BaseBind.legacySync.apply(this, arguments)
        },
        resize: function() {
            for (var a in this.canvases) this.canvases[a].Wd();
            this.render()
        },
        view_setter: function(a) {
            return "undefined" == typeof this.e.offset && (this.e.offset = !("area" == a || "stackedArea" == a)), "radar" == a && !this.e.yAxis && this.define("yAxis", {}), "scatter" == a && (this.e.yAxis || this.define("yAxis", {}), this.e.xAxis || this.define("xAxis", {})), a
        },
        clearCanvas: function() {
            if (this.canvases && "object" == typeof this.canvases)
                for (var a in this.canvases) this.canvases[a].clearCanvas()
        },
        render: function() {
            var a, b, c, d, e;
            if (this.callEvent("onBeforeRender", [this.data])) {
                if (this.canvases && "object" == typeof this.canvases)
                    for (b in this.canvases) this.canvases[b].clearCanvas();
                else this.canvases = {};
                for (this.e.legend && (this.canvases.legend || (this.canvases.legend = new dhtmlx.ui.Canvas(this.g, "legend")), this.cb(this.data.getRange(), this.g.offsetWidth)), a = this.od(this.g.offsetWidth, this.g.offsetHeight), d = new dhtmlx.ui.Map(this.w), e = this.e, c = this.pd(), b = 0; b < this.k.length; b++) this.e = this.k[b], this.canvases[b] || (this.canvases[b] = new dhtmlx.ui.Canvas(this.g, b, "z-index:" + (2 + b))), this["pvt_render_" + this.e.view](this.canvases[b].getCanvas(), c, a.start, a.end, b, d);
                d.render(this.g), this.g.lastChild.style.zIndex = 1e3, this.Dc(this.g.lastChild, a), this.callEvent("onAfterRender", []), this.e = e
            }
        },
        Dc: function(a, b) {
            var c = {};
            c.left = b.start.x, c.top = b.start.y, c.width = b.end.x - b.start.x, c.height = b.end.y - b.start.y;
            for (var d in c) a.style[d] = c[d] + "px"
        },
        pd: function() {
            var a, b, c, d, e, f, g, h, i, j;
            if (d = this.data.getRange(), a = this.e.view.toLowerCase().indexOf("barh") != -1 ? "yAxis" : "xAxis", (b = this.e[a]) && b.units && "object" == typeof b.units) {
                if (c = b.units, h = [], "undefined" != typeof c.start && "undefined" != typeof c.end && "undefined" != typeof c.next)
                    for (g = c.start; g <= c.end;) h.push(g), g = c.next.call(this, g);
                else "[object Array]" === Object.prototype.toString.call(c) && (h = c);
                if (f = [], h.length) {
                    for (i = b.value, j = {}, e = 0; e < d.length; e++) j[i(d[e])] = e;
                    for (e = 0; e < h.length; e++) "undefined" != typeof j[h[e]] ? (d[j[h[e]]].$unit = h[e], f.push(d[j[h[e]]])) : f.push({
                        $unit: h[e]
                    })
                }
                return f
            }
            return d
        },
        value_setter: dhtmlx.Template.obj_setter,
        xValue_setter: dhtmlx.Template.obj_setter,
        yValue_setter: function(a) {
            this.define("value", a)
        },
        alpha_setter: dhtmlx.Template.obj_setter,
        label_setter: dhtmlx.Template.obj_setter,
        lineColor_setter: dhtmlx.Template.obj_setter,
        borderColor_setter: dhtmlx.Template.obj_setter,
        pieInnerText_setter: dhtmlx.Template.obj_setter,
        gradient_setter: function(a) {
            return "function" != typeof a && a && a === !0 && (a = "light"), a
        },
        colormap: {
            RAINBOW: function(a) {
                var b = Math.floor(this.indexById(a.id) / this.dataCount() * 1536);
                return 1536 == b && (b -= 1), this.Pd[Math.floor(b / 256)](b % 256)
            }
        },
        color_setter: function(a) {
            return this.colormap[a] || dhtmlx.Template.obj_setter(a)
        },
        fill_setter: function(a) {
            return !(!a || 0 == a) && dhtmlx.Template.obj_setter(a)
        },
        definePreset: function(a) {
            this.define("preset", a.preset), delete a.preset
        },
        preset_setter: function(a) {
            var b, c, d;
            if (this.defaults = dhtmlx.extend({}, this.defaults), "object" == typeof dhtmlx.presets.chart[a]) {
                d = dhtmlx.presets.chart[a];
                for (b in d)
                    if ("object" == typeof d[b])
                        if (this.defaults[b] && "object" == typeof this.defaults[b])
                            for (c in this.defaults[b] = dhtmlx.extend({}, this.defaults[b]), d[b]) this.defaults[b][c] = d[b][c];
                        else this.defaults[b] = dhtmlx.extend({}, d[b]);
                else this.defaults[b] = d[b];
                return a
            }
            return !1
        },
        legend_setter: function(a) {
            return a ? ("object" != typeof a && (a = {
                template: a
            }), this.N(a, {
                width: 150,
                height: 18,
                layout: "y",
                align: "left",
                valign: "bottom",
                template: "",
                toggle: this.e.view.toLowerCase().indexOf("stacked") != -1 ? "" : "hide",
                marker: {
                    type: "square",
                    width: 15,
                    height: 15,
                    radius: 3
                },
                margin: 4,
                padding: 3
            }), a.template = dhtmlx.Template.setter(a.template), a) : (this.legendObj && (this.legendObj.innerHTML = "", this.legendObj = null), !1)
        },
        defaults: {
            color: "RAINBOW",
            alpha: "1",
            label: !1,
            value: "{obj.value}",
            padding: {},
            view: "pie",
            lineColor: "#ffffff",
            cant: .5,
            width: 30,
            labelWidth: 100,
            line: {
                width: 2,
                color: "#1293f8"
            },
            item: {
                radius: 3,
                borderColor: "#636363",
                borderWidth: 1,
                color: "#ffffff",
                alpha: 1,
                type: "r",
                shadow: !1
            },
            shadow: !0,
            gradient: !1,
            border: !0,
            labelOffset: 20,
            origin: "auto"
        },
        item_setter: function(a) {
            "object" != typeof a && (a = {
                color: a,
                borderColor: a
            }), this.N(a, dhtmlx.extend({}, this.defaults.item));
            for (var b = ["alpha", "borderColor", "color", "radius"], c = 0; c < b.length; c++) a[b[c]] = dhtmlx.Template.setter(a[b[c]]);
            return a
        },
        line_setter: function(a) {
            return "object" != typeof a && (a = {
                color: a
            }), dhtmlx.extend(this.defaults.line, a), a = dhtmlx.extend({}, this.defaults.line), a.color = dhtmlx.Template.setter(a.color), a
        },
        padding_setter: function(a) {
            return "object" != typeof a && (a = {
                left: a,
                right: a,
                top: a,
                bottom: a
            }), this.N(a, {
                left: 50,
                right: 20,
                top: 35,
                bottom: 40
            }), a
        },
        xAxis_setter: function(a) {
            if (!a) return !1;
            "object" != typeof a && (a = {
                template: a
            }), a.value || (a.value = a.template), this.N(a, {
                title: "",
                color: "#000000",
                lineColor: "#cfcfcf",
                template: "{obj}",
                value: "{obj}",
                lines: !0
            });
            var b = ["lineColor", "template", "lines", "value"];
            return this.Jb(b, a), this.Ca = dhtmlx.extend({}, a), a
        },
        yAxis_setter: function(a) {
            this.N(a, {
                title: "",
                color: "#000000",
                lineColor: "#cfcfcf",
                template: "{obj}",
                lines: !0,
                bg: "#ffffff"
            });
            var b = ["lineColor", "template", "lines", "bg"];
            return this.Jb(b, a), this.ma = dhtmlx.extend({}, a), a
        },
        Jb: function(a, b) {
            for (var c = 0; c < a.length; c++) b[a[c]] = dhtmlx.Template.setter(b[a[c]])
        },
        eb: function(a, b, c, d, e, f) {
            var g = 0;
            return this.e.yAxis && (this.canvases.y = new dhtmlx.ui.Canvas(this.g, "axis_y"), g = this.Zb(this.canvases.y.getCanvas(), a, b, c, d, e)), this.e.xAxis && (this.canvases.x = new dhtmlx.ui.Canvas(this.g, "axis_x"), this.Yb(this.canvases.x.getCanvas(), a, b, c, f, g)), g
        },
        Yb: function(a, b, c, d, e, f) {
            for (var g, h = c.x - .5, i = parseInt(f ? f : d.y, 10) + .5, j = d.x, k = !0, l = 0; l < b.length; l++) {
                this.e.offset === !0 ? g = h + e / 2 + l * e : (g = l == b.length - 1 ? d.x : h + l * e, k = !!l), g = Math.ceil(g) - .5;
                var m = "auto" != this.e.origin && "bar" == this.e.view && parseFloat(this.e.value(b[l])) < this.e.origin;
                this.ed(g, i, b[l], k, m), (this.e.offset || l) && this.e.xAxis.lines.call(this, b[l]) && this.fd(a, g, d.y, c.y, b[l])
            }
            this.canvases.x.renderTextAt(!0, !1, h, d.y + this.e.padding.bottom - 3, this.e.xAxis.title, "dhx_axis_title_x", d.x - c.x), this.m(a, h, i, j, i, this.e.xAxis.color, 1), this.e.xAxis.lines.call(this, {}) && this.e.offset && this.m(a, j + .5, d.y, j + .5, c.y + .5, this.e.xAxis.color, .2)
        },
        Zb: function(a, b, c, d, e, f) {
            var g, h = {};
            if (this.e.yAxis) {
                var i = c.x - .5,
                    j = d.y,
                    k = c.y,
                    l = d.y;
                if (this.e.yAxis.step && (g = parseFloat(this.e.yAxis.step)), "undefined" != typeof this.ma.step && "undefined" != typeof this.ma.start && "undefined" != typeof this.ma.end || (h = this.Wa(e, f), e = h.start, f = h.end, g = h.step, this.e.yAxis.end = f, this.e.yAxis.start = e), this.tc(c, d), 0 !== g) {
                    if (f == e) return j;
                    for (var m = (j - k) * g / (f - e), n = 0, o = e; o <= f; o += g) {
                        h.fixNum && (o = parseFloat(new Number(o).toFixed(h.fixNum)));
                        var p = Math.floor(j - n * m) + .5;
                        !(o == e && "auto" == this.e.origin) && this.e.yAxis.lines.call(this, o) && this.m(a, i, p, d.x, p, this.e.yAxis.lineColor.call(this, o), 1), o == this.e.origin && (l = p);
                        var q = o;
                        if (g < 1) var r = Math.min(this.da(g), e <= 0 ? 0 : this.da(e)),
                            s = Math.pow(10, -r),
                            o = q = Math.round(o * s) / s;
                        this.canvases.y.renderText(0, p - 5, this.e.yAxis.template(q.toString()), "dhx_axis_item_y", c.x - 5), n++
                    }
                    return this.m(a, i, j + 1, i, k, this.e.yAxis.color, 1), l
                }
            }
        },
        tc: function(a, b) {
            var c = "dhx_axis_title_y" + (dhtmlx.z && 9 != dhtmlx.z ? " dhx_ie_filter" : ""),
                d = this.canvases.y.renderTextAt("middle", !1, 0, parseInt((b.y - a.y) / 2 + a.y, 10), this.e.yAxis.title, c);
            d && (d.style.left = (dhtmlx.env.transform ? (d.offsetHeight - d.offsetWidth) / 2 : 0) + "px")
        },
        Wa: function(a, b) {
            "auto" != this.e.origin && this.e.origin < a && (a = this.e.origin);
            var c, d, e;
            c = (b - a) / 8 || 1;
            var f = Math.floor(this.da(c)),
                g = Math.pow(10, f),
                h = c / g,
                h = h > 5 ? 10 : 5;
            if (c = parseInt(h, 10) * g, c > Math.abs(a)) d = a < 0 ? -c : 0;
            else {
                var i = Math.abs(a),
                    j = Math.floor(this.da(i)),
                    k = i / Math.pow(10, j);
                for (d = Math.ceil(10 * k) / 10 * Math.pow(10, j) - c, i > 1 && c > .1 && (d = Math.ceil(d)); a < 0 ? d <= a : d >= a;) d -= c;
                a < 0 && (d = -d - 2 * c)
            }
            for (e = d; e < b;) e += c, e = parseFloat(new Number(e).toFixed(Math.abs(f)));
            return {
                start: d,
                end: e,
                step: c,
                fixNum: Math.abs(f)
            }
        },
        aa: function(a, b) {
            var c, d, e = arguments.length && "h" == a ? this.Ca : this.ma,
                b = b || "value";
            if (e && "undefined" != typeof e.end && "undefined" != typeof e.start && e.step) c = parseFloat(e.end), d = parseFloat(e.start);
            else if (c = this.max(this.k[0][b]), d = e && "undefined" != typeof e.start ? parseFloat(e.start) : this.min(this.k[0][b]), this.k.length > 1)
                for (var f = 1; f < this.k.length; f++) {
                    var g = this.max(this.k[f][b]),
                        h = this.min(this.k[f][b]);
                    g > c && (c = g), h < d && (d = h)
                }
            return {
                max: c,
                min: d
            }
        },
        da: function(a) {
            var b = "log";
            return Math.floor(Math[b](a) / Math.LN10)
        },
        ed: function(a, b, c, d, e) {
            if (this.e.xAxis) {
                var f = this.canvases.x.renderTextAt(e, d, a, b - (e ? 2 : 0), this.e.xAxis.template(c));
                f && (f.className += " dhx_axis_item_x")
            }
        },
        fd: function(a, b, c, d, e) {
            this.e.xAxis && this.e.xAxis.lines && this.m(a, b, c, b, d, this.e.xAxis.lineColor.call(this, e), 1)
        },
        m: function(a, b, c, d, e, f, g) {
            a.strokeStyle = f, a.lineWidth = g, a.beginPath(), a.moveTo(b, c), a.lineTo(d, e), a.stroke(), a.lineWidth = 1
        },
        S: function(a, b) {
            var c, d = 1;
            return c = b != a ? b - a : a, [c, d]
        },
        Pd: [function(a) {
            return "#FF" + dhtmlx.math.toHex(a / 2, 2) + "00"
        }, function(a) {
            return "#FF" + dhtmlx.math.toHex(a / 2 + 128, 2) + "00"
        }, function(a) {
            return "#" + dhtmlx.math.toHex(255 - a, 2) + "FF00"
        }, function(a) {
            return "#00FF" + dhtmlx.math.toHex(a, 2)
        }, function(a) {
            return "#00" + dhtmlx.math.toHex(255 - a, 2) + "FF"
        }, function(a) {
            return "#" + dhtmlx.math.toHex(a, 2) + "00FF"
        }],
        addSeries: function(a) {
            var b = this.e;
            this.e = dhtmlx.extend({}, b), this.J(a, {}), this.k.push(this.e), this.e = b
        },
        de: function(a, b) {
            var c;
            if (this.Fb = b.getAttribute("userdata"), this.k[this.Fb]) {
                for (var d = 0; d < this.k.length; d++)(c = this.k[d].tooltip) && c.disable();
                b.getAttribute("disabled") || (c = this.k[this.Fb].tooltip) && c.enable()
            }
        },
        hideSeries: function(a) {
            this.canvases[a].hideCanvas(), this.e.legend.values && this.e.legend.values[a] && (this.e.legend.values[a].$hidden = !0), this.cb()
        },
        showSeries: function(a) {
            this.canvases[a].showCanvas(), this.e.legend.values && this.e.legend.values[a] && delete this.e.legend.values[a].$hidden, this.cb()
        },
        cb: function(a, b) {
            var c, d, e, f, g, h, i, j, k, l, m, n = 0,
                o = 0,
                a = a || [],
                b = b || this.g.offsetWidth;
            if (j = this.canvases.legend.getCanvas(), d = this.e.legend, i = "x" != this.e.legend.layout ? "width:" + d.width + "px" : "", this.legendObj && (this.legendObj.innerHTML = "", this.legendObj.parentNode.removeChild(this.legendObj)), this.canvases.legend.clearCanvas(!0), e = dhtmlx.html.create("DIV", {
                    class: "dhx_chart_legend",
                    style: "left:" + n + "px; top:" + o + "px;" + i
                }, ""), d.padding && (e.style.padding = d.padding + "px"), this.legendObj = e, this.g.appendChild(e), g = [], d.values)
                for (c = 0; c < d.values.length; c++) g.push(this.Ub(e, d.values[c].text, "undefined" != typeof d.values[c].id ? typeof d.values[c].id : c, d.values[c].$hidden));
            else
                for (c = 0; c < a.length; c++) g.push(this.Ub(e, d.template(a[c])));
            for (h = e.offsetWidth, f = e.offsetHeight, h < this.g.offsetWidth && ("x" == d.layout && "center" == d.align && (n = (this.g.offsetWidth - h) / 2), "right" == d.align && (n = this.g.offsetWidth - h), d.margin && "center" != d.align && (n += ("left" == d.align ? 1 : -1) * d.margin)), f < this.g.offsetHeight && ("middle" == d.valign && "center" != d.align && "x" != d.layout ? o = (this.g.offsetHeight - f) / 2 : "bottom" == d.valign && (o = this.g.offsetHeight - f), d.margin && "middle" != d.valign && (o += ("top" == d.valign ? 1 : -1) * d.margin)), e.style.left = n + "px", e.style.top = o + "px", j.save(), c = 0; c < g.length; c++) m = g[c], d.values && d.values[c].$hidden ? (l = !0, k = d.values[c].disableColor ? d.values[c].disableColor : "#d9d9d9") : (l = !1, k = d.values ? d.values[c].color : this.e.color.call(this, a[c])), this.Zc(j, m.offsetLeft + n, m.offsetTop + o, k, m.offsetHeight, l, c);
            j.restore(), g = null
        },
        Ub: function(a, b, c, d) {
            var e = "";
            "x" == this.e.legend.layout && (e = "float:left;");
            var f = dhtmlx.html.create("DIV", {
                style: e + "padding-left:" + (10 + this.e.legend.marker.width) + "px",
                class: "dhx_chart_legend_item" + (d ? " hidden" : "")
            }, b);
            return arguments.length > 2 && f.setAttribute("series_id", c), a.appendChild(f), f
        },
        Zc: function(a, b, c, d, e, f, g) {
            var h = [],
                i = this.e.legend.marker,
                j = this.e.legend.values,
                k = j && j[g].markerType ? j[g].markerType : i.type;
            if (d && (a.strokeStyle = a.fillStyle = d), a.beginPath(), "round" != k && i.radius)
                if ("item" == k) {
                    if (this.e.line && "scatter" != this.e.view && !this.e.disableLines) {
                        a.beginPath(), a.lineWidth = this.k[g].line.width, a.strokeStyle = f ? d : this.k[g].line.color.call(this, {});
                        var l = b + 5,
                            m = c + e / 2;
                        a.moveTo(l, m), p = l + i.width, a.lineTo(p, m), a.stroke()
                    }
                    var n = this.k[g].item,
                        o = parseInt(n.radius.call(this, {}), 10) || 0;
                    o && (a.beginPath(), f ? (a.lineWidth = n.borderWidth, a.strokeStyle = d, a.fillStyle = d) : (a.lineWidth = n.borderWidth, a.fillStyle = n.color.call(this, {}), a.strokeStyle = n.borderColor.call(this, {}), a.globalAlpha = n.alpha.call(this, {})), a.beginPath(), b += i.width / 2 + 5, c += e / 2, this.Ra(a, b, c, o + 1, n.type), a.fill(), a.stroke()), a.globalAlpha = 1
                } else a.lineWidth = 1, b += 5, c += e / 2 - i.height / 2, h = [
                    [b + i.radius, c + i.radius, i.radius, Math.PI, 3 * Math.PI / 2, !1],
                    [b + i.width - i.radius, c],
                    [b + i.width - i.radius, c + i.radius, i.radius, -Math.PI / 2, 0, !1],
                    [b + i.width, c + i.height - i.radius],
                    [b + i.width - i.radius, c + i.height - i.radius, i.radius, 0, Math.PI / 2, !1],
                    [b + i.radius, c + i.height],
                    [b + i.radius, c + i.height - i.radius, i.radius, Math.PI / 2, Math.PI, !1],
                    [b, c + i.radius]
                ], this.va(a, h);
            else {
                a.lineWidth = i.height, a.lineCap = k, b += a.lineWidth / 2 + 5, c += e / 2, a.moveTo(b, c);
                var p = b + i.width - i.height + 1;
                a.lineTo(p, c)
            }
            a.stroke(), a.fill()
        },
        od: function(a, b) {
            var c, d, e, f;
            if (c = this.e.padding.left, d = this.e.padding.top, e = a - this.e.padding.right, f = b - this.e.padding.bottom, this.e.legend) {
                var g = this.e.legend,
                    h = this.e.legend.width,
                    i = this.e.legend.height;
                "x" == g.layout ? "center" == g.valign ? "right" == g.align ? e -= h : "left" == g.align && (c += h) : "bottom" == g.valign ? f -= i : d += i : "right" == g.align ? e -= h : "left" == g.align && (c += h)
            }
            return {
                start: {
                    x: c,
                    y: d
                },
                end: {
                    x: e,
                    y: f
                }
            }
        },
        lb: function(a) {
            var b, c, d, e, f;
            if (this.e.yAxis && "undefined" != typeof this.e.yAxis.end && "undefined" != typeof this.e.yAxis.start && this.e.yAxis.step) d = parseFloat(this.e.yAxis.end), e = parseFloat(this.e.yAxis.start);
            else {
                for (b = 0; b < a.length; b++)
                    for (a[b].$sum = 0, a[b].$min = 1 / 0, c = 0; c < this.k.length; c++) f = parseFloat(this.k[c].value(a[b]) || 0), !isNaN(f) && (this.k[c].view.toLowerCase().indexOf("stacked") != -1 && (a[b].$sum += f), f < a[b].$min) && (a[b].$min = f);
                for (d = -(1 / 0), e = 1 / 0, b = 0; b < a.length; b++) a[b].$sum > d && (d = a[b].$sum), a[b].$min < e && (e = a[b].$min);
                e > 0 && (e = 0)
            }
            return {
                max: d,
                min: e
            }
        },
        Oa: function(a, b, c, d, e, f, g, h) {
            var i, j, k, l, m, n;
            return "light" == f ? (i = "x" == h ? a.createLinearGradient(b, c, d, c) : a.createLinearGradient(b, c, b, e), n = [
                [0, "#FFFFFF"],
                [.9, g],
                [1, g]
            ], j = 2) : "falling" == f || "rising" == f ? (i = "x" == h ? a.createLinearGradient(b, c, d, c) : a.createLinearGradient(b, c, b, e), k = dhtmlx.math.toRgb(g), l = dhtmlx.math.rgbToHsv(k[0], k[1], k[2]), l[1] *= .5, m = "rgb(" + dhtmlx.math.hsvToRgb(l[0], l[1], l[2]) + ")", "falling" == f ? n = [
                [0, m],
                [.7, g],
                [1, g]
            ] : "rising" == f && (n = [
                [0, g],
                [.3, g],
                [1, m]
            ]), j = 0) : (a.globalAlpha = .37, j = 0, i = "x" == h ? a.createLinearGradient(b, e, b, c) : a.createLinearGradient(b, c, d, c), n = [
                [0, "#9d9d9d"],
                [.3, "#e8e8e8"],
                [.45, "#ffffff"],
                [.55, "#ffffff"],
                [.7, "#e8e8e8"],
                [1, "#9d9d9d"]
            ]), this.vd(i, n), {
                gradient: i,
                offset: j
            }
        },
        R: function(a, b, c, d) {
            return a *= -1, b += Math.cos(a) * d, c -= Math.sin(a) * d, {
                x: b,
                y: c
            }
        },
        vd: function(a, b) {
            for (var c = 0; c < b.length; c++) a.addColorStop(b[c][0], b[c][1])
        },
        va: function(a, b) {
            var c, d;
            for (c = 0; c < b.length; c++) d = c ? "lineTo" : "moveTo", b[c].length > 2 && (d = "arc"), a[d].apply(a, b[c])
        },
        he: function(a, b, c, d) {
            a.arc(b, c, d, 2 * Math.PI, !0)
        },
        fe: function(a, b, c, d, e) {
            a.addRect(b, [c[0].x - d.x, c[0].y - d.y, c[1].x - d.x, c[1].y - d.y], e)
        }
    }, dhtmlx.compat("layout"), document.createElement("canvas").getContext || function() {
        function a() {
            return this.context_ || (this.context_ = new j(this))
        }

        function b(a, b, c) {
            var d = x.call(arguments, 2);
            return function() {
                return a.apply(b, d.concat(x.call(arguments)))
            }
        }

        function c(a) {
            var b = a.srcElement;
            switch (a.propertyName) {
                case "width":
                    b.style.width = b.attributes.width.nodeValue + "px", b.getContext().clearRect();
                    break;
                case "height":
                    b.style.height = b.attributes.height.nodeValue + "px", b.getContext().clearRect()
            }
        }

        function d(a) {
            var b = a.srcElement;
            b.firstChild && (b.firstChild.style.width = b.clientWidth + "px", b.firstChild.style.height = b.clientHeight + "px")
        }

        function e() {
            return [
                [1, 0, 0],
                [0, 1, 0],
                [0, 0, 1]
            ]
        }

        function f(a, b) {
            for (var c = e(), d = 0; d < 3; d++)
                for (var f = 0; f < 3; f++) {
                    for (var g = 0, h = 0; h < 3; h++) g += a[d][h] * b[h][f];
                    c[d][f] = g
                }
            return c
        }

        function g(a, b) {
            b.fillStyle = a.fillStyle, b.lineCap = a.lineCap, b.lineJoin = a.lineJoin, b.lineWidth = a.lineWidth, b.miterLimit = a.miterLimit, b.shadowBlur = a.shadowBlur, b.shadowColor = a.shadowColor, b.shadowOffsetX = a.shadowOffsetX, b.shadowOffsetY = a.shadowOffsetY, b.strokeStyle = a.strokeStyle, b.globalAlpha = a.globalAlpha, b.arcScaleX_ = a.arcScaleX_, b.arcScaleY_ = a.arcScaleY_, b.lineScale_ = a.lineScale_
        }

        function h(a) {
            var b, c = 1,
                a = String(a);
            if ("rgb" == a.substring(0, 3)) {
                var d = a.indexOf("(", 3),
                    e = a.indexOf(")", d + 1),
                    f = a.substring(d + 1, e).split(",");
                b = "#";
                for (var g = 0; g < 3; g++) b += z[Number(f[g])];
                4 == f.length && "a" == a.substr(3, 1) && (c = f[3])
            } else b = a;
            return {
                color: b,
                alpha: c
            }
        }

        function i(a) {
            switch (a) {
                case "butt":
                    return "flat";
                case "round":
                    return "round";
                default:
                    return "square"
            }
        }

        function j(a) {
            this.m_ = e(), this.mStack_ = [], this.aStack_ = [], this.currentPath_ = [], this.fillStyle = this.strokeStyle = "#000", this.lineWidth = 1, this.lineJoin = "miter", this.lineCap = "butt", this.miterLimit = 1 * v, this.globalAlpha = 1, this.canvas = a;
            var b = a.ownerDocument.createElement("div");
            b.style.width = a.clientWidth + "px", b.style.height = a.clientHeight + "px", b.style.overflow = "hidden", b.style.position = "absolute", a.appendChild(b), this.element_ = b, this.lineScale_ = this.arcScaleY_ = this.arcScaleX_ = 1
        }

        function k(a, b, c, d) {
            a.currentPath_.push({
                type: "bezierCurveTo",
                cp1x: b.x,
                cp1y: b.y,
                cp2x: c.x,
                cp2y: c.y,
                x: d.x,
                y: d.y
            }), a.currentX_ = d.x, a.currentY_ = d.y
        }

        function l(a) {
            for (var b = 0; b < 3; b++)
                for (var c = 0; c < 2; c++)
                    if (!isFinite(a[b][c]) || isNaN(a[b][c])) return !1;
            return !0
        }

        function m(a, b, c) {
            if (l(b) && (a.m_ = b, c)) {
                var d = b[0][0] * b[1][1] - b[0][1] * b[1][0];
                a.lineScale_ = u(t(d))
            }
        }

        function n(a) {
            this.type_ = a, this.r1_ = this.y1_ = this.x1_ = this.r0_ = this.y0_ = this.x0_ = 0, this.colors_ = []
        }

        function o() {}
        var p = Math,
            q = p.round,
            r = p.sin,
            s = p.cos,
            t = p.abs,
            u = p.sqrt,
            v = 10,
            w = v / 2,
            x = Array.prototype.slice,
            y = {
                init: function(a) {
                    if (/MSIE/.test(navigator.userAgent) && !window.opera) {
                        var c = a || document;
                        c.createElement("canvas"), c.attachEvent("onreadystatechange", b(this.init_, this, c))
                    }
                },
                init_: function(a) {
                    if (a.namespaces.g_vml_ || a.namespaces.add("g_vml_", "urn:schemas-microsoft-com:vml", "#default#VML"), a.namespaces.g_o_ || a.namespaces.add("g_o_", "urn:schemas-microsoft-com:office:office", "#default#VML"), !a.styleSheets.ex_canvas_) {
                        var b = a.createStyleSheet();
                        b.owningElement.id = "ex_canvas_", b.cssText = "canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"
                    }
                    for (var c = a.getElementsByTagName("canvas"), d = 0; d < c.length; d++) this.initElement(c[d])
                },
                initElement: function(b) {
                    if (!b.getContext) {
                        b.getContext = a, b.innerHTML = "", b.attachEvent("onpropertychange", c), b.attachEvent("onresize", d);
                        var e = b.attributes;
                        e.width && e.width.specified ? b.style.width = e.width.nodeValue + "px" : b.width = b.clientWidth, e.height && e.height.specified ? b.style.height = e.height.nodeValue + "px" : b.height = b.clientHeight
                    }
                    return b
                }
            };
        y.init();
        for (var z = [], A = 0; A < 16; A++)
            for (var B = 0; B < 16; B++) z[16 * A + B] = A.toString(16) + B.toString(16);
        var C = j.prototype;
        C.clearRect = function() {
            this.element_.innerHTML = ""
        }, C.beginPath = function() {
            this.currentPath_ = []
        }, C.moveTo = function(a, b) {
            var c = this.getCoords_(a, b);
            this.currentPath_.push({
                type: "moveTo",
                x: c.x,
                y: c.y
            }), this.currentX_ = c.x, this.currentY_ = c.y
        }, C.lineTo = function(a, b) {
            var c = this.getCoords_(a, b);
            this.currentPath_.push({
                type: "lineTo",
                x: c.x,
                y: c.y
            }), this.currentX_ = c.x, this.currentY_ = c.y
        }, C.bezierCurveTo = function(a, b, c, d, e, f) {
            var g = this.getCoords_(e, f),
                h = this.getCoords_(a, b),
                i = this.getCoords_(c, d);
            k(this, h, i, g)
        }, C.quadraticCurveTo = function(a, b, c, d) {
            var e = this.getCoords_(a, b),
                f = this.getCoords_(c, d),
                g = {
                    x: this.currentX_ + 2 / 3 * (e.x - this.currentX_),
                    y: this.currentY_ + 2 / 3 * (e.y - this.currentY_)
                },
                h = {
                    x: g.x + (f.x - this.currentX_) / 3,
                    y: g.y + (f.y - this.currentY_) / 3
                };
            k(this, g, h, f)
        }, C.arc = function(a, b, c, d, e, f) {
            c *= v;
            var g = f ? "at" : "wa",
                h = a + s(d) * c - w,
                i = b + r(d) * c - w,
                j = a + s(e) * c - w,
                k = b + r(e) * c - w;
            h == j && !f && (h += .125);
            var l = this.getCoords_(a, b),
                m = this.getCoords_(h, i),
                n = this.getCoords_(j, k);
            this.currentPath_.push({
                type: g,
                x: l.x,
                y: l.y,
                radius: c,
                xStart: m.x,
                yStart: m.y,
                xEnd: n.x,
                yEnd: n.y
            })
        }, C.rect = function(a, b, c, d) {
            this.moveTo(a, b), this.lineTo(a + c, b), this.lineTo(a + c, b + d), this.lineTo(a, b + d), this.closePath()
        }, C.strokeRect = function(a, b, c, d) {
            var e = this.currentPath_;
            this.beginPath(), this.moveTo(a, b), this.lineTo(a + c, b), this.lineTo(a + c, b + d), this.lineTo(a, b + d), this.closePath(), this.stroke(), this.currentPath_ = e
        }, C.fillRect = function(a, b, c, d) {
            var e = this.currentPath_;
            this.beginPath(), this.moveTo(a, b), this.lineTo(a + c, b), this.lineTo(a + c, b + d), this.lineTo(a, b + d), this.closePath(), this.fill(), this.currentPath_ = e
        }, C.createLinearGradient = function(a, b, c, d) {
            var e = new n("gradient");
            return e.x0_ = a, e.y0_ = b, e.x1_ = c, e.y1_ = d, e
        }, C.createRadialGradient = function(a, b, c, d, e, f) {
            var g = new n("gradientradial");
            return g.x0_ = a, g.y0_ = b, g.r0_ = c, g.x1_ = d, g.y1_ = e, g.r1_ = f, g
        }, C.drawImage = function(a, b) {
            var c, d, e, f, g, h, i, j, k = a.runtimeStyle.width,
                l = a.runtimeStyle.height;
            a.runtimeStyle.width = "auto", a.runtimeStyle.height = "auto";
            var m = a.width,
                n = a.height;
            if (a.runtimeStyle.width = k, a.runtimeStyle.height = l, 3 == arguments.length) c = arguments[1], d = arguments[2], g = h = 0, i = e = m, j = f = n;
            else if (5 == arguments.length) c = arguments[1], d = arguments[2], e = arguments[3], f = arguments[4], g = h = 0, i = m, j = n;
            else {
                if (9 != arguments.length) throw Error("Invalid number of arguments");
                g = arguments[1], h = arguments[2], i = arguments[3], j = arguments[4], c = arguments[5], d = arguments[6], e = arguments[7], f = arguments[8]
            }
            var o = this.getCoords_(c, d),
                r = [],
                s = 10,
                t = 10;
            if (r.push(" <g_vml_:group", ' coordsize="', v * s, ",", v * t, '"', ' coordorigin="0,0"', ' style="width:', s, "px;height:", t, "px;position:absolute;"), 1 != this.m_[0][0] || this.m_[0][1]) {
                var u = [];
                u.push("M11=", this.m_[0][0], ",", "M12=", this.m_[1][0], ",", "M21=", this.m_[0][1], ",", "M22=", this.m_[1][1], ",", "Dx=", q(o.x / v), ",", "Dy=", q(o.y / v), "");
                var w = o,
                    x = this.getCoords_(c + e, d),
                    y = this.getCoords_(c, d + f),
                    z = this.getCoords_(c + e, d + f);
                w.x = p.max(w.x, x.x, y.x, z.x), w.y = p.max(w.y, x.y, y.y, z.y), r.push("padding:0 ", q(w.x / v), "px ", q(w.y / v), "px 0;filter:progid:DXImageTransform.Microsoft.Matrix(", u.join(""), ", sizingmethod='clip');")
            } else r.push("top:", q(o.y / v), "px;left:", q(o.x / v), "px;");
            r.push(' ">', '<g_vml_:image src="', a.src, '"', ' style="width:', v * e, "px;", " height:", v * f, 'px;"', ' cropleft="', g / m, '"', ' croptop="', h / n, '"', ' cropright="', (m - g - i) / m, '"', ' cropbottom="', (n - h - j) / n, '"', " />", "</g_vml_:group>"), this.element_.insertAdjacentHTML("BeforeEnd", r.join(""))
        }, C.stroke = function(a) {
            var b = [],
                c = h(a ? this.fillStyle : this.strokeStyle),
                d = c.color,
                e = c.alpha * this.globalAlpha,
                f = 10,
                g = 10;
            b.push("<g_vml_:shape", ' filled="', !!a, '"', ' style="position:absolute;width:', f, "px;height:", g, 'px;"', ' coordorigin="0 0" coordsize="', v * f, " ", v * g, '"', ' stroked="', !a, '"', ' path="');
            for (var j = {
                    x: null,
                    y: null
                }, k = {
                    x: null,
                    y: null
                }, l = 0; l < this.currentPath_.length; l++) {
                var m, n = this.currentPath_[l];
                switch (n.type) {
                    case "moveTo":
                        m = n, b.push(" m ", q(n.x), ",", q(n.y));
                        break;
                    case "lineTo":
                        b.push(" l ", q(n.x), ",", q(n.y));
                        break;
                    case "close":
                        b.push(" x "), n = null;
                        break;
                    case "bezierCurveTo":
                        b.push(" c ", q(n.cp1x), ",", q(n.cp1y), ",", q(n.cp2x), ",", q(n.cp2y), ",", q(n.x), ",", q(n.y));
                        break;
                    case "at":
                    case "wa":
                        b.push(" ", n.type, " ", q(n.x - this.arcScaleX_ * n.radius), ",", q(n.y - this.arcScaleY_ * n.radius), " ", q(n.x + this.arcScaleX_ * n.radius), ",", q(n.y + this.arcScaleY_ * n.radius), " ", q(n.xStart), ",", q(n.yStart), " ", q(n.xEnd), ",", q(n.yEnd))
                }
                n && ((null == j.x || n.x < j.x) && (j.x = n.x), (null == k.x || n.x > k.x) && (k.x = n.x), (null == j.y || n.y < j.y) && (j.y = n.y), (null == k.y || n.y > k.y) && (k.y = n.y))
            }
            if (b.push(' ">'), a)
                if ("object" == typeof this.fillStyle) {
                    var o = this.fillStyle,
                        r = 0,
                        s = {
                            x: 0,
                            y: 0
                        },
                        t = 0,
                        u = 1;
                    if ("gradient" == o.type_) {
                        var w = o.x0_ / this.arcScaleX_,
                            x = o.y0_ / this.arcScaleY_,
                            y = o.x1_ / this.arcScaleX_,
                            z = o.y1_ / this.arcScaleY_,
                            A = this.getCoords_(w, x),
                            B = this.getCoords_(y, z),
                            C = B.x - A.x,
                            D = B.y - A.y,
                            r = 180 * Math.atan2(C, D) / Math.PI;
                        r < 0 && (r += 360), r < 1e-6 && (r = 0)
                    } else {
                        var A = this.getCoords_(o.x0_, o.y0_),
                            E = k.x - j.x,
                            F = k.y - j.y,
                            s = {
                                x: (A.x - j.x) / E,
                                y: (A.y - j.y) / F
                            };
                        E /= this.arcScaleX_ * v, F /= this.arcScaleY_ * v;
                        var G = p.max(E, F),
                            t = 2 * o.r0_ / G,
                            u = 2 * o.r1_ / G - t
                    }
                    var H = o.colors_;
                    H.sort(function(a, b) {
                        return a.offset - b.offset
                    });
                    for (var I = H.length, J = H[0].color, K = H[I - 1].color, L = H[0].alpha * this.globalAlpha, M = H[I - 1].alpha * this.globalAlpha, N = [], l = 0; l < I; l++) {
                        var O = H[l];
                        N.push(O.offset * u + t + " " + O.color)
                    }
                    b.push('<g_vml_:fill type="', o.type_, '"', ' method="none" focus="100%"', ' color="', J, '"', ' color2="', K, '"', ' colors="', N.join(","), '"', ' opacity="', M, '"', ' g_o_:opacity2="', L, '"', ' angle="', r, '"', ' focusposition="', s.x, ",", s.y, '" />')
                } else b.push('<g_vml_:fill color="', d, '" opacity="', e, '" />');
            else {
                var P = this.lineScale_ * this.lineWidth;
                P < 1 && (e *= P), b.push("<g_vml_:stroke", ' opacity="', e, '"', ' joinstyle="', this.lineJoin, '"', ' miterlimit="', this.miterLimit, '"', ' endcap="', i(this.lineCap), '"', ' weight="', P, 'px"', ' color="', d, '" />')
            }
            b.push("</g_vml_:shape>"), this.element_.insertAdjacentHTML("beforeEnd", b.join(""))
        }, C.fill = function() {
            this.stroke(!0)
        }, C.closePath = function() {
            this.currentPath_.push({
                type: "close"
            })
        }, C.getCoords_ = function(a, b) {
            var c = this.m_;
            return {
                x: v * (a * c[0][0] + b * c[1][0] + c[2][0]) - w,
                y: v * (a * c[0][1] + b * c[1][1] + c[2][1]) - w
            }
        }, C.save = function() {
            var a = {};
            g(this, a), this.aStack_.push(a), this.mStack_.push(this.m_), this.m_ = f(e(), this.m_)
        }, C.restore = function() {
            g(this.aStack_.pop(), this), this.m_ = this.mStack_.pop()
        }, C.translate = function(a, b) {
            var c = [
                [1, 0, 0],
                [0, 1, 0],
                [a, b, 1]
            ];
            m(this, f(c, this.m_), !1)
        }, C.rotate = function(a) {
            var b = s(a),
                c = r(a),
                d = [
                    [b, c, 0],
                    [-c, b, 0],
                    [0, 0, 1]
                ];
            m(this, f(d, this.m_), !1)
        }, C.scale = function(a, b) {
            this.arcScaleX_ *= a, this.arcScaleY_ *= b;
            var c = [
                [a, 0, 0],
                [0, b, 0],
                [0, 0, 1]
            ];
            m(this, f(c, this.m_), !0)
        }, C.transform = function(a, b, c, d, e, g) {
            var h = [
                [a, b, 0],
                [c, d, 0],
                [e, g, 1]
            ];
            m(this, f(h, this.m_), !0)
        }, C.setTransform = function(a, b, c, d, e, f) {
            var g = [
                [a, b, 0],
                [c, d, 0],
                [e, f, 1]
            ];
            m(this, g, !0)
        }, C.clip = function() {}, C.arcTo = function() {}, C.createPattern = function() {
            return new o
        }, n.prototype.addColorStop = function(a, b) {
            b = h(b), this.colors_.push({
                offset: a,
                color: b.color,
                alpha: b.alpha
            })
        }, G_vmlCanvasManager = y, CanvasRenderingContext2D = j, CanvasGradient = n, CanvasPattern = o
    }(), dhtmlx && dhtmlx.A && (dhtmlx.A["thirdparty/excanvas/excanvas.js"] = !0), window.dhx || (dhx = {}), dhx.version = "3.0", dhx.codebase = "./", dhx.name = "Core", dhx.clone = function(a) {
        var b = dhx.clone.hb;
        return b.prototype = a, new b
    }, dhx.clone.hb = function() {}, dhx.extend = function(a, b, c) {
        if (a.qa) return dhx.PowerArray.insertAt.call(a.qa, b, 1), a;
        for (var d in b) a[d] && !c || (a[d] = b[d]);
        return b.defaults && dhx.extend(a.defaults, b.defaults), b.$init && b.$init.call(a), a
    }, dhx.copy = function(a) {
        if (arguments.length > 1) var b = arguments[0],
            a = arguments[1];
        else b = dhx.isArray(a) ? [] : {};
        for (var c in a) a[c] && "object" == typeof a[c] && !dhx.isDate(a[c]) ? (b[c] = dhx.isArray(a[c]) ? [] : {}, dhx.copy(b[c], a[c])) : b[c] = a[c];
        return b
    }, dhx.single = function(a) {
        var b = null,
            c = function(c) {
                return b || (b = new a({})), b.Sd && b.Sd.apply(b, arguments), b
            };
        return c
    }, dhx.protoUI = function() {
        var a = arguments,
            b = a[0].name,
            c = function(a) {
                if (!c) return dhx.ui[b].prototype;
                var d = c.qa;
                if (d) {
                    for (var e = [d[0]], f = 1; f < d.length; f++) e[f] = d[f], e[f].qa && (e[f] = e[f].call(dhx, e[f].name)), e[f].prototype && e[f].prototype.name && (dhx.ui[e[f].prototype.name] = e[f]);
                    if (dhx.ui[b] = dhx.proto.apply(dhx, e), c.ra)
                        for (f = 0; f < c.ra.length; f++) dhx.Type(dhx.ui[b], c.ra[f]);
                    c = d = null
                }
                return this != dhx ? new dhx.ui[b](a) : dhx.ui[b]
            };
        return c.qa = Array.prototype.slice.call(arguments, 0), dhx.ui[b] = c
    }, dhx.proto = function() {
        for (var a = arguments, b = a[0], c = !!b.$init, d = [], e = a.length - 1; e > 0; e--) {
            if ("function" == typeof a[e] && (a[e] = a[e].prototype), a[e].$init && d.push(a[e].$init), a[e].defaults) {
                var f = a[e].defaults;
                b.defaults || (b.defaults = {});
                for (var g in f) dhx.isUndefined(b.defaults[g]) && (b.defaults[g] = f[g])
            }
            if (a[e].type && b.type)
                for (g in a[e].type) b.type[g] || (b.type[g] = a[e].type[g]);
            for (var h in a[e]) b[h] || (b[h] = a[e][h])
        }
        c && d.push(b.$init), b.$init = function() {
            for (var a = 0; a < d.length; a++) d[a].apply(this, arguments)
        };
        var i = function(a) {
            this.$ready = [], this.$init(a), this.J && this.J(a, this.defaults);
            for (var b = 0; b < this.$ready.length; b++) this.$ready[b].call(this)
        };
        return i.prototype = b, b = a = null, i
    }, dhx.bind = function(a, b) {
        return function() {
            return a.apply(b, arguments)
        }
    }, dhx.require = function(a, b, c, d, e) {
        if ("string" != typeof a) {
            var f = a.length || 0,
                g = b;
            if (f)(b = function() {
                return f ? (f--, void dhx.require(a[a.length - f - 1], b, c)) : g.apply(this, arguments)
            })();
            else {
                for (var h in a) f++;
                b = function() {
                    f--, 0 === f && g.apply(this, arguments)
                };
                for (h in a) dhx.require(h, b, c)
            }
        } else if (dhx.A[a] !== !0)
            if (".css" == a.substr(-4)) {
                var i = dhx.html.create("LINK", {
                    type: "text/css",
                    rel: "stylesheet",
                    href: dhx.codebase + a
                });
                document.head.appendChild(i), b && b.call(c || window)
            } else b ? dhx.A[a] ? dhx.A[a].push([b, c]) : (dhx.A[a] = [
                [b, c]
            ], dhx.ajax(dhx.codebase + a, function(b) {
                dhx.exec(b);
                var c = dhx.A[a];
                dhx.A[a] = !0;
                for (var d = 0; d < c.length; d++) c[d][0].call(c[d][1] || window, !d)
            })) : (dhx.exec(dhx.ajax().sync().get(dhx.codebase + a).responseText), dhx.A[a] = !0)
    }, dhx.A = {}, dhx.exec = function(a) {
        window.execScript ? window.execScript(a) : window.eval(a)
    }, dhx.wrap = function(a, b) {
        return a ? function() {
            var c = a.apply(this, arguments);
            return b.apply(this, arguments), c
        } : b
    }, dhx.isUndefined = function(a) {
        return "undefined" == typeof a
    }, dhx.delay = function(a, b, c, d) {
        return window.setTimeout(function() {
            var d = a.apply(b, c || []);
            return a = b = c = null, d
        }, d || 1)
    }, dhx.uid = function() {
        return this.W || (this.W = (new Date).valueOf()), this.W++, this.W
    }, dhx.toNode = function(a) {
        return "string" == typeof a ? document.getElementById(a) : a
    }, dhx.toArray = function(a) {
        return dhx.extend(a || [], dhx.PowerArray, !0)
    }, dhx.toFunctor = function(a) {
        return "string" == typeof a ? eval(a) : a
    }, dhx.isArray = function(a) {
        return Array.isArray ? Array.isArray(a) : "[object Array]" === Object.prototype.toString.call(a)
    }, dhx.isDate = function(a) {
        return a instanceof Date
    }, dhx.q = {}, dhx.event = function(a, b, c, d) {
        var a = dhx.toNode(a),
            e = dhx.uid();
        return d && (c = dhx.bind(c, d)), dhx.q[e] = [a, b, c], a.addEventListener ? a.addEventListener(b, c, !1) : a.attachEvent && a.attachEvent("on" + b, c), e
    }, dhx.eventRemove = function(a) {
        if (a) {
            var b = dhx.q[a];
            b[0].removeEventListener ? b[0].removeEventListener(b[1], b[2], !1) : b[0].detachEvent && b[0].detachEvent("on" + b[1], b[2]), delete this.q[a]
        }
    }, dhx.debug_code = function(a) {
        a.call(dhx)
    }, dhx.EventSystem = {
        $init: function() {
            this.L || (this.L = {}, this.ta = {}, this.gb = {})
        },
        blockEvent: function() {
            this.L.ka = !0
        },
        unblockEvent: function() {
            this.L.ka = !1
        },
        mapEvent: function(a) {
            dhx.extend(this.gb, a, !0)
        },
        on_setter: function(a) {
            if (a)
                for (var b in a) "function" == typeof a[b] && this.attachEvent(b, a[b])
        },
        callEvent: function(a, b) {
            if (this.L.ka) return !0;
            var a = a.toLowerCase(),
                c = this.L[a.toLowerCase()],
                d = !0;
            if (c)
                for (var e = 0; e < c.length; e++) c[e].apply(this, b || []) === !1 && (d = !1);
            return this.gb[a] && !this.gb[a].callEvent(a, b) && (d = !1), d
        },
        attachEvent: function(a, b, c) {
            var a = a.toLowerCase(),
                c = c || dhx.uid(),
                b = dhx.toFunctor(b),
                d = this.L[a] || dhx.toArray();
            return d.push(b), this.L[a] = d, this.ta[c] = {
                f: b,
                t: a
            }, c
        },
        detachEvent: function(a) {
            if (this.ta[a]) {
                var b = this.ta[a].t,
                    c = this.ta[a].f,
                    d = this.L[b];
                d.remove(c), delete this.ta[a]
            }
        },
        hasEvent: function(a) {
            return a = a.toLowerCase(), !!this.L[a]
        }
    }, dhx.extend(dhx, dhx.EventSystem), dhx.PowerArray = {
        removeAt: function(a, b) {
            a >= 0 && this.splice(a, b || 1)
        },
        remove: function(a) {
            this.removeAt(this.find(a))
        },
        insertAt: function(a, b) {
            if (b || 0 === b) {
                var c = this.splice(b, this.length - b);
                this[b] = a, this.push.apply(this, c)
            } else this.push(a)
        },
        find: function(a) {
            for (var b = 0; b < this.length; b++)
                if (a == this[b]) return b;
            return -1
        },
        each: function(a, b) {
            for (var c = 0; c < this.length; c++) a.call(b || this, this[c])
        },
        map: function(a, b) {
            for (var c = 0; c < this.length; c++) this[c] = a.call(b || this, this[c]);
            return this
        },
        filter: function(a, b) {
            for (var c = 0; c < this.length; c++) a.call(b || this, this[c]) || (this.splice(c, 1), c--);
            return this
        }
    }, dhx.env = {},
    function() {
        navigator.userAgent.indexOf("Mobile") != -1 && (dhx.env.mobile = !0), (dhx.env.mobile || navigator.userAgent.indexOf("iPad") != -1 || navigator.userAgent.indexOf("Android") != -1) && (dhx.env.touch = !0), navigator.userAgent.indexOf("Opera") != -1 ? dhx.env.isOpera = !0 : (dhx.env.isIE = !!document.all, dhx.env.isFF = !document.all, dhx.env.isWebKit = navigator.userAgent.indexOf("KHTML") != -1, dhx.env.isSafari = dhx.env.isWebKit && navigator.userAgent.indexOf("Mac") != -1), navigator.userAgent.toLowerCase().indexOf("android") != -1 && (dhx.env.isAndroid = !0), dhx.env.transform = !1, dhx.env.transition = !1;
        for (var a = {
                names: ["transform", "transition"],
                transform: ["transform", "WebkitTransform", "MozTransform", "OTransform", "msTransform"],
                transition: ["transition", "WebkitTransition", "MozTransition", "OTransition", "msTransition"]
            }, b = document.createElement("DIV"), c = 0; c < a.names.length; c++)
            for (var d = a[a.names[c]], e = 0; e < d.length; e++)
                if ("undefined" != typeof b.style[d[e]]) {
                    dhx.env[a.names[c]] = d[e];
                    break
                }
        b.style[dhx.env.transform] = "translate3d(0,0,0)", dhx.env.translate = b.style[dhx.env.transform] ? "translate3d" : "translate";
        var f = "",
            g = !1;
        dhx.env.isOpera && (f = "-o-", g = "O"), dhx.env.isFF && (f = "-Moz-"), dhx.env.isWebKit && (f = "-webkit-"), dhx.env.isIE && (f = "-ms-"), dhx.env.transformCSSPrefix = f, dhx.env.transformPrefix = g || dhx.env.transformCSSPrefix.replace(/-/gi, ""), dhx.env.transitionEnd = "-Moz-" == dhx.env.transformCSSPrefix ? "transitionend" : dhx.env.transformPrefix + "TransitionEnd"
    }(), dhx.env.svg = function() {
        return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1")
    }(), dhx.html = {
        ua: 0,
        denySelect: function() {
            dhx.ua || (dhx.ua = document.onselectstart), document.onselectstart = dhx.html.stopEvent
        },
        allowSelect: function() {
            0 !== dhx.ua && (document.onselectstart = dhx.ua || null), dhx.ua = 0
        },
        index: function(a) {
            for (var b = 0; a = a.previousSibling;) b++;
            return b
        },
        zc: {},
        createCss: function(a) {
            var b, c = "";
            for (b in a) c += b + ":" + a[b] + ";";
            var d = this.zc[c];
            return d || (d = "s" + dhx.uid(), this.addStyle("." + d + "{" + c + "}"), this.zc[c] = d), d
        },
        addStyle: function(a) {
            var b = document.createElement("style");
            b.setAttribute("type", "text/css"), b.setAttribute("media", "screen"), b.styleSheet ? b.styleSheet.cssText = a : b.appendChild(document.createTextNode(a)), document.getElementsByTagName("head")[0].appendChild(b)
        },
        create: function(a, b, c) {
            var d, b = b || {},
                e = document.createElement(a);
            for (d in b) e.setAttribute(d, b[d]);
            return b.style && (e.style.cssText = b.style), b.class && (e.className = b.class), c && (e.innerHTML = c), e
        },
        getValue: function(a) {
            return a = dhx.toNode(a), a ? dhx.isUndefined(a.value) ? a.innerHTML : a.value : ""
        },
        remove: function(a) {
            if (a instanceof Array)
                for (var b = 0; b < a.length; b++) this.remove(a[b]);
            else a && a.parentNode && a.parentNode.removeChild(a)
        },
        insertBefore: function(a, b, c) {
            a && (b && b.parentNode ? b.parentNode.insertBefore(a, b) : c.appendChild(a))
        },
        locate: function(a, b) {
            if (a.tagName) var c = a;
            else a = a || event, c = a.target || a.srcElement;
            for (; c;) {
                if (c.getAttribute) {
                    var d = c.getAttribute(b);
                    if (d) return d
                }
                c = c.parentNode
            }
            return null
        },
        offset: function(a) {
            if (a.getBoundingClientRect) {
                var b = a.getBoundingClientRect(),
                    c = document.body,
                    d = document.documentElement,
                    e = window.pageYOffset || d.scrollTop || c.scrollTop,
                    f = window.pageXOffset || d.scrollLeft || c.scrollLeft,
                    g = d.clientTop || c.clientTop || 0,
                    h = d.clientLeft || c.clientLeft || 0,
                    i = b.top + e - g,
                    j = b.left + f - h;
                return {
                    y: Math.round(i),
                    x: Math.round(j)
                }
            }
            for (j = i = 0; a;) i += parseInt(a.offsetTop, 10), j += parseInt(a.offsetLeft, 10), a = a.offsetParent;
            return {
                y: i,
                x: j
            }
        },
        posRelative: function(a) {
            return a = a || event, dhx.isUndefined(a.offsetX) ? {
                x: a.layerX,
                y: a.layerY
            } : {
                x: a.offsetX,
                y: a.offsetY
            }
        },
        pos: function(a) {
            if (a = a || event, a.pageX || a.pageY) return {
                x: a.pageX,
                y: a.pageY
            };
            var b = dhx.env.isIE && "BackCompat" != document.compatMode ? document.documentElement : document.body;
            return {
                x: a.clientX + b.scrollLeft - b.clientLeft,
                y: a.clientY + b.scrollTop - b.clientTop
            }
        },
        preventEvent: function(a) {
            return a && a.preventDefault && a.preventDefault(), dhx.html.stopEvent(a)
        },
        stopEvent: function(a) {
            return (a || event).cancelBubble = !0, !1
        },
        addCss: function(a, b) {
            a.className += " " + b
        },
        removeCss: function(a, b) {
            a.className = a.className.replace(RegExp(" " + b, "g"), "")
        }
    }, dhx.ready = function(a) {
        this.Qd ? a.call() : this.Ka.push(a)
    }, dhx.Ka = [],
    function() {
        var a = document.getElementsByTagName("SCRIPT");
        a.length && (a = (a[a.length - 1].getAttribute("src") || "").split("/"), a.splice(a.length - 1, 1), dhx.codebase = a.slice(0, a.length).join("/") + "/"), dhx.event(window, "load", function() {
            dhx.callEvent("onReady", []), dhx.delay(function() {
                dhx.Qd = !0;
                for (var a = 0; a < dhx.Ka.length; a++) dhx.Ka[a].call();
                dhx.Ka = []
            })
        })
    }(), dhx.locale = dhx.locale || {}, dhx.ready(function() {
        dhx.event(document.body, "click", function(a) {
            dhx.callEvent("onClick", [a || event])
        })
    }),
    function() {
        var a = {},
            b = RegExp("(\\r\\n|\\n)", "g"),
            c = RegExp('(\\")', "g");
        dhx.Template = function(d) {
            if ("function" == typeof d) return d;
            if (a[d]) return a[d];
            if (d = (d || "").toString(), d.indexOf("->") != -1) switch (d = d.split("->"), d[0]) {
                case "html":
                    d = dhx.html.getValue(d[1]);
                    break;
                case "http":
                    d = (new dhx.ajax).sync().get(d[1], {
                        uid: dhx.uid()
                    }).responseText
            }
            d = (d || "").toString(), d = d.replace(b, "\\n"), d = d.replace(c, '\\"'), d = d.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g, '"+(obj.$1?"$2":"$3")+"'), d = d.replace(/\{common\.([^}\(]*)\}/g, "\"+(common.$1||'')+\""), d = d.replace(/\{common\.([^\}\(]*)\(\)\}/g, '"+(common.$1?common.$1.apply(this, arguments):"")+"'), d = d.replace(/\{obj\.([^}]*)\}/g, '"+(obj.$1)+"'), d = d.replace("{obj}", '"+obj+"'), d = d.replace(/#([^#'";, ]+)#/gi, '"+(obj.$1)+"');
            try {
                a[d] = Function("obj", "common", 'return "' + d + '";')
            } catch (a) {}
            return a[d]
        }, dhx.Template.empty = function() {
            return ""
        }, dhx.Template.bind = function(a) {
            return dhx.bind(dhx.Template(a), this)
        }, dhx.Type = function(a, b) {
            if (!a.qa) {
                "function" == typeof a && (a = a.prototype), a.types || (a.types = {
                    default: a.type
                }, a.type.name = "default");
                var c = b.name,
                    d = a.type;
                c && (d = a.types[c] = dhx.clone(b.baseType ? a.types[b.baseType] : a.type));
                for (var e in b) d[e] = 0 === e.indexOf("template") ? dhx.Template(b[e]) : b[e];
                return c
            }
            a.ra || (a.ra = []), a.ra.push(b)
        }
    }(), dhx.Settings = {
        $init: function() {
            this.e = this.config = {}
        },
        define: function(a, b) {
            return "object" == typeof a ? this.ea(a) : this.na(a, b)
        },
        na: function(a, b) {
            var c = this[a + "_setter"];
            return this.e[a] = c ? c.call(this, b, a) : b
        },
        ea: function(a) {
            if (a)
                for (var b in a) this.na(b, a[b])
        },
        J: function(a, b) {
            var c = {};
            b && (c = dhx.extend(c, b)), "object" == typeof a && !a.tagName && dhx.extend(c, a, !0), this.ea(c)
        },
        N: function(a, b) {
            for (var c in b) switch (typeof a[c]) {
                case "object":
                    a[c] = this.N(a[c] || {}, b[c]);
                    break;
                case "undefined":
                    a[c] = b[c]
            }
            return a
        },
        debug_freid_c_id: !0,
        debug_freid_a_name: !0
    }, dhx.ajax = function(a, b, c) {
        if (0 !== arguments.length) {
            var d = new dhx.ajax;
            return c && (d.master = c), d.get(a, null, b)
        }
        return this.getXHR ? this : new dhx.ajax
    }, dhx.ajax.count = 0, dhx.ajax.prototype = {
        master: null,
        getXHR: function() {
            return dhx.env.isIE ? new ActiveXObject("Microsoft.xmlHTTP") : new XMLHttpRequest
        },
        send: function(a, b, c) {
            var d = this.getXHR();
            if (dhx.isArray(c) || (c = [c]), "object" == typeof b) {
                var e, f = [];
                for (e in b) {
                    var g = b[e];
                    null !== g && g !== dhx.undefined || (g = ""), f.push(e + "=" + encodeURIComponent(g))
                }
                b = f.join("&")
            }
            b && "GET" === this.request && (a = a + (a.indexOf("?") != -1 ? "&" : "?") + b, b = null), d.open(this.request, a, !this.Bb), "POST" === this.request && d.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            var h = this;
            return d.onreadystatechange = function() {
                if (!d.readyState || 4 == d.readyState) {
                    if (dhx.ajax.count++, c && h)
                        for (var a = 0; a < c.length; a++)
                            if (c[a]) {
                                var b = c[a].success || c[a];
                                (d.status >= 400 || !d.status && !d.responseText) && (b = c[a].error), b && b.call(h.master || h, d.responseText, d.responseXML, d)
                            }
                    h && (h.master = null), c = h = null
                }
            }, d.send(b || null), d
        },
        get: function(a, b, c) {
            return 2 == arguments.length && (c = b, b = null), this.request = "GET", this.send(a, b, c)
        },
        post: function(a, b, c) {
            return this.request = "POST", this.send(a, b, c)
        },
        put: function(a, b, c) {
            return this.request = "PUT", this.send(a, b, c)
        },
        del: function(a, b, c) {
            return this.request = "DELETE", this.send(a, b, c)
        },
        sync: function() {
            return this.Bb = !0, this
        },
        bind: function(a) {
            return this.master = a, this
        }
    },
    dhx.arrayCombineJson = function(a, b) {
        if (a.length != b.length) {
            return false;
        } else {
            //new_array = new Array();
            new_json = {};
            for (i = 0; i < a.length; i++) {
                //new_array[a[i]] = b[i];
                new_json[a[i]] = b[i];
            }
            //return new_array;
            return new_json;
        }
    },
    dhx.csvToArray = function(strData, strDelimiter) {

        strDelimiter = (strDelimiter || ",");
        var lines=strData.split("\n");
        var result = [];
        
        for(var i=0;i<lines.length;i++){
            var currentline = lines[i].split(strDelimiter);
            result.push(currentline);
        }

        return (result);
    },
    dhx.send = function(a, b, c, d) {
        var e, f = dhx.html.create("FORM", {
            target: d || "_self",
            action: a,
            method: c || "POST"
        }, "");
        for (e in b) {
            var g = dhx.html.create("INPUT", {
                type: "hidden",
                name: e,
                value: b[e]
            }, "");
            f.appendChild(g)
        }
        f.style.display = "none", document.body.appendChild(f), f.submit(), document.body.removeChild(f)
    }, dhx.AtomDataLoader = {
        $init: function(a) {
            this.data = {}, a && (this.e.datatype = a.datatype || "json", this.$ready.push(this.ob))
        },
        ob: function() {
            this.wa = !0, this.e.url && this.url_setter(this.e.url), this.e.data && this.data_setter(this.e.data)
        },
        url_setter: function(a) {
            return this.wa ? (this.load(a, this.e.datatype), a) : a
        },
        data_setter: function(a) {
            return this.wa ? (this.parse(a, this.e.datatype), !0) : a
        },
        debug_freid_c_datatype: !0,
        debug_freid_c_dataFeed: !0,
        load: function(a, b, c) {
            if (!a.$proxy) {
                this.callEvent("onXLS", []), "string" == typeof b ? (this.data.driver = dhx.DataDriver[b], b = c) : this.data.driver || (this.data.driver = dhx.DataDriver.json);
                var d = [{
                    success: this.V
                }];
                return b && (dhx.isArray(b) ? d.push.apply(d, b) : d.push(b)), dhx.ajax(a, d, this)
            }
            a.load(this, "string" == typeof b ? b : "json")
        },
        parse: function(a, b) {
            this.callEvent("onXLS", []), this.data.driver = dhx.DataDriver[b || "json"], this.V(a, null)
        },
        V: function(a, b, c) {
            var d = this.data.driver,
                e = d.toObject(a, b);
            if (e) {
                var f = d.getRecords(e)[0];
                this.data = d ? d.getDetails(f) : a
            } else this.qb(a, b, c);
            this.callEvent("onXLE", [])
        },
        qb: function(a, b, c) {
            this.callEvent("onXLE", []), this.callEvent("onLoadError", arguments), dhx.callEvent("onLoadError", [a, b, c, this])
        },
        la: function(a) {
            if (!this.e.dataFeed || this.ca || !a) return !0;
            var b = this.e.dataFeed;
            return "function" == typeof b ? b.call(this, a.id || a, a) : (b = b + (b.indexOf("?") == -1 ? "?" : "&") + "action=get&id=" + encodeURIComponent(a.id || a), this.callEvent("onXLS", []), dhx.ajax(b, function(a, b, c) {
                this.ca = !0;
                var d = dhx.DataDriver.toObject(a, b);
                d ? this.setValues(d.getDetails(d.getRecords()[0])) : this.qb(a, b, c), this.ca = !1, this.callEvent("onXLE", [])
            }, this), !1)
        }
    }, dhx.DataDriver = {}, dhx.DataDriver.json = {
        toObject: function(a) {
            if (a || (a = "[]"), "string" == typeof a) {
                try {
                    eval("dhx.temp=" + a)
                } catch (a) {
                    return null
                }
                a = dhx.temp
            }
            if (a.data) {
                var c = a.data.config = {},
                    d;
                for (d in a) "data" != d && (c[d] = a[d]);
                a = a.data
            }
            return a
        },
        getRecords: function(a) {
            return a && !dhx.isArray(a) ? [a] : a
        },
        getDetails: function(a) {
            return "string" == typeof a ? {
                id: dhx.uid(),
                value: a
            } : a
        },
        getInfo: function(a) {
            var b = a.config;
            return b ? {
                v: b.total_count || 0,
                r: b.pos || 0,
                Nd: b.parent || 0,
                Ya: b.config,
                M: b.dhx_security
            } : {}
        },
        child: "data"
    }, dhx.DataDriver.html = {
        toObject: function(a) {
            if ("string" == typeof a) {
                var b = null;
                return a.indexOf("<") == -1 && (b = dhx.toNode(a)), b || (b = document.createElement("DIV"), b.innerHTML = a), b.getElementsByTagName(this.tag)
            }
            return a
        },
        getRecords: function(a) {
            for (var b = [], c = 0; c < a.childNodes.length; c++) {
                var d = a.childNodes[c];
                1 == d.nodeType && b.push(d)
            }
            return b
        },
        getDetails: function(a) {
            return dhx.DataDriver.xml.tagToObject(a)
        },
        getInfo: function() {
            return {
                v: 0,
                r: 0
            }
        },
        tag: "LI"
    }, dhx.DataDriver.jsarray = {
        toObject: function(a) {
            return "string" == typeof a ? (eval("dhx.temp=" + a), dhx.temp) : a
        },
        getRecords: function(a) {
            return a
        },
        getDetails: function(a) {
            for (var b = {}, c = 0; c < a.length; c++) b["data" + c] = a[c];
            return b
        },
        getInfo: function() {
            return {
                v: 0,
                r: 0
            }
        }
    }, dhx.DataDriver.csv = {
        toObject: function(a) {
            return a
        },
        getRecords: function(a) {
            return a.split(this.row)
        },
        getDetails: function(a) {
            for (var a = this.stringToArray(a), b = {}, c = 0; c < a.length; c++) b["data" + c] = a[c];
            return b
        },
        getInfo: function() {
            return {
                v: 0,
                r: 0
            }
        },
        stringToArray: function(a) {
            for (var a = a.split(this.cell), b = 0; b < a.length; b++) a[b] = a[b].replace(/^[ \t\n\r]*(\"|)/g, "").replace(/(\"|)[ \t\n\r]*$/g, "");
            return a
        },
        row: "\n",
        cell: ","
    }, dhx.DataDriver.xml = {
        ic: function(a) {
            return a && a.documentElement ? a.getElementsByTagName("parsererror").length ? null : a : null
        },
        toObject: function(a) {
            if (this.ic(b)) return b;
            var b = "string" == typeof a ? this.fromString(a.replace(/^[\s]+/, "")) : a;
            return this.ic(b) ? b : null
        },
        getRecords: function(a) {
            return this.xpath(a, this.records)
        },
        records: "/*/item",
        child: "item",
        config: "/*/config",
        getDetails: function(a) {
            return this.tagToObject(a, {})
        },
        getInfo: function(a) {
            var b = this.xpath(a, this.config),
                b = b.length ? this.assignTypes(this.tagToObject(b[0], {})) : null;
            return {
                v: a.documentElement.getAttribute("total_count") || 0,
                r: a.documentElement.getAttribute("pos") || 0,
                Nd: a.documentElement.getAttribute("parent") || 0,
                Ya: b,
                M: a.documentElement.getAttribute("dhx_security") || null
            }
        },
        xpath: function(a, b) {
            if (window.XPathResult) {
                var c = a;
                a.nodeName.indexOf("document") == -1 && (a = a.ownerDocument);
                for (var d = [], e = a.evaluate(b, c, null, XPathResult.ANY_TYPE, null), f = e.iterateNext(); f;) d.push(f), f = e.iterateNext();
                return d
            }
            var g = !0;
            try {
                "undefined" == typeof a.selectNodes && (g = !1)
            } catch (a) {}
            if (g) return a.selectNodes(b);
            var h = b.split("/").pop();
            return a.getElementsByTagName(h)
        },
        assignTypes: function(a) {
            for (var b in a) {
                var c = a[b];
                "object" == typeof c ? this.assignTypes(c) : "string" == typeof c && "" !== c && ("true" == c ? a[b] = !0 : "false" == c ? a[b] = !1 : c == 1 * c && (a[b] *= 1))
            }
            return a
        },
        tagToObject: function(a, b) {
            var b = b || {},
                c = !1,
                d = a.attributes;
            if (d && d.length) {
                for (var e = 0; e < d.length; e++) b[d[e].name] = d[e].value;
                c = !0
            }
            for (var f = a.childNodes, e = 0; e < f.length; e++)
                if (1 == f[e].nodeType) {
                    var g = f[e].tagName;
                    "undefined" != typeof b[g] ? (dhx.isArray(b[g]) || (b[g] = [b[g]]), b[g].push(this.tagToObject(f[e], {}))) : b[f[e].tagName] = this.tagToObject(f[e], {}), c = !0
                }
            return c ? (b.value = b.value || this.nodeValue(a), b) : this.nodeValue(a)
        },
        nodeValue: function(a) {
            return a.firstChild ? a.firstChild.data : ""
        },
        fromString: function(a) {
            try {
                if (window.DOMParser) return (new DOMParser).parseFromString(a, "text/xml");
                if (window.ActiveXObject) {
                    var b = new ActiveXObject("Microsoft.xmlDOM");
                    return b.loadXML(a), b
                }
            } catch (a) {
                return null
            }
        }
    }, dhx.debug_code(function() {
        dhx.debug_load_event = dhx.attachEvent("onLoadError", function(a) {
            0 !== a.indexOf("<?php") && a.indexOf("DHX_ERROR:"), dhx.message && dhx.message({
                type: "debug",
                text: null,
                expire: -1
            })
        }), dhx.ready(function() {
            var a = document.location.href;
            0 === a.indexOf("file:") && (dhx.message ? dhx.message({
                type: "error",
                text: "Please open sample by http,<br>not as file://",
                expire: -1
            }) : window.alert("Please open sample by http, not as file://"))
        })
    }), dhx.DataLoader = dhx.proto({
        $init: function(a) {
            a = a || "", this.ia = dhx.toArray(), this.data = new dhx.DataStore, this.data.attachEvent("onClearAll", dhx.bind(this.Kc, this)), this.data.attachEvent("onServerConfig", dhx.bind(this.Jc, this)), this.data.feed = this.gd
        },
        gd: function(a, b, c) {
            return this.H ? this.H = [a, b, c] : (this.H = !0, this.$b = [a, b], void this.jd.call(this, a, b, c))
        },
        jd: function(a, b, c) {
            var d = this.data.url;
            a < 0 && (a = 0), this.load(d + (d.indexOf("?") == -1 ? "?" : "&") + (this.dataCount() ? "continue=true&" : "") + "start=" + a + "&count=" + b, [this.hd, c])
        },
        hd: function() {
            var a = this.H,
                b = this.$b;
            this.H = !1, "object" == typeof a && (a[0] != b[0] || a[1] != b[1]) && this.data.feed.apply(this, a)
        },
        load: function(a, b) {
            var c = dhx.AtomDataLoader.load.apply(this, arguments);
            this.ia.push(c), this.data.url || (this.data.url = a)
        },
        loadNext: function(a, b, c, d, e) {
            this.e.datathrottle && !e ? (this.Ac && window.clearTimeout(this.Ac), this.Ac = dhx.delay(function() {
                this.loadNext(a, b, c, d, !0)
            }, this, 0, this.e.datathrottle)) : (!b && 0 !== b && (b = this.dataCount()), this.data.url = this.data.url || d, this.callEvent("onDataRequest", [b, a, c, d]) && this.data.url && this.data.feed.call(this, b, a, c))
        },
        le: function(a, b) {
            var c = this.$b;
            return !!(this.H && c && c[0] <= b && c[1] + c[0] >= a + b)
        },
        V: function(a, b, c) {
            this.ia.remove(c);
            var d = this.data.driver.toObject(a, b);
            return d ? (this.data.rb(d), this.Xa(), void this.callEvent("onXLE", [])) : this.qb(a, b, c)
        },
        removeMissed_setter: function(a) {
            return this.data.Td = a
        },
        scheme_setter: function(a) {
            this.data.scheme(a)
        },
        dataFeed_setter: function(a) {
            return this.data.attachEvent("onBeforeFilter", dhx.bind(function(a, b) {
                if (this.e.dataFeed) {
                    var c = {};
                    if (a || b) {
                        if ("function" == typeof a) {
                            if (!b) return;
                            a(b, c)
                        } else c = {
                            text: b
                        };
                        this.clearAll();
                        var d = this.e.dataFeed,
                            e = [];
                        if ("function" == typeof d) return d.call(this, b, c);
                        for (var f in c) e.push("dhx_filter[" + f + "]=" + encodeURIComponent(c[f]));
                        return this.load(d + (d.indexOf("?") < 0 ? "?" : "&") + e.join("&"), this.e.datatype), !1
                    }
                }
            }, this)), a
        },
        debug_freid_c_ready: !0,
        debug_freid_c_datathrottle: !0,
        Xa: function() {
            if (this.e.ready && !this.Rd) {
                var a = dhx.toFunctor(this.e.ready);
                a && dhx.delay(a, this, arguments), this.Rd = !0
            }
        },
        Kc: function() {
            for (var a = 0; a < this.ia.length; a++) this.ia[a].abort();
            this.ia = dhx.toArray()
        },
        Jc: function(a) {
            this.ea(a)
        }
    }, dhx.AtomDataLoader), dhx.DataStore = function() {
        this.name = "DataStore", dhx.extend(this, dhx.EventSystem), this.setDriver("json"), this.pull = {}, this.order = dhx.toArray(), this.I = {}
    }, dhx.DataStore.prototype = {
        setDriver: function(a) {
            this.driver = dhx.DataDriver[a]
        },
        rb: function(a) {
            this.callEvent("onParse", [this.driver, a]), this.h && this.filter();
            var b = this.driver.getInfo(a);
            b.M && (dhx.securityKey = b.M), b.Ya && this.callEvent("onServerConfig", [b.Ya]);
            var c = this.driver.getRecords(a);
            this.Ad(b, c), this.qc && this.xd && this.xd(this.qc), this.sc && (this.blockEvent(), this.sort(this.sc), this.unblockEvent()), this.callEvent("onStoreLoad", [this.driver, a]), this.refresh()
        },
        Ad: function(a, b) {
            var c = 1 * (a.r || 0),
                d = !0,
                e = !1;
            if (0 === c && this.order[0]) {
                if (this.Td)
                    for (var e = {}, f = 0; f < this.order.length; f++) e[this.order[f]] = !0;
                d = !1, c = this.order.length
            }
            for (var g = 0, f = 0; f < b.length; f++) {
                var h = this.driver.getDetails(b[f]),
                    i = this.id(h);
                this.pull[i] ? d && this.order[g + c] && g++ : (this.order[g + c] = i, g++), this.pull[i] ? (dhx.extend(this.pull[i], h, !0), this.Ma && this.Ma(this.pull[i]), e && delete e[i]) : (this.pull[i] = h, this.La && this.La(h))
            }
            if (e) {
                this.blockEvent();
                for (var j in e) this.remove(j);
                this.unblockEvent()
            }
            this.order[a.v - 1] || (this.order[a.v - 1] = dhx.undefined)
        },
        id: function(a) {
            return a.id || (a.id = dhx.uid())
        },
        changeId: function(a, b) {
            this.pull[a] && (this.pull[b] = this.pull[a]), this.pull[b].id = b, this.order[this.order.find(a)] = b, this.h && (this.h[this.h.find(a)] = b), this.I[a] && (this.I[b] = this.I[a], delete this.I[a]), this.callEvent("onIdChange", [a, b]), this.wb && this.wb(a, b), delete this.pull[a]
        },
        item: function(a) {
            return this.pull[a]
        },
        update: function(a, b) {
            return dhx.isUndefined(b) && (b = this.item(a)), this.Ma && this.Ma(b), this.callEvent("onBeforeUpdate", [a, b]) !== !1 && (this.pull[a] = b,
                void this.callEvent("onStoreUpdated", [a, b, "update"]))
        },
        refresh: function(a) {
            this.ya || (a ? this.callEvent("onStoreUpdated", [a, this.pull[a], "paint"]) : this.callEvent("onStoreUpdated", [null, null, null]))
        },
        silent: function(a, b) {
            this.ya = !0, a.call(b || this), this.ya = !1
        },
        getRange: function(a, b) {
            if (a = a ? this.indexById(a) : this.$min || this.startOffset || 0, b ? b = this.indexById(b) : (b = Math.min(this.$max || this.endOffset || 1 / 0, this.dataCount() - 1), b < 0 && (b = 0)), a > b) var c = b,
                b = a,
                a = c;
            return this.getIndexRange(a, b)
        },
        getIndexRange: function(a, b) {
            for (var b = Math.min(b || 1 / 0, this.dataCount() - 1), c = dhx.toArray(), d = a || 0; d <= b; d++) c.push(this.item(this.order[d]));
            return c
        },
        dataCount: function() {
            return this.order.length
        },
        exists: function(a) {
            return !!this.pull[a]
        },
        move: function(a, b) {
            var c = this.idByIndex(a),
                d = this.item(c);
            this.order.removeAt(a), this.order.insertAt(c, Math.min(this.order.length, b)), this.callEvent("onStoreUpdated", [c, d, "move"])
        },
        scheme: function(a) {
            this.o = {}, this.La = a.$init, this.Ma = a.$update, this.rc = a.$serialize, this.qc = a.$group, this.sc = a.$sort;
            for (var b in a) "$" != b.substr(0, 1) && (this.o[b] = a[b])
        },
        sync: function(a, b, c) {
            "string" == typeof a && (a = $$("source")), "function" != typeof b && (c = b, b = null), dhx.debug_bind && (this.debug_sync_master = a), this.Ta = !1, "DataStore" != a.name && (a.data && "DataStore" == a.data.name ? a = a.data : this.Ta = !0);
            var d = dhx.bind(function(d, e, f) {
                if (this.Ta) {
                    if (!d) return;
                    if (0 === d.indexOf("change")) return void("change" == d && (this.pull[e.id] = e.attributes, this.refresh(e.id)));
                    "reset" == d && (f = e), this.order = [], this.pull = {}, this.h = null;
                    for (var g = 0; g < f.models.length; g++) {
                        var h = f.models[g].id;
                        this.order.push(h), this.pull[h] = f.models[g].attributes
                    }
                } else this.h = null, this.order = dhx.toArray([].concat(a.order)), this.pull = a.pull;
                b && this.silent(b), this.Ia && this.Ia(), this.callEvent("onSyncApply", []), c ? c = !1 : this.refresh()
            }, this);
            this.Ta ? a.bind("all", d) : this.za = [a.attachEvent("onStoreUpdated", d), a.attachEvent("onIdChange", dhx.bind(function(a, b) {
                this.changeId(a, b)
            }, this))], d()
        },
        add: function(a, b, c) {
            if (this.o)
                for (var d in this.o) dhx.isUndefined(a[d]) && (a[d] = this.o[d]);
            this.La && this.La(a);
            var e = this.id(a),
                f = c || this.order,
                g = f.length;
            if ((dhx.isUndefined(b) || b < 0) && (b = g), b > g && (b = Math.min(f.length, b)), this.callEvent("onBeforeAdd", [e, a, b]) === !1) return !1;
            if (this.pull[e] = a, f.insertAt(e, b), this.h) {
                var h = this.h.length;
                !b && this.order.length && (h = 0), this.h.insertAt(e, h)
            }
            return this.callEvent("onAfterAdd", [e, b]), this.callEvent("onStoreUpdated", [e, a, "add"]), e
        },
        remove: function(a) {
            if (dhx.isArray(a))
                for (var b = 0; b < a.length; b++) this.remove(a[b]);
            else {
                if (this.callEvent("onBeforeDelete", [a]) === !1) return !1;
                var c = this.item(a);
                this.order.remove(a), this.h && this.h.remove(a), delete this.pull[a], this.I[a] && delete this.I[a], this.callEvent("onAfterDelete", [a]), this.callEvent("onStoreUpdated", [a, c, "delete"])
            }
        },
        clearAll: function() {
            this.pull = {}, this.order = dhx.toArray(), this.h = this.url = null, this.callEvent("onClearAll", []), this.refresh()
        },
        idByIndex: function(a) {
            return this.order[a]
        },
        indexById: function(a) {
            var b = this.order.find(a);
            return b
        },
        next: function(a, b) {
            return this.order[this.indexById(a) + (b || 1)]
        },
        first: function() {
            return this.order[0]
        },
        last: function() {
            return this.order[this.order.length - 1]
        },
        previous: function(a, b) {
            return this.order[this.indexById(a) - (b || 1)]
        },
        sort: function(a, b, c) {
            var d = a;
            "function" == typeof a ? d = {
                as: a,
                dir: b
            } : "string" == typeof a && (d = {
                by: a.replace(/#/g, ""),
                dir: b,
                as: c
            });
            var e = [d.by, d.dir, d.as];
            this.callEvent("onBeforeSort", e) && (this.ae(d), this.refresh(), this.callEvent("onAfterSort", e))
        },
        ae: function(a) {
            if (this.order.length) {
                var b = this.$d.Mc(a),
                    c = this.getRange(this.first(), this.last());
                c.sort(b), this.order = c.map(function(a) {
                    return this.id(a)
                }, this)
            }
        },
        nd: function(a) {
            this.h && !a && (this.order = this.h, delete this.h)
        },
        md: function(a, b, c) {
            for (var d = dhx.toArray(), e = 0; e < this.order.length; e++) {
                var f = this.order[e];
                a(this.item(f), b) && d.push(f)
            }
            c && this.h || (this.h = this.order), this.order = d
        },
        filter: function(a, b, c) {
            if (this.callEvent("onBeforeFilter", [a, b]) && (this.nd(c), this.order.length)) {
                if (a) {
                    var d = a,
                        b = b || "";
                    "string" == typeof a && (a = a.replace(/#/g, ""), "function" == typeof b ? d = function(c) {
                        return b(c[a])
                    } : (b = b.toString().toLowerCase(), d = function(b, c) {
                        return (b[a] || "").toString().toLowerCase().indexOf(c) != -1
                    })), this.md(d, b, c, this.je)
                }
                this.refresh(), this.callEvent("onAfterFilter", [])
            }
        },
        each: function(a, b) {
            for (var c = 0; c < this.order.length; c++) a.call(b || this, this.item(this.order[c]))
        },
        Fd: function(a, b) {
            return function() {
                return a[b].apply(a, arguments)
            }
        },
        addMark: function(a, b, c, d) {
            var e = this.I[a] || {};
            return this.I[a] = e, !e[b] && (e[b] = d || !0, c) && (this.item(a).$css = (this.item(a).$css || "") + " " + b, this.refresh(a)), e[b]
        },
        removeMark: function(a, b, c) {
            var d = this.I[a];
            if (d && d[b] && delete d[b], c) {
                var e = this.item(a).$css;
                e && (this.item(a).$css = e.replace(b, ""), this.refresh(a))
            }
        },
        hasMark: function(a, b) {
            var c = this.I[a];
            return c && c[b]
        },
        provideApi: function(a, b) {
            this.debug_bind_master = a, b && this.mapEvent({
                onbeforesort: a,
                onaftersort: a,
                onbeforeadd: a,
                onafteradd: a,
                onbeforedelete: a,
                onafterdelete: a,
                onbeforeupdate: a
            });
            for (var c = "sort,add,remove,exists,idByIndex,indexById,item,update,refresh,dataCount,filter,next,previous,clearAll,first,last,serialize,sync,addMark,removeMark,hasMark".split(","), d = 0; d < c.length; d++) a[c[d]] = this.Fd(this, c[d])
        },
        serialize: function() {
            for (var a = this.order, b = [], c = 0; c < a.length; c++) {
                var d = this.pull[a[c]];
                (!this.rc || (d = this.rc(d), !(d === !1))) && b.push(d)
            }
            return b
        },
        $d: {
            Mc: function(a) {
                return this.Rc(a.dir, this.Ic(a.by, a.as))
            },
            Ec: {
                date: function(a, b) {
                    return a -= 0, b -= 0, a > b ? 1 : a < b ? -1 : 0
                },
                int: function(a, b) {
                    return a *= 1, b *= 1, a > b ? 1 : a < b ? -1 : 0
                },
                string_strict: function(a, b) {
                    return a = a.toString(), b = b.toString(), a > b ? 1 : a < b ? -1 : 0
                },
                string: function(a, b) {
                    return b ? a ? (a = a.toString().toLowerCase(), b = b.toString().toLowerCase(), a > b ? 1 : a < b ? -1 : 0) : -1 : 1
                }
            },
            Ic: function(a, b) {
                return a ? ("function" != typeof b && (b = this.Ec[b || "string"]), function(c, d) {
                    return b(c[a], d[a])
                }) : b
            },
            Rc: function(a, b) {
                return "asc" != a && a ? function(a, c) {
                    return b(a, c) * -1
                } : b
            }
        }
    }, dhx.BaseBind = {
        debug_freid_ignore: {
            id: !0
        },
        bind: function(a, b, c) {
            if ("string" == typeof a && (a = dhx.ui.get(a)), a.i && a.i(), this.i && this.i(), a.getBindData || dhx.extend(a, dhx.BindSource), !this.Fc) {
                var d = this.render;
                if (this.filter) {
                    var e = this.e.id;
                    this.data.Ia = function() {
                        a.Z[e] = !1
                    }
                }
                this.render = function() {
                    if (!this.fc) {
                        this.fc = !0;
                        var a = this.callEvent("onBindRequest");
                        return this.fc = !1, d.apply(this, a === !1 ? arguments : [])
                    }
                }, (this.getValue || this.getValues) && (this.save = function() {
                    this.validate && !this.validate() || a.setBindData(this.getValue ? this.getValue : this.getValues(), this.e.id)
                }), this.Fc = !0
            }
            a.addBind(this.e.id, b, c);
            var f = this.e.id;
            this.attachEvent(this.touchable ? "onAfterRender" : "onBindRequest", function() {
                return a.getBindData(f)
            }), !this.e.dataFeed && this.loadNext && this.data.attachEvent("onStoreLoad", function() {
                a.Z[f] = !1
            }), this.isVisible(this.e.id) && this.refresh()
        },
        O: function(a) {
            a.removeBind(this.e.id);
            var b = this.za || (this.data ? this.data.za : 0);
            if (b && a.data)
                for (var c = 0; c < b.length; c++) a.data.detachEvent(b[c])
        }
    }, dhx.BindSource = {
        $init: function() {
            this.ja = {}, this.Z = {}, this.Fa = {}, this.Gc(this)
        },
        saveBatch: function(a) {
            this.Pb = !0, a.call(this), this.Pb = !1, this.Y()
        },
        setBindData: function(a, b) {
            if (b && (this.Fa[b] = !0), this.setValue) this.setValue(a);
            else if (this.setValues) this.setValues(a);
            else {
                var c = this.getCursor();
                c && (a = dhx.extend(this.item(c), a, !0), this.update(c, a))
            }
            this.callEvent("onBindUpdate", [a, b]), this.save && this.save(), b && (this.Fa[b] = !1)
        },
        getBindData: function(a, b) {
            if (this.Z[a]) return !1;
            var c = dhx.ui.get(a);
            c.isVisible(c.e.id) && (this.Z[a] = !0, this.Ua(c, this.ja[a][0], this.ja[a][1]), b && c.filter && c.refresh())
        },
        addBind: function(a, b, c) {
            this.ja[a] = [b, c]
        },
        removeBind: function(a) {
            delete this.ja[a], delete this.Z[a], delete this.Fa[a]
        },
        Gc: function(a) {
            a.filter ? dhx.extend(this, dhx.CollectionBind) : a.setValue ? dhx.extend(this, dhx.ValueBind) : dhx.extend(this, dhx.RecordBind)
        },
        Y: function() {
            if (!this.Pb)
                for (var a in this.ja) this.Fa[a] || (this.Z[a] = !1, this.getBindData(a, !0))
        },
        Gb: function(a, b, c) {
            a.setValue ? a.setValue(c ? c[b] : c) : a.filter ? a.data.silent(function() {
                this.filter(b, c)
            }) : !c && a.clear ? a.clear() : a.la(c) && a.setValues(dhx.clone(c)), a.callEvent("onBindApply", [c, b, this])
        }
    }, dhx.DataValue = dhx.proto({
        name: "DataValue",
        isVisible: function() {
            return !0
        },
        $init: function(a) {
            var b = (this.data = a) && a.id ? a.id : dhx.uid();
            this.e = {
                id: b
            }, dhx.ui.views[b] = this
        },
        setValue: function(a) {
            this.data = a, this.callEvent("onChange", [a])
        },
        getValue: function() {
            return this.data
        },
        refresh: function() {
            this.callEvent("onBindRequest")
        }
    }, dhx.EventSystem, dhx.BaseBind), dhx.DataRecord = dhx.proto({
        name: "DataRecord",
        isVisible: function() {
            return !0
        },
        $init: function(a) {
            this.data = a || {};
            var b = a && a.id ? a.id : dhx.uid();
            this.e = {
                id: b
            }, dhx.ui.views[b] = this
        },
        getValues: function() {
            return this.data
        },
        setValues: function(a) {
            this.data = a, this.callEvent("onChange", [a])
        },
        refresh: function() {
            this.callEvent("onBindRequest")
        }
    }, dhx.EventSystem, dhx.BaseBind, dhx.AtomDataLoader, dhx.Settings), dhx.DataCollection = dhx.proto({
        name: "DataCollection",
        isVisible: function() {
            return !!(this.data.order.length || this.data.h || this.e.dataFeed)
        },
        $init: function(a) {
            this.data.provideApi(this, !0);
            var b = a && a.id ? a.id : dhx.uid();
            this.e.id = b, dhx.ui.views[b] = this, this.data.attachEvent("onStoreLoad", dhx.bind(function() {
                this.callEvent("onBindRequest", [])
            }, this))
        },
        refresh: function() {
            this.callEvent("onBindRequest", [])
        }
    }, dhx.DataLoader, dhx.EventSystem, dhx.BaseBind, dhx.Settings), dhx.ValueBind = {
        $init: function() {
            this.attachEvent("onChange", this.Y)
        },
        Ua: function(a, b, c) {
            var d = this.getValue() || "";
            if (c && (d = c(d)), a.setValue) a.setValue(d);
            else if (a.filter) a.data.silent(function() {
                this.filter(b, d)
            });
            else {
                var e = {};
                e[b] = d, a.la(d) && a.setValues(e)
            }
            a.callEvent("onBindApply", [d, b, this])
        }
    }, dhx.RecordBind = {
        $init: function() {
            this.attachEvent("onChange", this.Y)
        },
        Ua: function(a, b) {
            var c = this.getValues() || null;
            this.Gb(a, b, c)
        }
    }, dhx.CollectionBind = {
        $init: function() {
            this.Q = null, this.attachEvent("onSelectChange", function() {
                var a = this.getSelected();
                this.setCursor(a ? a.id || a : null)
            }), this.attachEvent("onAfterCursorChange", this.Y), this.data.attachEvent("onStoreUpdated", dhx.bind(function(a, b, c) {
                a && a == this.getCursor() && "paint" != c && this.Y()
            }, this)), this.data.attachEvent("onClearAll", dhx.bind(function() {
                this.Q = null
            }, this)), this.data.attachEvent("onIdChange", dhx.bind(function(a, b) {
                this.Q == a && (this.Q = b)
            }, this))
        },
        setCursor: function(a) {
            a == this.Q || null !== a && !this.item(a) || (this.callEvent("onBeforeCursorChange", [this.Q]), this.Q = a, this.callEvent("onAfterCursorChange", [a]))
        },
        getCursor: function() {
            return this.Q
        },
        Ua: function(a, b) {
            var c = this.item(this.getCursor()) || this.e.defaultData || null;
            this.Gb(a, b, c)
        }
    }, dhx.ui || (dhx.ui = {}), dhx.ui.views || (dhx.ui.views = {}, dhx.ui.get = function(a) {
        return a.e ? a : dhx.ui.views[a]
    }), dhtmlXDataStore = function(a) {
        var b = new dhx.DataCollection(a),
            c = "_dp_init";
        return b[c] = function(a) {
            var b = "_methods";
            a[b] = ["dummy", "dummy", "changeId", "dummy"], this.data.Gd = {
                add: "inserted",
                update: "updated",
                delete: "deleted"
            }, this.data.attachEvent("onStoreUpdated", function(b, c, d) {
                b && !a.uc && a.setUpdated(b, !0, this.Gd[d])
            }), b = "_getRowData", a[b] = function(a) {
                var b = this.obj.data.item(a),
                    c = {
                        id: a
                    };
                if (c[this.action_param] = this.obj.getUserData(a), b)
                    for (var d in b) c[d] = b[d];
                return c
            }, this.changeId = function(b, c) {
                this.data.changeId(b, c), a.uc = !0, this.data.callEvent("onStoreUpdated", [c, this.item(c), "update"]), a.uc = !1
            }, b = "_clearUpdateFlag", a[b] = function() {}, this.ha = {}
        }, b.dummy = function() {}, b.setUserData = function(a, b, c) {
            this.ha[a] = c
        }, b.getUserData = function(a) {
            return this.ha[a]
        }, b.dataFeed = function(a) {
            this.define("dataFeed", a)
        }, dhx.extend(b, dhx.BindSource), b
    }, window.dhtmlXDataView && (dhtmlXDataView.prototype.i = function() {
        this.isVisible = function() {
            return !!(this.data.order.length || this.data.h || this.e.dataFeed)
        };
        var a = "_settings";
        this.e = this.e || this[a], this.e.id || (this.e.id = dhx.uid()), this.unbind = dhx.BaseBind.unbind, this.unsync = dhx.BaseBind.unsync, dhx.ui.views[this.e.id] = this
    }), window.dhtmlXChart && (dhtmlXChart.prototype.i = function() {
        this.isVisible = function() {
            return !!(this.data.order.length || this.data.ke || this.e.dataFeed)
        };
        var a = "_settings";
        this.e = this.e || this[a], this.e.id || (this.e.id = dhx.uid()), this.unbind = dhx.BaseBind.unbind, this.unsync = dhx.BaseBind.unsync, dhx.ui.views[this.e.id] = this
    }), dhx.BaseBind.unsync = function(a) {
        return dhx.BaseBind.O.call(this, a)
    }, dhx.BaseBind.unbind = function(a) {
        return dhx.BaseBind.O.call(this, a)
    }, dhx.BaseBind.legacyBind = function() {
        return dhx.BaseBind.bind.apply(this, arguments)
    }, dhx.BaseBind.legacySync = function(a, b) {
        return this.i && this.i(), a.i && a.i(), this.attachEvent("onAfterEditStop", function(a) {
            return this.save(a), !0
        }), this.attachEvent("onDataRequest", function(b, c) {
            for (var d = b; d < b + c; d++)
                if (!a.data.order[d]) return a.loadNext(c, b), !1
        }), this.save = function(b) {
            b || (b = this.getCursor());
            var c, d = this.item(b),
                e = a.item(b);
            for (c in d) 0 !== c.indexOf("$") && (e[c] = d[c]);
            a.refresh(b)
        }, a && "DataCollection" == a.name ? a.data.sync.apply(this.data, arguments) : this.data.sync.apply(this.data, arguments)
    }, window.dhtmlXForm && (dhtmlXForm.prototype.bind = function(a) {
        dhx.BaseBind.bind.apply(this, arguments), a.getBindData(this.e.id)
    }, dhtmlXForm.prototype.unbind = function(a) {
        dhx.BaseBind.O.call(this, a)
    }, dhtmlXForm.prototype.i = function() {
        dhx.isUndefined(this.e) && (this.e = {
            id: dhx.uid(),
            dataFeed: this.X
        }, dhx.ui.views[this.e.id] = this)
    }, dhtmlXForm.prototype.la = function(a) {
        if (!this.e.dataFeed || this.ca || !a) return !0;
        var b = this.e.dataFeed;
        return "function" == typeof b ? b.call(this, a.id || a, a) : (b = b + (b.indexOf("?") == -1 ? "?" : "&") + "action=get&id=" + encodeURIComponent(a.id || a), this.load(b), !1)
    }, dhtmlXForm.prototype.setValues = dhtmlXForm.prototype.setFormData, dhtmlXForm.prototype.getValues = function() {
        return this.getFormData(!1, !0)
    }, dhtmlXForm.prototype.dataFeed = function(a) {
        this.e ? this.e.dataFeed = a : this.X = a
    }, dhtmlXForm.prototype.refresh = dhtmlXForm.prototype.isVisible = function() {
        return !0
    }), window.scheduler && (window.Scheduler || (window.Scheduler = {}), Scheduler.$syncFactory = function(a) {
        a.sync = function(b, c) {
            this.i && this.i(), b.i && b.i();
            var d = "_process_loading",
                e = function() {
                    a.clearAll();
                    for (var e = b.data.order, f = b.data.pull, g = [], h = 0; h < e.length; h++) g[h] = c && c.copy ? dhx.clone(f[e[h]]) : f[e[h]];
                    a[d](g)
                };
            this.save = function(a) {
                a || (a = this.getCursor());
                var c = this.item(a),
                    d = b.item(a);
                this.callEvent("onStoreSave", [a, c, d]) && (dhx.extend(b.item(a), c, !0), b.update(a))
            }, this.item = function(a) {
                return this.getEvent(a)
            }, this.za = [b.data.attachEvent("onStoreUpdated", function() {
                e.call(this)
            }), b.data.attachEvent("onIdChange", function(a, b) {
                combo.changeOptionId(a, b)
            })], this.attachEvent("onEventChanged", function(a) {
                this.save(a)
            }), this.attachEvent("onEventAdded", function(a, c) {
                b.data.pull[a] || b.add(c)
            }), this.attachEvent("onEventDeleted", function(a) {
                b.data.pull[a] && b.remove(a)
            }), e()
        }, a.unsync = function(a) {
            dhx.BaseBind.O.call(this, a)
        }, a.i = function() {
            this.e || (this.e = {
                id: dhx.uid()
            })
        }
    }, Scheduler.$syncFactory(window.scheduler)), window.dhtmlXCombo && (dhtmlXCombo.prototype.bind = function() {
        dhx.BaseBind.bind.apply(this, arguments)
    }, dhtmlXCombo.unbind = function(a) {
        dhx.BaseBind.O.call(this, a)
    }, dhtmlXCombo.unsync = function(a) {
        dhx.BaseBind.O.call(this, a)
    }, dhtmlXCombo.prototype.dataFeed = function(a) {
        this.e ? this.e.dataFeed = a : this.X = a
    }, dhtmlXCombo.prototype.sync = function(a) {
        this.i && this.i(), a.i && a.i();
        var b = this,
            c = function() {
                b.clearAll(), b.addOption(this.serialize())
            };
        this.za = [a.data.attachEvent("onStoreUpdated", function() {
            c.call(this)
        }), a.data.attachEvent("onIdChange", function(a, c) {
            b.changeOptionId(a, c)
        })], c.call(a)
    }, dhtmlXCombo.prototype.i = function() {
        dhx.isUndefined(this.e) && (this.e = {
            id: dhx.uid(),
            dataFeed: this.X
        }, dhx.ui.views[this.e.id] = this, this.data = {
            silent: dhx.bind(function(a) {
                a.call(this)
            }, this)
        }, dhtmlxEventable(this.data), this.attachEvent("onChange", function() {
            this.callEvent("onSelectChange", [this.getSelectedValue()])
        }), this.attachEvent("onXLE", function() {
            this.callEvent("onBindRequest", [])
        }))
    }, dhtmlXCombo.prototype.item = function(a) {
        return this.getOption(a)
    }, dhtmlXCombo.prototype.getSelected = function() {
        return this.getSelectedValue()
    }, dhtmlXCombo.prototype.isVisible = function() {
        return !(!this.optionsArr.length && !this.e.dataFeed)
    }, dhtmlXCombo.prototype.refresh = function() {
        this.render(!0)
    }, dhtmlXCombo.prototype.filter = function() {
        alert("not implemented")
    }), window.dhtmlXGridObject && (dhtmlXGridObject.prototype.bind = function(a, b, c) {
        dhx.BaseBind.bind.apply(this, arguments)
    }, dhtmlXGridObject.prototype.unbind = function(a) {
        dhx.BaseBind.O.call(this, a)
    }, dhtmlXGridObject.prototype.unsync = function(a) {
        dhx.BaseBind.O.call(this, a)
    }, dhtmlXGridObject.prototype.dataFeed = function(a) {
        this.e ? this.e.dataFeed = a : this.X = a
    }, dhtmlXGridObject.prototype.sync = function(a, b) {
        this.i && this.i(), a.i && a.i();
        var c = this,
            d = "_parsing",
            e = "_parser",
            f = "_locator",
            g = "_process_store_row",
            h = "_get_store_data";
        this.save = function(b) {
            b || (b = this.getCursor()), dhx.extend(a.item(b), this.item(b), !0), a.update(b)
        };
        var i = function() {
            var a = c.getCursor ? c.getCursor() : null,
                b = 0;
            c.Ga ? (b = c.Ga, c.Ga = !1) : c.clearAll();
            var i = this.dataCount();
            if (i) {
                c[d] = !0;
                for (var j = b; j < i; j++) {
                    var k = this.order[j];
                    !k || b && c.rowsBuffer[j] || (c.rowsBuffer[j] = {
                        idd: k,
                        data: this.pull[k]
                    }, c.rowsBuffer[j][e] = c[g], c.rowsBuffer[j][f] = c[h], c.rowsAr[k] = this.pull[k])
                }
                c.rowsBuffer[i - 1] || (c.rowsBuffer[i - 1] = dhtmlx.undefined, c.xmlFileUrl = c.xmlFileUrl || this.url), c.pagingOn ? c.changePage() : c.ne && c.ie ? c.pe() : (c.render_dataset(), c.callEvent("onXLE", [])), c[d] = !1
            }
            a && c.setCursor && c.setCursor(c.rowsAr[a] ? a : null)
        };
        this.za = [a.data.attachEvent("onStoreUpdated", function(a, b, d) {
            "delete" == d ? (c.deleteRow(a), c.data.callEvent("onStoreUpdated", [a, b, d])) : "update" == d ? (c.callEvent("onSyncUpdate", [b, d]), c.update(a, b), c.data.callEvent("onStoreUpdated", [a, b, d])) : "add" == d ? (c.callEvent("onSyncUpdate", [b, d]), c.add(a, b, this.indexById(a)), c.data.callEvent("onStoreUpdated", [a, b, d])) : i.call(this)
        }), a.data.attachEvent("onStoreLoad", function(b, d) {
            c.xmlFileUrl = a.data.url, c.Ga = b.getInfo(d).r
        }), a.data.attachEvent("onIdChange", function(a, b) {
            c.changeRowId(a, b)
        })], c.attachEvent("onDynXLS", function(b, d) {
            for (var e = b; e < b + d; e++)
                if (!a.data.order[e]) return a.loadNext(d, b), !1;
            c.Ga = b, i.call(a.data)
        }), i.call(a.data), c.attachEvent("onEditCell", function(a, b, c, d, e) {
            return 2 == a && d != e && this.save(b), !0
        }), c.attachEvent("onClearAll", function() {
            var a = "_f_rowsBuffer";
            this[a] = null
        }), b && b.sort && c.attachEvent("onBeforeSorting", function(b, d, e) {
            if ("connector" == d) return !1;
            var f = this.getColumnId(b);
            return a.sort("#" + f + "#", "asc" == e ? "asc" : "desc", "int" == d ? d : "string"), c.setSortImgState(!0, b, e), !1
        }), b && b.filter && (c.attachEvent("onFilterStart", function(b, d) {
            var e = "_con_f_used";
            return !(c[e] && c[e].length || (a.data.silent(function() {
                a.filter();
                for (var e = 0; e < b.length; e++)
                    if ("" != d[e]) {
                        var f = c.getColumnId(b[e]);
                        a.filter("#" + f + "#", d[e], 0 != e)
                    }
            }), a.refresh(), 1))
        }), c.collectValues = function(b) {
            var c = this.getColumnId(b);
            return function(a) {
                var b = [],
                    c = {};
                return this.data.each(function(d) {
                    var e = d[a];
                    c[e] || (c[e] = !0, b.push(e))
                }), b.sort(), b
            }.call(a, c)
        }), b && b.select && c.attachEvent("onRowSelect", function(b) {
            a.setCursor(b)
        }), c.clearAndLoad = function(b) {
            a.clearAll(), a.load(b)
        }
    }, dhtmlXGridObject.prototype.i = function() {
        if (dhx.isUndefined(this.e)) {
            this.e = {
                id: dhx.uid(),
                dataFeed: this.X
            }, dhx.ui.views[this.e.id] = this, this.data = {
                silent: dhx.bind(function(a) {
                    a.call(this)
                }, this)
            }, dhtmlxEventable(this.data);
            for (var a = "_cCount", b = 0; b < this[a]; b++) this.columnIds[b] || (this.columnIds[b] = "cell" + b);
            this.attachEvent("onSelectStateChanged", function(a) {
                this.callEvent("onSelectChange", [a])
            }), this.attachEvent("onSelectionCleared", function() {
                this.callEvent("onSelectChange", [null])
            }), this.attachEvent("onEditCell", function(a, b) {
                return 2 === a && this.getCursor && b && b == this.getCursor() && this.Y(), !0
            }), this.attachEvent("onXLE", function() {
                this.callEvent("onBindRequest", [])
            })
        }
    }, dhtmlXGridObject.prototype.item = function(a) {
        if (null === a) return null;
        var b = this.getRowById(a);
        if (!b) return null;
        var c = "_attrs",
            d = dhx.copy(b[c]);
        d.id = a;
        for (var e = this.getColumnsNum(), f = 0; f < e; f++) d[this.columnIds[f]] = this.cells(a, f).getValue();
        return d
    }, dhtmlXGridObject.prototype.update = function(a, b) {
        for (var c = 0; c < this.columnIds.length; c++) {
            var d = this.columnIds[c];
            dhx.isUndefined(b[d]) || this.cells(a, c).setValue(b[d])
        }
        var e = "_attrs",
            f = this.getRowById(a)[e];
        for (d in b) f[d] = b[d];
        this.callEvent("onBindUpdate", [a])
    }, dhtmlXGridObject.prototype.add = function(a, b, c) {
        for (var d = [], e = 0; e < this.columnIds.length; e++) {
            var f = this.columnIds[e];
            d[e] = dhx.isUndefined(b[f]) ? "" : b[f]
        }
        this.addRow(a, d, c);
        var g = "_attrs";
        this.getRowById(a)[g] = dhx.copy(b)
    }, dhtmlXGridObject.prototype.getSelected = function() {
        return this.getSelectedRowId()
    }, dhtmlXGridObject.prototype.isVisible = function() {
        var a = "_f_rowsBuffer";
        return !!(this.rowsBuffer.length || this[a] || this.e.dataFeed)
    }, dhtmlXGridObject.prototype.refresh = function() {
        this.render_dataset()
    }, dhtmlXGridObject.prototype.filter = function(a, b) {
        if (this.e.dataFeed) {
            var c = {};
            if (!a && !b) return;
            if ("function" == typeof a) {
                if (!b) return;
                a(b, c)
            } else dhx.isUndefined(a) ? c = b : c[a] = b;
            this.clearAll();
            var d = this.e.dataFeed;
            if ("function" == typeof d) return d.call(this, b, c);
            var e, f = [];
            for (e in c) f.push("dhx_filter[" + e + "]=" + encodeURIComponent(c[e]));
            return this.load(d + (d.indexOf("?") < 0 ? "?" : "&") + f.join("&")), !1
        }
        return null === b ? this.filterBy(0, function() {
            return !1
        }) : void this.filterBy(0, function(c, d) {
            return a.call(this, d, b)
        })
    }), window.dhtmlXTreeObject && (dhtmlXTreeObject.prototype.bind = function() {
        dhx.BaseBind.bind.apply(this, arguments)
    }, dhtmlXTreeObject.prototype.unbind = function(a) {
        dhx.BaseBind.O.call(this, a)
    }, dhtmlXTreeObject.prototype.dataFeed = function(a) {
        this.e ? this.e.dataFeed = a : this.X = a
    }, dhtmlXTreeObject.prototype.i = function() {
        dhx.isUndefined(this.e) && (this.e = {
            id: dhx.uid(),
            dataFeed: this.X
        }, dhx.ui.views[this.e.id] = this, this.data = {
            silent: dhx.bind(function(a) {
                a.call(this)
            }, this)
        }, dhtmlxEventable(this.data), this.attachEvent("onSelect", function(a) {
            this.callEvent("onSelectChange", [a])
        }), this.attachEvent("onEdit", function(a, b) {
            return 2 === a && b && b == this.getCursor() && this.Y(), !0
        }))
    }, dhtmlXTreeObject.prototype.item = function(a) {
        return null === a ? null : {
            id: a,
            text: this.getItemText(a)
        }
    }, dhtmlXTreeObject.prototype.getSelected = function() {
        return this.getSelectedItemId()
    }, dhtmlXTreeObject.prototype.isVisible = function() {
        return !0
    }, dhtmlXTreeObject.prototype.refresh = function() {}, dhtmlXTreeObject.prototype.filter = function(a, b) {
        if (this.e.dataFeed) {
            var c = {};
            if (a || b) {
                if ("function" == typeof a) {
                    if (!b) return;
                    a(b, c)
                } else dhx.isUndefined(a) ? c = b : c[a] = b;
                this.deleteChildItems(0);
                var d = this.e.dataFeed;
                if ("function" == typeof d) return d.call(this, [data.id || data, data]);
                var e, f = [];
                for (e in c) f.push("dhx_filter[" + e + "]=" + encodeURIComponent(c[e]));
                return this.loadXML(d + (d.indexOf("?") < 0 ? "?" : "&") + f.join("&")), !1
            }
        }
    }, dhtmlXTreeObject.prototype.update = function(a, b) {
        dhx.isUndefined(b.text) || this.setItemText(a, b.text)
    }), dhtmlx.skin = "dhx_terrace";
